import{$ as Me,$a as nr,A as fc,Aa as O,Ab as Pc,B as Jn,Ba as Pe,Bb as Dc,C as Xn,Ca as Tc,Cb as yp,D as Yr,Da as Ls,E as pc,Ea as tr,F as Zn,Fa as Yf,G as Lf,Ga as Vs,H as xs,Ha as X,I as jt,Ia as Jf,Ib as vp,J as gc,Ja as Xf,Jb as ri,K as Vf,Ka as Zf,Kb as qs,L as Ff,La as ep,M as Uf,Ma as tp,N as Ye,Na as np,O as jf,Oa as Ge,P as ie,Pa as rp,Pb as _p,Q as oe,Qa as se,Qb as zs,R as V,Ra as A,S as St,Sa as R,Sb as Ip,T as Bf,Ta as Y,U as le,Ua as At,V as mc,Va as it,W as G,Wa as ni,X as I,Xa as ip,Xb as wp,Y as Oe,Ya as H,Z as Jr,Za as fe,_ as Os,_a as sp,a as E,aa as bt,ab as Le,b as ye,ba as yc,bb as st,c as Vt,ca as Xr,cb as Fs,d,da as $f,db as Us,e as Pf,ea as qf,eb as op,f as Df,fa as Ms,fb as js,g as Tt,ga as Bt,gb as ap,h as cc,ha as vc,hb as cp,i as uc,ia as dn,ib as Sc,j as Ft,ja as er,jb as bc,k as Se,ka as _c,kb as Ac,l as kf,la as zf,lb as up,m as Nf,ma as $t,mb as Bs,n as Ut,na as Ic,nb as lp,o as lc,oa as Gf,ob as Cc,p as hc,pa as Zr,pb as hp,q as dc,qa as Hf,qb as dp,r as Qe,ra as wc,rb as De,s as P,sa as Wf,sb as Rc,t as Qr,ta as fn,tb as rr,u as xf,ua as ei,ub as fp,v as Of,va as Ec,vb as $s,w as q,wa as pn,wb as qt,x as Ns,xa as Kf,xb as pp,y as ze,ya as Qf,yb as gp,z as Mf,za as ti,zb as mp}from"./chunk-BACNUIH7.js";var xc=class extends dp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Oc=class t extends xc{static makeCurrent(){hp(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=dI();return n==null?null:fI(n)}resetBaseElement(){ii=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fp(document.cookie,e)}},ii=null;function dI(){return ii=ii||document.querySelector("base"),ii?ii.getAttribute("href"):null}function fI(t){return new URL(t,document.baseURI).pathname}var pI=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Mc=new le(""),Sp=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new oe(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(G(Mc),G(X))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Gs=class{constructor(e){this._doc=e}},kc="ng-app-id",bp=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Pc(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${kc}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(kc),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(kc,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(G(De),G(wc),G(Ec,8),G(fn))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Nc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Vc=/%COMP%/g,Ap="%COMP%",gI=`_nghost-${Ap}`,mI=`_ngcontent-${Ap}`,yI=!0,vI=new le("",{providedIn:"root",factory:()=>yI});function _I(t){return mI.replace(Vc,t)}function II(t){return gI.replace(Vc,t)}function Cp(t,e){return e.map(n=>n.replace(Vc,t))}var ir=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Pc(c),this.defaultRenderer=new si(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jr.ShadowDom&&(i=ye(E({},i),{encapsulation:Jr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Hs?s.applyToHost(r):s instanceof oi&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Jr.Emulated:o=new Hs(u,l,i,this.appId,h,a,c,f);break;case Jr.ShadowDom:return new Lc(u,l,r,i,a,c,this.nonce,f);default:o=new oi(u,l,i,h,a,c,f);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(G(Sp),G(bp),G(wc),G(vI),G(De),G(fn),G(X),G(Ec))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),si=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Nc[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ep(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Ep(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Nc[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Nc[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(ti.DashCase|ti.Important)?e.style.setProperty(n,r,i&ti.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&ti.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Ep(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Lc=class extends si{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=Cp(i.id,i.styles);for(let l of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oi=class extends si{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?Cp(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hs=class extends oi{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=_I(u),this.hostAttr=II(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},wI=(()=>{let e=class e extends Gs{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(G(De))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Tp=["alt","control","meta","shift"],EI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TI={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},SI=(()=>{let e=class e extends Gs{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cc().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Tp.forEach(l=>{let h=i.indexOf(l);h>-1&&(i.splice(h,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=EI[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Tp.forEach(a=>{if(a!==s){let c=TI[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(G(De))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function Rp(t,e){return up(E({rootComponent:t},bI(e)))}function bI(t){return{appProviders:[...DI,...t?.providers??[]],platformProviders:PI}}function AI(){Oc.makeCurrent()}function CI(){return new Ic}function RI(){return Hf(document),document}var PI=[{provide:fn,useValue:mp},{provide:Wf,useValue:AI,multi:!0},{provide:De,useFactory:RI,deps:[]}];var DI=[{provide:qf,useValue:"root"},{provide:Ic,useFactory:CI,deps:[]},{provide:Mc,useClass:wI,multi:!0,deps:[De,X,fn]},{provide:Mc,useClass:SI,multi:!0,deps:[De]},ir,bp,Sp,{provide:tr,useExisting:ir},{provide:yp,useClass:pI,deps:[]},[]];var Pp=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(G(De))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var M="primary",wi=Symbol("RouteTitle"),$c=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ur(t){return new $c(t)}function xI(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function OI(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ot(t[n],e[n]))return!1;return!0}function ot(t,e){let n=t?qc(t):void 0,r=e?qc(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Lp(t[i],e[i]))return!1;return!0}function qc(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Lp(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function Vp(t){return t.length>0?t[t.length-1]:null}function Wt(t){return xf(t)?t:ap(t)?Qe(Promise.resolve(t)):P(t)}var MI={exact:Up,subset:jp},Fp={exact:LI,subset:VI,ignored:()=>!0};function Dp(t,e,n){return MI[n.paths](t.root,e.root,n.matrixParams)&&Fp[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function LI(t,e){return ot(t,e)}function Up(t,e,n){if(!mn(t.segments,e.segments)||!Qs(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Up(t.children[r],e.children[r],n))return!1;return!0}function VI(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Lp(t[n],e[n]))}function jp(t,e,n){return Bp(t,e,e.segments,n)}function Bp(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!mn(i,n)||e.hasChildren()||!Qs(i,n,r))}else if(t.segments.length===n.length){if(!mn(t.segments,n)||!Qs(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!jp(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!mn(t.segments,i)||!Qs(t.segments,i,r)||!t.children[M]?!1:Bp(t.children[M],e,s,r)}}function Qs(t,e,n){return e.every((r,i)=>Fp[n](t[i].parameters,r.parameters))}var zt=class{constructor(e=new $([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){return jI.serialize(this)}},$=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ys(this)}},gn=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ur(this.parameters),this._parameterMap}toString(){return qp(this)}};function FI(t,e){return mn(t,e)&&t.every((n,r)=>ot(n.parameters,e[r].parameters))}function mn(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function UI(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===M&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==M&&(n=n.concat(e(i,r)))}),n}var gu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>new Xs,providedIn:"root"});let t=e;return t})(),Xs=class{parse(e){let n=new Gc(e);return new zt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ai(e.root,!0)}`,r=qI(e.queryParams),i=typeof e.fragment=="string"?`#${BI(e.fragment)}`:"";return`${n}${r}${i}`}},jI=new Xs;function Ys(t){return t.segments.map(e=>qp(e)).join("/")}function ai(t,e){if(!t.hasChildren())return Ys(t);if(e){let n=t.children[M]?ai(t.children[M],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==M&&r.push(`${i}:${ai(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=UI(t,(r,i)=>i===M?[ai(t.children[M],!1)]:[`${i}:${ai(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[M]!=null?`${Ys(t)}/${n[0]}`:`${Ys(t)}/(${n.join("//")})`}}function $p(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ws(t){return $p(t).replace(/%3B/gi,";")}function BI(t){return encodeURI(t)}function zc(t){return $p(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Js(t){return decodeURIComponent(t)}function kp(t){return Js(t.replace(/\+/g,"%20"))}function qp(t){return`${zc(t.path)}${$I(t.parameters)}`}function $I(t){return Object.entries(t).map(([e,n])=>`;${zc(e)}=${zc(n)}`).join("")}function qI(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Ws(n)}=${Ws(i)}`).join("&"):`${Ws(n)}=${Ws(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var zI=/^[^\/()?;#]+/;function Fc(t){let e=t.match(zI);return e?e[0]:""}var GI=/^[^\/()?;=#]+/;function HI(t){let e=t.match(GI);return e?e[0]:""}var WI=/^[^=?&#]+/;function KI(t){let e=t.match(WI);return e?e[0]:""}var QI=/^[^&#]+/;function YI(t){let e=t.match(QI);return e?e[0]:""}var Gc=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new $([],{}):new $([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[M]=new $(e,n)),r}parseSegment(){let e=Fc(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new gn(Js(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=HI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Fc(this.remaining);i&&(r=i,this.capture(r))}e[Js(n)]=Js(r)}parseQueryParam(e){let n=KI(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=YI(this.remaining);o&&(r=o,this.capture(r))}let i=kp(n),s=kp(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Fc(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=M);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[M]:new $([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function zp(t){return t.segments.length>0?new $([],{[M]:t}):t}function Gp(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=Gp(i);if(r===M&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new $(t.segments,e);return JI(n)}function JI(t){if(t.numberOfChildren===1&&t.children[M]){let e=t.children[M];return new $(t.segments.concat(e.segments),e.children)}return t}function lr(t){return t instanceof zt}function XI(t,e,n=null,r=null){let i=Hp(t);return Wp(i,e,n,r)}function Hp(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new $(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=zp(r);return e??i}function Wp(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Uc(i,i,i,n,r);let s=ZI(e);if(s.toRoot())return Uc(i,i,new $([],{}),n,r);let o=ew(s,i,t),a=o.processChildren?li(o.segmentGroup,o.index,s.commands):Qp(o.segmentGroup,o.index,s.commands);return Uc(i,o.segmentGroup,a,n,r)}function Zs(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function fi(t){return typeof t=="object"&&t!=null&&t.outlets}function Uc(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=Kp(t,e,n);let a=zp(Gp(o));return new zt(a,s,i)}function Kp(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=Kp(s,e,n)}),new $(t.segments,r)}var eo=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zs(r[0]))throw new oe(4003,!1);let i=r.find(fi);if(i&&i!==Vp(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ZI(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new eo(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new eo(n,e,r)}var ar=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function ew(t,e,n){if(t.isAbsolute)return new ar(e,!0,0);if(!n)return new ar(e,!1,NaN);if(n.parent===null)return new ar(n,!0,0);let r=Zs(t.commands[0])?0:1,i=n.segments.length-1+r;return tw(n,i,t.numberOfDoubleDots)}function tw(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new ar(r,!1,i-s)}function nw(t){return fi(t[0])?t[0].outlets:{[M]:t}}function Qp(t,e,n){if(t??=new $([],{}),t.segments.length===0&&t.hasChildren())return li(t,e,n);let r=rw(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new $(t.segments.slice(0,r.pathIndex),{});return s.children[M]=new $(t.segments.slice(r.pathIndex),t.children),li(s,0,i)}else return r.match&&i.length===0?new $(t.segments,{}):r.match&&!t.hasChildren()?Hc(t,e,n):r.match?li(t,0,i):Hc(t,e,n)}function li(t,e,n){if(n.length===0)return new $(t.segments,{});{let r=nw(n),i={};if(Object.keys(r).some(s=>s!==M)&&t.children[M]&&t.numberOfChildren===1&&t.children[M].segments.length===0){let s=li(t.children[M],e,n);return new $(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Qp(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new $(t.segments,i)}}function rw(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(fi(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!xp(c,u,o))return s;r+=2}else{if(!xp(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Hc(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(fi(s)){let c=iw(s.outlets);return new $(r,c)}if(i===0&&Zs(n[0])){let c=t.segments[e];r.push(new gn(c.path,Np(n[0]))),i++;continue}let o=fi(s)?s.outlets[M]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Zs(a)?(r.push(new gn(o,Np(a))),i+=2):(r.push(new gn(o,{})),i++)}return new $(r,{})}function iw(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Hc(new $([],{}),0,r))}),e}function Np(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function xp(t,e,n){return t==n.path&&ot(e,n.parameters)}var hi="imperative",_e=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(_e||{}),He=class{constructor(e,n){this.id=e,this.url=n}},pi=class extends He{constructor(e,n,r="imperative",i=null){super(e,n),this.type=_e.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends He{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=_e.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Fe||{}),Wc=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Wc||{}),Ht=class extends He{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=_e.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yn=class extends He{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=_e.NavigationSkipped}},gi=class extends He{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=_e.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},to=class extends He{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=_e.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kc=class extends He{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=_e.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qc=class extends He{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=_e.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Yc=class extends He{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=_e.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jc=class extends He{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=_e.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xc=class{constructor(e){this.route=e,this.type=_e.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zc=class{constructor(e){this.route=e,this.type=_e.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},eu=class{constructor(e){this.snapshot=e,this.type=_e.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{constructor(e){this.snapshot=e,this.type=_e.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nu=class{constructor(e){this.snapshot=e,this.type=_e.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ru=class{constructor(e){this.snapshot=e,this.type=_e.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var mi=class{},yi=class{constructor(e){this.url=e}};var iu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ao,this.attachRef=null}},ao=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new iu,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),no=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=su(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=su(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ou(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ou(e,this._root).map(n=>n.value)}};function su(t,e){if(t===e.value)return e;for(let n of e.children){let r=su(t,n);if(r)return r}return null}function ou(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ou(t,n);if(r.length)return r.unshift(e),r}return[]}var Ve=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function or(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ro=class extends no{constructor(e,n){super(e),this.snapshot=n,yu(this,e)}toString(){return this.snapshot.toString()}};function Yp(t){let e=sw(t),n=new Se([new gn("",{})]),r=new Se({}),i=new Se({}),s=new Se({}),o=new Se(""),a=new Je(n,r,s,o,i,M,t,e.root);return a.snapshot=e.root,new ro(new Ve(a,[]),e)}function sw(t){let e={},n={},r={},i="",s=new vi([],e,r,i,n,M,t,null,{});return new io("",new Ve(s,[]))}var Je=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(q(u=>u[wi]))??P(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>ur(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>ur(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mu(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),i?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},i&&Xp(i)&&(r.resolve[wi]=i.title),r}var vi=class{get title(){return this.data?.[wi]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ur(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ur(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},io=class extends no{constructor(e,n){super(n),this.url=e,yu(this,n)}toString(){return Jp(this._root)}};function yu(t,e){e.value._routerState=t,e.children.forEach(n=>yu(t,n))}function Jp(t){let e=t.children.length>0?` { ${t.children.map(Jp).join(", ")} } `:"";return`${t.value}${e}`}function jc(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ot(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ot(e.params,n.params)||t.paramsSubject.next(n.params),OI(e.url,n.url)||t.urlSubject.next(n.url),ot(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function au(t,e){let n=ot(t.params,e.params)&&FI(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||au(t.parent,e.parent))}function Xp(t){return typeof t.title=="string"||t.title===null}var vu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=M,this.activateEvents=new Zr,this.deactivateEvents=new Zr,this.attachEvents=new Zr,this.detachEvents=new Zr,this.parentContexts=I(ao),this.location=I(Xf),this.changeDetector=I(Ac),this.environmentInjector=I(Ms),this.inputBinder=I(co,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new cu(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=yc({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[vc]});let t=e;return t})(),cu=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===Je?this.route:e===ao?this.childContexts:this.parent.get(e,n)}},co=new le(""),Op=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ns([i.queryParams,i.params,i.data]).pipe(Ye(([o,a,c],u)=>(c=E(E(E({},o),a),c),u===0?P(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=lp(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function ow(t,e,n){let r=_i(t,e._root,n?n._root:void 0);return new ro(r,e)}function _i(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=aw(t,e,n);return new Ve(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>_i(t,a)),o}}let r=cw(e.value),i=e.children.map(s=>_i(t,s));return new Ve(r,i)}}function aw(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return _i(t,r,i);return _i(t,r)})}function cw(t){return new Je(new Se(t.url),new Se(t.params),new Se(t.queryParams),new Se(t.fragment),new Se(t.data),t.outlet,t.component,t)}var Zp="ngNavigationCancelingError";function eg(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=lr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tg(!1,Fe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tg(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Zp]=!0,n.cancellationCode=e,n}function uw(t){return ng(t)&&lr(t.url)}function ng(t){return!!t&&t[Zp]}var lw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Me({type:e,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(i,s){i&1&&Y(0,"router-outlet")},dependencies:[vu],encapsulation:2});let t=e;return t})();function hw(t,e){return t.providers&&!t._injector&&(t._injector=tp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function _u(t){let e=t.children&&t.children.map(_u),n=e?ye(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==M&&(n.component=lw),n}function at(t){return t.outlet||M}function dw(t,e){let n=t.filter(r=>at(r)===e);return n.push(...t.filter(r=>at(r)!==e)),n}function Ei(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var fw=(t,e,n,r)=>q(i=>(new uu(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),uu=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),jc(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=or(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=or(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=or(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=or(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ru(s.value.snapshot))}),e.children.length&&this.forwardEvent(new tu(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(jc(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),jc(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ei(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},so=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},cr=class{constructor(e,n){this.component=e,this.route=n}};function pw(t,e,n){let r=t._root,i=e?e._root:null;return ci(r,i,n,[r.value])}function gw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function dr(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Bf(t)?t:e.get(t):r}function ci(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=or(e);return t.children.forEach(o=>{mw(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>di(a,n.getContext(o),i)),i}function mw(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=yw(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new so(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ci(t,e,a?a.children:null,r,i):ci(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new cr(a.outlet.component,o))}else o&&di(e,a,i),i.canActivateChecks.push(new so(r)),s.component?ci(t,null,a?a.children:null,r,i):ci(t,null,n,r,i);return i}function yw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!mn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mn(t.url,e.url)||!ot(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!au(t,e)||!ot(t.queryParams,e.queryParams);case"paramsChange":default:return!au(t,e)}}function di(t,e,n){let r=or(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?di(o,e.children.getContext(s),n):di(o,null,n):di(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new cr(e.outlet.component,i)):n.canDeactivateChecks.push(new cr(null,i)):n.canDeactivateChecks.push(new cr(null,i))}function Ti(t){return typeof t=="function"}function vw(t){return typeof t=="boolean"}function _w(t){return t&&Ti(t.canLoad)}function Iw(t){return t&&Ti(t.canActivate)}function ww(t){return t&&Ti(t.canActivateChild)}function Ew(t){return t&&Ti(t.canDeactivate)}function Tw(t){return t&&Ti(t.canMatch)}function rg(t){return t instanceof Of||t?.name==="EmptyError"}var Ks=Symbol("INITIAL_VALUE");function hr(){return Ye(t=>Ns(t.map(e=>e.pipe(Zn(1),Uf(Ks)))).pipe(q(e=>{for(let n of e)if(n!==!0){if(n===Ks)return Ks;if(n===!1||n instanceof zt)return n}return!0}),Jn(e=>e!==Ks),Zn(1)))}function Sw(t,e){return ze(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?P(ye(E({},n),{guardsResult:!0})):bw(o,r,i,t).pipe(ze(a=>a&&vw(a)?Aw(r,s,t,e):P(a)),q(a=>ye(E({},n),{guardsResult:a})))})}function bw(t,e,n,r){return Qe(t).pipe(ze(i=>kw(i.component,i.route,n,e,r)),jt(i=>i!==!0,!0))}function Aw(t,e,n,r){return Qe(e).pipe(Yr(i=>Mf(Rw(i.route.parent,r),Cw(i.route,r),Dw(t,i.path,n),Pw(t,i.route,n))),jt(i=>i!==!0,!0))}function Cw(t,e){return t!==null&&e&&e(new nu(t)),P(!0)}function Rw(t,e){return t!==null&&e&&e(new eu(t)),P(!0)}function Pw(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return P(!0);let i=r.map(s=>fc(()=>{let o=Ei(e)??n,a=dr(s,o),c=Iw(a)?a.canActivate(e,t):Bt(o,()=>a(e,t));return Wt(c).pipe(jt())}));return P(i).pipe(hr())}function Dw(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>gw(o)).filter(o=>o!==null).map(o=>fc(()=>{let a=o.guards.map(c=>{let u=Ei(o.node)??n,l=dr(c,u),h=ww(l)?l.canActivateChild(r,t):Bt(u,()=>l(r,t));return Wt(h).pipe(jt())});return P(a).pipe(hr())}));return P(s).pipe(hr())}function kw(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return P(!0);let o=s.map(a=>{let c=Ei(e)??i,u=dr(a,c),l=Ew(u)?u.canDeactivate(t,e,n,r):Bt(c,()=>u(t,e,n,r));return Wt(l).pipe(jt())});return P(o).pipe(hr())}function Nw(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return P(!0);let s=i.map(o=>{let a=dr(o,t),c=_w(a)?a.canLoad(e,n):Bt(t,()=>a(e,n));return Wt(c)});return P(s).pipe(hr(),ig(r))}function ig(t){return Df(ie(e=>{if(lr(e))throw eg(t,e)}),q(e=>e===!0))}function xw(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return P(!0);let s=i.map(o=>{let a=dr(o,t),c=Tw(a)?a.canMatch(e,n):Bt(t,()=>a(e,n));return Wt(c)});return P(s).pipe(hr(),ig(r))}var Ii=class{constructor(e){this.segmentGroup=e||null}},oo=class extends Error{constructor(e){super(),this.urlTree=e}};function sr(t){return Qr(new Ii(t))}function Ow(t){return Qr(new oe(4e3,!1))}function Mw(t){return Qr(tg(!1,Fe.GuardRejected))}var lu=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return P(r);if(i.numberOfChildren>1||!i.children[M])return Ow(e.redirectTo);i=i.children[M]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new oo(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new zt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new $(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},hu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Lw(t,e,n,r,i){let s=Iu(t,e,n);return s.matched?(r=hw(e,r),xw(r,e,n,i).pipe(q(o=>o===!0?s:E({},hu)))):P(s)}function Iu(t,e,n){if(e.path==="**")return Vw(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},hu):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||xI)(n,t,e);if(!i)return E({},hu);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?E(E({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Vw(t){return{matched:!0,parameters:t.length>0?Vp(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function Mp(t,e,n,r){return n.length>0&&jw(t,n,r)?{segmentGroup:new $(e,Uw(r,new $(n,t.children))),slicedSegments:[]}:n.length===0&&Bw(t,n,r)?{segmentGroup:new $(t.segments,Fw(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new $(t.segments,t.children),slicedSegments:n}}function Fw(t,e,n,r){let i={};for(let s of n)if(uo(t,e,s)&&!r[at(s)]){let o=new $([],{});i[at(s)]=o}return E(E({},r),i)}function Uw(t,e){let n={};n[M]=e;for(let r of t)if(r.path===""&&at(r)!==M){let i=new $([],{});n[at(r)]=i}return n}function jw(t,e,n){return n.some(r=>uo(t,e,r)&&at(r)!==M)}function Bw(t,e,n){return n.some(r=>uo(t,e,r))}function uo(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function $w(t,e,n,r){return at(t)!==r&&(r===M||!uo(e,n,t))?!1:Iu(e,t,n).matched}function qw(t,e,n){return e.length===0&&!t.children[n]}var du=class{};function zw(t,e,n,r,i,s,o="emptyOnly"){return new fu(t,e,n,r,i,o,s).recognize()}var Gw=31,fu=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new lu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=Mp(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(n=>{let r=new vi([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,{},M,this.rootComponentType,null,{}),i=new Ve(r,n),s=new io("",i),o=XI(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,M).pipe(Xn(r=>{if(r instanceof oo)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ii?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=mu(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(q(s=>s instanceof Ve?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Qe(i).pipe(Yr(s=>{let o=r.children[s],a=dw(n,s);return this.processSegmentGroup(e,a,o,s)}),Ff((s,o)=>(s.push(...o),s)),pc(null),Vf(),ze(s=>{if(s===null)return sr(r);let o=sg(s);return Hw(o),P(o)}))}processSegment(e,n,r,i,s,o){return Qe(n).pipe(Yr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Xn(c=>{if(c instanceof Ii)return P(null);throw c}))),jt(a=>!!a),Xn(a=>{if(rg(a))return qw(r,i,s)?P(new du):sr(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return $w(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):sr(i):sr(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Iu(n,i,s);if(!a)return sr(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Gw&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,h).pipe(ze(f=>this.processSegment(e,r,n,f.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=Lw(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ye(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:h,parameters:f}=a,p=new vi(l,f,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,Kw(r),at(r),r.component??r._loadedComponent??null,r,Qw(r)),{segmentGroup:T,slicedSegments:S}=Mp(n,l,h,c);if(S.length===0&&T.hasChildren())return this.processChildren(u,c,T).pipe(q(L=>L===null?null:new Ve(p,L)));if(c.length===0&&S.length===0)return P(new Ve(p,[]));let w=at(r)===s;return this.processSegment(u,c,T,S,w?M:s,!0).pipe(q(L=>new Ve(p,L instanceof Ve?[L]:[])))}))):sr(n)))}getChildConfig(e,n,r){return n.children?P({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?P({routes:n._loadedRoutes,injector:n._loadedInjector}):Nw(e,n,r,this.urlSerializer).pipe(ze(i=>i?this.configLoader.loadChildren(e,n).pipe(ie(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Mw(n))):P({routes:[],injector:e})}};function Hw(t){t.sort((e,n)=>e.value.outlet===M?-1:n.value.outlet===M?1:e.value.outlet.localeCompare(n.value.outlet))}function Ww(t){let e=t.value.routeConfig;return e&&e.path===""}function sg(t){let e=[],n=new Set;for(let r of t){if(!Ww(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=sg(r.children);e.push(new Ve(r.value,i))}return e.filter(r=>!n.has(r))}function Kw(t){return t.data||{}}function Qw(t){return t.resolve||{}}function Yw(t,e,n,r,i,s){return ze(o=>zw(t,e,n,r,o.extractedUrl,i,s).pipe(q(({state:a,tree:c})=>ye(E({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Jw(t,e){return ze(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return P(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of og(c))o.add(u);let a=0;return Qe(o).pipe(Yr(c=>s.has(c)?Xw(c,r,t,e):(c.data=mu(c,c.parent,t).resolve,P(void 0))),ie(()=>a++),gc(1),ze(c=>a===o.size?P(n):Ut))})}function og(t){let e=t.children.map(n=>og(n)).flat();return[t,...e]}function Xw(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!Xp(i)&&(s[wi]=i.title),Zw(s,t,e,r).pipe(q(o=>(t._resolvedData=o,t.data=mu(t,t.parent,n).resolve,null)))}function Zw(t,e,n,r){let i=qc(t);if(i.length===0)return P({});let s={};return Qe(i).pipe(ze(o=>eE(t[o],e,n,r).pipe(jt(),ie(a=>{s[o]=a}))),gc(1),Lf(s),Xn(o=>rg(o)?Ut:Qr(o)))}function eE(t,e,n,r){let i=Ei(e)??r,s=dr(t,i),o=s.resolve?s.resolve(e,n):Bt(i,()=>s(e,n));return Wt(o)}function Bc(t){return Ye(e=>{let n=t(e);return n?Qe(n).pipe(q(()=>e)):P(e)})}var ag=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===M);return i}getResolvedTitleForRoute(r){return r.data[wi]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>I(tE),providedIn:"root"});let t=e;return t})(),tE=(()=>{let e=class e extends ag{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(G(Pp))},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wu=new le("",{providedIn:"root",factory:()=>({})}),Eu=new le(""),nE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(bc)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return P(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Wt(r.loadComponent()).pipe(q(cg),ie(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),xs(()=>{this.componentLoaders.delete(r)})),s=new uc(i,()=>new Ft).pipe(cc());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return P({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=rE(i,this.compiler,r,this.onLoadEndListener).pipe(xs(()=>{this.childrenLoaders.delete(i)})),a=new uc(o,()=>new Ft).pipe(cc());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rE(t,e,n,r){return Wt(t.loadChildren()).pipe(q(cg),ze(i=>i instanceof ep||Array.isArray(i)?P(i):Qe(e.compileModuleAsync(i))),q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Eu,[],{optional:!0,self:!0}).flat()),{routes:o.map(_u),injector:s}}))}function iE(t){return t&&typeof t=="object"&&"default"in t}function cg(t){return iE(t)?t.default:t}var Tu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>I(sE),providedIn:"root"});let t=e;return t})(),sE=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ug=new le(""),lg=new le("");function oE(t,e,n){let r=t.get(lg),i=t.get(De);return t.get(X).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),aE(t))),{onViewTransitionCreated:c}=r;return c&&Bt(t,()=>c({transition:a,from:e,to:n})),o})}function aE(t){return new Promise(e=>{Jf(e,{injector:t})})}var cE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ft,this.transitionAbortSubject=new Ft,this.configLoader=I(nE),this.environmentInjector=I(Ms),this.urlSerializer=I(gu),this.rootContexts=I(ao),this.location=I(rr),this.inputBindingEnabled=I(co,{optional:!0})!==null,this.titleStrategy=I(ag),this.options=I(wu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(Tu),this.createViewTransition=I(ug,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>P(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Xc(s)),i=s=>this.events.next(new Zc(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ye(E(E({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Se({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:hi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Jn(o=>o.id!==0),q(o=>ye(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{let a=!1,c=!1;return P(o).pipe(Ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),Ut;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ye(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&h!=="reload"){let f="";return this.events.next(new yn(u.id,this.urlSerializer.serialize(u.rawUrl),f,Wc.IgnoredSameUrlNavigation)),u.resolve(null),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return P(u).pipe(Ye(f=>{let p=this.transitions?.getValue();return this.events.next(new pi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?Ut:Promise.resolve(f)}),Yw(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ie(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ye(E({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new to(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:f,extractedUrl:p,source:T,restoredState:S,extras:w}=u,L=new pi(f,this.urlSerializer.serialize(p),T,S);this.events.next(L);let W=Yp(this.rootComponentType).snapshot;return this.currentTransition=o=ye(E({},u),{targetSnapshot:W,urlAfterRedirects:p,extras:ye(E({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,P(o)}else{let f="";return this.events.next(new yn(u.id,this.urlSerializer.serialize(u.extractedUrl),f,Wc.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ut}}),ie(u=>{let l=new Kc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),q(u=>(this.currentTransition=o=ye(E({},u),{guards:pw(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),Sw(this.environmentInjector,u=>this.events.next(u)),ie(u=>{if(o.guardsResult=u.guardsResult,lr(u.guardsResult))throw eg(this.urlSerializer,u.guardsResult);let l=new Qc(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Jn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Fe.GuardRejected),!1)),Bc(u=>{if(u.guards.canActivateChecks.length)return P(u).pipe(ie(l=>{let h=new Yc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ye(l=>{let h=!1;return P(l).pipe(Jw(this.paramsInheritanceStrategy,this.environmentInjector),ie({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",Fe.NoDataFromResolver)}}))}),ie(l=>{let h=new Jc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Bc(u=>{let l=h=>{let f=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(h.routeConfig).pipe(ie(p=>{h.component=p}),q(()=>{})));for(let p of h.children)f.push(...l(p));return f};return Ns(l(u.targetSnapshot.root)).pipe(pc(null),Zn(1))}),Bc(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Qe(h).pipe(q(()=>o)):P(o)}),q(u=>{let l=ow(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ye(E({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ie(()=>{this.events.next(new mi)}),fw(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Zn(1),ie({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gt(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),jf(this.transitionAbortSubject.pipe(ie(u=>{throw u}))),xs(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Xn(u=>{if(c=!0,ng(u))this.events.next(new Ht(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),uw(u)?this.events.next(new yi(u.url)):o.resolve(!1);else{this.events.next(new gi(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ut}))}))}cancelNavigationTransition(r,i,s){let o=new Ht(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uE(t){return t!==hi}var lE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>I(hE),providedIn:"root"});let t=e;return t})(),pu=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},hE=(()=>{let e=class e extends pu{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=_c(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hg=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:()=>I(dE),providedIn:"root"});let t=e;return t})(),dE=(()=>{let e=class e extends hg{constructor(){super(...arguments),this.location=I(rr),this.urlSerializer=I(gu),this.options=I(wu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(Tu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Yp(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof pi)this.stateMemento=this.createStateMemento();else if(r instanceof yn)this.rawUrlTree=i.initialUrl;else if(r instanceof to){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof mi?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Ht&&(r.code===Fe.GuardRejected||r.code===Fe.NoDataFromResolver)?this.restoreHistory(i):r instanceof gi?this.restoreHistory(i,!0):r instanceof Gt&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=E(E({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=E(E({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=_c(e)))(s||e)}})(),e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ui=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(ui||{});function fE(t,e){t.events.pipe(Jn(n=>n instanceof Gt||n instanceof Ht||n instanceof gi||n instanceof yn),q(n=>n instanceof Gt||n instanceof yn?ui.COMPLETE:(n instanceof Ht?n.code===Fe.Redirect||n.code===Fe.SupersededByNewNavigation:!1)?ui.REDIRECTING:ui.FAILED),Jn(n=>n!==ui.REDIRECTING),Zn(1)).subscribe(()=>{e()})}function pE(t){throw t}var gE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},vn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=I(js),this.stateManager=I(hg),this.options=I(wu,{optional:!0})||{},this.pendingTasks=I(np),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(cE),this.urlSerializer=I(gu),this.location=I(rr),this.urlHandlingStrategy=I(Tu),this._events=new Ft,this.errorHandler=this.options.errorHandler||pE,this.navigated=!1,this.routeReuseStrategy=I(lE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(Eu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(co,{optional:!0}),this.eventsSubscription=new Pf,this.isNgZoneEnabled=I(X)instanceof X&&X.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ht&&i.code!==Fe.Redirect&&i.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Gt)this.navigated=!0;else if(i instanceof yi){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||uE(s.source)};this.scheduleNavigation(a,hi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}vE(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),hi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=E({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(_u),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let f;try{let p=s?s.snapshot:this.routerState.snapshot.root;f=Hp(p)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),f=this.currentUrlTree.root}return Wp(f,r,h,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=lr(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,hi,null,i)}navigate(r,i={skipLocationChange:!1}){return yE(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=E({},gE):i===!1?s=E({},mE):s=i,lr(r))return Dp(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Dp(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((f,p)=>{c=f,u=p});let h=this.pendingTasks.add();return fE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yE(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new oe(4008,!1)}function vE(t){return!(t instanceof mi)&&!(t instanceof yi)}var Kt=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Ft,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof Gt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Kf(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(Pe(vn),Pe(Je),zf("tabindex"),Pe(Yf),Pe(Gf),Pe(Rc))},e.\u0275dir=yc({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&At("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&rp("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Os.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Bs],skipLocationChange:[Os.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Bs],replaceUrl:[Os.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Bs],routerLink:"routerLink"},standalone:!0,features:[Zf,vc]});let t=e;return t})();var _E=new le("");function dg(t,...e){return Xr([{provide:Eu,multi:!0,useValue:t},[],{provide:Je,useFactory:IE,deps:[vn]},{provide:cp,multi:!0,useFactory:wE},e.map(n=>n.\u0275providers)])}function IE(t){return t.routerState.root}function fg(t,e){return{\u0275kind:t,\u0275providers:e}}function wE(){let t=I($t);return e=>{let n=t.get(Sc);if(e!==n.components[0])return;let r=t.get(vn),i=t.get(EE);t.get(TE)===1&&r.initialNavigation(),t.get(SE,null,mc.Optional)?.setUpPreloading(),t.get(_E,null,mc.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var EE=new le("",{factory:()=>new Ft}),TE=new le("",{providedIn:"root",factory:()=>1});var SE=new le("");function pg(){return fg(8,[Op,{provide:co,useExisting:Op}])}function gg(t){let e=[{provide:ug,useValue:oE},{provide:lg,useValue:E({skipNextTransition:!!t?.skipInitialTransition},t)}];return fg(9,e)}var vg=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},bE=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,h=(s&3)<<4|a>>4,f=(a&15)<<2|u>>6,p=u&63;c||(p=64,o||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vg(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||h==null)throw new bu;let f=s<<2|a>>4;if(r.push(f),u!==64){let p=a<<4&240|u>>2;if(r.push(p),h!==64){let T=u<<6&192|h;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},bu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},AE=function(t){let e=vg(t);return _g.encodeByteArray(e,!0)},Si=function(t){return AE(t).replace(/\./g,"")},Cu=function(t){try{return _g.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function CE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var RE=()=>CE().__FIREBASE_DEFAULTS__,PE=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Cu(t[1]);return e&&JSON.parse(e)},ho=()=>{try{return RE()||PE()||DE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ru=t=>{var e,n;return(n=(e=ho())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ig=t=>{let e=Ru(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pu=()=>{var t;return(t=ho())===null||t===void 0?void 0:t.config},Du=t=>{var e;return(e=ho())===null||e===void 0?void 0:e[`_${t}`]};var lo=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function wg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Si(JSON.stringify(n)),Si(JSON.stringify(o)),""].join(".")}function Z(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Eg(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function kE(){var t;let e=(t=ho())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tg(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Sg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bg(){let t=Z();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ag(){return!kE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fo(){try{return typeof indexedDB=="object"}catch{return!1}}function Cg(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var NE="FirebaseError",Ue=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NE,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ct.prototype.create)}},Ct=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xE(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ue(i,a,r)}};function xE(t,e){return t.replace(OE,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var OE=/\{\$([^}]+)}/g;function Rg(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _n(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(yg(s)&&yg(o)){if(!_n(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function yg(t){return t!==null&&typeof t=="object"}function bi(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pg(t,e){let n=new Au(t,e);return n.subscribe.bind(n)}var Au=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ME(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Su),i.error===void 0&&(i.error=Su),i.complete===void 0&&(i.complete=Su);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ME(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Su(){}var zP=4*60*60*1e3;function ke(t){return t&&t._delegate?t._delegate:t}var We=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var In="[DEFAULT]";var ku=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new lo;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VE(e))try{this.getOrInitializeService({instanceIdentifier:In})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=In){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return d(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=In){return this.instances.has(e)}getOptions(e=In){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=In){return this.component?this.component.multipleInstances?e:In:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function LE(t){return t===In?void 0:t}function VE(t){return t.instantiationMode==="EAGER"}var po=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ku(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var FE=[],F=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(F||{}),UE={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},jE=F.INFO,BE={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},$E=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=BE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Qt=class{constructor(e){this.name=e,this._logLevel=jE,this._logHandler=$E,this._userLogHandler=null,FE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...e),this._logHandler(this,F.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...e),this._logHandler(this,F.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,F.INFO,...e),this._logHandler(this,F.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,F.WARN,...e),this._logHandler(this,F.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,F.ERROR,...e),this._logHandler(this,F.ERROR,...e)}};var qE=(t,e)=>e.some(n=>t instanceof n),Dg,kg;function zE(){return Dg||(Dg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GE(){return kg||(kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ng=new WeakMap,xu=new WeakMap,xg=new WeakMap,Nu=new WeakMap,Mu=new WeakMap;function HE(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ct(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ng.set(n,t)}).catch(()=>{}),Mu.set(e,t),e}function WE(t){if(xu.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});xu.set(t,e)}var Ou={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return xu.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xg.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ct(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Og(t){Ou=t(Ou)}function KE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(go(this),e,...n);return xg.set(r,e.sort?e.sort():[e]),ct(r)}:GE().includes(t)?function(...e){return t.apply(go(this),e),ct(Ng.get(this))}:function(...e){return ct(t.apply(go(this),e))}}function QE(t){return typeof t=="function"?KE(t):(t instanceof IDBTransaction&&WE(t),qE(t,zE())?new Proxy(t,Ou):t)}function ct(t){if(t instanceof IDBRequest)return HE(t);if(Nu.has(t))return Nu.get(t);let e=QE(t);return e!==t&&(Nu.set(t,e),Mu.set(e,t)),e}var go=t=>Mu.get(t);function Lg(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=ct(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ct(o.result),c.oldVersion,c.newVersion,ct(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var YE=["get","getKey","getAll","getAllKeys","count"],JE=["put","add","delete","clear"],Lu=new Map;function Mg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Lu.get(e))return Lu.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=JE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||YE.includes(n)))return;let s=function(o,...a){return d(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Lu.set(e,s),s}Og(t=>ye(E({},t),{get:(e,n,r)=>Mg(e,n)||t.get(e,n,r),has:(e,n)=>!!Mg(e,n)||t.has(e,n)}));var Fu=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XE(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function XE(t){let e=t.getComponent();return e?.type==="VERSION"}var Uu="@firebase/app",Vg="0.10.1";var wn=new Qt("@firebase/app"),ZE="@firebase/app-compat",e0="@firebase/analytics-compat",t0="@firebase/analytics",n0="@firebase/app-check-compat",r0="@firebase/app-check",i0="@firebase/auth",s0="@firebase/auth-compat",o0="@firebase/database",a0="@firebase/database-compat",c0="@firebase/functions",u0="@firebase/functions-compat",l0="@firebase/installations",h0="@firebase/installations-compat",d0="@firebase/messaging",f0="@firebase/messaging-compat",p0="@firebase/performance",g0="@firebase/performance-compat",m0="@firebase/remote-config",y0="@firebase/remote-config-compat",v0="@firebase/storage",_0="@firebase/storage-compat",I0="@firebase/firestore",w0="@firebase/firestore-compat",E0="firebase",T0="10.11.0";var ju="[DEFAULT]",S0={[Uu]:"fire-core",[ZE]:"fire-core-compat",[t0]:"fire-analytics",[e0]:"fire-analytics-compat",[r0]:"fire-app-check",[n0]:"fire-app-check-compat",[i0]:"fire-auth",[s0]:"fire-auth-compat",[o0]:"fire-rtdb",[a0]:"fire-rtdb-compat",[c0]:"fire-fn",[u0]:"fire-fn-compat",[l0]:"fire-iid",[h0]:"fire-iid-compat",[d0]:"fire-fcm",[f0]:"fire-fcm-compat",[p0]:"fire-perf",[g0]:"fire-perf-compat",[m0]:"fire-rc",[y0]:"fire-rc-compat",[v0]:"fire-gcs",[_0]:"fire-gcs-compat",[I0]:"fire-fst",[w0]:"fire-fst-compat","fire-js":"fire-js",[E0]:"fire-js-all"};var Ai=new Map,b0=new Map,Bu=new Map;function Fg(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Jt(t){let e=t.name;if(Bu.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Bu.set(e,t);for(let n of Ai.values())Fg(n,t);for(let n of b0.values())Fg(n,t);return!0}function Ri(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Rt(t){return t.settings!==void 0}var A0={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yt=new Ct("app","Firebase",A0);var $u=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new We("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yt.create("app-deleted",{appName:this._name})}};var Xt=T0;function Pi(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ju,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yt.create("bad-app-name",{appName:String(i)});if(n||(n=Pu()),!n)throw Yt.create("no-options");let s=Ai.get(i);if(s){if(_n(n,s.options)&&_n(r,s.config))return s;throw Yt.create("duplicate-app",{appName:i})}let o=new po(i);for(let c of Bu.values())o.addComponent(c);let a=new $u(n,r,o);return Ai.set(i,a),a}function fr(t=ju){let e=Ai.get(t);if(!e&&t===ju&&Pu())return Pi();if(!e)throw Yt.create("no-app",{appName:t});return e}function mo(){return Array.from(Ai.values())}function he(t,e,n){var r;let i=(r=S0[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(a.join(" "));return}Jt(new We(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var C0="firebase-heartbeat-database",R0=1,Ci="firebase-heartbeat-store",Vu=null;function $g(){return Vu||(Vu=Lg(C0,R0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ci)}catch(n){console.warn(n)}}}}).catch(t=>{throw Yt.create("idb-open",{originalErrorMessage:t.message})})),Vu}function P0(t){return d(this,null,function*(){try{let n=(yield $g()).transaction(Ci),r=yield n.objectStore(Ci).get(qg(t));return yield n.done,r}catch(e){if(e instanceof Ue)wn.warn(e.message);else{let n=Yt.create("idb-get",{originalErrorMessage:e?.message});wn.warn(n.message)}}})}function Ug(t,e){return d(this,null,function*(){try{let r=(yield $g()).transaction(Ci,"readwrite");yield r.objectStore(Ci).put(e,qg(t)),yield r.done}catch(n){if(n instanceof Ue)wn.warn(n.message);else{let r=Yt.create("idb-set",{originalErrorMessage:n?.message});wn.warn(r.message)}}})}function qg(t){return`${t.name}!${t.options.appId}`}var D0=1024,k0=30*24*60*60*1e3,qu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zu(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return d(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=jg();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=k0}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return d(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=jg(),{heartbeatsToSend:r,unsentEntries:i}=N0(this._heartbeatsCache.heartbeats),s=Si(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function jg(){return new Date().toISOString().substring(0,10)}function N0(t,e=D0){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Bg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Bg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return d(this,null,function*(){return fo()?Cg().then(()=>!0).catch(()=>!1):!1})}read(){return d(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield P0(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return d(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Ug(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Bg(t){return Si(JSON.stringify({version:2,heartbeats:t})).length}function x0(t){Jt(new We("platform-logger",e=>new Fu(e),"PRIVATE")),Jt(new We("heartbeat",e=>new qu(e),"PRIVATE")),he(Uu,Vg,t),he(Uu,Vg,"esm2017"),he("fire-js","")}x0("");var O0="firebase",M0="10.11.0";he(O0,M0,"app");var Tn=new Us("ANGULARFIRE2_VERSION");function vo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Di=(t,e)=>{let n=e?[e]:mo(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},gr=class{constructor(){return Di(L0)}},L0="app-check";function pr(){}var yo=class{zone;delegate;constructor(e,n=Nf){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Gu=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr)),n.pipe(ie({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new yo(Zone.current)),this.insideAngular=n.run(()=>new yo(Zone.current,kf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(G(X))};static \u0275prov=V({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function _o(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function V0(t){return _o().ngZone.runOutsideAngular(()=>t())}function En(t){return _o().ngZone.run(()=>t())}function F0(t){return U0(_o())(t)}function U0(t){return function(n){return n=n.lift(new Gu(t.ngZone)),n.pipe(dc(t.outsideAngular),hc(t.insideAngular))}}var j0=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),En(()=>t.apply(void 0,r))},je=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=En(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pr,{},pr,pr))),r[s]=j0(r[s],n));let i=V0(()=>t.apply(this,r));if(!e)if(i instanceof Tt){let s=_o();return i.pipe(dc(s.outsideAngular),hc(s.insideAngular))}else return En(()=>i);return i instanceof Tt?i.pipe(F0):i instanceof Promise?En(()=>new Promise((s,o)=>i.then(a=>En(()=>s(a)),a=>En(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:En(()=>i)};var Pt=class{constructor(e){return e}},Sn=class{constructor(){return mo()}};function B0(t){return t&&t.length===1?t[0]:new Pt(fr())}var Hu=new le("angularfire2._apps"),$0={provide:Pt,useFactory:B0,deps:[[new Oe,Hu]]},q0={provide:Sn,deps:[[new Oe,Hu]]};function z0(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Pt(r)}}var G0=(()=>{class t{constructor(n){he("angularfire",Tn.full,"core"),he("angularfire",Tn.full,"app"),he("angular",op.full,n.toString())}static \u0275fac=function(r){return new(r||t)(G(fn))};static \u0275mod=bt({type:t});static \u0275inj=St({providers:[$0,q0]})}return t})();function zg(t,...e){return{ngModule:G0,providers:[{provide:Hu,useFactory:z0(t),multi:!0,deps:[X,$t,mr,...e]}]}}var Gg=je(Pi,!0);function om(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var am=om,cm=new Ct("auth","Firebase",om());var bo=new Qt("@firebase/auth");function H0(t,...e){bo.logLevel<=F.WARN&&bo.warn(`Auth (${Xt}): ${t}`,...e)}function wo(t,...e){bo.logLevel<=F.ERROR&&bo.error(`Auth (${Xt}): ${t}`,...e)}function en(t,...e){throw dl(t,...e)}function An(t,...e){return dl(t,...e)}function um(t,e,n){let r=Object.assign(Object.assign({},am()),{[e]:n});return new Ct("auth","Firebase",r).create(e,{appName:t.name})}function bn(t){return um(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dl(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return cm.create(t,...e)}function D(t,e,...n){if(!t)throw dl(e,...n)}function Dt(t){let e="INTERNAL ASSERTION FAILED: "+t;throw wo(e),new Error(e)}function tn(t,e){t||Dt(e)}function Yu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function W0(){return Hg()==="http:"||Hg()==="https:"}function Hg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function K0(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W0()||Tg()||"connection"in navigator)?navigator.onLine:!0}function Q0(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Cn=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,tn(n>e,"Short delay should be less than long delay!"),this.isMobile=Eg()||Sg()}get(){return K0()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function fl(t,e){tn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Ao=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Y0={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var J0=new Cn(3e4,6e4);function pl(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function vr(s,o,a,c){return d(this,arguments,function*(t,e,n,r,i={}){return lm(t,i,()=>d(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let h=bi(Object.assign({key:t.config.apiKey},l)).slice(1),f=yield t._getAdditionalHeaders();return f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode),Ao.fetch()(hm(t,t.config.apiHost,n,h),Object.assign({method:e,headers:f,referrerPolicy:"no-referrer"},u))}))})}function lm(t,e,n){return d(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Y0),e);try{let i=new Ju(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Io(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Io(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Io(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Io(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw um(t,l,u);en(t,l)}}catch(i){if(i instanceof Ue)throw i;en(t,"network-request-failed",{message:String(i)})}})}function X0(s,o,a,c){return d(this,arguments,function*(t,e,n,r,i={}){let u=yield vr(t,e,n,r,i);return"mfaPendingCredential"in u&&en(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function hm(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?fl(t.config,i):`${t.config.apiScheme}://${i}`}var Ju=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(An(this.auth,"network-request-failed")),J0.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Io(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=An(t,e,r);return i.customData._tokenResponse=n,i}function Z0(t,e){return d(this,null,function*(){return vr(t,"POST","/v1/accounts:delete",e)})}function dm(t,e){return d(this,null,function*(){return vr(t,"POST","/v1/accounts:lookup",e)})}function ki(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gl(t,e=!1){return d(this,null,function*(){let n=ke(t),r=yield n.getIdToken(e),i=ml(r);D(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:ki(Wu(i.auth_time)),issuedAtTime:ki(Wu(i.iat)),expirationTime:ki(Wu(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Wu(t){return Number(t)*1e3}function ml(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return wo("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cu(n);return i?JSON.parse(i):(wo("Failed to decode base64 JWT payload"),null)}catch(i){return wo("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Wg(t){let e=ml(t);return D(e,"internal-error"),D(typeof e.exp<"u","internal-error"),D(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function xi(t,e,n=!1){return d(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ue&&eT(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function eT({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Xu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>d(this,null,function*(){yield this.iteration()}),n)}iteration(){return d(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Oi=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ki(this.lastLoginAt),this.creationTime=ki(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Co(t){return d(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield xi(t,dm(n,{idToken:r}));D(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fm(s.providerUserInfo):[],a=tT(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Oi(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,h)})}function yl(t){return d(this,null,function*(){let e=ke(t);yield Co(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function tT(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fm(t){return t.map(e=>{var{providerId:n}=e,r=lc(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function nT(t,e){return d(this,null,function*(){let n=yield lm(t,{},()=>d(this,null,function*(){let r=bi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hm(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ao.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function rT(t,e){return d(this,null,function*(){return vr(t,"POST","/v2/accounts:revokeToken",pl(t,e))})}var Ni=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){D(e.idToken,"internal-error"),D(typeof e.idToken<"u","internal-error"),D(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){D(e.length!==0,"internal-error");let n=Wg(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return d(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(D(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return d(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield nT(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(D(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(D(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(D(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Dt("not implemented")}};function Zt(t,e){D(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var yr=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=lc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Oi(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return d(this,null,function*(){let n=yield xi(this,this.stsTokenManager.getToken(this.auth,e));return D(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return gl(this,e)}reload(){return yl(this)}_assign(e){this!==e&&(D(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return d(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Co(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return d(this,null,function*(){if(Rt(this.auth.app))return Promise.reject(bn(this.auth));let e=yield this.getIdToken();return yield xi(this,Z0(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,S=(a=n.tenantId)!==null&&a!==void 0?a:void 0,w=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,L=(u=n.createdAt)!==null&&u!==void 0?u:void 0,W=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:re,emailVerified:Te,isAnonymous:rt,providerData:de,stsTokenManager:Et}=n;D(re&&Et,e,"internal-error");let Yn=Ni.fromJSON(this.name,Et);D(typeof re=="string",e,"internal-error"),Zt(h,e.name),Zt(f,e.name),D(typeof Te=="boolean",e,"internal-error"),D(typeof rt=="boolean",e,"internal-error"),Zt(p,e.name),Zt(T,e.name),Zt(S,e.name),Zt(w,e.name),Zt(L,e.name),Zt(W,e.name);let Kr=new t({uid:re,auth:e,email:f,emailVerified:Te,displayName:h,isAnonymous:rt,photoURL:T,phoneNumber:p,tenantId:S,stsTokenManager:Yn,createdAt:L,lastLoginAt:W});return de&&Array.isArray(de)&&(Kr.providerData=de.map(ks=>Object.assign({},ks))),w&&(Kr._redirectEventId=w),Kr}static _fromIdTokenResponse(e,n,r=!1){return d(this,null,function*(){let i=new Ni;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Co(s),s})}static _fromGetAccountInfoResponse(e,n,r){return d(this,null,function*(){let i=n.users[0];D(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fm(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ni;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Oi(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Kg=new Map;function kt(t){tn(t instanceof Function,"Expected a class definition");let e=Kg.get(t);return e?(tn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kg.set(t,e),e)}var iT=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return d(this,null,function*(){return!0})}_set(n,r){return d(this,null,function*(){this.storage[n]=r})}_get(n){return d(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return d(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Zu=iT;function Eo(t,e,n){return`firebase:${t}:${e}:${n}`}var Ro=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Eo(this.userKey,i.apiKey,s),this.fullPersistenceKey=Eo("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return d(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?yr._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return d(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return d(this,null,function*(){if(!n.length)return new t(kt(Zu),e,r);let i=(yield Promise.all(n.map(u=>d(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||kt(Zu),o=Eo(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let h=yr._fromJSON(e,l);u!==s&&(a=h),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>d(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function Qg(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pm(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vm(e))return"Blackberry";if(_m(e))return"Webos";if(vl(e))return"Safari";if((e.includes("chrome/")||gm(e))&&!e.includes("edge/"))return"Chrome";if(ym(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pm(t=Z()){return/firefox\//i.test(t)}function vl(t=Z()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gm(t=Z()){return/crios\//i.test(t)}function mm(t=Z()){return/iemobile/i.test(t)}function ym(t=Z()){return/android/i.test(t)}function vm(t=Z()){return/blackberry/i.test(t)}function _m(t=Z()){return/webos/i.test(t)}function Lo(t=Z()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function sT(t=Z()){var e;return Lo(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oT(){return bg()&&document.documentMode===10}function Im(t=Z()){return Lo(t)||ym(t)||_m(t)||vm(t)||/windows phone/i.test(t)||mm(t)}function aT(){try{return!!(window&&window!==window.top)}catch{return!1}}function wm(t,e=[]){let n;switch(t){case"Browser":n=Qg(Z());break;case"Worker":n=`${Qg(Z())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xt}/${r}`}var el=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return d(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function cT(n){return d(this,arguments,function*(t,e={}){return vr(t,"GET","/v2/passwordPolicy",pl(t,e))})}var uT=6,tl=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:uT,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var nl=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Po(this),this.idTokenSubscription=new Po(this),this.beforeStateQueue=new el(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cm,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kt(n)),this._initializationPromise=this.queue(()=>d(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ro.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return d(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return d(this,null,function*(){try{let n=yield dm(this,{idToken:e}),r=yield yr._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return d(this,null,function*(){var n;if(Rt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return D(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return d(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return d(this,null,function*(){try{yield Co(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Q0()}_delete(){return d(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return d(this,null,function*(){if(Rt(this.app))return Promise.reject(bn(this));let n=e?ke(e):null;return n&&D(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return d(this,null,function*(){if(!this._deleted)return e&&D(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>d(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return d(this,null,function*(){return Rt(this.app)?Promise.reject(bn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Rt(this.app)?Promise.reject(bn(this)):this.queue(()=>d(this,null,function*(){yield this.assertedPersistence.setPersistence(kt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return d(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return d(this,null,function*(){let e=yield cT(this),n=new tl(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ct("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return d(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield rT(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return d(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return d(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&kt(e)||this._popupRedirectResolver;D(n,this,"argument-error"),this.redirectPersistenceManager=yield Ro.create(this,[kt(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return d(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>d(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return d(this,null,function*(){if(e===this.currentUser)return this.queue(()=>d(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(D(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return d(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return d(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return d(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&H0(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function _l(t){return ke(t)}var Po=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Pg(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Il={loadJS(){return d(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lT(t){Il=t}function hT(t){return Il.loadJS(t)}function dT(){return Il.gapiScript}function Em(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function wl(t,e){let n=Ri(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(_n(s,e??{}))return i;en(i,"already-initialized")}return n.initialize({options:e})}function fT(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(kt);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function El(t,e,n){let r=_l(t);D(r._canInitEmulator,r,"emulator-config-failed"),D(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=Tm(e),{host:o,port:a}=pT(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||gT()}function Tm(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pT(t){let e=Tm(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Yg(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Yg(o)}}}function Yg(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function gT(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Do=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dt("not implemented")}_getIdTokenResponse(e){return Dt("not implemented")}_linkToIdToken(e,n){return Dt("not implemented")}_getReauthenticationResolver(e){return Dt("not implemented")}};function Ku(t,e){return d(this,null,function*(){return X0(t,"POST","/v1/accounts:signInWithIdp",pl(t,e))})}var ko=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var rl=class extends ko{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Mi=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return d(this,null,function*(){let s=yield yr._fromIdTokenResponse(e,r,i),o=Jg(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return d(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Jg(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function Jg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var il=class t extends Ue{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function Sm(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?il._fromErrorAndOperation(t,s,e,r):s})}function mT(t,e,n=!1){return d(this,null,function*(){let r=yield xi(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Mi._forOperation(t,"link",r)})}function yT(t,e,n=!1){return d(this,null,function*(){let{auth:r}=t;if(Rt(r.app))return Promise.reject(bn(r));let i="reauthenticate";try{let s=yield xi(t,Sm(r,i,e,t),n);D(s.idToken,r,"internal-error");let o=ml(s.idToken);D(o,r,"internal-error");let{sub:a}=o;return D(t.uid===a,r,"user-mismatch"),Mi._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&en(r,"user-mismatch"),s}})}function vT(t,e,n=!1){return d(this,null,function*(){if(Rt(t.app))return Promise.reject(bn(t));let r="signIn",i=yield Sm(t,r,e),s=yield Mi._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Tl(t,e,n,r){return ke(t).onIdTokenChanged(e,n,r)}function Sl(t,e,n){return ke(t).beforeAuthStateChanged(e,n)}var No="__sak";var xo=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(No,"1"),this.storage.removeItem(No),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function _T(){let t=Z();return vl(t)||Lo(t)}var IT=1e3,wT=10,ET=(()=>{class t extends xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_T()&&aT(),this.fallbackToPolling=Im(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);oT()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,wT):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},IT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return d(this,null,function*(){yield Vt(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return d(this,null,function*(){let r=yield Vt(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return d(this,null,function*(){yield Vt(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),bm=ET;var TT=(()=>{class t extends xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),bl=TT;function ST(t){return Promise.all(t.map(e=>d(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var bT=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return d(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>d(this,null,function*(){return l(r.origin,o)})),u=yield ST(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function Am(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var sl=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return d(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=Am("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ut(){return window}function AT(t){ut().location.href=t}function Cm(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}function CT(){return d(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RT(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PT(){return Cm()?self:null}var Rm="firebaseLocalStorageDb",DT=1,Oo="firebaseLocalStorage",Pm="fbase_key",Rn=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Vo(t,e){return t.transaction([Oo],e?"readwrite":"readonly").objectStore(Oo)}function kT(){let t=indexedDB.deleteDatabase(Rm);return new Rn(t).toPromise()}function ol(){let t=indexedDB.open(Rm,DT);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Oo,{keyPath:Pm})}catch(i){n(i)}}),t.addEventListener("success",()=>d(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Oo)?e(r):(r.close(),yield kT(),e(yield ol()))}))})}function Xg(t,e,n){return d(this,null,function*(){let r=Vo(t,!0).put({[Pm]:e,value:n});return new Rn(r).toPromise()})}function NT(t,e){return d(this,null,function*(){let n=Vo(t,!1).get(e),r=yield new Rn(n).toPromise();return r===void 0?null:r.value})}function Zg(t,e){let n=Vo(t,!0).delete(e);return new Rn(n).toPromise()}var xT=800,OT=3,MT=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return d(this,null,function*(){return this.db?this.db:(this.db=yield ol(),this.db)})}_withRetries(n){return d(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>OT)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return d(this,null,function*(){return Cm()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return d(this,null,function*(){this.receiver=bT._getInstance(PT()),this.receiver._subscribe("keyChanged",(n,r)=>d(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>d(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return d(this,null,function*(){var n,r;if(this.activeServiceWorker=yield CT(),!this.activeServiceWorker)return;this.sender=new sl(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return d(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RT()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return d(this,null,function*(){try{if(!indexedDB)return!1;let n=yield ol();return yield Xg(n,No,"1"),yield Zg(n,No),!0}catch{}return!1})}_withPendingWrite(n){return d(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(i=>Xg(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return d(this,null,function*(){let r=yield this._withRetries(i=>NT(i,n));return this.localCache[n]=r,r})}_remove(n){return d(this,null,function*(){return this._withPendingWrite(()=>d(this,null,function*(){return yield this._withRetries(r=>Zg(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return d(this,null,function*(){let n=yield this._withRetries(s=>{let o=Vo(s,!1).getAll();return new Rn(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>d(this,null,function*(){return this._poll()}),xT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),Dm=MT;var V1=Em("rcb"),F1=new Cn(3e4,6e4);function LT(t,e){return e?kt(e):(D(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Li=class extends Do{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ku(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ku(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ku(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function VT(t){return vT(t.auth,new Li(t),t.bypassAuthState)}function FT(t){let{auth:e,user:n}=t;return D(n,e,"internal-error"),yT(n,new Li(t),t.bypassAuthState)}function UT(t){return d(this,null,function*(){let{auth:e,user:n}=t;return D(n,e,"internal-error"),mT(n,new Li(t),t.bypassAuthState)})}var al=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>d(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return d(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VT;case"linkViaPopup":case"linkViaRedirect":return UT;case"reauthViaPopup":case"reauthViaRedirect":return FT;default:en(this.auth,"internal-error")}}resolve(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var U1=new Cn(2e3,1e4);var jT="pendingRedirect",To=new Map,cl=class t extends al{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return d(this,null,function*(){let e=To.get(this.auth._key());if(!e){try{let r=(yield BT(this.resolver,this.auth))?yield Vt(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}To.set(this.auth._key(),e)}return this.bypassAuthState||To.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return d(this,null,function*(){if(e.type==="signInViaRedirect")return Vt(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Vt(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return d(this,null,function*(){})}cleanUp(){}};function BT(t,e){return d(this,null,function*(){let n=zT(e),r=qT(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function $T(t,e){To.set(t._key(),e)}function qT(t){return kt(t._redirectPersistence)}function zT(t){return Eo(jT,t.config.apiKey,t.name)}function GT(t,e,n=!1){return d(this,null,function*(){if(Rt(t.app))return Promise.reject(bn(t));let r=_l(t),i=LT(r,e),o=yield new cl(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var HT=10*60*1e3,ul=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WT(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!km(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(An(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HT&&this.cachedEventUids.clear(),this.cachedEventUids.has(em(e))}saveEventToCache(e){this.cachedEventUids.add(em(e)),this.lastProcessedEventTime=Date.now()}};function em(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function km({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function WT(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return km(t);default:return!1}}function KT(n){return d(this,arguments,function*(t,e={}){return vr(t,"GET","/v1/projects",e)})}var QT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YT=/^https?/;function JT(t){return d(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield KT(t);for(let n of e)try{if(XT(n))return}catch{}en(t,"unauthorized-domain")})}function XT(t){let e=Yu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YT.test(n))return!1;if(QT.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var ZT=new Cn(3e4,6e4);function tm(){let t=ut().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eS(t){return new Promise((e,n)=>{var r,i,s;function o(){tm(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tm(),n(An(t,"network-request-failed"))},timeout:ZT.get()})}if(!((i=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ut().gapi)===null||s===void 0)&&s.load)o();else{let a=Em("iframefcb");return ut()[a]=()=>{gapi.load?o():n(An(t,"network-request-failed"))},hT(`${dT()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw So=null,e})}var So=null;function tS(t){return So=So||eS(t),So}var nS=new Cn(5e3,15e3),rS="__/auth/iframe",iS="emulator/auth/iframe",sS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aS(t){let e=t.config;D(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?fl(e,iS):`https://${t.config.authDomain}/${rS}`,r={apiKey:e.apiKey,appName:t.name,v:Xt},i=oS.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${bi(r).slice(1)}`}function cS(t){return d(this,null,function*(){let e=yield tS(t),n=ut().gapi;return D(n,t,"internal-error"),e.open({where:document.body,url:aS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sS,dontclear:!0},r=>new Promise((i,s)=>d(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=An(t,"network-request-failed"),a=ut().setTimeout(()=>{s(o)},nS.get());function c(){ut().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var uS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lS=500,hS=600,dS="_blank",fS="http://localhost",Mo=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function pS(t,e,n,r=lS,i=hS){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},uS),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Z().toLowerCase();n&&(a=gm(u)?dS:n),pm(u)&&(e=e||fS,c.scrollbars="yes");let l=Object.entries(c).reduce((f,[p,T])=>`${f}${p}=${T},`,"");if(sT(u)&&a!=="_self")return gS(e||"",a),new Mo(null);let h=window.open(e||"",a,l);D(h,t,"popup-blocked");try{h.focus()}catch{}return new Mo(h)}function gS(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var mS="__/auth/handler",yS="emulator/auth/handler",vS=encodeURIComponent("fac");function nm(t,e,n,r,i,s){return d(this,null,function*(){D(t.config.authDomain,t,"auth-domain-config-required"),D(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Xt,eventId:i};if(e instanceof ko){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Rg(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,h]of Object.entries(s||{}))o[l]=h}if(e instanceof rl){let l=e.getScopes().filter(h=>h!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${vS}=${encodeURIComponent(c)}`:"";return`${_S(t)}?${bi(a).slice(1)}${u}`})}function _S({config:t}){return t.emulator?fl(t,yS):`https://${t.authDomain}/${mS}`}var Qu="webStorageSupport",ll=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bl,this._completeRedirectFn=GT,this._overrideRedirectResult=$T}_openPopup(e,n,r,i){return d(this,null,function*(){var s;tn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nm(e,n,r,Yu(),i);return pS(e,o,Am())})}_openRedirect(e,n,r,i){return d(this,null,function*(){yield this._originValidation(e);let s=yield nm(e,n,r,Yu(),i);return AT(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(tn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return d(this,null,function*(){let n=yield cS(e),r=new ul(e);return n.register("authEvent",i=>(D(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qu,{type:Qu},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Qu];o!==void 0&&n(!!o),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JT(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Im()||vl()||Lo()}},Nm=ll;var rm="@firebase/auth",im="1.7.1";var hl=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return d(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function IS(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function wS(t){Jt(new We("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;D(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wm(t)},u=new nl(r,i,s,c);return fT(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Jt(new We("auth-internal",e=>{let n=_l(e.getProvider("auth").getImmediate());return(r=>new hl(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),he(rm,im,IS(t)),he(rm,im,"esm2017")}var ES=5*60,TS=Du("authIdTokenMaxAge")||ES,sm=null,SS=t=>e=>d(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>TS)return;let i=n?.token;sm!==i&&(sm=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Al(t=fr()){let e=Ri(t,"auth");if(e.isInitialized())return e.getImmediate();let n=wl(t,{popupRedirectResolver:Nm,persistence:[Dm,bm,bl]}),r=Du("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=SS(s.toString());Sl(n,o,()=>o(n.currentUser)),Tl(n,a=>o(a))}}let i=Ru("auth");return i&&El(n,`http://${i}`),n}function bS(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lT({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=An("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",bS().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});wS("Browser");var xm="auth",Vi=class{constructor(e){return e}},Fi=class{constructor(){return Di(xm)}};var Cl=new le("angularfire2.auth-instances");function vb(t,e){let n=vo(xm,t,e);return n&&new Vi(n)}function _b(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Vi(r)}}var Ib={provide:Fi,deps:[[new Oe,Cl]]},wb={provide:Vi,useFactory:vb,deps:[[new Oe,Cl],Pt]},Eb=(()=>{class t{constructor(){he("angularfire",Tn.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=St({providers:[wb,Ib]})}return t})();function Om(t,...e){return{ngModule:Eb,providers:[{provide:Cl,useFactory:_b(t),multi:!0,deps:[X,$t,mr,Sn,[new Oe,gr],...e]}]}}var Mm=je(Al,!0);var Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ze={},y,Ql=Ql||{},k=Tb||self;function Jo(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Xi(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Sb(t){return Object.prototype.hasOwnProperty.call(t,Rl)&&t[Rl]||(t[Rl]=++bb)}var Rl="closure_uid_"+(1e9*Math.random()>>>0),bb=0;function Ab(t,e,n){return t.call.apply(t.bind,arguments)}function Cb(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function be(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?be=Ab:be=Cb,be.apply(null,arguments)}function Fo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function ge(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function nn(){this.s=this.s,this.o=this.o}var Rb=0;nn.prototype.s=!1;nn.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Rb!=0)&&Sb(this)};nn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Km=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Yl(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Lm(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Jo(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ae(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Pb=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};k.addEventListener("test",n,e),k.removeEventListener("test",n,e)}catch{}return t}();function zi(t){return/^[\s\xa0]*$/.test(t)}function Xo(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function lt(t){return Xo().indexOf(t)!=-1}function Jl(t){return Jl[" "](t),t}Jl[" "]=function(){};function Db(t,e){var n=vA;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var kb=lt("Opera"),Er=lt("Trident")||lt("MSIE"),Qm=lt("Edge"),xl=Qm||Er,Ym=lt("Gecko")&&!(Xo().toLowerCase().indexOf("webkit")!=-1&&!lt("Edge"))&&!(lt("Trident")||lt("MSIE"))&&!lt("Edge"),Nb=Xo().toLowerCase().indexOf("webkit")!=-1&&!lt("Edge");function Jm(){var t=k.document;return t?t.documentMode:void 0}var Ol;e:{if(Uo="",jo=function(){var t=Xo();if(Ym)return/rv:([^\);]+)(\)|;)/.exec(t);if(Qm)return/Edge\/([\d\.]+)/.exec(t);if(Er)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Nb)return/WebKit\/(\S+)/.exec(t);if(kb)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),jo&&(Uo=jo?jo[1]:""),Er&&(Bo=Jm(),Bo!=null&&Bo>parseFloat(Uo))){Ol=String(Bo);break e}Ol=Uo}var Uo,jo,Bo,Ml;k.document&&Er?(Pl=Jm(),Ml=Pl||parseInt(Ol,10)||void 0):Ml=void 0;var Pl,xb=Ml;function Gi(t,e){if(Ae.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Ym){e:{try{Jl(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Ob[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gi.$.h.call(this)}}ge(Gi,Ae);var Ob={2:"touch",3:"pen",4:"mouse"};Gi.prototype.h=function(){Gi.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Zi="closure_listenable_"+(1e6*Math.random()|0),Mb=0;function Lb(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Mb,this.fa=this.ia=!1}function Zo(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Xl(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Vb(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function Xm(t){let e={};for(let n in t)e[n]=t[n];return e}var Vm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zm(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Vm.length;s++)n=Vm[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ea(t){this.src=t,this.g={},this.h=0}ea.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Vl(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Lb(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Ll(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=Km(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Zo(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Vl(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Zl="closure_lm_"+(1e6*Math.random()|0),Dl={};function ey(t,e,n,r,i){if(r&&r.once)return ny(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ey(t,e[s],n,r,i);return null}return n=nh(n),t&&t[Zi]?t.O(e,n,Xi(r)?!!r.capture:!!r,i):ty(t,e,n,!1,r,i)}function ty(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Xi(i)?!!i.capture:!!i,a=th(t);if(a||(t[Zl]=a=new ea(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Fb(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Pb||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(iy(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Fb(){function t(n){return e.call(t.src,t.listener,n)}let e=Ub;return t}function ny(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)ny(t,e[s],n,r,i);return null}return n=nh(n),t&&t[Zi]?t.P(e,n,Xi(r)?!!r.capture:!!r,i):ty(t,e,n,!0,r,i)}function ry(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)ry(t,e[s],n,r,i);else r=Xi(r)?!!r.capture:!!r,n=nh(n),t&&t[Zi]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Vl(s,n,r,i),-1<n&&(Zo(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=th(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vl(e,n,r,i)),(n=-1<t?e[t]:null)&&eh(n))}function eh(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Zi])Ll(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iy(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=th(e))?(Ll(n,t),n.h==0&&(n.src=null,e[Zl]=null)):Zo(t)}}}function iy(t){return t in Dl?Dl[t]:Dl[t]="on"+t}function Ub(t,e){if(t.fa)t=!0;else{e=new Gi(e,this);var n=t.listener,r=t.la||t.src;t.ia&&eh(t),t=n.call(r,e)}return t}function th(t){return t=t[Zl],t instanceof ea?t:null}var kl="__closure_events_fn_"+(1e9*Math.random()>>>0);function nh(t){return typeof t=="function"?t:(t[kl]||(t[kl]=function(e){return t.handleEvent(e)}),t[kl])}function pe(){nn.call(this),this.i=new ea(this),this.S=this,this.J=null}ge(pe,nn);pe.prototype[Zi]=!0;pe.prototype.removeEventListener=function(t,e,n,r){ry(this,t,e,n,r)};function we(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ae(e,t);else if(e instanceof Ae)e.target=e.target||t;else{var i=e;e=new Ae(r,t),Zm(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=$o(o,r,!0,e)&&i}if(o=e.g=t,i=$o(o,r,!0,e)&&i,i=$o(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=$o(o,r,!1,e)&&i}pe.prototype.N=function(){if(pe.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Zo(n[r]);delete t.g[e],t.h--}}this.J=null};pe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};pe.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function $o(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Ll(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var rh=k.JSON.stringify,Fl=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function jb(){var t=ih;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ul=class{constructor(){this.h=this.g=null}add(e,n){let r=sy.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},sy=new Fl(()=>new jl,t=>t.reset()),jl=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Bb(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function $b(t){k.setTimeout(()=>{throw t},0)}var Hi,Wi=!1,ih=new Ul,oy=()=>{let t=k.Promise.resolve(void 0);Hi=()=>{t.then(qb)}},qb=()=>{for(var t;t=jb();){try{t.h.call(t.g)}catch(n){$b(n)}var e=sy;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Wi=!1};function ta(t,e){pe.call(this),this.h=t||1,this.g=e||k,this.j=be(this.qb,this),this.l=Date.now()}ge(ta,pe);y=ta.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),we(this,"tick"),this.ga&&(sh(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function sh(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){ta.$.N.call(this),sh(this),delete this.g};function oh(t,e,n){if(typeof t=="function")n&&(t=be(t,n));else if(t&&typeof t.handleEvent=="function")t=be(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function ay(t){t.g=oh(()=>{t.g=null,t.i&&(t.i=!1,ay(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Bl=class extends nn{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ay(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ki(t){nn.call(this),this.h=t,this.g={}}ge(Ki,nn);var Fm=[];function cy(t,e,n,r){Array.isArray(n)||(n&&(Fm[0]=n.toString()),n=Fm);for(var i=0;i<n.length;i++){var s=ey(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function uy(t){Xl(t.g,function(e,n){this.g.hasOwnProperty(n)&&eh(e)},t),t.g={}}Ki.prototype.N=function(){Ki.$.N.call(this),uy(this)};Ki.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function na(){this.g=!0}na.prototype.Ea=function(){this.g=!1};function zb(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&h[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Gb(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function Ir(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Wb(t,n)+(r?" "+r:"")})}function Hb(t,e){t.info(function(){return"TIMEOUT: "+e})}na.prototype.info=function(){};function Wb(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return rh(n)}catch{return e}}var Nn={},Um=null;function ra(){return Um=Um||new pe}Nn.Ta="serverreachability";function ly(t){Ae.call(this,Nn.Ta,t)}ge(ly,Ae);function Qi(t){let e=ra();we(e,new ly(e))}Nn.STAT_EVENT="statevent";function hy(t,e){Ae.call(this,Nn.STAT_EVENT,t),this.stat=e}ge(hy,Ae);function Ne(t){let e=ra();we(e,new hy(e,t))}Nn.Ua="timingevent";function dy(t,e){Ae.call(this,Nn.Ua,t),this.size=e}ge(dy,Ae);function es(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var ia={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fy={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ah(){}ah.prototype.h=null;function jm(t){return t.h||(t.h=t.i())}function py(){}var ts={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ch(){Ae.call(this,"d")}ge(ch,Ae);function uh(){Ae.call(this,"c")}ge(uh,Ae);var $l;function sa(){}ge(sa,ah);sa.prototype.g=function(){return new XMLHttpRequest};sa.prototype.i=function(){return{}};$l=new sa;function ns(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Ki(this),this.P=Kb,t=xl?125:void 0,this.V=new ta(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new gy}function gy(){this.i=null,this.g="",this.h=!1}var Kb=45e3,my={},ql={};y=ns.prototype;y.setTimeout=function(t){this.P=t};function zl(t,e,n){t.L=1,t.A=aa(xt(e)),t.u=n,t.S=!0,yy(t,null)}function yy(t,e){t.G=Date.now(),rs(t),t.B=xt(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),by(n.i,"t",r),t.o=0,n=t.l.J,t.h=new gy,t.g=Hy(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Bl(be(t.Pa,t,t.g),t.O)),cy(t.U,t.g,"readystatechange",t.nb),e=t.I?Xm(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Qi(),zb(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&ht(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=ht(this.g);var e=this.g.Ia();let h=this.g.da();if(!(3>l)&&(l!=3||xl||this.g&&(this.h.h||this.g.ja()||zm(this.g)))){this.J||l!=4||e==7||(e==8||0>=h?Qi(3):Qi(2)),oa(this);var n=this.g.da();this.ca=n;t:if(vy(this)){var r=zm(this.g);t="";var i=r.length,s=ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pn(this),qi(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,Gb(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!zi(a)){var u=a;break t}}u=null}if(n=u)Ir(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gl(this,n);else{this.i=!1,this.s=3,Ne(12),Pn(this),qi(this);break e}}this.S?(_y(this,l,o),xl&&this.i&&l==3&&(cy(this.U,this.V,"tick",this.mb),this.V.start())):(Ir(this.j,this.m,o,null),Gl(this,o)),l==4&&Pn(this),this.i&&!this.J&&(l==4?$y(this.l,this):(this.i=!1,rs(this)))}else gA(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Pn(this),qi(this)}}}catch{}finally{}};function vy(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function _y(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=Qb(t,n),i==ql){e==4&&(t.s=4,Ne(14),r=!1),Ir(t.j,t.m,null,"[Incomplete Response]");break}else if(i==my){t.s=4,Ne(15),Ir(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Ir(t.j,t.m,i,null),Gl(t,i);vy(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Ne(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),gh(e),e.M=!0,Ne(11))):(Ir(t.j,t.m,n,"[Invalid Chunked Response]"),Pn(t),qi(t))}y.mb=function(){if(this.g){var t=ht(this.g),e=this.g.ja();this.o<e.length&&(oa(this),_y(this,t,e),this.i&&t!=4&&rs(this))}};function Qb(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ql:(n=Number(e.substring(n,r)),isNaN(n)?my:(r+=1,r+n>e.length?ql:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,Pn(this)};function rs(t){t.Y=Date.now()+t.P,Iy(t,t.P)}function Iy(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=es(be(t.lb,t),e)}function oa(t){t.C&&(k.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Hb(this.j,this.B),this.L!=2&&(Qi(),Ne(17)),Pn(this),this.s=2,qi(this)):Iy(this,this.Y-t)};function qi(t){t.l.H==0||t.J||$y(t.l,t)}function Pn(t){oa(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,sh(t.V),uy(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Gl(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Hl(n.i,t))){if(!t.K&&Hl(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Wo(n),la(n);else break e;ph(n),Ne(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=es(be(n.ib,n),6e3));if(1>=Ry(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Dn(n,11)}else if((t.K||n.g==t)&&Wo(n),!zi(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let h=u[4];h!=null&&(n.Ga=h,n.l.info("SVER="+n.Ga));let f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let p=t.g;if(p){let T=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(T){var s=r.i;s.g||T.indexOf("spdy")==-1&&T.indexOf("quic")==-1&&T.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(lh(s,s.h),s.h=null))}if(r.F){let S=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.Da=S,Q(r.I,r.F,S))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=Gy(r,r.J?r.pa:null,r.Y),o.K){Py(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(oa(a),rs(a)),r.g=o}else jy(r);0<n.j.length&&ha(n)}else u[0]!="stop"&&u[0]!="close"||Dn(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Dn(n,7):fh(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Qi(4)}catch{}}function Yb(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Jo(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Jb(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Jo(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function wy(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Jo(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Jb(t),r=Yb(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xb(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function kn(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof kn){this.h=t.h,Go(this,t.j),this.s=t.s,this.g=t.g,Ho(this,t.m),this.l=t.l;var e=t.i,n=new Yi;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Bm(this,n),this.o=t.o}else t&&(e=String(t).match(Ey))?(this.h=!1,Go(this,e[1]||"",!0),this.s=Bi(e[2]||""),this.g=Bi(e[3]||"",!0),Ho(this,e[4]),this.l=Bi(e[5]||"",!0),Bm(this,e[6]||"",!0),this.o=Bi(e[7]||"")):(this.h=!1,this.i=new Yi(null,this.h))}kn.prototype.toString=function(){var t=[],e=this.j;e&&t.push($i(e,$m,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push($i(e,$m,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push($i(n,n.charAt(0)=="/"?tA:eA,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$i(n,rA)),t.join("")};function xt(t){return new kn(t)}function Go(t,e,n){t.j=n?Bi(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ho(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Bm(t,e,n){e instanceof Yi?(t.i=e,iA(t.i,t.h)):(n||(e=$i(e,nA)),t.i=new Yi(e,t.h))}function Q(t,e,n){t.i.set(e,n)}function aa(t){return Q(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Bi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $i(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Zb),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Zb(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var $m=/[#\/\?@]/g,eA=/[#\?:]/g,tA=/[#\?]/g,nA=/[#\?@]/g,rA=/#/g;function Yi(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function rn(t){t.g||(t.g=new Map,t.h=0,t.i&&Xb(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=Yi.prototype;y.add=function(t,e){rn(this),this.i=null,t=Tr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function Ty(t,e){rn(t),e=Tr(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function Sy(t,e){return rn(t),e=Tr(t,e),t.g.has(e)}y.forEach=function(t,e){rn(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){rn(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){rn(this);let e=[];if(typeof t=="string")Sy(this,t)&&(e=e.concat(this.g.get(Tr(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return rn(this),this.i=null,t=Tr(this,t),Sy(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function by(t,e,n){Ty(t,e),0<n.length&&(t.i=null,t.g.set(Tr(t,e),Yl(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Tr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function iA(t,e){e&&!t.j&&(rn(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(Ty(this,r),by(this,i,n))},t)),t.j=e}var sA=class{constructor(t,e){this.g=t,this.map=e}};function Ay(t){this.l=t||oA,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var oA=10;function Cy(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Ry(t){return t.h?1:t.g?t.g.size:0}function Hl(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function lh(t,e){t.g?t.g.add(e):t.h=e}function Py(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}Ay.prototype.cancel=function(){if(this.i=Dy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function Dy(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Yl(t.i)}var aA=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function cA(){this.g=new aA}function uA(t,e,n){let r=n||"";try{wy(t,function(i,s){let o=i;Xi(i)&&(o=rh(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function lA(t,e){let n=new na;if(k.Image){let r=new Image;r.onload=Fo(qo,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Fo(qo,n,r,"TestLoadImage: error",!1,e),r.onabort=Fo(qo,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Fo(qo,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qo(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function is(t){this.l=t.ec||null,this.j=t.ob||!1}ge(is,ah);is.prototype.g=function(){return new ca(this.l,this.j)};is.prototype.i=function(t){return function(){return t}}({});function ca(t,e){pe.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=hh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ge(ca,pe);var hh=0;y=ca.prototype;y.open=function(t,e){if(this.readyState!=hh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ji(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ss(this)),this.readyState=hh};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ji(this)),this.g&&(this.readyState=3,Ji(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ky(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ky(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ss(this):Ji(this),this.readyState==3&&ky(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,ss(this))};y.Ya=function(t){this.g&&(this.response=t,ss(this))};y.ka=function(){this.g&&ss(this)};function ss(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ji(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Ji(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var hA=k.JSON.parse;function ee(t){pe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ny,this.L=this.M=!1}ge(ee,pe);var Ny="",dA=/^https?$/i,fA=["POST","PUT"];y=ee.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$l.g(),this.C=this.u?jm(this.u):jm($l),this.g.onreadystatechange=be(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){qm(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=k.FormData&&t instanceof k.FormData,!(0<=Km(fA,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{My(this),0<this.B&&((this.L=pA(this.g))?(this.g.timeout=this.B,this.g.ontimeout=be(this.ua,this)):this.A=oh(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){qm(this,s)}};function pA(t){return Er&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof Ql<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,we(this,"timeout"),this.abort(8))};function qm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,xy(t),ua(t)}function xy(t){t.F||(t.F=!0,we(t,"complete"),we(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,we(this,"complete"),we(this,"abort"),ua(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ua(this,!0)),ee.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?Oy(this):this.kb())};y.kb=function(){Oy(this)};function Oy(t){if(t.h&&typeof Ql<"u"&&(!t.C[1]||ht(t)!=4||t.da()!=2)){if(t.v&&ht(t)==4)oh(t.La,0,t);else if(we(t,"readystatechange"),ht(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(Ey)[1]||null;!i&&k.self&&k.self.location&&(i=k.self.location.protocol.slice(0,-1)),r=!dA.test(i?i.toLowerCase():"")}n=r}if(n)we(t,"complete"),we(t,"success");else{t.m=6;try{var s=2<ht(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",xy(t)}}finally{ua(t)}}}}function ua(t,e){if(t.g){My(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||we(t,"ready");try{n.onreadystatechange=r}catch{}}}function My(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function ht(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<ht(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),hA(e)}};function zm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Ny:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function gA(t){let e={};t=(t.g&&2<=ht(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(zi(t[r]))continue;var n=Bb(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}Vb(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Ly(t){let e="";return Xl(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function dh(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ly(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Q(t,e,n))}function Ui(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Vy(t){this.Ga=0,this.j=[],this.l=new na,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ui("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ui("baseRetryDelayMs",5e3,t),this.hb=Ui("retryDelaySeedMs",1e4,t),this.eb=Ui("forwardChannelMaxRetries",2,t),this.xa=Ui("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new Ay(t&&t.concurrentRequestLimit),this.Ja=new cA,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=Vy.prototype;y.ra=8;y.H=1;function fh(t){if(Fy(t),t.H==3){var e=t.W++,n=xt(t.I);if(Q(n,"SID",t.K),Q(n,"RID",e),Q(n,"TYPE","terminate"),os(t,n),e=new ns(t,t.l,e),e.L=2,e.A=aa(xt(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.A,n=!0),n||(e.g=Hy(e.l,null),e.g.ha(e.A)),e.G=Date.now(),rs(e)}zy(t)}function la(t){t.g&&(gh(t),t.g.cancel(),t.g=null)}function Fy(t){la(t),t.u&&(k.clearTimeout(t.u),t.u=null),Wo(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function ha(t){if(!Cy(t.i)&&!t.m){t.m=!0;var e=t.Na;Hi||oy(),Wi||(Hi(),Wi=!0),ih.add(e,t),t.C=0}}function mA(t,e){return Ry(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=es(be(t.Na,t,e),qy(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new ns(this,this.l,t),s=this.s;if(this.U&&(s?(s=Xm(s),Zm(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Uy(this,i,e),n=xt(this.I),Q(n,"RID",t),Q(n,"CVER",22),this.F&&Q(n,"X-HTTP-Session-Id",this.F),os(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Ly(s)))+"&"+e:this.o&&dh(n,this.o,s)),lh(this.i,i),this.bb&&Q(n,"TYPE","init"),this.P?(Q(n,"$req",e),Q(n,"SID","null"),i.aa=!0,zl(i,n,null)):zl(i,n,e),this.H=2}}else this.H==3&&(t?Gm(this,t):this.j.length==0||Cy(this.i)||Gm(this))};function Gm(t,e){var n;e?n=e.m:n=t.W++;let r=xt(t.I);Q(r,"SID",t.K),Q(r,"RID",n),Q(r,"AID",t.V),os(t,r),t.o&&t.s&&dh(r,t.o,t.s),n=new ns(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Uy(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),lh(t.i,n),zl(n,r,e)}function os(t,e){t.na&&Xl(t.na,function(n,r){Q(e,r,n)}),t.h&&wy({},function(n,r){Q(e,r,n)})}function Uy(t,e,n){n=Math.min(t.j.length,n);var r=t.h?be(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{uA(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function jy(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Hi||oy(),Wi||(Hi(),Wi=!0),ih.add(e,t),t.A=0}}function ph(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=es(be(t.Ma,t),qy(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,By(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=es(be(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ne(10),la(this),By(this))};function gh(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function By(t){t.g=new ns(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=xt(t.wa);Q(e,"RID","rpc"),Q(e,"SID",t.K),Q(e,"AID",t.V),Q(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Q(e,"TO",t.qa),Q(e,"TYPE","xmlhttp"),os(t,e),t.o&&t.s&&dh(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=aa(xt(e)),n.u=null,n.S=!0,yy(n,t)}y.ib=function(){this.v!=null&&(this.v=null,la(this),ph(this),Ne(19))};function Wo(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function $y(t,e){var n=null;if(t.g==e){Wo(t),gh(t),t.g=null;var r=2}else if(Hl(t.i,e))n=e.F,Py(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=ra(),we(r,new dy(r,n)),ha(t)}else jy(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&mA(t,e)||r==2&&ph(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Dn(t,5);break;case 4:Dn(t,10);break;case 3:Dn(t,6);break;default:Dn(t,2)}}}function qy(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Dn(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=be(t.pb,t);n||(n=new kn("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||Go(n,"https"),aa(n)),lA(n.toString(),r)}else Ne(2);t.H=0,t.h&&t.h.za(e),zy(t),Fy(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ne(2)):(this.l.info("Failed to ping google.com"),Ne(1))};function zy(t){if(t.H=0,t.ma=[],t.h){let e=Dy(t.i);(e.length!=0||t.j.length!=0)&&(Lm(t.ma,e),Lm(t.ma,t.j),t.i.i.length=0,Yl(t.j),t.j.length=0),t.h.ya()}}function Gy(t,e,n){var r=n instanceof kn?xt(n):new kn(n);if(r.g!="")e&&(r.g=e+"."+r.g),Ho(r,r.m);else{var i=k.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new kn(null);r&&Go(s,r),e&&(s.g=e),i&&Ho(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&Q(r,n,e),Q(r,"VER",t.ra),os(t,r),r}function Hy(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ee(new is({ob:n})):new ee(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function Wy(){}y=Wy.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function Ko(){if(Er&&!(10<=Number(xb)))throw Error("Environmental error: no available transport.")}Ko.prototype.g=function(t,e){return new Be(t,e)};function Be(t,e){pe.call(this),this.g=new Vy(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!zi(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!zi(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Sr(this)}ge(Be,pe);Be.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ne(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Gy(t,null,t.Y),ha(t)};Be.prototype.close=function(){fh(this.g)};Be.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=rh(t),t=n);e.j.push(new sA(e.fb++,t)),e.H==3&&ha(e)};Be.prototype.N=function(){this.g.h=null,delete this.j,fh(this.g),delete this.g,Be.$.N.call(this)};function Ky(t){ch.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}ge(Ky,ch);function Qy(){uh.call(this),this.status=1}ge(Qy,uh);function Sr(t){this.g=t}ge(Sr,Wy);Sr.prototype.Ba=function(){we(this.g,"a")};Sr.prototype.Aa=function(t){we(this.g,new Ky(t))};Sr.prototype.za=function(t){we(this.g,new Qy)};Sr.prototype.ya=function(){we(this.g,"b")};function yA(){this.blockSize=-1}function Xe(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}ge(Xe,yA);Xe.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Nl(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Xe.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Nl(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Nl(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Nl(this,r),i=0;break}}this.h=i,this.i+=e};Xe.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function z(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var vA={};function mh(t){return-128<=t&&128>t?Db(t,function(e){return new z([e|0],0>e?-1:0)}):new z([t|0],0>t?-1:0)}function dt(t){if(isNaN(t)||!isFinite(t))return wr;if(0>t)return Ie(dt(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Wl;return new z(e,0)}function Yy(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ie(Yy(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=dt(Math.pow(e,8)),r=wr,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=dt(Math.pow(e,s)),r=r.R(s).add(dt(o))):(r=r.R(n),r=r.add(dt(o)))}return r}var Wl=4294967296,wr=mh(0),Kl=mh(1),Hm=mh(16777216);y=z.prototype;y.ea=function(){if(Ke(this))return-Ie(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Wl+r)*e,e*=Wl}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Nt(this))return"0";if(Ke(this))return"-"+Ie(this).toString(t);for(var e=dt(Math.pow(t,6)),n=this,r="";;){var i=Yo(n,e).g;n=Qo(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Nt(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Nt(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Ke(t){return t.h==-1}y.X=function(t){return t=Qo(this,t),Ke(t)?-1:Nt(t)?0:1};function Ie(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new z(n,~t.h).add(Kl)}y.abs=function(){return Ke(this)?Ie(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new z(n,n[n.length-1]&-2147483648?-1:0)};function Qo(t,e){return t.add(Ie(e))}y.R=function(t){if(Nt(this)||Nt(t))return wr;if(Ke(this))return Ke(t)?Ie(this).R(Ie(t)):Ie(Ie(this).R(t));if(Ke(t))return Ie(this.R(Ie(t)));if(0>this.X(Hm)&&0>t.X(Hm))return dt(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,zo(n,2*r+2*i),n[2*r+2*i+1]+=s*c,zo(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,zo(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,zo(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new z(n,0)};function zo(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function ji(t,e){this.g=t,this.h=e}function Yo(t,e){if(Nt(e))throw Error("division by zero");if(Nt(t))return new ji(wr,wr);if(Ke(t))return e=Yo(Ie(t),e),new ji(Ie(e.g),Ie(e.h));if(Ke(e))return e=Yo(t,Ie(e)),new ji(Ie(e.g),e.h);if(30<t.g.length){if(Ke(t)||Ke(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Kl,r=e;0>=r.X(t);)n=Wm(n),r=Wm(r);var i=_r(n,1),s=_r(r,1);for(r=_r(r,2),n=_r(n,2);!Nt(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=_r(r,1),n=_r(n,1)}return e=Qo(t,i.R(e)),new ji(i,e)}for(i=wr;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=dt(n),o=s.R(e);Ke(o)||0<o.X(t);)n-=r,s=dt(n),o=s.R(e);Nt(s)&&(s=Kl),i=i.add(s),t=Qo(t,o)}return new ji(i,t)}y.gb=function(t){return Yo(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new z(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new z(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new z(n,this.h^t.h)};function Wm(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new z(n,t.h)}function _r(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new z(i,t.h)}Ko.prototype.createWebChannel=Ko.prototype.g;Be.prototype.send=Be.prototype.u;Be.prototype.open=Be.prototype.m;Be.prototype.close=Be.prototype.close;ia.NO_ERROR=0;ia.TIMEOUT=8;ia.HTTP_ERROR=6;fy.COMPLETE="complete";py.EventType=ts;ts.OPEN="a";ts.CLOSE="b";ts.ERROR="c";ts.MESSAGE="d";pe.prototype.listen=pe.prototype.O;ee.prototype.listenOnce=ee.prototype.P;ee.prototype.getLastError=ee.prototype.Sa;ee.prototype.getLastErrorCode=ee.prototype.Ia;ee.prototype.getStatus=ee.prototype.da;ee.prototype.getResponseJson=ee.prototype.Wa;ee.prototype.getResponseText=ee.prototype.ja;ee.prototype.send=ee.prototype.ha;ee.prototype.setWithCredentials=ee.prototype.Oa;Xe.prototype.digest=Xe.prototype.l;Xe.prototype.reset=Xe.prototype.reset;Xe.prototype.update=Xe.prototype.j;z.prototype.add=z.prototype.add;z.prototype.multiply=z.prototype.R;z.prototype.modulo=z.prototype.gb;z.prototype.compare=z.prototype.X;z.prototype.toNumber=z.prototype.ea;z.prototype.toString=z.prototype.toString;z.prototype.getBits=z.prototype.D;z.fromNumber=dt;z.fromString=Yy;var Jy=Ze.createWebChannelTransport=function(){return new Ko},Xy=Ze.getStatEventTarget=function(){return ra()},da=Ze.ErrorCode=ia,Zy=Ze.EventType=fy,ev=Ze.Event=Nn,yh=Ze.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},RD=Ze.FetchXmlHttpFactory=is,as=Ze.WebChannel=py,tv=Ze.XhrIo=ee,nv=Ze.Md5=Xe,xn=Ze.Integer=z;var rv="@firebase/firestore";var me=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};me.UNAUTHENTICATED=new me(null),me.GOOGLE_CREDENTIALS=new me("google-credentials-uid"),me.FIRST_PARTY=new me("first-party-uid"),me.MOCK_USER=new me("mock-user");var qr="10.11.0";var jn=new Qt("@firebase/firestore");function cs(){return jn.logLevel}function v(t,...e){if(jn.logLevel<=F.DEBUG){let n=e.map(of);jn.debug(`Firestore (${qr}): ${t}`,...n)}}function _t(t,...e){if(jn.logLevel<=F.ERROR){let n=e.map(of);jn.error(`Firestore (${qr}): ${t}`,...n)}}function kr(t,...e){if(jn.logLevel<=F.WARN){let n=e.map(of);jn.warn(`Firestore (${qr}): ${t}`,...n)}}function of(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function C(t="Unexpected state"){let e=`FIRESTORE (${qr}) INTERNAL ASSERTION FAILED: `+t;throw _t(e),new Error(e)}function K(t,e){t||C()}function N(t,e){return t}var g={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},_=class extends Ue{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ya=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Eh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(me.UNAUTHENTICATED))}shutdown(){}},Th=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Sh=class{constructor(e){this.t=e,this.currentUser=me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new gt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>d(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{v("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(v("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new gt)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(v("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new ya(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new me(e)}},bh=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Ah=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new bh(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(me.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ch=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&v("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,v("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{v("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):v("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(K(typeof n.token=="string"),this.R=n.token,new Ch(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function _A(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var va=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_A(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function B(t,e){return t<e?-1:t>e?1:0}function Nr(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ee=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _(g.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _(g.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?B(this.nanoseconds,e.nanoseconds):B(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var x=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ee(0,0))}static max(){return new t(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _a=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&C(),r===void 0?r=e.length-n:r>e.length-n&&C(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},J=class t extends _a{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new _(g.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},IA=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$e=class t extends _a{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return IA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new _(g.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _(g.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new _(g.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var b=class t{constructor(e){this.path=e}static fromPath(e){return new t(J.fromString(e))}static fromName(e){return new t(J.fromString(e).popFirst(5))}static empty(){return new t(J.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&J.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return J.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new J(e.slice()))}};var Ph=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Ph.UNKNOWN_ID=-1;function wA(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=x.fromTimestamp(r===1e9?new Ee(n+1,0):new Ee(n,r));return new Bn(i,b.empty(),e)}function EA(t){return new Bn(t.readTime,t.key,-1)}var Bn=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(x.min(),b.empty(),-1)}static max(){return new t(x.max(),b.empty(),-1)}};function TA(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=b.comparator(t.documentKey,e.documentKey),n!==0?n:B(t.largestBatchId,e.largestBatchId))}var SA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Cs(t){return d(this,null,function*(){if(t.code!==g.FAILED_PRECONDITION||t.message!==SA)throw t;v("LocalStore","Unexpectedly lost primary lease")})}var m=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&C(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var kh=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new gt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fn(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=af(r.target.error);this.V.reject(new Fn(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new Fn(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(v("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new xh(n)}},Ia=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Z())===12.2&&_t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return v("SimpleDb","Removing database:",e),On(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fo())return!1;if(t.C())return!0;let e=Z(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return d(this,null,function*(){return this.db||(v("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new Fn(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new _(g.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new _(g.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Fn(e,o))},i.onupgradeneeded=s=>{v("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{v("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.L&&(this.db.onversionchange=n=>this.L(n)),this.db})}B(e){this.L=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return d(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=kh.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),m.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(v("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Nh=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return On(this.k.delete())}},Fn=class extends _{constructor(e,n){super(g.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Rs(t){return t.name==="IndexedDbTransactionError"}var xh=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(v("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(v("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),On(r)}add(e){return v("SimpleDb","ADD",this.store.name,e,e),On(this.store.add(e))}get(e){return On(this.store.get(e)).next(n=>(n===void 0&&(n=null),v("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return v("SimpleDb","DELETE",this.store.name,e),On(this.store.delete(e))}count(){return v("SimpleDb","COUNT",this.store.name),On(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new m((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new m((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){v("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new m((r,i)=>{n.onerror=s=>{let o=af(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new m((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Nh(a),u=n(a.primaryKey,a.value,c);if(u instanceof m){let l=u.catch(h=>(c.done(),m.reject(h)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>m.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function On(t){return new m((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=af(r.target.error);n(i)}})}var iv=!1;function af(t){let e=Ia.S(Z());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new _("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iv||(iv=!0,setTimeout(()=>{throw r},0)),r}}return t}var Vv=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function Ya(t){return t==null}function gs(t){return t===0&&1/t==-1/0}function bA(t){return typeof t=="number"&&Number.isInteger(t)&&!gs(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var AA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FD=[...AA,"documentOverlays"],CA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RA=CA,UD=[...RA,"indexConfiguration","indexState","indexEntries"];function sv(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fv(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ne=class t{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rr(this.root,e,this.comparator,!0)}},Rr=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},mt=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw C();let e=this.left.check();if(e!==this.right.check())throw C();return e+(this.isRed()?0:1)}};mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw C()}get value(){throw C()}get color(){throw C()}get left(){throw C()}get right(){throw C()}copy(e,n,r,i,s){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Re=class t{constructor(e){this.comparator=e,this.data=new ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wa(this.data.getIterator())}getIteratorFrom(e){return new wa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},wa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var pt=class t{constructor(e){this.fields=e,e.sort($e.comparator)}static empty(){return new t([])}unionWith(e){let n=new Re($e.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Nr(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ea=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var xe=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ea("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return B(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};xe.EMPTY_BYTE_STRING=new xe("");var PA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ot(t){if(K(!!t),typeof t=="string"){let e=0,n=PA.exec(t);if(K(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:te(t.seconds),nanos:te(t.nanos)}}function te(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function on(t){return typeof t=="string"?xe.fromBase64String(t):xe.fromUint8Array(t)}function cf(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function uf(t){let e=t.mapValue.fields.__previous_value__;return cf(e)?uf(e):e}function ms(t){let e=Ot(t.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var Oh=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ta=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var fa={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $n(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cf(t)?4:Uv(t)?9007199254740991:10:C()}function It(t,e){if(t===e)return!0;let n=$n(t);if(n!==$n(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ms(t).isEqual(ms(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ot(i.timestampValue),a=Ot(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return on(i.bytesValue).isEqual(on(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return te(i.geoPointValue.latitude)===te(s.geoPointValue.latitude)&&te(i.geoPointValue.longitude)===te(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return te(i.integerValue)===te(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=te(i.doubleValue),a=te(s.doubleValue);return o===a?gs(o)===gs(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Nr(t.arrayValue.values||[],e.arrayValue.values||[],It);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(sv(o)!==sv(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!It(o[c],a[c])))return!1;return!0}(t,e);default:return C()}}function ys(t,e){return(t.values||[]).find(n=>It(n,e))!==void 0}function xr(t,e){if(t===e)return 0;let n=$n(t),r=$n(e);if(n!==r)return B(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return B(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=te(s.integerValue||s.doubleValue),c=te(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ov(t.timestampValue,e.timestampValue);case 4:return ov(ms(t),ms(e));case 5:return B(t.stringValue,e.stringValue);case 6:return function(s,o){let a=on(s),c=on(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=B(a[u],c[u]);if(l!==0)return l}return B(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=B(te(s.latitude),te(o.latitude));return a!==0?a:B(te(s.longitude),te(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=xr(a[u],c[u]);if(l)return l}return B(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===fa.mapValue&&o===fa.mapValue)return 0;if(s===fa.mapValue)return 1;if(o===fa.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let h=0;h<c.length&&h<l.length;++h){let f=B(c[h],l[h]);if(f!==0)return f;let p=xr(a[c[h]],u[l[h]]);if(p!==0)return p}return B(c.length,l.length)}(t.mapValue,e.mapValue);default:throw C()}}function ov(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return B(t,e);let n=Ot(t),r=Ot(e),i=B(n.seconds,r.seconds);return i!==0?i:B(n.nanos,r.nanos)}function Or(t){return Mh(t)}function Mh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ot(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return on(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return b.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Mh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Mh(n.fields[o])}`;return i+"}"}(t.mapValue):C()}function av(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Lh(t){return!!t&&"integerValue"in t}function lf(t){return!!t&&"arrayValue"in t}function cv(t){return!!t&&"nullValue"in t}function uv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ga(t){return!!t&&"mapValue"in t}function ls(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ls(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ls(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Uv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var et=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ga(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ls(n)}setAll(e){let n=$e.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ls(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());ga(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return It(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ga(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zr(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(ls(this.value))}};function jv(t){let e=[];return zr(t.fields,(n,r)=>{let i=new $e([n]);if(ga(r)){let s=jv(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new pt(e)}var tt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,x.min(),x.min(),x.min(),et.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,x.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,x.min(),x.min(),et.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,x.min(),x.min(),et.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(x.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=et.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=x.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Mr=class{constructor(e,n){this.position=e,this.inclusive=n}};function lv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=b.comparator(b.fromName(o.referenceValue),n.key):r=xr(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!It(t.position[n],e.position[n]))return!1;return!0}var qn=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function DA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Sa=class{},ue=class t extends Sa{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fh(e,n,r):n==="array-contains"?new Bh(e,r):n==="in"?new $h(e,r):n==="not-in"?new qh(e,r):n==="array-contains-any"?new zh(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uh(e,r):new jh(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xr(n,this.value)):n!==null&&$n(this.value)===$n(n)&&this.matchesComparison(xr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return C()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nt=class t extends Sa{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Bv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Bv(t){return t.op==="and"}function $v(t){return kA(t)&&Bv(t)}function kA(t){for(let e of t.filters)if(e instanceof nt)return!1;return!0}function Vh(t){if(t instanceof ue)return t.field.canonicalString()+t.op.toString()+Or(t.value);if($v(t))return t.filters.map(e=>Vh(e)).join(",");{let e=t.filters.map(n=>Vh(n)).join(",");return`${t.op}(${e})`}}function qv(t,e){return t instanceof ue?function(r,i){return i instanceof ue&&r.op===i.op&&r.field.isEqual(i.field)&&It(r.value,i.value)}(t,e):t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&qv(o,i.filters[a]),!0):!1}(t,e):void C()}function zv(t){return t instanceof ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Or(n.value)}`}(t):t instanceof nt?function(n){return n.op.toString()+" {"+n.getFilters().map(zv).join(" ,")+"}"}(t):"Filter"}var Fh=class extends ue{constructor(e,n,r){super(e,n,r),this.key=b.fromName(r.referenceValue)}matches(e){let n=b.comparator(e.key,this.key);return this.matchesComparison(n)}},Uh=class extends ue{constructor(e,n){super(e,"in",n),this.keys=Gv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},jh=class extends ue{constructor(e,n){super(e,"not-in",n),this.keys=Gv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Gv(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>b.fromName(r.referenceValue))}var Bh=class extends ue{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return lf(n)&&ys(n.arrayValue,this.value)}},$h=class extends ue{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&ys(this.value.arrayValue,n)}},qh=class extends ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(ys(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!ys(this.value.arrayValue,n)}},zh=class extends ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!lf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ys(this.value.arrayValue,r))}};var Gh=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function dv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gh(t,e,n,r,i,s,o)}function hf(t){let e=N(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Vh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ya(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Or(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Or(r)).join(",")),e.ce=n}return e.ce}function df(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hv(t.startAt,e.startAt)&&hv(t.endAt,e.endAt)}function Hh(t){return b.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var an=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function NA(t,e,n,r,i,s,o,a){return new an(t,e,n,r,i,s,o,a)}function ff(t){return new an(t)}function fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hv(t){return t.collectionGroup!==null}function hs(t){let e=N(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Re($e.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new qn(s,r))}),n.has($e.keyField().canonicalString())||e.le.push(new qn($e.keyField(),r))}return e.le}function yt(t){let e=N(t);return e.he||(e.he=xA(e,hs(t))),e.he}function xA(t,e){if(t.limitType==="F")return dv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new qn(i.field,s)});let n=t.endAt?new Mr(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mr(t.startAt.position,t.startAt.inclusive):null;return dv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wh(t,e){let n=t.filters.concat([e]);return new an(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ba(t,e,n){return new an(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ja(t,e){return df(yt(t),yt(e))&&t.limitType===e.limitType}function Wv(t){return`${hf(yt(t))}|lt:${t.limitType}`}function br(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zv(i)).join(", ")}]`),Ya(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Or(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Or(i)).join(",")),`Target(${r})`}(yt(t))}; limitType=${t.limitType})`}function Xa(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):b.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of hs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=lv(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,hs(r),i)||r.endAt&&!function(o,a,c){let u=lv(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,hs(r),i))}(t,e)}function OA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Kv(t){return(e,n)=>{let r=!1;for(let i of hs(t)){let s=MA(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MA(t,e,n){let r=t.field.isKeyField()?b.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?xr(c,u):C()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return C()}}var cn=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Fv(this.inner)}size(){return this.innerSize}};var LA=new ne(b.comparator);function Mt(){return LA}var Qv=new ne(b.comparator);function us(...t){let e=Qv;for(let n of t)e=e.insert(n.key,n);return e}function Yv(t){let e=Qv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Mn(){return ds()}function Jv(){return ds()}function ds(){return new cn(t=>t.toString(),(t,e)=>t.isEqual(e))}var VA=new ne(b.comparator),FA=new Re(b.comparator);function U(...t){let e=FA;for(let n of t)e=e.add(n);return e}var UA=new Re(B);function jA(){return UA}function Xv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gs(e)?"-0":e}}function Zv(t){return{integerValue:""+t}}function BA(t,e){return bA(e)?Zv(e):Xv(t,e)}var Lr=class{constructor(){this._=void 0}};function $A(t,e,n){return t instanceof Vr?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&cf(s)&&(s=uf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof zn?t_(t,e):t instanceof Gn?n_(t,e):function(i,s){let o=e_(i,s),a=pv(o)+pv(i.Ie);return Lh(o)&&Lh(i.Ie)?Zv(a):Xv(i.serializer,a)}(t,e)}function qA(t,e,n){return t instanceof zn?t_(t,e):t instanceof Gn?n_(t,e):n}function e_(t,e){return t instanceof Fr?function(r){return Lh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Vr=class extends Lr{},zn=class extends Lr{constructor(e){super(),this.elements=e}};function t_(t,e){let n=r_(e);for(let r of t.elements)n.some(i=>It(i,r))||n.push(r);return{arrayValue:{values:n}}}var Gn=class extends Lr{constructor(e){super(),this.elements=e}};function n_(t,e){let n=r_(e);for(let r of t.elements)n=n.filter(i=>!It(i,r));return{arrayValue:{values:n}}}var Fr=class extends Lr{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function pv(t){return te(t.integerValue||t.doubleValue)}function r_(t){return lf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zA(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof zn&&i instanceof zn||r instanceof Gn&&i instanceof Gn?Nr(r.elements,i.elements,It):r instanceof Fr&&i instanceof Fr?It(r.Ie,i.Ie):r instanceof Vr&&i instanceof Vr}(t.transform,e.transform)}var Kh=class{constructor(e,n){this.version=e,this.transformResults=n}},Un=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ma(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ur=class{};function i_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Aa(t.key,Un.none()):new Hn(t.key,t.data,Un.none());{let n=t.data,r=et.empty(),i=new Re($e.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Lt(t.key,r,new pt(i.toArray()),Un.none())}}function GA(t,e,n){t instanceof Hn?function(i,s,o){let a=i.value.clone(),c=mv(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Lt?function(i,s,o){if(!ma(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=mv(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(s_(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fs(t,e,n,r){return t instanceof Hn?function(s,o,a,c){if(!ma(s.precondition,o))return a;let u=s.value.clone(),l=yv(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Lt?function(s,o,a,c){if(!ma(s.precondition,o))return a;let u=yv(s.fieldTransforms,c,o),l=o.data;return l.setAll(s_(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return ma(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function HA(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=e_(r.transform,i||null);s!=null&&(n===null&&(n=et.empty()),n.set(r.field,s))}return n||null}function gv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Nr(r,i,(s,o)=>zA(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Hn=class extends Ur{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Lt=class extends Ur{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function s_(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function mv(t,e,n){let r=new Map;K(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,qA(o,a,n[i]))}return r}function yv(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,$A(s,o,e))}return r}var Aa=class extends Ur{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Qh=class extends Ur{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Yh=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&GA(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=fs(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=fs(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Jv();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=i_(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(x.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),U())}isEqual(e){return this.batchId===e.batchId&&Nr(this.mutations,e.mutations,(n,r)=>gv(n,r))&&Nr(this.baseMutations,e.baseMutations,(n,r)=>gv(n,r))}},Jh=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){K(e.mutations.length===r.length);let i=function(){return VA}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Xh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Zh=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ae,j;function WA(t){switch(t){default:return C();case g.CANCELLED:case g.UNKNOWN:case g.DEADLINE_EXCEEDED:case g.RESOURCE_EXHAUSTED:case g.INTERNAL:case g.UNAVAILABLE:case g.UNAUTHENTICATED:return!1;case g.INVALID_ARGUMENT:case g.NOT_FOUND:case g.ALREADY_EXISTS:case g.PERMISSION_DENIED:case g.FAILED_PRECONDITION:case g.ABORTED:case g.OUT_OF_RANGE:case g.UNIMPLEMENTED:case g.DATA_LOSS:return!0}}function o_(t){if(t===void 0)return _t("GRPC error has no .code"),g.UNKNOWN;switch(t){case ae.OK:return g.OK;case ae.CANCELLED:return g.CANCELLED;case ae.UNKNOWN:return g.UNKNOWN;case ae.DEADLINE_EXCEEDED:return g.DEADLINE_EXCEEDED;case ae.RESOURCE_EXHAUSTED:return g.RESOURCE_EXHAUSTED;case ae.INTERNAL:return g.INTERNAL;case ae.UNAVAILABLE:return g.UNAVAILABLE;case ae.UNAUTHENTICATED:return g.UNAUTHENTICATED;case ae.INVALID_ARGUMENT:return g.INVALID_ARGUMENT;case ae.NOT_FOUND:return g.NOT_FOUND;case ae.ALREADY_EXISTS:return g.ALREADY_EXISTS;case ae.PERMISSION_DENIED:return g.PERMISSION_DENIED;case ae.FAILED_PRECONDITION:return g.FAILED_PRECONDITION;case ae.ABORTED:return g.ABORTED;case ae.OUT_OF_RANGE:return g.OUT_OF_RANGE;case ae.UNIMPLEMENTED:return g.UNIMPLEMENTED;case ae.DATA_LOSS:return g.DATA_LOSS;default:return C()}}(j=ae||(ae={}))[j.OK=0]="OK",j[j.CANCELLED=1]="CANCELLED",j[j.UNKNOWN=2]="UNKNOWN",j[j.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",j[j.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",j[j.NOT_FOUND=5]="NOT_FOUND",j[j.ALREADY_EXISTS=6]="ALREADY_EXISTS",j[j.PERMISSION_DENIED=7]="PERMISSION_DENIED",j[j.UNAUTHENTICATED=16]="UNAUTHENTICATED",j[j.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",j[j.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",j[j.ABORTED=10]="ABORTED",j[j.OUT_OF_RANGE=11]="OUT_OF_RANGE",j[j.UNIMPLEMENTED=12]="UNIMPLEMENTED",j[j.INTERNAL=13]="INTERNAL",j[j.UNAVAILABLE=14]="UNAVAILABLE",j[j.DATA_LOSS=15]="DATA_LOSS";var vv=null;function KA(){return new TextEncoder}var QA=new xn([4294967295,4294967295],0);function _v(t){let e=KA().encode(t),n=new nv;return n.update(e),new Uint8Array(n.digest())}function Iv(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new xn([n,r],0),new xn([i,s],0)]}var ed=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ln(`Invalid padding: ${n}`);if(r<0)throw new Ln(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ln(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ln(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=xn.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(xn.fromNumber(r)));return i.compare(QA)===1&&(i=new xn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=_v(e),[r,i]=Iv(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=_v(e),[r,i]=Iv(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Ln=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ca=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,vs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(x.min(),i,new ne(B),Mt(),U())}},vs=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,U(),U(),U())}};var Pr=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Ra=class{constructor(e,n){this.targetId=e,this.fe=n}},Pa=class{constructor(e,n,r=xe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Da=class{constructor(){this.ge=0,this.pe=Ev(),this.ye=xe.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=U(),n=U(),r=U();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:C()}}),new vs(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=Ev()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,K(this.ge>=0)}Le(){this.Se=!0,this.we=!0}},td=class{constructor(e){this.Be=e,this.ke=new Map,this.qe=Mt(),this.Qe=wv(),this.Ke=new ne(B)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:C()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(Hh(s))if(r===0){let o=new b(s.path);this.We(n,o,tt.newNoDocument(o,x.min()))}else K(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}vv?.tt(function(l,h,f,p,T){var S,w,L,W,re,Te;let rt={localCacheCount:l,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},de=h.unchangedNames;return de&&(rt.bloomFilter={applied:T===0,hashCount:(S=de?.hashCount)!==null&&S!==void 0?S:0,bitmapLength:(W=(L=(w=de?.bits)===null||w===void 0?void 0:w.bitmap)===null||L===void 0?void 0:L.length)!==null&&W!==void 0?W:0,padding:(Te=(re=de?.bits)===null||re===void 0?void 0:re.padding)!==null&&Te!==void 0?Te:0,mightContain:Et=>{var Yn;return(Yn=p?.mightContain(Et))!==null&&Yn!==void 0&&Yn}}),rt}(o,e.fe,this.Be.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=on(r).toUint8Array()}catch(c){if(c instanceof Ea)return kr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new ed(o,i,s)}catch(c){return kr(c instanceof Ln?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Be.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Hh(a.target)){let c=new b(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,tt.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=U();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Ca(e,n,this.Ke,this.qe,r);return this.qe=Mt(),this.Qe=wv(),this.Ke=new ne(B),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Da,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Re(B),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||v("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Da),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}};function wv(){return new ne(b.comparator)}function Ev(){return new ne(b.comparator)}var YA={asc:"ASCENDING",desc:"DESCENDING"},JA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XA={and:"AND",or:"OR"},nd=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function rd(t,e){return t.useProto3Json||Ya(e)?e:{value:e}}function ka(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZA(t,e){return ka(t,e.toTimestamp())}function vt(t){return K(!!t),x.fromTimestamp(function(n){let r=Ot(n);return new Ee(r.seconds,r.nanos)}(t))}function pf(t,e){return id(t,e).canonicalString()}function id(t,e){let n=function(i){return new J(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c_(t){let e=J.fromString(t);return K(f_(e)),e}function sd(t,e){return pf(t.databaseId,e.path)}function vh(t,e){let n=c_(e);if(n.get(1)!==t.databaseId.projectId)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _(g.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new b(l_(n))}function u_(t,e){return pf(t.databaseId,e)}function eC(t){let e=c_(t);return e.length===4?J.emptyPath():l_(e)}function od(t){return new J(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function l_(t){return K(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Tv(t,e,n){return{name:sd(t,e),fields:n.value.mapValue.fields}}function tC(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:C()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(K(l===void 0||typeof l=="string"),xe.fromBase64String(l||"")):(K(l===void 0||l instanceof Buffer||l instanceof Uint8Array),xe.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?g.UNKNOWN:o_(u.code);return new _(l,u.message||"")}(o);n=new Pa(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=vh(t,r.document.name),s=vt(r.document.updateTime),o=r.document.createTime?vt(r.document.createTime):x.min(),a=new et({mapValue:{fields:r.document.fields}}),c=tt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Pr(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=vh(t,r.document),s=r.readTime?vt(r.readTime):x.min(),o=tt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Pr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=vh(t,r.document),s=r.removedTargetIds||[];n=new Pr([],s,i,null)}else{if(!("filter"in e))return C();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Zh(i,s),a=r.targetId;n=new Ra(a,o)}}return n}function nC(t,e){let n;if(e instanceof Hn)n={update:Tv(t,e.key,e.value)};else if(e instanceof Aa)n={delete:sd(t,e.key)};else if(e instanceof Lt)n={update:Tv(t,e.key,e.data),updateMask:hC(e.fieldMask)};else{if(!(e instanceof Qh))return C();n={verify:sd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Vr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zn)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Gn)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fr)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw C()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:ZA(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:C()}(t,e.precondition)),n}function rC(t,e){return t&&t.length>0?(K(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?vt(i.updateTime):vt(s);return o.isEqual(x.min())&&(o=vt(s)),new Kh(o,i.transformResults||[])}(n,e))):[]}function iC(t,e){return{documents:[u_(t,e.path)]}}function sC(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=u_(t,i);let s=function(u){if(u.length!==0)return d_(nt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:Ar(f.field),direction:cC(f.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=rd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function oC(t){let e=eC(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){K(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(h){let f=h_(h);return f instanceof nt&&$v(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(f=>function(T){return new qn(Cr(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Ya(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(h){let f=!!h.before,p=h.values||[];return new Mr(p,f)}(n.startAt));let u=null;return n.endAt&&(u=function(h){let f=!h.before,p=h.values||[];return new Mr(p,f)}(n.endAt)),NA(e,i,o,s,a,"F",c,u)}function aC(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return C()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Cr(n.unaryFilter.field);return ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Cr(n.unaryFilter.field);return ue.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Cr(n.unaryFilter.field);return ue.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Cr(n.unaryFilter.field);return ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return C()}}(t):t.fieldFilter!==void 0?function(n){return ue.create(Cr(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return C()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nt.create(n.compositeFilter.filters.map(r=>h_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return C()}}(n.compositeFilter.op))}(t):C()}function cC(t){return YA[t]}function uC(t){return JA[t]}function lC(t){return XA[t]}function Ar(t){return{fieldPath:t.canonicalString()}}function Cr(t){return $e.fromServerFormat(t.fieldPath)}function d_(t){return t instanceof ue?function(n){if(n.op==="=="){if(uv(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NAN"}};if(cv(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(uv(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NOT_NAN"}};if(cv(n.value))return{unaryFilter:{field:Ar(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ar(n.field),op:uC(n.op),value:n.value}}}(t):t instanceof nt?function(n){let r=n.getFilters().map(i=>d_(i));return r.length===1?r[0]:{compositeFilter:{op:lC(n.op),filters:r}}}(t):C()}function hC(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function f_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var _s=class t{constructor(e,n,r,i,s=x.min(),o=x.min(),a=xe.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ad=class{constructor(e){this.ct=e}};function dC(t){let e=oC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ba(e,e.limit,"L"):e}var Na=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(te(e.integerValue));else if("doubleValue"in e){let r=te(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),gs(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Ot(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(on(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Uv(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):C()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),b.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Na.bt=new Na;var cd=class{constructor(){this._n=new ud}addToCollectionParentIndex(e,n){return this._n.add(n),m.resolve()}getCollectionParents(e,n){return m.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return m.resolve()}deleteFieldIndex(e,n){return m.resolve()}deleteAllFieldIndexes(e){return m.resolve()}createTargetIndexes(e,n){return m.resolve()}getDocumentsMatchingTarget(e,n){return m.resolve(null)}getIndexType(e,n){return m.resolve(0)}getFieldIndexes(e,n){return m.resolve([])}getNextCollectionGroupToUpdate(e){return m.resolve(null)}getMinOffset(e,n){return m.resolve(Bn.min())}getMinOffsetFromCollectionGroup(e,n){return m.resolve(Bn.min())}updateCollectionGroup(e,n,r){return m.resolve()}updateIndexEntries(e,n){return m.resolve()}},ud=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Re(J.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Re(J.comparator)).toArray()}};var BD=new Uint8Array(0);var ft=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ft.DEFAULT_COLLECTION_PERCENTILE=10,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ft.DEFAULT=new ft(41943040,ft.DEFAULT_COLLECTION_PERCENTILE,ft.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ft.DISABLED=new ft(-1,0,0);var Is=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var ld=class{constructor(){this.changes=new cn(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?m.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hd=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var dd=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&fs(r.mutation,i,pt.empty(),Ee.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,U()).next(()=>r))}getLocalViewOfDocuments(e,n,r=U()){let i=Mn();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=us();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Mn();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,U()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Mt(),o=ds(),a=function(){return ds()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Lt)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),fs(l.mutation,u,l.mutation.getFieldMask(),Ee.now())):o.set(u.key,pt.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var h;return a.set(u,new hd(l,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ds(),i=new ne((o,a)=>o-a),s=U();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||pt.empty();l=a.applyToLocalView(u,l),r.set(c,l);let h=(i.get(a.batchId)||U()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,h=Jv();l.forEach(f=>{if(!s.has(f)){let p=i_(n.get(f),r.get(f));p!==null&&h.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return m.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return b.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):m.resolve(Mn()),a=-1,c=s;return o.next(u=>m.forEach(u,(l,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(l)?m.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,U())).next(l=>({batchId:a,changes:Yv(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new b(n)).next(r=>{let i=us();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=us();return this.indexManager.getCollectionParents(e,s).next(a=>m.forEach(a,c=>{let u=function(h,f){return new an(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,tt.newInvalidDocument(l)))});let a=us();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&fs(l.mutation,u,pt.empty(),Ee.now()),Xa(n,u)&&(a=a.insert(c,u))}),a})}};var fd=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return m.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vt(i.createTime)}}(n)),m.resolve()}getNamedQuery(e,n){return m.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:dC(i.bundledQuery),readTime:vt(i.readTime)}}(n)),m.resolve()}};var pd=class{constructor(){this.overlays=new ne(b.comparator),this.hr=new Map}getOverlay(e,n){return m.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Mn();return m.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),m.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),m.resolve()}getOverlaysForCollection(e,n,r){let i=Mn(),s=n.length+1,o=new b(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return m.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ne((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=Mn(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=Mn(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return m.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xh(n,r));let s=this.hr.get(n);s===void 0&&(s=U(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var ws=class{constructor(){this.Pr=new Re(ce.Ir),this.Tr=new Re(ce.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ce(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ce(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new b(new J([])),r=new ce(n,e),i=new ce(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new b(new J([])),r=new ce(n,e),i=new ce(n,e+1),s=U();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ce(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ce=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return b.comparator(e.key,n.key)||B(e.pr,n.pr)}static Er(e,n){return B(e.pr,n.pr)||b.comparator(e.key,n.key)}};var gd=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Re(ce.Ir)}checkEmpty(e){return m.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Yh(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new ce(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return m.resolve(o)}lookupMutationBatch(e,n){return m.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return m.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return m.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return m.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ce(n,0),i=new ce(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),m.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Re(B);return n.forEach(i=>{let s=new ce(i,0),o=new ce(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),m.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;b.isDocumentKey(s)||(s=s.child(""));let o=new ce(new b(s),0),a=new Re(B);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),m.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){K(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return m.forEach(n.mutations,i=>{let s=new ce(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ce(n,0),i=this.wr.firstAfterOrEqual(r);return m.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,m.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var md=class{constructor(e){this.vr=e,this.docs=function(){return new ne(b.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return m.resolve(r?r.document.mutableCopy():tt.newInvalidDocument(n))}getEntries(e,n){let r=Mt();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tt.newInvalidDocument(i))}),m.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Mt(),o=n.path,a=new b(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||TA(EA(l),r)<=0||(i.has(l.key)||Xa(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return m.resolve(s)}getAllFromCollectionGroup(e,n,r,i){C()}Fr(e,n){return m.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new yd(this)}getSize(e){return m.resolve(this.size)}},yd=class extends ld{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),m.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var vd=class{constructor(e){this.persistence=e,this.Mr=new cn(n=>hf(n),df),this.lastRemoteSnapshotVersion=x.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ws,this.targetCount=0,this.Lr=Is.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),m.resolve()}getLastRemoteSnapshotVersion(e){return m.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return m.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),m.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),m.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Is(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,m.resolve()}updateTargetData(e,n){return this.qn(n),m.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,m.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),m.waitFor(s).next(()=>i)}getTargetCount(e){return m.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return m.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),m.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),m.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),m.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return m.resolve(r)}containsKey(e,n){return m.resolve(this.Nr.containsKey(n))}};var _d=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Vv(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new vd(this),this.indexManager=new cd,this.remoteDocumentCache=function(i){return new md(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new ad(n),this.$r=new fd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pd,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new gd(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){v("MemoryPersistence","Starting transaction:",e);let i=new Id(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return m.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Id=class extends Dh{constructor(e){super(),this.currentSequenceNumber=e}},wd=class t{constructor(e){this.persistence=e,this.zr=new ws,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw C()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),m.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),m.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),m.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return m.forEach(this.Jr,r=>{let i=b.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,x.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return m.or([()=>m.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Ed=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=U(),i=U();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Td=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Sd=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Ag()?8:Ia.v(Z())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Td;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(cs()<=F.DEBUG&&v("QueryEngine","SDK will not create cache indexes for query:",br(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),m.resolve()):(cs()<=F.DEBUG&&v("QueryEngine","Query:",br(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(cs()<=F.DEBUG&&v("QueryEngine","The SDK decides to create cache indexes for query:",br(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yt(n))):m.resolve())}ji(e,n){if(fv(n))return m.resolve(null);let r=yt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ba(n,null,"F"),r=yt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=U(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,ba(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return fv(n)||i.isEqual(x.min())?m.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?m.resolve(null):(cs()<=F.DEBUG&&v("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),br(n)),this.es(e,o,n,wA(i,-1)).next(a=>a))})}Zi(e,n){let r=new Re(Kv(e));return n.forEach((i,s)=>{Xa(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return cs()<=F.DEBUG&&v("QueryEngine","Using full collection scan to execute query:",br(n)),this.zi.getDocumentsMatchingQuery(e,n,Bn.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var bd=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new ne(B),this.rs=new cn(s=>hf(s),df),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dd(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function fC(t,e,n,r){return new bd(t,e,n,r)}function p_(t,e){return d(this,null,function*(){let n=N(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=U();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function pC(t,e){let n=N(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let h=u.batch,f=h.keys(),p=m.resolve();return f.forEach(T=>{p=p.next(()=>l.getEntry(c,T)).next(S=>{let w=u.docVersions.get(T);K(w!==null),S.version.compareTo(w)<0&&(h.applyToRemoteDocument(S,u),S.isValidDocument()&&(S.setReadTime(u.commitVersion),l.addEntry(S)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=U();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function g_(t){let e=N(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function gC(t,e){let n=N(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,h)=>{let f=i.get(h);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,h).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,h)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(xe.EMPTY_BYTE_STRING,x.min()).withLastLimboFreeSnapshotVersion(x.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(h,p),function(S,w,L){return S.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(f,p,l)&&a.push(n.Qr.updateTargetData(s,p))});let c=Mt(),u=U();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(mC(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(x.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(h=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return m.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function mC(t,e,n){let r=U(),i=U();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Mt();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(x.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):v("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function yC(t,e){let n=N(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function vC(t,e){let n=N(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,m.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new _s(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Ad(t,e,n){return d(this,null,function*(){let r=N(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Rs(o))throw o;v("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function Sv(t,e,n){let r=N(t),i=x.min(),s=U();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let h=N(c),f=h.rs.get(l);return f!==void 0?m.resolve(h.ns.get(f)):h.Qr.getTargetData(u,l)}(r,o,yt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:x.min(),n?s:U())).next(a=>(_C(r,OA(e),a),{documents:a,hs:s})))}function _C(t,e,n){let r=t.ss.get(e)||x.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var xa=class{constructor(){this.activeTargetIds=jA()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Cd=class{constructor(){this.no=new xa,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new xa,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Rd=class{io(e){}shutdown(){}};var Oa=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){v("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){v("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var pa=null;function _h(){return pa===null?pa=function(){return 268435456+Math.round(2147483648*Math.random())}():pa++,"0x"+pa.toString(16)}var IC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Pd=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Ce="WebChannelConnection",Dd=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=_h(),c=this.bo(n,r.toUriEncodedString());v("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(v("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw kr("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qr}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=IC[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=_h();return new Promise((o,a)=>{let c=new tv;c.setWithCredentials(!0),c.listenOnce(Zy.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case da.NO_ERROR:let l=c.getResponseJson();v(Ce,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case da.TIMEOUT:v(Ce,`RPC '${e}' ${s} timed out`),a(new _(g.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:let h=c.getStatus();if(v(Ce,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let T=function(w){let L=w.toLowerCase().replace(/_/g,"-");return Object.values(g).indexOf(L)>=0?L:g.UNKNOWN}(p.status);a(new _(T,p.message))}else a(new _(g.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new _(g.UNAVAILABLE,"Connection failed."));break;default:C()}}finally{v(Ce,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);v(Ce,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=_h(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jy(),a=Xy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");v(Ce,`Creating RPC '${e}' stream ${i}: ${l}`,c);let h=o.createWebChannel(l,c),f=!1,p=!1,T=new Pd({lo:w=>{p?v(Ce,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(f||(v(Ce,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),v(Ce,`RPC '${e}' stream ${i} sending:`,w),h.send(w))},ho:()=>h.close()}),S=(w,L,W)=>{w.listen(L,re=>{try{W(re)}catch(Te){setTimeout(()=>{throw Te},0)}})};return S(h,as.EventType.OPEN,()=>{p||v(Ce,`RPC '${e}' stream ${i} transport opened.`)}),S(h,as.EventType.CLOSE,()=>{p||(p=!0,v(Ce,`RPC '${e}' stream ${i} transport closed`),T.Vo())}),S(h,as.EventType.ERROR,w=>{p||(p=!0,kr(Ce,`RPC '${e}' stream ${i} transport errored:`,w),T.Vo(new _(g.UNAVAILABLE,"The operation could not be completed")))}),S(h,as.EventType.MESSAGE,w=>{var L;if(!p){let W=w.data[0];K(!!W);let re=W,Te=re.error||((L=re[0])===null||L===void 0?void 0:L.error);if(Te){v(Ce,`RPC '${e}' stream ${i} received error:`,Te);let rt=Te.status,de=function(Kr){let ks=ae[Kr];if(ks!==void 0)return o_(ks)}(rt),Et=Te.message;de===void 0&&(de=g.INTERNAL,Et="Unknown error status: "+rt+" with message "+Te.message),p=!0,T.Vo(new _(de,Et)),h.close()}else v(Ce,`RPC '${e}' stream ${i} received:`,W),T.mo(W)}}),S(a,ev.STAT_EVENT,w=>{w.stat===yh.PROXY?v(Ce,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===yh.NOPROXY&&v(Ce,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.Ro()},0),T}};function Ih(){return typeof document<"u"?document:null}function Za(t){return new nd(t,!0)}var Ma=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&v("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var La=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Ma(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return d(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return d(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return d(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===g.RESOURCE_EXHAUSTED?(_t(n.toString()),_t("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===g.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new _(g.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>d(this,null,function*(){this.state=0,this.start()}))}__(e){return v("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(v("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},kd=class extends La{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=tC(this.serializer,e),r=function(s){if(!("targetChange"in s))return x.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?x.min():o.readTime?vt(o.readTime):x.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=od(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=Hh(c)?{documents:iC(s,c)}:{query:sC(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=a_(s,o.resumeToken);let u=rd(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(x.min())>0){a.readTime=ka(s,o.snapshotVersion.toTimestamp());let u=rd(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=aC(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=od(this.serializer),n.removeTarget=e,this.t_(n)}},Nd=class extends La{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=rC(e.writeResults,e.commitTime),r=vt(e.commitTime);return this.listener.T_(r,n)}return K(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=od(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>nC(this.serializer,r))};this.t_(n)}};var xd=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,id(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new _(g.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,id(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===g.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _(g.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var Od=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(_t(n),this.g_=!1):v("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Md=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>d(this,null,function*(){Wn(this)&&(v("RemoteStore","Restarting streams for network reachability change."),yield function(c){return d(this,null,function*(){let u=N(c);u.v_.add(4),yield Ps(u),u.x_.set("Unknown"),u.v_.delete(4),yield ec(u)})}(this))}))}),this.x_=new Od(r,i)}};function ec(t){return d(this,null,function*(){if(Wn(t))for(let e of t.F_)yield e(!0)})}function Ps(t){return d(this,null,function*(){for(let e of t.F_)yield e(!1)})}function m_(t,e){let n=N(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),vf(n)?yf(n):Gr(n).Jo()&&mf(n,e))}function gf(t,e){let n=N(t),r=Gr(n);n.C_.delete(e),r.Jo()&&y_(n,e),n.C_.size===0&&(r.Jo()?r.Xo():Wn(n)&&n.x_.set("Unknown"))}function mf(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(x.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gr(t).c_(e)}function y_(t,e){t.O_.Oe(e),Gr(t).l_(e)}function yf(t){t.O_=new td({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Gr(t).start(),t.x_.p_()}function vf(t){return Wn(t)&&!Gr(t).Ho()&&t.C_.size>0}function Wn(t){return N(t).v_.size===0}function v_(t){t.O_=void 0}function wC(t){return d(this,null,function*(){t.C_.forEach((e,n)=>{mf(t,e)})})}function EC(t,e){return d(this,null,function*(){v_(t),vf(t)?(t.x_.S_(e),yf(t)):t.x_.set("Unknown")})}function TC(t,e,n){return d(this,null,function*(){if(t.x_.set("Online"),e instanceof Pa&&e.state===2&&e.cause)try{yield function(i,s){return d(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){v("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Va(t,r)}else if(e instanceof Pr?t.O_.$e(e):e instanceof Ra?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(x.min()))try{let r=yield g_(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(xe.EMPTY_BYTE_STRING,l.snapshotVersion)),y_(s,c);let h=new _s(l.target,c,u,l.sequenceNumber);mf(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){v("RemoteStore","Failed to raise snapshot:",r),yield Va(t,r)}})}function Va(t,e,n){return d(this,null,function*(){if(!Rs(e))throw e;t.v_.add(1),yield Ps(t),t.x_.set("Offline"),n||(n=()=>g_(t.localStore)),t.asyncQueue.enqueueRetryable(()=>d(this,null,function*(){v("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield ec(t)}))})}function __(t,e){return e().catch(n=>Va(t,n,e))}function tc(t){return d(this,null,function*(){let e=N(t),n=un(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;SC(e);)try{let i=yield yC(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,bC(e,i)}catch(i){yield Va(e,i)}I_(e)&&w_(e)})}function SC(t){return Wn(t)&&t.D_.length<10}function bC(t,e){t.D_.push(e);let n=un(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function I_(t){return Wn(t)&&!un(t).Ho()&&t.D_.length>0}function w_(t){un(t).start()}function AC(t){return d(this,null,function*(){un(t).d_()})}function CC(t){return d(this,null,function*(){let e=un(t);for(let n of t.D_)e.I_(n.mutations)})}function RC(t,e,n){return d(this,null,function*(){let r=t.D_.shift(),i=Jh.from(r,e,n);yield __(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield tc(t)})}function PC(t,e){return d(this,null,function*(){e&&un(t).P_&&(yield function(r,i){return d(this,null,function*(){if(function(o){return WA(o)&&o!==g.ABORTED}(i.code)){let s=r.D_.shift();un(r).Zo(),yield __(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield tc(r)}})}(t,e)),I_(t)&&w_(t)})}function bv(t,e){return d(this,null,function*(){let n=N(t);n.asyncQueue.verifyOperationInProgress(),v("RemoteStore","RemoteStore received new credentials");let r=Wn(n);n.v_.add(3),yield Ps(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield ec(n)})}function DC(t,e){return d(this,null,function*(){let n=N(t);e?(n.v_.delete(2),yield ec(n)):e||(n.v_.add(2),yield Ps(n),n.x_.set("Unknown"))})}function Gr(t){return t.N_||(t.N_=function(n,r,i){let s=N(n);return s.R_(),new kd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:wC.bind(null,t),To:EC.bind(null,t),u_:TC.bind(null,t)}),t.F_.push(e=>d(this,null,function*(){e?(t.N_.Zo(),vf(t)?yf(t):t.x_.set("Unknown")):(yield t.N_.stop(),v_(t))}))),t.N_}function un(t){return t.L_||(t.L_=function(n,r,i){let s=N(n);return s.R_(),new Nd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:AC.bind(null,t),To:PC.bind(null,t),E_:CC.bind(null,t),T_:RC.bind(null,t)}),t.F_.push(e=>d(this,null,function*(){e?(t.L_.Zo(),yield tc(t)):(yield t.L_.stop(),t.D_.length>0&&(v("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.L_}var Ld=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _(g.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _f(t,e){if(_t("AsyncQueue",`${e}: ${t}`),Rs(t))return new _(g.UNAVAILABLE,`${e}: ${t}`);throw t}var Fa=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||b.comparator(n.key,r.key):(n,r)=>b.comparator(n.key,r.key),this.keyedMap=us(),this.sortedSet=new ne(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ua=class{constructor(){this.B_=new ne(b.comparator)}track(e){let n=e.doc.key,r=this.B_.get(n);r?e.type!==0&&r.type===3?this.B_=this.B_.insert(n,e):e.type===3&&r.type!==1?this.B_=this.B_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.B_=this.B_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.B_=this.B_.remove(n):e.type===1&&r.type===2?this.B_=this.B_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.B_=this.B_.insert(n,{type:2,doc:e.doc}):C():this.B_=this.B_.insert(n,e)}k_(){let e=[];return this.B_.inorderTraversal((n,r)=>{e.push(r)}),e}},jr=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Fa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ja(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Vd=class{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some(e=>e.U_())}},Fd=class{constructor(){this.queries=new cn(e=>Wv(e),Ja),this.onlineState="Unknown",this.W_=new Set}};function kC(t,e){return d(this,null,function*(){let n=N(t),r=3,i=e.query,s=n.queries.get(i);s?!s.K_()&&e.U_()&&(r=2):(s=new Vd,r=e.U_()?0:1);try{switch(r){case 0:s.q_=yield n.onListen(i,!0);break;case 1:s.q_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=_f(o,`Initialization of query '${br(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Q_.push(e),e.G_(n.onlineState),s.q_&&e.z_(s.q_)&&If(n)})}function NC(t,e){return d(this,null,function*(){let n=N(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),s.Q_.length===0?i=e.U_()?0:1:!s.K_()&&e.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function xC(t,e){let n=N(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.z_(i)&&(r=!0);o.q_=i}}r&&If(n)}function OC(t,e,n){let r=N(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function If(t){t.W_.forEach(e=>{e.next()})}var Ud,Av;(Av=Ud||(Ud={})).j_="default",Av.Cache="cache";var jd=class{constructor(e,n,r){this.query=e,this.H_=n,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=r||{}}z_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new jr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),n=!0):this.X_(e,this.onlineState)&&(this.ea(e),n=!0),this.Y_=e,n}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let n=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),n=!0),n}X_(e,n){if(!e.fromCache||!this.U_())return!0;let r=n!=="Offline";return(!this.options.ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Z_(e){if(e.docChanges.length>0)return!0;let n=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ea(e){e=jr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Ud.Cache}};var ja=class{constructor(e){this.key=e}},Ba=class{constructor(e){this.key=e}},Bd=class{constructor(e,n){this.query=e,this.ua=n,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=U(),this.mutatedKeys=U(),this.ha=Kv(e),this.Pa=new Fa(this.ha)}get Ia(){return this.ua}Ta(e,n){let r=n?n.Ea:new Ua,i=n?n.Pa:this.Pa,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,h)=>{let f=i.get(l),p=Xa(this.query,h)?h:null,T=!!f&&this.mutatedKeys.has(f.key),S=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),w=!1;f&&p?f.data.isEqual(p.data)?T!==S&&(r.track({type:3,doc:p}),w=!0):this.da(f,p)||(r.track({type:2,doc:p}),w=!0,(c&&this.ha(p,c)>0||u&&this.ha(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),w=!0):f&&!p&&(r.track({type:1,doc:f}),w=!0,(c||u)&&(a=!0)),w&&(p?(o=o.add(p),s=S?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Pa:o,Ea:r,Xi:a,mutatedKeys:s}}da(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;let o=e.Ea.k_();o.sort((l,h)=>function(p,T){let S=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return C()}};return S(p)-S(T)}(l.type,h.type)||this.ha(l.doc,h.doc)),this.Aa(r),i=i!=null&&i;let a=n&&!i?this.Ra():[],c=this.la.size===0&&this.current&&!i?1:0,u=c!==this.ca;return this.ca=c,o.length!==0||u?{snapshot:new jr(this.query,e.Pa,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Va:a}:{Va:a}}G_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Ua,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach(n=>this.ua=this.ua.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ua=this.ua.delete(n)),this.current=e.current)}Ra(){if(!this.current)return[];let e=this.la;this.la=U(),this.Pa.forEach(r=>{this.ma(r.key)&&(this.la=this.la.add(r.key))});let n=[];return e.forEach(r=>{this.la.has(r)||n.push(new Ba(r))}),this.la.forEach(r=>{e.has(r)||n.push(new ja(r))}),n}fa(e){this.ua=e.hs,this.la=U();let n=this.Ta(e.documents);return this.applyChanges(n,!0)}ga(){return jr.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,this.ca===0,this.hasCachedResults)}},$d=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},qd=class{constructor(e){this.key=e,this.pa=!1}},zd=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new cn(a=>Wv(a),Ja),this.Sa=new Map,this.ba=new Set,this.Da=new ne(b.comparator),this.Ca=new Map,this.va=new ws,this.Fa={},this.Ma=new Map,this.xa=Is.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return this.Oa===!0}};function MC(t,e,n=!0){return d(this,null,function*(){let r=C_(t),i,s=r.wa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ga()):i=yield E_(r,e,n,!0),i})}function LC(t,e){return d(this,null,function*(){let n=C_(t);yield E_(n,e,!0,!1)})}function E_(t,e,n,r){return d(this,null,function*(){let i=yield vC(t.localStore,yt(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield VC(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&m_(t.remoteStore,i),a})}function VC(t,e,n,r,i){return d(this,null,function*(){t.Na=(h,f,p)=>function(S,w,L,W){return d(this,null,function*(){let re=w.view.Ta(L);re.Xi&&(re=yield Sv(S.localStore,w.query,!1).then(({documents:Et})=>w.view.Ta(Et,re)));let Te=W&&W.targetChanges.get(w.targetId),rt=W&&W.targetMismatches.get(w.targetId)!=null,de=w.view.applyChanges(re,S.isPrimaryClient,Te,rt);return Rv(S,w.targetId,de.Va),de.snapshot})}(t,h,f,p);let s=yield Sv(t.localStore,e,!0),o=new Bd(e,s.hs),a=o.Ta(s.documents),c=vs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Rv(t,n,u.Va);let l=new $d(e,n,o);return t.wa.set(e,l),t.Sa.has(n)?t.Sa.get(n).push(e):t.Sa.set(n,[e]),u.snapshot})}function FC(t,e,n){return d(this,null,function*(){let r=N(t),i=r.wa.get(e),s=r.Sa.get(i.targetId);if(s.length>1)return r.Sa.set(i.targetId,s.filter(o=>!Ja(o,e))),void r.wa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ad(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gf(r.remoteStore,i.targetId),Gd(r,i.targetId)}).catch(Cs))):(Gd(r,i.targetId),yield Ad(r.localStore,i.targetId,!0))})}function UC(t,e){return d(this,null,function*(){let n=N(t),r=n.wa.get(e),i=n.Sa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gf(n.remoteStore,r.targetId))})}function jC(t,e,n){return d(this,null,function*(){let r=WC(t);try{let i=yield function(o,a){let c=N(o),u=Ee.now(),l=a.reduce((p,T)=>p.add(T.key),U()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let T=Mt(),S=U();return c.os.getEntries(p,l).next(w=>{T=w,T.forEach((L,W)=>{W.isValidDocument()||(S=S.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,T)).next(w=>{h=w;let L=[];for(let W of a){let re=HA(W,h.get(W.key).overlayedDocument);re!=null&&L.push(new Lt(W.key,re,jv(re.value.mapValue),Un.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,L,a)}).next(w=>{f=w;let L=w.applyToLocalDocumentSet(h,S);return c.documentOverlayCache.saveOverlays(p,w.batchId,L)})}).then(()=>({batchId:f.batchId,changes:Yv(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Fa[o.currentUser.toKey()];u||(u=new ne(B)),u=u.insert(a,c),o.Fa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Ds(r,i.changes),yield tc(r.remoteStore)}catch(i){let s=_f(i,"Failed to persist write");n.reject(s)}})}function T_(t,e){return d(this,null,function*(){let n=N(t);try{let r=yield gC(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Ca.get(s);o&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.pa=!0:i.modifiedDocuments.size>0?K(o.pa):i.removedDocuments.size>0&&(K(o.pa),o.pa=!1))}),yield Ds(n,r,e)}catch(r){yield Cs(r)}})}function Cv(t,e,n){let r=N(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.wa.forEach((s,o)=>{let a=o.view.G_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=N(o);c.onlineState=a;let u=!1;c.queries.forEach((l,h)=>{for(let f of h.Q_)f.G_(a)&&(u=!0)}),u&&If(c)}(r.eventManager,e),i.length&&r.ya.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function BC(t,e,n){return d(this,null,function*(){let r=N(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Ca.get(e),s=i&&i.key;if(s){let o=new ne(b.comparator);o=o.insert(s,tt.newNoDocument(s,x.min()));let a=U().add(s),c=new Ca(x.min(),new Map,new ne(B),o,a);yield T_(r,c),r.Da=r.Da.remove(s),r.Ca.delete(e),wf(r)}else yield Ad(r.localStore,e,!1).then(()=>Gd(r,e,n)).catch(Cs)})}function $C(t,e){return d(this,null,function*(){let n=N(t),r=e.batch.batchId;try{let i=yield pC(n.localStore,e);b_(n,r,null),S_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ds(n,i)}catch(i){yield Cs(i)}})}function qC(t,e,n){return d(this,null,function*(){let r=N(t);try{let i=yield function(o,a){let c=N(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(K(h!==null),l=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);b_(r,e,n),S_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ds(r,i)}catch(i){yield Cs(i)}})}function S_(t,e){(t.Ma.get(e)||[]).forEach(n=>{n.resolve()}),t.Ma.delete(e)}function b_(t,e,n){let r=N(t),i=r.Fa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Fa[r.currentUser.toKey()]=i}}function Gd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Sa.get(e))t.wa.delete(r),n&&t.ya.La(r,n);t.Sa.delete(e),t.isPrimaryClient&&t.va.Vr(e).forEach(r=>{t.va.containsKey(r)||A_(t,r)})}function A_(t,e){t.ba.delete(e.path.canonicalString());let n=t.Da.get(e);n!==null&&(gf(t.remoteStore,n),t.Da=t.Da.remove(e),t.Ca.delete(n),wf(t))}function Rv(t,e,n){for(let r of n)r instanceof ja?(t.va.addReference(r.key,e),zC(t,r)):r instanceof Ba?(v("SyncEngine","Document no longer in limbo: "+r.key),t.va.removeReference(r.key,e),t.va.containsKey(r.key)||A_(t,r.key)):C()}function zC(t,e){let n=e.key,r=n.path.canonicalString();t.Da.get(n)||t.ba.has(r)||(v("SyncEngine","New document in limbo: "+n),t.ba.add(r),wf(t))}function wf(t){for(;t.ba.size>0&&t.Da.size<t.maxConcurrentLimboResolutions;){let e=t.ba.values().next().value;t.ba.delete(e);let n=new b(J.fromString(e)),r=t.xa.next();t.Ca.set(r,new qd(n)),t.Da=t.Da.insert(n,r),m_(t.remoteStore,new _s(yt(ff(n.path)),r,"TargetPurposeLimboResolution",Vv._e))}}function Ds(t,e,n){return d(this,null,function*(){let r=N(t),i=[],s=[],o=[];r.wa.isEmpty()||(r.wa.forEach((a,c)=>{o.push(r.Na(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Ed.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.ya.u_(i),yield function(c,u){return d(this,null,function*(){let l=N(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>m.forEach(u,f=>m.forEach(f.qi,p=>l.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>m.forEach(f.Qi,p=>l.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!Rs(h))throw h;v("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let f=h.targetId;if(!h.fromCache){let p=l.ns.get(f),T=p.snapshotVersion,S=p.withLastLimboFreeSnapshotVersion(T);l.ns=l.ns.insert(f,S)}}})}(r.localStore,s))})}function GC(t,e){return d(this,null,function*(){let n=N(t);if(!n.currentUser.isEqual(e)){v("SyncEngine","User change. New user:",e.toKey());let r=yield p_(n.localStore,e);n.currentUser=e,function(s,o){s.Ma.forEach(a=>{a.forEach(c=>{c.reject(new _(g.CANCELLED,o))})}),s.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ds(n,r.us)}})}function HC(t,e){let n=N(t),r=n.Ca.get(e);if(r&&r.pa)return U().add(r.key);{let i=U(),s=n.Sa.get(e);if(!s)return i;for(let o of s){let a=n.wa.get(o);i=i.unionWith(a.view.Ia)}return i}}function C_(t){let e=N(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=T_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=BC.bind(null,e),e.ya.u_=xC.bind(null,e.eventManager),e.ya.La=OC.bind(null,e.eventManager),e}function WC(t){let e=N(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$C.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qC.bind(null,e),e}var $a=class{constructor(){this.synchronizeTabs=!1}initialize(e){return d(this,null,function*(){this.serializer=Za(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return fC(this.persistence,new Sd,e.initialUser,this.serializer)}createPersistence(e){return new _d(wd.Hr,this.serializer)}createSharedClientState(e){return new Cd}terminate(){return d(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Hd=class{initialize(e,n){return d(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GC.bind(null,this.syncEngine),yield DC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Fd}()}createDatastore(e){let n=Za(e.databaseInfo.databaseId),r=function(s){return new Dd(s)}(e.databaseInfo);return function(s,o,a,c){return new xd(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Md(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Cv(this.syncEngine,n,0),function(){return Oa.D()?new Oa:new Rd}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let h=new zd(i,s,o,a,c,u);return l&&(h.Oa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return d(this,null,function*(){var e;yield function(r){return d(this,null,function*(){let i=N(r);v("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Ps(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Wd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):_t("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Kd=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=me.UNAUTHENTICATED,this.clientId=va.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>d(this,null,function*(){v("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(v("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new _(g.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>d(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=_f(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function wh(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),v("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>d(this,null,function*(){r.isEqual(i)||(yield p_(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Pv(t,e){return d(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield QC(t);v("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>bv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>bv(e.remoteStore,i)),t._onlineComponents=e})}function KC(t){return t.name==="FirebaseError"?t.code===g.FAILED_PRECONDITION||t.code===g.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function QC(t){return d(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){v("FirestoreClient","Using user provided OfflineComponentProvider");try{yield wh(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!KC(n))throw n;kr("Error using user provided cache. Falling back to memory cache: "+n),yield wh(t,new $a)}}else v("FirestoreClient","Using default OfflineComponentProvider"),yield wh(t,new $a);return t._offlineComponents})}function R_(t){return d(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(v("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pv(t,t._uninitializedComponentsProvider._online)):(v("FirestoreClient","Using default OnlineComponentProvider"),yield Pv(t,new Hd))),t._onlineComponents})}function YC(t){return R_(t).then(e=>e.syncEngine)}function Dv(t){return d(this,null,function*(){let e=yield R_(t),n=e.eventManager;return n.onListen=MC.bind(null,e.syncEngine),n.onUnlisten=FC.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=LC.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UC.bind(null,e.syncEngine),n})}function P_(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var kv=new Map;function D_(t,e,n){if(!n)throw new _(g.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JC(t,e,n,r){if(e===!0&&r===!0)throw new _(g.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Nv(t){if(!b.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xv(t){if(b.isDocumentKey(t))throw new _(g.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":C()}function ps(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _(g.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=nc(t);throw new _(g.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function XC(t,e){if(e<=0)throw new _(g.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var qa=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _(g.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new _(g.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=P_((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _(g.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Br=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qa({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new _(g.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new _(g.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qa(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Eh;switch(r.type){case"firstParty":return new Ah(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _(g.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=kv.get(n);r&&(v("ComponentProvider","Removing Datastore"),kv.delete(n),r.terminate())}(this),Promise.resolve()}};function k_(t,e,n,r={}){var i;let s=(t=ps(t,Br))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&kr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=me.MOCK_USER;else{a=wg(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new _(g.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new me(u)}t._authCredentials=new Th(new ya(a,c))}}var ln=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qe=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},sn=class t extends ln{constructor(e,n,r){super(e,n,ff(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new b(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function N_(t,e,...n){if(t=ke(t),D_("collection","path",e),t instanceof Br){let r=J.fromString(e,...n);return xv(r),new sn(t,null,r)}{if(!(t instanceof qe||t instanceof sn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(J.fromString(e,...n));return xv(r),new sn(t.firestore,null,r)}}function x_(t,e,...n){if(t=ke(t),arguments.length===1&&(e=va.newId()),D_("doc","path",e),t instanceof Br){let r=J.fromString(e,...n);return Nv(r),new qe(t,null,new b(r))}{if(!(t instanceof qe||t instanceof sn))throw new _(g.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(J.fromString(e,...n));return Nv(r),new qe(t.firestore,t instanceof sn?t.converter:null,new b(r))}}var Qd=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Ma(this,"async_queue_retry"),this.cu=()=>{let n=Ih();n&&v("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Ih();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Ih();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new gt;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return d(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Rs(e))throw e;v("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw _t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=Ld.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&C()}verifyOperationInProgress(){}Tu(){return d(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};function Ov(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var $r=class extends Br{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Qd}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||L_(this),this._firestoreClient.terminate()}};function O_(t,e){let n=typeof t=="object"?t:fr(),r=typeof t=="string"?t:e||"(default)",i=Ri(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ig("firestore");s&&k_(i,...s)}return i}function M_(t){return t._firestoreClient||L_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function L_(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Oh(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,P_(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Kd(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Es=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(xe.fromBase64String(e))}catch(n){throw new _(g.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(xe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ts=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _(g.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $e(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var za=class{constructor(e){this._methodName=e}};var Ss=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _(g.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _(g.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return B(this._lat,e._lat)||B(this._long,e._long)}};var ZC=/^__.*__$/,Yd=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Lt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Hn(e,this.data,n,this.fieldTransforms)}};function V_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw C()}}var Jd=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ru(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.pu(e),i}yu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.mu({path:r,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return Ga(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(e.length===0)throw this.Su("Document fields must not be empty");if(V_(this.Vu)&&ZC.test(e))throw this.Su('Document fields cannot begin and end with "__"')}},Xd=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Za(e)}Cu(e,n,r,i=!1){return new Jd({Vu:e,methodName:n,Du:r,path:$e.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function F_(t){let e=t._freezeSettings(),n=Za(t._databaseId);return new Xd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eR(t,e,n,r,i,s={}){let o=t.Cu(s.merge||s.mergeFields?2:0,e,n,i);B_("Data must be an object, but it was:",o,r);let a=U_(r,o),c,u;if(s.merge)c=new pt(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let h of s.mergeFields){let f=nR(e,h,n);if(!o.contains(f))throw new _(g.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);iR(l,f)||l.push(f)}c=new pt(l),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new Yd(new et(a),c,u)}function tR(t,e,n,r=!1){return Ef(n,t.Cu(r?4:3,e))}function Ef(t,e){if(j_(t=ke(t)))return B_("Unsupported field value:",e,t),U_(t,e);if(t instanceof za)return function(r,i){if(!V_(i.Vu))throw i.Su(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Su(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.gu&&e.Vu!==4)throw e.Su("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Ef(a,i.wu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ke(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BA(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ee.fromDate(r);return{timestampValue:ka(i.serializer,s)}}if(r instanceof Ee){let s=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ka(i.serializer,s)}}if(r instanceof Ss)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Es)return{bytesValue:a_(i.serializer,r._byteString)};if(r instanceof qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Su(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pf(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Su(`Unsupported field value: ${nc(r)}`)}(t,e)}function U_(t,e){let n={};return Fv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(r,i)=>{let s=Ef(i,e.fu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function j_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ee||t instanceof Ss||t instanceof Es||t instanceof qe||t instanceof za)}function B_(t,e,n){if(!j_(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=nc(n);throw r==="an object"?e.Su(t+" a custom object"):e.Su(t+" "+r)}}function nR(t,e,n){if((e=ke(e))instanceof Ts)return e._internalPath;if(typeof e=="string")return $_(t,e);throw Ga("Field path arguments must be of type string or ",t,!1,void 0,n)}var rR=new RegExp("[~\\*/\\[\\]]");function $_(t,e,n){if(e.search(rR)>=0)throw Ga(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ts(...e.split("."))._internalPath}catch{throw Ga(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ga(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new _(g.INVALID_ARGUMENT,a+t+c)}function iR(t,e){return t.some(n=>n.isEqual(e))}var Ha=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Zd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(rc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Zd=class extends Ha{data(){return super.data()}};function rc(t,e){return typeof e=="string"?$_(t,e):e instanceof Ts?e._internalPath:e._delegate._internalPath}function sR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _(g.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bs=class{},As=class extends bs{};function q_(t,e,...n){let r=[];e instanceof bs&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof ef).length,a=s.filter(c=>c instanceof Wa).length;if(o>1||o>0&&a>0)throw new _(g.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Wa=class t extends As{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return W_(e._query,n),new ln(e.firestore,e.converter,Wh(e._query,n))}_parse(e){let n=F_(e.firestore);return function(s,o,a,c,u,l,h){let f;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new _(g.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){Lv(h,l);let p=[];for(let T of h)p.push(Mv(c,s,T));f={arrayValue:{values:p}}}else f=Mv(c,s,h)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||Lv(h,l),f=tR(a,o,h,l==="in"||l==="not-in");return ue.create(u,l,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function z_(t,e,n){let r=e,i=rc("where",t);return Wa._create(i,r,n)}var ef=class t extends bs{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)W_(o,c),o=Wh(o,c)}(e._query,n),new ln(e.firestore,e.converter,Wh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var tf=class t extends As{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,s,o){if(i.startAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new _(g.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qn(s,o)}(e._query,this._field,this._direction);return new ln(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new an(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function G_(t,e="asc"){let n=e,r=rc("orderBy",t);return tf._create(r,n)}var nf=class t extends As{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new ln(e.firestore,e.converter,ba(e._query,this._limit,this._limitType))}};function H_(t){return XC("limit",t),nf._create("limit",t,"F")}function Mv(t,e,n){if(typeof(n=ke(n))=="string"){if(n==="")throw new _(g.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hv(e)&&n.indexOf("/")!==-1)throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(J.fromString(n));if(!b.isDocumentKey(r))throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return av(t,new b(r))}if(n instanceof qe)return av(t,n._key);throw new _(g.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nc(n)}.`)}function Lv(t,e){if(!Array.isArray(t)||t.length===0)throw new _(g.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function W_(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _(g.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var rf=class{convertValue(e,n="none"){switch($n(e)){case 0:return null;case 1:return e.booleanValue;case 2:return te(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(on(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw C()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return zr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Ss(te(e.latitude),te(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=uf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ms(e));default:return null}}convertTimestamp(e){let n=Ot(e);return new Ee(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=J.fromString(e);K(f_(r));let i=new Ta(r.get(1),r.get(3)),s=new b(r.popFirst(5));return i.isEqual(n)||_t(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function oR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Vn=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ka=class extends Ha{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Dr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(rc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Dr=class extends Ka{data(e={}){return super.data(e)}},sf=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Vn(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dr(this._firestore,this._userDataWriter,r.key,r,new Vn(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _(g.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Dr(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Vn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:aR(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function aR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return C()}}var Qa=class extends rf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Es(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}};function K_(t,e){let n=ps(t.firestore,$r),r=x_(t),i=oR(t.converter,e);return cR(n,[eR(F_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Un.exists(!1))]).then(()=>r)}function Q_(t,...e){var n,r,i;t=ke(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Ov(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ov(e[o])){let h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,l;if(t instanceof qe)u=ps(t.firestore,$r),l=ff(t._key.path),c={next:h=>{e[o]&&e[o](uR(u,t,h))},error:e[o+1],complete:e[o+2]};else{let h=ps(t,ln);u=ps(h.firestore,$r),l=h._query;let f=new Qa(u);c={next:p=>{e[o]&&e[o](new sf(u,f,h,p))},error:e[o+1],complete:e[o+2]},sR(t._query)}return function(f,p,T,S){let w=new Wd(S),L=new jd(p,w,T);return f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return kC(yield Dv(f),L)})),()=>{w.Qa(),f.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return NC(yield Dv(f),L)}))}}(M_(u),l,a,c)}function cR(t,e){return function(r,i){let s=new gt;return r.asyncQueue.enqueueAndForget(()=>d(this,null,function*(){return jC(yield YC(r),i,s)})),s.promise}(M_(t),e)}function uR(t,e,n){let r=n.docs.get(e._key),i=new Qa(t);return new Ka(t,i,e._key,r,new Vn(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){qr=i})(Xt),Jt(new We("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new $r(new Sh(r.getProvider("auth-internal")),new Rh(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _(g.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),he(rv,"4.6.0",e),he(rv,"4.6.0","esm2017")})();var Kn=class{constructor(e){return e}},Y_="firestore",Tf=class{constructor(){return Di(Y_)}};var Sf=new le("angularfire2.firestore-instances");function lR(t,e){let n=vo(Y_,t,e);return n&&new Kn(n)}function hR(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Kn(r)}}var dR={provide:Tf,deps:[[new Oe,Sf]]},fR={provide:Kn,useFactory:lR,deps:[[new Oe,Sf],Pt]},pR=(()=>{class t{constructor(){he("angularfire",Tn.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=bt({type:t});static \u0275inj=St({providers:[fR,dR]})}return t})();function J_(t,...e){return{ngModule:pR,providers:[{provide:Sf,useFactory:hR(t),multi:!0,deps:[X,$t,mr,Sn,[new Oe,Fi],[new Oe,gr],...e]}]}}var bf=je(K_,!0);var hn=je(N_,!0);var X_=je(O_,!0);var ic=je(H_,!0);var Hr=je(Q_,!0);var sc=je(G_,!0);var Wr=je(q_,!0);var Qn=je(z_,!0);var oc=(()=>{let e=class e{constructor(){this.firestore=I(Kn)}getTitlesById(r,i=4){return this.getTitlesQueryOb("titleId","==",r,i)}getTitlesByName(r,i=4){return this.getTitlesQueryName("name",r,i)}getTitlesQueryOb(r,i,s,o){let a=hn(this.firestore,"titles"),c=Wr(a,Qn(r,i,s),ic(o));return new Tt(u=>Hr(c,h=>{let f=[];h.forEach(p=>{let T=p.id,S=p.data();f.push(E({},S))}),u.next(f)}))}getTitlesLimit(r){let i=hn(this.firestore,"titles"),s=Wr(i,ic(r),sc("updated_date","desc"));return new Tt(o=>Hr(s,c=>{let u=[];c.forEach(l=>{let h=l.id,f=l.data();u.push(E({},f))}),o.next(u)}))}getTitlesQueryName(r,i,s){let o=hn(this.firestore,"titles"),a=Wr(o,Qn(r,">=",i),Qn(r,"<=",i+"\uF8FF"),ic(s));return new Tt(c=>Hr(a,l=>{let h=[];l.forEach(f=>{let p=f.id,T=f.data();h.push(E({},T))}),c.next(h)}))}getTitleChapters(r){let i=hn(this.firestore,"chapters"),s=Wr(i,Qn("titleId","==",r),sc("numb","desc"));return new Tt(o=>Hr(s,c=>{let u=[];c.forEach(l=>{let h=l.id,f=l.data();u.push(E({},f))}),o.next(u)}))}getTitleChapter(r,i){let s=hn(this.firestore,"chapters"),o=Wr(s,Qn("titleId","==",r),Qn("numb","==",i),sc("numb","desc"));return new Tt(a=>Hr(o,u=>{let l=[];u.forEach(h=>{let f=h.id,p=h.data();l.push(E({},p))}),a.next(l)}))}setTitle(r){return d(this,null,function*(){let i=hn(this.firestore,"titles");yield bf(i,{titleId:r.titleId,description:r.description,image:r.image,last_chapter:r.last_chapter,last_update:r.last_update,name:r.name,status:r.status,total_chapter:r.total_chapter,type:r.type,update_chapter:r.update_chapter,original_name:r.update_chapter})})}setChapter(r){return d(this,null,function*(){let i=hn(this.firestore,"chapters");yield bf(i,{titleId:r.titleId,chaptersInfo:r.chaptersInfo})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wt=(()=>{let e=class e{constructor(){this.firebaseService=I(oc),this.titles=[],this.titlesLoaded=!1,this.chapters=[],this.chaptersLoaded=[!1,"0"]}makeKaka(){var r=new Date(2024,1,19);this.firebaseService.setChapter({titleId:"0",numb:412,chaptersInfo:["\u041D\u0430\u0439\u0431\u043E\u0436\u0435\u0432\u0456\u043B\u044C\u043D\u0456\u0448\u0438\u0439 \u0433\u0435\u0440\u043E\u0439 \u0432 \u0456\u0441\u0442\u043E\u0440\u0456\u0457",r]})}getTitles(){return this.titlesLoaded?(console.log("\u0414\u0430\u043D\u0456 \u0432\u0436\u0435 \u0454"),P(this.titles)):(console.log("\u041F\u0435\u0440\u0448\u0438\u0439 \u0437\u0430\u043F\u0443\u0441\u043A"),this.refreshTitles())}refreshTitles(){return this.firebaseService.getTitlesLimit(6).pipe(ie(r=>{this.titles=r,this.titlesLoaded=!0}))}getChapters(r){return this.chaptersLoaded[0]&&this.chaptersLoaded[1]==r?(console.log("\u0414\u0430\u043D\u0456 \u0440\u043E\u0437\u0434\u0456\u043B\u0456\u0432 \u0443\u0436\u0435 \u0454"),P(this.chapters)):(console.log("\u041F\u0435\u0440\u0448\u0435 \u0447\u0438\u0442\u0430\u043D\u043D\u044F \u0440\u043E\u0437\u0434\u0456\u043B\u0456\u0432"),this.refreshChapters(r))}refreshChapters(r){return this.firebaseService.getTitleChapters(r).pipe(ie(i=>{this.chapters=i,this.chaptersLoaded=[!0,r]}))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Af=(()=>{let e=class e{constructor(){this.loadingSubject=new Se(!1),this.loading$=this.loadingSubject.asObservable(),this.scrollPos=0}saveScrollPos(r){this.scrollPos=r}getScrollPos(){return this.scrollPos}loadingOn(){this.loadingSubject.next(!0)}loadingOff(){this.loadingSubject.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mR=t=>["/title",0,"chapter",t],yR=t=>["/title",t];function vR(t,e){if(t&1&&(A(0,"div",13)(1,"span",14),H(2),R(),A(3,"span",15),H(4),R()()),t&2){let n=it();O(2),fe(n.titles[0]==null?null:n.titles[0].type),O(2),sp("\u041D\u043E\u0432\u0438\u0439: ",n.titles[0]==null?null:n.titles[0].last_chapter,"")}}function _R(t,e){if(t&1&&(A(0,"div",16)(1,"h3",11),H(2),R(),A(3,"div",17),H(4),R()()),t&2){let n=it();O(2),fe(n.titles[0]==null?null:n.titles[0].name),O(2),fe(n.titles[0]==null?null:n.titles[0].description)}}function IR(t,e){if(t&1&&(A(0,"div",20)(1,"div",21),Y(2,"img",22),R(),A(3,"div",23)(4,"h3",11),H(5),R(),A(6,"h6",24),H(7),R(),A(8,"div",13)(9,"span",14),H(10),R(),A(11,"span",15),H(12),R()(),A(13,"div",25)(14,"span",26),H(15),R(),Y(16,"div",27),A(17,"div",28),H(18),R()()()()),t&2){let n=e.$implicit;se("routerLink",st(9,yR,n.titleId)),O(2),ni("src","/assets/test-list/",n==null?null:n.image,"",pn),O(3),fe(n.name),O(2),fe(n.original_name),O(3),fe(n.type),O(2),fe(n.last_chapter),O(3),fe(n.status),O(3),fe(n.last_update)}}function wR(t,e){if(t&1&&(A(0,"div",18),Ge(1,IR,19,11,"div",19),R()),t&2){let n=it();O(),se("ngForOf",n.titles.slice(1))}}var Cf=(()=>{let e=class e{constructor(r){this.router=r,this.titles=[],this.titleService=I(wt),this.loadingService=I(Af),this.scroller=I(Dc)}ngOnInit(){this.loadingService.loadingOn(),this.titleService.getTitles().subscribe(r=>{this.titles=r,this.loadingService.loadingOff()})}ngAfterViewInit(){}};e.\u0275fac=function(i){return new(i||e)(Pe(vn))},e.\u0275cmp=Me({type:e,selectors:[["bido-titleslist"]],standalone:!0,features:[Le],decls:17,vars:8,consts:[[1,"background_preview"],[1,"blured"],[1,"container"],[1,"intro"],[1,"cover",2,"background-image","url('/assets/alt.webp')","background-size","cover","background-position","50% center"],["alt"," ",3,"src"],["class","tags",4,"ngIf"],["class","info",4,"ngIf"],[1,"all",3,"routerLink"],["routerLink","/title/0"],[1,"previous"],[1,"info_name"],["class","items",4,"ngIf"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"info"],[1,"info_descr"],[1,"items"],["class","item",3,"routerLink",4,"ngFor","ngForOf"],[1,"item",3,"routerLink"],[1,"cover",2,"width","100%","height","100%","background-image","url('/assets/alt.webp')","background-size","cover","background-position","100% center"],["alt","",3,"src"],[1,"content"],[1,"or_info_name"],[1,"detail"],[1,"status"],[1,"line"],[1,"time"]],template:function(i,s){i&1&&(A(0,"div",0),Y(1,"div",1),A(2,"div",2)(3,"div",3)(4,"div",4),Y(5,"img",5),R(),Ge(6,vR,5,2,"div",6),R(),Ge(7,_R,5,2,"div",7),A(8,"a",8),H(9,"\u0427\u0438\u0442\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0440\u043E\u0437\u0434\u0456\u043B"),R(),A(10,"a",9),H(11,"\u0423\u0441\u0456 \u0440\u043E\u0437\u0434\u0456\u043B\u0438"),R()()(),A(12,"div",10)(13,"div",2)(14,"h2",11),H(15,"\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043E\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F"),R(),Ge(16,wR,2,1,"div",12),R()()),i&2&&(O(5),ni("src","/assets/test-list/",s.titles[0]==null?null:s.titles[0].image,"",pn),O(),se("ngIf",s.titles.length>0),O(),se("ngIf",s.titles.length>0),O(),se("routerLink",st(6,mR,s.titles[0]==null?null:s.titles[0].update_chapter)),O(8),se("ngIf",s.titles))},dependencies:[qt,Kt,pp],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;color:#e6f5fd;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:8px 6px 6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px;transition:all .2s ease}.intro[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{height:200px;width:135px;border:0;border-radius:5px;background:var(--background)}.intro[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:5px;object-fit:cover;display:block;border:0}.background_preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:var(--background);background:var(--primary);margin:15px 0;padding:7px 19px;border-radius:5px;box-shadow:0 0 80px -5px var(--primary);font-family:UZSansB;font-weight:400}.background_preview[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]{margin-bottom:0;color:#f4f9fb;background:var(--secondary);box-shadow:0 0 80px -5px var(--secondary)}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.items[_ngcontent-%COMP%]{display:grid;gap:36px 15px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr))}.item[_ngcontent-%COMP%]{background:var(--background);-webkit-box-shadow:0px 9px 19px -10px var(--text-3);box-shadow:0 9px 19px -10px var(--text-3);position:relative;padding-bottom:40px;min-width:230px;min-height:340px}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:2%;background:linear-gradient(180deg,rgba(0,0,0,0) 65%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .or_info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{align-self:center;display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:90%;font-size:14px;color:var(--gray-400);font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:var(--gray-400);margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed var(--gray-400) 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{white-space:nowrap}"]});let t=e;return t})();var ac=(()=>{let e=class e{constructor(){this.allPagesCount=0,this.titleService=I(wt),this.chapter=null,this.currentPageIndexSubject=new Se(0),this.currentPageIndex$=this.currentPageIndexSubject.asObservable()}getAllPagesChapter(){return["/assets/test-webp-chapter/bnha_420_a_001-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_002-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_003-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_004-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_005-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_006-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_007-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_008-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_009-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_010-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_011-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_012-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_013-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_014-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_015.webp"]}setCurrentPageIndex(r){this.currentPageIndexSubject.next(r)}getAllPagesCount(){return this.allPagesCount}setChapterInfo(r,i){this.allPagesCount=r,this.chapter=i}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=V({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ER=t=>({rotated:t}),TR=t=>({open:t}),SR=(t,e)=>["/title",t,"chapter",e];function bR(t,e){if(t&1&&(A(0,"li",12)(1,"div",13),H(2),R(),A(3,"div",14),H(4),R()()),t&2){let n=e.$implicit,r=it();se("routerLink",Fs(4,SR,n.titleId,n.numb)),O(2),nr("\u0420\u043E\u0437\u0434\u0456\u043B ",n.numb,": ",n.chaptersInfo[0],""),O(2),fe(r.toDate(n.chaptersInfo[1].seconds))}}var eI=(()=>{let e=class e{refreshPages(){this.rotatin=!0}openChapterList(){this.openList=!this.openList}constructor(r){this.chapterService=r,this.activatedRoute=I(Je),this.titleService=I(wt),this.chapters=[],this.rotatin=!1,this.openList=!1,this.id="",this.number="",this.currentPageIndex=1,this.allPages=1}ngOnInit(){this.chapterService.currentPageIndex$.subscribe(r=>{this.currentPageIndex=r}),this.activatedRoute.params.pipe(q(r=>({id:r.id,number:r.number}))).subscribe(r=>{this.id=r.id,this.number=r.number}),this.titleService.getChapters(this.id).subscribe(r=>{console.log("\u0422\u0443\u0442?"),this.chapters=r})}toDate(r){return new Date(r*1e3).toLocaleDateString()}};e.\u0275fac=function(i){return new(i||e)(Pe(ac))},e.\u0275cmp=Me({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Le],decls:14,vars:9,consts:[[1,"nav-content"],[1,"chapters_button",3,"click"],["viewBox","3 3 18 18"],["d","M4 7a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1z"],[1,"pages"],[1,"reload_button",3,"click"],["viewBox","0 0 24 24",1,"reload_arrow",3,"ngClass"],["d","M14.55 22.42C14.22 22.42 13.91 22.2 13.82 21.86C13.72 21.46 13.95 21.05 14.35 20.94C18.41 19.87 21.24 16.19 21.24 11.99C21.24 6.89 17.09 2.74 11.99 2.74C7.66 2.74 4.82 5.27 3.49 6.8H6.43C6.84 6.8 7.18 7.14 7.18 7.55C7.18 7.96 6.86 8.31 6.44 8.31H2.01C1.94 8.31 1.87 8.3 1.8 8.28C1.71 8.25 1.63 8.21 1.56 8.16C1.47 8.1 1.4 8.02 1.35 7.93C1.3 7.83 1.26 7.73 1.25 7.62C1.25 7.59 1.25 7.57 1.25 7.54V3C1.25 2.59 1.59 2.25 2 2.25C2.41 2.25 2.75 2.59 2.75 3V5.39C4.38 3.64 7.45 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 16.88 19.46 21.16 14.74 22.4C14.68 22.41 14.61 22.42 14.55 22.42Z"],["d","M11.29 22.73C11.27 22.73 11.24 22.73 11.22 22.72C10.15 22.65 9.1 22.41 8.1 22.02C7.81 21.91 7.62 21.62 7.62 21.31C7.62 21.22 7.64 21.13 7.67 21.05C7.82 20.67 8.26 20.47 8.64 20.62C9.5 20.96 10.41 21.16 11.33 21.23H11.34C11.74 21.25 12.04 21.59 12.04 21.99C12.04 22 12.04 22.02 12.04 22.03C12.01 22.42 11.68 22.73 11.29 22.73ZM5.78 20.58C5.61 20.58 5.45 20.53 5.31 20.42C4.47 19.75 3.74 18.96 3.13 18.07C3.04 17.94 2.99 17.8 2.99 17.65C2.99 17.4 3.11 17.17 3.32 17.03C3.65 16.8 4.14 16.89 4.36 17.22C4.89 17.99 5.52 18.67 6.25 19.24C6.42 19.38 6.53 19.59 6.53 19.82C6.53 19.99 6.48 20.16 6.37 20.3C6.23 20.48 6.01 20.58 5.78 20.58ZM2.44 15.7C2.11 15.7 1.82 15.49 1.73 15.18C1.41 14.15 1.25 13.08 1.25 12C1.25 11.59 1.59 11.25 2 11.25C2.41 11.25 2.75 11.59 2.75 12C2.75 12.93 2.89 13.85 3.16 14.73C3.18 14.8 3.19 14.88 3.19 14.96C3.19 15.29 2.98 15.57 2.67 15.67C2.59 15.69 2.52 15.7 2.44 15.7Z"],["d","M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"],[1,"chapters_list",3,"ngClass"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"detail_chap"],[1,"date_chap"]],template:function(i,s){i&1&&(A(0,"div",0)(1,"div",1),At("click",function(){return s.openChapterList()}),dn(),A(2,"svg",2),Y(3,"path",3),R()(),er(),A(4,"div",4),H(5),R(),A(6,"div",5),At("click",function(){return s.refreshPages()}),dn(),A(7,"svg",6),Y(8,"path",7)(9,"path",8)(10,"path",9),R()()(),er(),A(11,"div",10)(12,"ul"),Ge(13,bR,5,7,"li",11),R()()),i&2&&(O(5),nr("",s.currentPageIndex,"/",s.allPages,""),O(2),se("ngClass",st(5,ER,s.rotatin)),O(4),se("ngClass",st(7,TR,s.openList)),O(2),se("ngForOf",s.chapters))},dependencies:[qt,$s,Kt],styles:[".nav-content[_ngcontent-%COMP%]{position:fixed;bottom:0;background:var(--background);color:var(--text);width:100%;z-index:2;display:flex;justify-content:space-around;align-items:center}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}.rotated[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_reloadSpin 1s}@keyframes _ngcontent-%COMP%_reloadSpin{to{transform:rotate(-360deg)}}.chapters_list[_ngcontent-%COMP%]{position:fixed;bottom:0;width:100vw;z-index:1;overflow-y:auto;background:var(--background-8);-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);transition:transform .3s ease;transform:translateY(100%);font-size:13px;max-height:60vh;padding:15px 0}.chapters_list.open[_ngcontent-%COMP%]{transform:translateY(-46px)}ul[_ngcontent-%COMP%]{margin:0;padding:10px}li[_ngcontent-%COMP%]{list-style:none;background:var(--text-3);margin:5px;padding:20px;display:flex;flex-direction:row;justify-content:space-between}.detail_chap[_ngcontent-%COMP%]{overflow:hidden;margin-right:10px}.date_chap[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});let t=e;return t})();function AR(t,e){if(t&1&&(A(0,"div"),Y(1,"img",2),R()),t&2){let n=e.index,r=it();O(),ip("src","http://192.168.178.26/browser/files/?img=",r.chapter==null?null:r.chapter.titleId,"/",r.chapter==null?null:r.chapter.numb,"/",n+1,".webp",pn)}}var tI=(()=>{let e=class e{constructor(r){this.chapterService=r,this.activatedRoute=I(Je),this.pages=[],this.chapter=null,this.currentPageIndex=0,this.allPagesCount=0,this.titleService=I(wt),this.id="",this.number=""}ngOnInit(){return d(this,null,function*(){this.activatedRoute.params.pipe(q(r=>({id:r.id,number:r.number}))).subscribe(r=>{this.id=r.id,this.number=r.number,this.titleService.getChapters(this.id).subscribe(i=>{let s=i.find(o=>o.numb===Number(this.number));this.chapter=s!==void 0?s:null,console.log(this.chapter),this.allPagesCount=s?.chaptersInfo[2]})}),console.log("\u0433\u0430?")})}numSequence(r){return Array(r)}onScroll(r){let i=window.scrollY,s=window.innerHeight,o=document.body.scrollHeight,a=s+i,c=0,u=0;for(let l=0;l<this.pages.length;l++)if(u+=document.querySelector("img")?.clientHeight??0,u>=a){c=l;break}this.currentPageIndex!==c&&(this.currentPageIndex=c,this.chapterService.setCurrentPageIndex(c))}};e.\u0275fac=function(i){return new(i||e)(Pe(ac))},e.\u0275cmp=Me({type:e,selectors:[["bido-chapter"]],hostBindings:function(i,s){i&1&&At("scroll",function(a){return s.onScroll(a)},!1,Qf)},standalone:!0,features:[Le],decls:3,vars:1,consts:[[1,"chapter"],[4,"ngFor","ngForOf"],["alt","","loading","lazy",3,"src"]],template:function(i,s){i&1&&(A(0,"div",0),Ge(1,AR,2,4,"div",1),R(),Y(2,"app-navbar")),i&2&&(O(),se("ngForOf",s.numSequence(s.allPagesCount)))},dependencies:[qt,eI],styles:["img[_ngcontent-%COMP%]{max-width:100%;display:block}.chapter[_ngcontent-%COMP%]{margin-top:48px;margin-bottom:50px}"]});let t=e;return t})();var CR=t=>({background:t,"background-size":"cover","background-position":"50% center"}),RR=(t,e)=>["/title",t,"chapter",e];function PR(t,e){if(t&1&&(A(0,"div",2),Y(1,"div",3),A(2,"div",4)(3,"div",5)(4,"div",6),Y(5,"img",7),R(),A(6,"div",8)(7,"span",9),H(8),R(),A(9,"span",10),H(10),R(),A(11,"span",11),H(12),R()()(),A(13,"div",12)(14,"h3",13),H(15),R(),A(16,"div",14),H(17),R()()()()),t&2){let n=e.$implicit;O(),se("ngStyle",st(9,CR,"linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, var(--background) 80.27%), url(/assets/test-list/"+n.image+"), lightgray no-repeat")),O(4),ni("src","/assets/test-list/",n.image,"",pn),O(3),fe(n.type),O(2),fe(n.last_chapter),O(2),fe(n.status),O(3),nr("",n.name,"/",n.original_name,""),O(2),fe(n.description)}}function DR(t,e){if(t&1&&(A(0,"li",15)(1,"div",16),H(2),R(),A(3,"div",17),H(4),R()()),t&2){let n=e.$implicit,r=it();se("routerLink",Fs(4,RR,n.titleId,n.numb)),O(2),nr("\u0420\u043E\u0437\u0434\u0456\u043B ",n.numb,": ",n.chaptersInfo[0],""),O(2),fe(r.toDate(n.chaptersInfo[1].seconds))}}var nI=(()=>{let e=class e{constructor(){this.titles=[],this.chapters=[],this.titlesFirebaseService=I(oc),this.titleService=I(wt)}toDate(r){return new Date(r*1e3).toLocaleDateString()}ngOnInit(){return d(this,null,function*(){if(!this.id)return;console.log(this.id),this.titlesFirebaseService.getTitlesById(this.id).subscribe(i=>{this.titles=i}),this.titleService.getChapters(this.id).subscribe(i=>{this.chapters=i})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Me({type:e,selectors:[["bido-title"]],inputs:{id:"id"},standalone:!0,features:[Le],decls:4,vars:2,consts:[["class","background_preview",4,"ngFor","ngForOf"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"background_preview"],[1,"blured",3,"ngStyle"],[1,"container"],[1,"intro"],[1,"cover"],["alt","2",3,"src"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"tag"],[1,"info"],[1,"info_name"],[1,"info_descr"],[3,"routerLink"],[1,"detail_chap"],[1,"date_chap"]],template:function(i,s){i&1&&(Ge(0,PR,18,11,"div",0),A(1,"div")(2,"ul"),Ge(3,DR,5,7,"li",1),R()()),i&2&&(se("ngForOf",s.titles),O(3),se("ngForOf",s.chapters))},dependencies:[qt,gp,Kt],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;color:#e6f5fd;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:8px 6px 6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:100%;border-radius:5px;object-fit:cover;display:block;border:0}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:0;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:100%;font-size:14px;color:gray;font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:gray;margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed gray 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{text-wrap:nowrap;white-space:nowrap}ul[_ngcontent-%COMP%]{margin:0;padding:20px}li[_ngcontent-%COMP%]{list-style:none;background:var(--text-3);margin:5px;padding:20px;display:flex;flex-direction:row;justify-content:space-between}.detail_chap[_ngcontent-%COMP%]{white-space:break-spaces;overflow:hidden;margin-right:10px}.date_chap[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}"]});let t=e;return t})();var rI=[{path:"",loadComponent:()=>d(void 0,null,function*(){return Cf})},{path:"title/:id",loadComponent:()=>d(void 0,null,function*(){return nI})},{path:"title/:id/chapter/:number",loadComponent:()=>d(void 0,null,function*(){return tI})},{path:"**",component:Cf}];var kR=(()=>{let e=class e extends zs{constructor(r,i,s){super(r,i,s,I(Ls,{optional:!0}))}ngOnDestroy(){this.flush()}};e.\u0275fac=function(i){return new(i||e)(G(De),G(ri),G(qs))},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})();function NR(){return new _p}function xR(t,e,n){return new wp(t,e,n)}var iI=[{provide:qs,useFactory:NR},{provide:zs,useClass:kR},{provide:tr,useFactory:xR,deps:[ir,zs,X]}],OR=[{provide:ri,useFactory:()=>new Ip},{provide:ei,useValue:"BrowserAnimations"},...iI],wx=[{provide:ri,useClass:vp},{provide:ei,useValue:"NoopAnimations"},...iI];function sI(){return Vs("NgEagerAnimations"),[...OR]}var MR="@",LR=(()=>{let e=class e{constructor(r,i,s,o,a){this.doc=r,this.delegate=i,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=I(Ls,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-W3GAOEGG.js")).catch(i=>{throw new oe(5300,!1)}).then(({\u0275createEngine:i,\u0275AnimationRendererFactory:s})=>{this._engine=i(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(r,i){let s=this.delegate.createRenderer(r,i);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Rf(s);return i?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(r,i);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(i){Tc()},e.\u0275prov=V({token:e,factory:e.\u0275fac});let t=e;return t})(),Rf=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,r,i){this.delegate.insertBefore(e,n,r,i)}removeChild(e,n,r){this.delegate.removeChild(e,n,r)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,r,i){this.delegate.setAttribute(e,n,r,i)}removeAttribute(e,n,r){this.delegate.removeAttribute(e,n,r)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,r,i){this.delegate.setStyle(e,n,r,i)}removeStyle(e,n,r){this.delegate.removeStyle(e,n,r)}setProperty(e,n,r){this.shouldReplay(n)&&this.replay.push(i=>i.setProperty(e,n,r)),this.delegate.setProperty(e,n,r)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,r){return this.shouldReplay(n)&&this.replay.push(i=>i.listen(e,n,r)),this.delegate.listen(e,n,r)}shouldReplay(e){return this.replay!==null&&e.startsWith(MR)}};function oI(t="animations"){return Vs("NgAsyncAnimations"),Xr([{provide:tr,useFactory:(e,n,r)=>new LR(e,n,r,t),deps:[De,ir,X]},{provide:ei,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var VR={apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",databaseURL:"https://bidosi-manga-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bidosi-manga",storageBucket:"bidosi-manga.appspot.com",messagingSenderId:"24335793429",appId:"1:24335793429:web:c9616afea73ecf763dfd1c"},aI={providers:[dg(rI,pg(),gg()),sI(),$f([zg(()=>Gg(VR)),Om(()=>Mm()),J_(()=>X_())]),oI()]};var cI={firebase:{apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",databaseURL:"https://bidosi-manga-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bidosi-manga",storageBucket:"bidosi-manga.appspot.com",messagingSenderId:"24335793429",appId:"1:24335793429:web:c9616afea73ecf763dfd1c"}};var FR=t=>({navigate_to:t}),uI=(()=>{let e=class e{constructor(r,i){this._location=r,this.router=i,this.ifThisPageHome=!0,i.events.subscribe(s=>{this.router.url==="/"?this.ifThisPageHome=!0:this.ifThisPageHome=!1})}goBackPage(){this._location.back()}};e.\u0275fac=function(i){return new(i||e)(Pe(rr),Pe(vn))},e.\u0275cmp=Me({type:e,selectors:[["bido-dom-nav"]],standalone:!0,features:[Le],decls:15,vars:3,consts:[[1,"nav-content"],[1,"chapters","button",3,"ngClass"],[1,"home_back_buttons"],[3,"click"],["viewBox","-2 -4 35 36",1,"back_b"],["d","m24 2c3.3137085 0 6 2.6862915 6 6v16c0 3.3137085-2.6862915 6-6 6h-16c-3.3137085 0-6-2.6862915-6-6v-16c0-3.3137085 2.6862915-6 6-6zm-1.7573593 7.92893219c-.3905243-.39052429-1.0236893-.39052429-1.4142136 0l-8.6558932 8.65706781-.000961-4.586c0-.5522847-.4477153-1-1-1-.5522848 0-1 .4477153-1 1v7c0 .5522847.4477152 1 1 1h7c.5522847 0 1-.4477153 1-1s-.4477153-1-1-1l-4.586039.001 8.6571068-8.6578542c.3905243-.3905243.3905243-1.0236893 0-1.41421361z"],["routerLink","/"],["viewBox","0 0 35 35",1,"home_b"],["d","m19.5548639 2.6028224 8.9944388 6.59912643c1.5405939 1.13031777 2.4506973 2.92683637 2.4506973 4.83760787v11.9604433c0 3.3137085-2.6862915 6-6 6h-18c-3.3137085 0-6-2.6862915-6-6v-11.958697c0-1.9117507.91103125-3.7090683 2.45293825-4.83925127l9.00556125-6.60087271c2.1123042-1.54827125 4.9847775-1.54760604 7.0963644.00164338zm-3.5548639 13.3971776c-2.209139 0-4 1.790861-4 4v3c0 .5522847.4477153 1 1 1h6c.5522847 0 1-.4477153 1-1v-3c0-2.209139-1.790861-4-4-4z"],["routerLink","/",1,"color-effect","logo"],[1,"reload","button"],["viewBox","0 0 24 24"],["d","M2.25 10C2.25 5.71979 5.71979 2.25 10 2.25C14.2802 2.25 17.75 5.71979 17.75 10C17.75 14.2802 14.2802 17.75 10 17.75C5.71979 17.75 2.25 14.2802 2.25 10Z"],["d","M16.8214 15.618C17.1645 15.2749 17.7044 15.2276 18.1019 15.5059L21.9536 18.2021C22.8451 18.8261 22.957 20.1037 22.1875 20.8731L21.8731 21.1875C21.1037 21.957 19.8261 21.8451 19.2021 20.9536L16.5059 17.1019C16.2276 16.7044 16.2749 16.1645 16.618 15.8214L16.8214 15.618Z"]],template:function(i,s){i&1&&(A(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),At("click",function(){return s.goBackPage()}),dn(),A(4,"svg",4),Y(5,"path",5),R()(),er(),A(6,"div",6),dn(),A(7,"svg",7),Y(8,"path",8),R()()(),er(),A(9,"span",9),H(10,"\u0411\u0456\u0434\u043E\u0441\u0456"),R()(),A(11,"div",10),dn(),A(12,"svg",11),Y(13,"path",12)(14,"path",13),R()()()),i&2&&(O(),se("ngClass",st(1,FR,!s.ifThisPageHome)))},dependencies:[Kt,$s],styles:["@font-face{font-family:PopB;src:url(/assets/fonts/Poppins-ExtraBold.ttf);font-weight:800}.nav-content[_ngcontent-%COMP%]{background:var(--background);color:var(--text);position:fixed;top:0;left:0;width:100vw;z-index:3;display:flex;justify-content:space-between;align-items:center;-webkit-box-shadow:0px 9px 50px -10px var(--text-3);box-shadow:0 9px 50px -10px var(--text-3);overflow:hidden}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}.nav-content[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background:url(/assets/favicon.ico) no-repeat center;background-size:90% 100%;width:35px;height:30px;margin:5px}.chapters[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;transition:top .2s ease-in 0s;top:0}.home_back_buttons[_ngcontent-%COMP%]{display:flex;top:-50px;position:absolute}.home_back_buttons[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{padding-left:0;margin-right:5px}.navigate_to[_ngcontent-%COMP%]{top:46px}.navigate_to[_ngcontent-%COMP%]   .back_b[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_hithere 1s ease 1}.button[_ngcontent-%COMP%]{padding:0 20px}.color-effect[_ngcontent-%COMP%]{font-family:PopB;font-weight:800;font-size:22px;background:linear-gradient(120deg,var(--primary),var(--accent));background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.back_b[_ngcontent-%COMP%]{transform:rotate(47deg);animation:_ngcontent-%COMP%_hithere 1s ease 1}@keyframes _ngcontent-%COMP%_hithere{30%{transform:scale(1.2) rotate(47deg)}40%,60%{transform:rotate(42deg) scale(1.2)}50%{transform:rotate(47deg) scale(1.2)}70%{transform:rotate(42deg) scale(1.2)}to{transform:scale(1) rotate(47deg)}}"]});let t=e;return t})();var lI=(()=>{let e=class e{constructor(){this.app=Pi(cI.firebase)}prepareRoute(r){return r&&r.activatedRouteData&&r.activatedRouteData.animation}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Me({type:e,selectors:[["app-root"]],standalone:!0,features:[Le],decls:3,vars:0,consts:[[1,"main"]],template:function(i,s){i&1&&(Y(0,"bido-dom-nav"),A(1,"main",0),Y(2,"router-outlet"),R())},dependencies:[vu,uI],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,UZ Sans;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.light_theme   [_nghost-%COMP%]{--text: #021018;--text-3: rgba(2, 16, 24, .3);--background: #f4f9fb;--background-8: rgba(244, 249, 251, .8);--primary: #0b6484;--secondary: #f15fd2;--accent: #c5112c}[_nghost-%COMP%]{--text: #f4f9fb;--text-3: rgba(244, 249, 251, .1);--background: #04090b;--background-8: rgba(4, 9, 11, .8);--primary: #7ad3f4;--secondary: #a00e80;--accent: #ee3854}@font-face{font-family:UZSansB;src:url(/assets/fonts/UZSans-SemiBold.ttf);font-weight:400}body[_ngcontent-%COMP%]{margin:0;padding:0;background:var(--background);color:var(--text)}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--text);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}.main[_ngcontent-%COMP%]{padding:0}}']});let t=e;return t})();Rp(lI,aI).catch(t=>console.error(t));
