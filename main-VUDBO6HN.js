var Db=Object.defineProperty,bb=Object.defineProperties;var Sb=Object.getOwnPropertyDescriptors;var Xy=Object.getOwnPropertySymbols,Ab=Object.getPrototypeOf,Rb=Object.prototype.hasOwnProperty,xb=Object.prototype.propertyIsEnumerable,Nb=Reflect.get;var e_=(t,e,n)=>e in t?Db(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||={})Rb.call(e,n)&&e_(t,n,e[n]);if(Xy)for(var n of Xy(e))xb.call(e,n)&&e_(t,n,e[n]);return t},se=(t,e)=>bb(t,Sb(e));var An=(t,e,n)=>Nb(Ab(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var t_=null;var Jl=1,n_=Symbol("SIGNAL");function G(t){let e=t_;return t_=t,e}var r_={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Pb(t){if(!(ed(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Jl)){if(!t.producerMustRecompute(t)&&!Zl(t)){t.dirty=!1,t.lastCleanEpoch=Jl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Jl}}function i_(t){return t&&(t.nextProducerIndex=0),G(t)}function s_(t,e){if(G(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ed(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Xl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Zl(t){Ia(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Pb(n),r!==n.version))return!0}return!1}function o_(t){if(Ia(t),ed(t))for(let e=0;e<t.producerNode.length;e++)Xl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Xl(t,e){if(Mb(t),Ia(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Xl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ia(i),i.producerIndexOfThis[r]=e}}function ed(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ia(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Mb(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function kb(){throw new Error}var Ob=kb;function a_(t){Ob=t}function b(t){return typeof t=="function"}function Jr(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ea=Jr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ir(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var he=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(b(r))try{r()}catch(s){e=s instanceof Ea?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{c_(s)}catch(o){e=e??[],o instanceof Ea?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ea(e)}}add(e){var n;if(e&&e!==this)if(this.closed)c_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ir(n,e)}remove(e){let{_finalizers:n}=this;n&&ir(n,e),e instanceof t&&e._removeParent(this)}};he.EMPTY=(()=>{let t=new he;return t.closed=!0,t})();var td=he.EMPTY;function Ca(t){return t instanceof he||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function c_(t){b(t)?t():t.unsubscribe()}var vt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zr={setTimeout(t,e,...n){let{delegate:r}=Zr;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Zr;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ta(t){Zr.setTimeout(()=>{let{onUnhandledError:e}=vt;if(e)e(t);else throw t})}function ms(){}var u_=nd("C",void 0,void 0);function l_(t){return nd("E",void 0,t)}function d_(t){return nd("N",t,void 0)}function nd(t,e,n){return{kind:t,value:e,error:n}}var sr=null;function Xr(t){if(vt.useDeprecatedSynchronousErrorHandling){let e=!sr;if(e&&(sr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=sr;if(sr=null,n)throw r}}else t()}function h_(t){vt.useDeprecatedSynchronousErrorHandling&&sr&&(sr.errorThrown=!0,sr.error=t)}var or=class extends he{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ca(e)&&e.add(this)):this.destination=Vb}static create(e,n,r){return new ei(e,n,r)}next(e){this.isStopped?id(d_(e),this):this._next(e)}error(e){this.isStopped?id(l_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?id(u_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Fb=Function.prototype.bind;function rd(t,e){return Fb.call(t,e)}var sd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Da(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Da(r)}else Da(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Da(n)}}},ei=class extends or{constructor(e,n,r){super();let i;if(b(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&vt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&rd(e.next,s),error:e.error&&rd(e.error,s),complete:e.complete&&rd(e.complete,s)}):i=e}this.destination=new sd(i)}};function Da(t){vt.useDeprecatedSynchronousErrorHandling?h_(t):Ta(t)}function Lb(t){throw t}function id(t,e){let{onStoppedNotification:n}=vt;n&&Zr.setTimeout(()=>n(t,e))}var Vb={closed:!0,next:ms,error:Lb,complete:ms};var ti=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rt(t){return t}function od(...t){return ad(t)}function ad(t){return t.length===0?rt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var $=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=jb(n)?n:new ei(n,r,i);return Xr(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=f_(r),new r((i,s)=>{let o=new ei({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ti](){return this}pipe(...n){return ad(n)(this)}toPromise(n){return n=f_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function f_(t){var e;return(e=t??vt.Promise)!==null&&e!==void 0?e:Promise}function Ub(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}function jb(t){return t&&t instanceof or||Ub(t)&&Ca(t)}function cd(t){return b(t?.lift)}function H(t){return e=>{if(cd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function q(t,e,n,r,i){return new ud(t,e,n,r,i)}var ud=class extends or{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ni(){return H((t,e)=>{let n=null;t._refCount++;let r=q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ri=class extends ${constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new he;let n=this.getSubject();e.add(this.source.subscribe(q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=he.EMPTY)}return e}refCount(){return ni()(this)}};var p_=Jr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends ${constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ba(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new p_}next(n){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Xr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?td:(this.currentObservers=null,s.push(n),new he(()=>{this.currentObservers=null,ir(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new $;return n.source=this,n}}return t.create=(e,n)=>new ba(e,n),t})(),ba=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:td}};var fe=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ld={now(){return(ld.delegate||Date).now()},delegate:void 0};var Sa=class extends he{constructor(e,n){super()}schedule(e,n=0){return this}};var ys={setInterval(t,e,...n){let{delegate:r}=ys;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=ys;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ii=class extends Sa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return ys.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&ys.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ir(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var si=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};si.now=ld.now;var oi=class extends si{constructor(e,n=si.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var dd=new oi(ii);var Aa=class extends ii{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ra=class extends oi{};var hd=new Ra(Aa);var Ue=new $(t=>t.complete());function g_(t){return t&&b(t.schedule)}function m_(t){return t[t.length-1]}function y_(t){return b(m_(t))?t.pop():void 0}function Rn(t){return g_(m_(t))?t.pop():void 0}function fd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function v_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function __(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ar(t){return this instanceof ar?(this.v=t,this):new ar(t)}function w_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,_){s.push([h,f,g,_])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof ar?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function I_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof __=="function"?__(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var xa=t=>t&&typeof t.length=="number"&&typeof t!="function";function Na(t){return b(t?.then)}function Pa(t){return b(t[ti])}function Ma(t){return Symbol.asyncIterator&&b(t?.[Symbol.asyncIterator])}function ka(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Bb(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Oa=Bb();function Fa(t){return b(t?.[Oa])}function La(t){return w_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ar(n.read());if(i)return yield ar(void 0);yield yield ar(r)}}finally{n.releaseLock()}})}function Va(t){return b(t?.getReader)}function Ie(t){if(t instanceof $)return t;if(t!=null){if(Pa(t))return $b(t);if(xa(t))return Hb(t);if(Na(t))return qb(t);if(Ma(t))return E_(t);if(Fa(t))return zb(t);if(Va(t))return Wb(t)}throw ka(t)}function $b(t){return new $(e=>{let n=t[ti]();if(b(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Hb(t){return new $(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function qb(t){return new $(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ta)})}function zb(t){return new $(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function E_(t){return new $(e=>{Gb(t,e).catch(n=>e.error(n))})}function Wb(t){return E_(La(t))}function Gb(t,e){var n,r,i,s;return v_(this,void 0,void 0,function*(){try{for(n=I_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function qe(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function xn(t,e=0){return H((n,r)=>{n.subscribe(q(r,i=>qe(r,t,()=>r.next(i),e),()=>qe(r,t,()=>r.complete(),e),i=>qe(r,t,()=>r.error(i),e)))})}function Nn(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function C_(t,e){return Ie(t).pipe(Nn(e),xn(e))}function T_(t,e){return Ie(t).pipe(Nn(e),xn(e))}function D_(t,e){return new $(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function b_(t,e){return new $(n=>{let r;return qe(n,e,()=>{r=t[Oa](),qe(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}function Ua(t,e){if(!t)throw new Error("Iterable cannot be null");return new $(n=>{qe(n,e,()=>{let r=t[Symbol.asyncIterator]();qe(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function S_(t,e){return Ua(La(t),e)}function A_(t,e){if(t!=null){if(Pa(t))return C_(t,e);if(xa(t))return D_(t,e);if(Na(t))return T_(t,e);if(Ma(t))return Ua(t,e);if(Fa(t))return b_(t,e);if(Va(t))return S_(t,e)}throw ka(t)}function ge(t,e){return e?A_(t,e):Ie(t)}function S(...t){let e=Rn(t);return ge(t,e)}function ai(t,e){let n=b(t)?t:()=>t,r=i=>i.error(n());return new $(e?i=>e.schedule(r,0,i):r)}function pd(t){return!!t&&(t instanceof $||b(t.lift)&&b(t.subscribe))}var an=Jr(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function z(t,e){return H((n,r)=>{let i=0;n.subscribe(q(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:Kb}=Array;function Qb(t,e){return Kb(e)?t(...e):t(e)}function R_(t){return z(e=>Qb(t,e))}var{isArray:Yb}=Array,{getPrototypeOf:Jb,prototype:Zb,keys:Xb}=Object;function x_(t){if(t.length===1){let e=t[0];if(Yb(e))return{args:e,keys:null};if(eS(e)){let n=Xb(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function eS(t){return t&&typeof t=="object"&&Jb(t)===Zb}function N_(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function ja(...t){let e=Rn(t),n=y_(t),{args:r,keys:i}=x_(t);if(r.length===0)return ge([],e);let s=new $(tS(r,e,i?o=>N_(i,o):rt));return n?s.pipe(R_(n)):s}function tS(t,e,n=rt){return r=>{P_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)P_(e,()=>{let u=ge(t[c],e),l=!1;u.subscribe(q(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function P_(t,e,n){t?qe(n,t,e):e()}function M_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?g(_):c.push(_),g=_=>{s&&e.next(_),u++;let P=!1;Ie(n(_,l++)).subscribe(q(e,B=>{i?.(B),s?f(B):e.next(B)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let B=c.shift();o?qe(e,o,()=>g(B)):g(B)}h()}catch(B){e.error(B)}}))};return t.subscribe(q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function me(t,e,n=1/0){return b(e)?me((r,i)=>z((s,o)=>e(r,s,i,o))(Ie(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>M_(r,i,t,n)))}function gd(t=1/0){return me(rt,t)}function k_(){return gd(1)}function ci(...t){return k_()(ge(t,Rn(t)))}function Ba(t){return new $(e=>{Ie(t()).subscribe(e)})}function wt(t,e){return H((n,r)=>{let i=0;n.subscribe(q(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Pn(t){return H((e,n)=>{let r=null,i=!1,s;r=e.subscribe(q(n,void 0,void 0,o=>{s=Ie(t(o,Pn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function O_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(q(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ui(t,e){return b(e)?me(t,e,1):me(t,1)}function Mn(t){return H((e,n)=>{let r=!1;e.subscribe(q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cn(t){return t<=0?()=>Ue:H((e,n)=>{let r=0;e.subscribe(q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function md(t){return z(()=>t)}function $a(t=nS){return H((e,n)=>{let r=!1;e.subscribe(q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function nS(){return new an}function _s(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,s)=>t(i,s,r)):rt,cn(1),n?Mn(e):$a(()=>new an))}function li(t){return t<=0?()=>Ue:H((e,n)=>{let r=[];e.subscribe(q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function yd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?wt((i,s)=>t(i,s,r)):rt,li(1),n?Mn(e):$a(()=>new an))}function _d(t,e){return H(O_(t,e,arguments.length>=2,!0))}function vd(...t){let e=Rn(t);return H((n,r)=>{(e?ci(t,n,e):ci(t,n)).subscribe(r)})}function ze(t,e){return H((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(q(r,c=>{i?.unsubscribe();let u=0,l=s++;Ie(t(c,l)).subscribe(i=q(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function wd(t){return H((e,n)=>{Ie(t).subscribe(q(n,()=>n.complete(),ms)),!n.closed&&e.subscribe(n)})}function ye(t,e,n){let r=b(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(q(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):rt}var yv="https://g.co/ng/security#xss",I=class extends Error{constructor(e,n){super(fh(e,n)),this.code=e}};function fh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ps(t){return{toString:t}.toString()}var Ha="__parameters__";function rS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function _v(t,e,n){return Ps(()=>{let r=rS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Ha)?c[Ha]:Object.defineProperty(c,Ha,{value:[]})[Ha];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var cr=globalThis;function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function Ge(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ge).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function F_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var iS=ee({__forward_ref__:ee});function vv(t){return t.__forward_ref__=vv,t.toString=function(){return Ge(this())},t}function ut(t){return wv(t)?t():t}function wv(t){return typeof t=="function"&&t.hasOwnProperty(iS)&&t.__forward_ref__===vv}function E(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function gc(t){return L_(t,Ev)||L_(t,Cv)}function Iv(t){return gc(t)!==null}function L_(t,e){return t.hasOwnProperty(e)?t[e]:null}function sS(t){let e=t&&(t[Ev]||t[Cv]);return e||null}function V_(t){return t&&(t.hasOwnProperty(U_)||t.hasOwnProperty(oS))?t[U_]:null}var Ev=ee({\u0275prov:ee}),U_=ee({\u0275inj:ee}),Cv=ee({ngInjectableDef:ee}),oS=ee({ngInjectorDef:ee}),N=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=E({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Tv(t){return t&&!!t.\u0275providers}var aS=ee({\u0275cmp:ee}),cS=ee({\u0275dir:ee}),uS=ee({\u0275pipe:ee}),lS=ee({\u0275mod:ee}),Ya=ee({\u0275fac:ee}),vs=ee({__NG_ELEMENT_ID__:ee}),j_=ee({__NG_ENV_ID__:ee});function mi(t){return typeof t=="string"?t:t==null?"":String(t)}function dS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():mi(t)}function hS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new I(-200,t)}function ph(t,e){throw new I(-201,!1)}var M=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(M||{}),Nd;function Dv(){return Nd}function We(t){let e=Nd;return Nd=t,e}function bv(t,e,n){let r=gc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&M.Optional)return null;if(e!==void 0)return e;ph(t,"Injector")}var fS={},ws=fS,Pd="__NG_DI_FLAG__",Ja="ngTempTokenPath",pS="ngTokenPath",gS=/\n/gm,mS="\u0275",B_="__source",pi;function yS(){return pi}function kn(t){let e=pi;return pi=t,e}function _S(t,e=M.Default){if(pi===void 0)throw new I(-203,!1);return pi===null?bv(t,void 0,e):pi.get(t,e&M.Optional?null:void 0,e)}function k(t,e=M.Default){return(Dv()||_S)(ut(t),e)}function v(t,e=M.Default){return k(t,mc(e))}function mc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Md(t){let e=[];for(let n=0;n<t.length;n++){let r=ut(t[n]);if(Array.isArray(r)){if(r.length===0)throw new I(900,!1);let i,s=M.Default;for(let o=0;o<r.length;o++){let a=r[o],c=vS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function Sv(t,e){return t[Pd]=e,t.prototype[Pd]=e,t}function vS(t){return t[Pd]}function wS(t,e,n,r){let i=t[Ja];throw e[B_]&&i.unshift(e[B_]),t.message=IS(`
`+t.message,i,n,r),t[pS]=i,t[Ja]=null,t}function IS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==mS?t.slice(2):t;let i=Ge(e);if(Array.isArray(e))i=e.map(Ge).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ge(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(gS,`
  `)}`}var je=Sv(_v("Optional"),8);var Av=Sv(_v("SkipSelf"),4);function dr(t,e){let n=t.hasOwnProperty(Ya);return n?t[Ya]:null}function gh(t,e){t.forEach(n=>Array.isArray(n)?gh(n,e):e(n))}function Rv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Za(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Is={},kt=[],yi=new N(""),xv=new N("",-1),Nv=new N(""),Xa=class{get(e,n=ws){if(n===ws){let r=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw r.name="NullInjectorError",r}return n}},Pv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Pv||{}),Lt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Lt||{}),Tt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Tt||{});function ES(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function kd(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];CS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Mv(t){return t===3||t===4||t===6}function CS(t){return t.charCodeAt(0)===64}function mh(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?$_(t,n,i,null,e[++r]):$_(t,n,i,null,null))}}return t}function $_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var kv="ng-template";function TS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ES(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(yh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function yh(t){return t.type===4&&t.value!==kv}function DS(t,e,n){let r=t.type===4&&!n?kv:t.value;return e===r}function bS(t,e,n){let r=4,i=t.attrs,s=i!==null?RS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!It(r)&&!It(c))return!1;if(o&&It(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!DS(t,c,n)||c===""&&e.length===1){if(It(r))return!1;o=!0}}else if(r&8){if(i===null||!TS(t,i,c,n)){if(It(r))return!1;o=!0}}else{let u=e[++a],l=SS(c,i,yh(t),n);if(l===-1){if(It(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(It(r))return!1;o=!0}}}}return It(r)||o}function It(t){return(t&1)===0}function SS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return xS(e,t)}function AS(t,e,n=!1){for(let r=0;r<e.length;r++)if(bS(t,e[r],n))return!0;return!1}function RS(t){for(let e=0;e<t.length;e++){let n=t[e];if(Mv(n))return e}return t.length}function xS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function H_(t,e){return t?":not("+e.trim()+")":e}function NS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!It(o)&&(e+=H_(s,i),i=""),r=o,s=s||!It(r);n++}return i!==""&&(e+=H_(s,i)),e}function PS(t){return t.map(NS).join(",")}function MS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!It(i))break;i=s}r++}return{attrs:e,classes:n}}function Ke(t){return Ps(()=>{let e=jv(t),n=se(w({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Pv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Lt.Emulated,styles:t.styles||kt,_:null,schemas:t.schemas||null,tView:null,id:""});Bv(n);let r=t.dependencies;return n.directiveDefs=z_(r,!1),n.pipeDefs=z_(r,!0),n.id=FS(n),n})}function kS(t){return hr(t)||Fv(t)}function OS(t){return t!==null}function hn(t){return Ps(()=>({type:t.type,bootstrap:t.bootstrap||kt,declarations:t.declarations||kt,imports:t.imports||kt,exports:t.exports||kt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function q_(t,e){if(t==null)return Is;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Tt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Tt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Ii(t){return Ps(()=>{let e=jv(t);return Bv(e),e})}function Ov(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function hr(t){return t[aS]||null}function Fv(t){return t[cS]||null}function Lv(t){return t[uS]||null}function Vv(t){let e=hr(t)||Fv(t)||Lv(t);return e!==null?e.standalone:!1}function Uv(t,e){let n=t[lS]||null;if(!n&&e===!0)throw new Error(`Type ${Ge(t)} does not have '\u0275mod' property.`);return n}function jv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Is,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||kt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:q_(t.inputs,e),outputs:q_(t.outputs),debugInfo:null}}function Bv(t){t.features?.forEach(e=>e(t))}function z_(t,e){if(!t)return null;let n=e?Lv:kS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(OS)}function FS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yc(t){return{\u0275providers:t}}function Ms(...t){return{\u0275providers:$v(!0,t),\u0275fromNgModule:!0}}function $v(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return gh(e,o=>{let a=o;Od(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Hv(i,s),n}function Hv(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];_h(i,s=>{e(s,r)})}}function Od(t,e,n,r){if(t=ut(t),!t)return!1;let i=null,s=V_(t),o=!s&&hr(t);if(!s&&!o){let c=t.ngModule;if(s=V_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Od(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{gh(s.imports,l=>{Od(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Hv(u,e)}if(!a){let u=dr(i)||(()=>new i);e({provide:i,useFactory:u,deps:kt},i),e({provide:Nv,useValue:i,multi:!0},i),e({provide:yi,useValue:()=>k(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;_h(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function _h(t,e){for(let n of t)Tv(n)&&(n=n.\u0275providers),Array.isArray(n)?_h(n,e):e(n)}var LS=ee({provide:String,useValue:ee});function qv(t){return t!==null&&typeof t=="object"&&LS in t}function VS(t){return!!(t&&t.useExisting)}function US(t){return!!(t&&t.useFactory)}function Fd(t){return typeof t=="function"}var _c=new N(""),za={},jS={},Id;function vh(){return Id===void 0&&(Id=new Xa),Id}var dt=class{},Es=class extends dt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vd(e,o=>this.processProvider(o)),this.records.set(xv,di(void 0,this)),i.has("environment")&&this.records.set(dt,di(void 0,this));let s=this.records.get(_c);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Nv,kt,M.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=kn(this),r=We(void 0),i;try{return e()}finally{kn(n),We(r)}}get(e,n=ws,r=M.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(j_))return e[j_](this);r=mc(r);let i,s=kn(this),o=We(void 0);try{if(!(r&M.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=WS(e)&&gc(e);u&&this.injectableDefInScope(u)?c=di(Ld(e),za):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&M.Self?vh():this.parent;return n=r&M.Optional&&n===ws?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Ja]=a[Ja]||[]).unshift(Ge(e)),s)throw a;return wS(a,e,"R3InjectorError",this.source)}else throw a}finally{We(o),kn(s)}}resolveInjectorInitializers(){let e=G(null),n=kn(this),r=We(void 0),i;try{let s=this.get(yi,kt,M.Self);for(let o of s)o()}finally{kn(n),We(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(e){e=ut(e);let n=Fd(e)?e:ut(e&&e.provide),r=$S(e);if(!Fd(e)&&e.multi===!0){let i=this.records.get(n);i||(i=di(void 0,za,!0),i.factory=()=>Md(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=G(null);try{return n.value===za&&(n.value=jS,n.value=n.factory()),typeof n.value=="object"&&n.value&&zS(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ut(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ld(t){let e=gc(t),n=e!==null?e.factory:dr(t);if(n!==null)return n;if(t instanceof N)throw new I(204,!1);if(t instanceof Function)return BS(t);throw new I(204,!1)}function BS(t){if(t.length>0)throw new I(204,!1);let n=sS(t);return n!==null?()=>n.factory(t):()=>new t}function $S(t){if(qv(t))return di(void 0,t.useValue);{let e=HS(t);return di(e,za)}}function HS(t,e,n){let r;if(Fd(t)){let i=ut(t);return dr(i)||Ld(i)}else if(qv(t))r=()=>ut(t.useValue);else if(US(t))r=()=>t.useFactory(...Md(t.deps||[]));else if(VS(t))r=()=>k(ut(t.useExisting));else{let i=ut(t&&(t.useClass||t.provide));if(qS(t))r=()=>new i(...Md(t.deps));else return dr(i)||Ld(i)}return r}function di(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function qS(t){return!!t.deps}function zS(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function WS(t){return typeof t=="function"||typeof t=="object"&&t instanceof N}function Vd(t,e){for(let n of t)Array.isArray(n)?Vd(n,e):n&&Tv(n)?Vd(n.\u0275providers,e):e(n)}function _r(t,e){t instanceof Es&&t.assertNotDestroyed();let n,r=kn(t),i=We(void 0);try{return e()}finally{kn(r),We(i)}}function GS(){return Dv()!==void 0||yS()!=null}function KS(t){return typeof t=="function"}var fn=0,U=1,C=2,ke=3,Ct=4,bt=5,ec=6,Cs=7,un=8,_i=9,Dt=10,Se=11,Ts=12,W_=13,ks=14,Vt=15,vc=16,hi=17,vi=18,wc=19,zv=20,On=21,Ed=22,fr=23,Ut=25,Wv=1;var pr=7,tc=8,nc=9,lt=10,wh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(wh||{});function ur(t){return Array.isArray(t)&&typeof t[Wv]=="object"}function pn(t){return Array.isArray(t)&&t[Wv]===!0}function Gv(t){return(t.flags&4)!==0}function Ic(t){return t.componentOffset>-1}function Ih(t){return(t.flags&1)===1}function Os(t){return!!t.template}function QS(t){return(t[C]&512)!==0}var Ud=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function Kv(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Fs(){return Qv}function Qv(t){return t.type.prototype.ngOnChanges&&(t.setInput=JS),YS}Fs.ngInherit=!0;function YS(){let t=Jv(this),e=t?.current;if(e){let n=t.previous;if(n===Is)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function JS(t,e,n,r,i){let s=this.declaredInputs[r],o=Jv(t)||ZS(t,{previous:Is,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Ud(u&&u.currentValue,n,c===Is),Kv(t,e,i,n)}var Yv="__ngSimpleChanges__";function Jv(t){return t[Yv]||null}function ZS(t,e){return t[Yv]=e}var G_=null;var Ot=function(t,e,n){G_?.(t,e,n)},Zv="svg",XS="math",eA=!1;function tA(){return eA}function jt(t){for(;Array.isArray(t);)t=t[fn];return t}function nA(t,e){return jt(e[t])}function ht(t,e){return jt(e[t.index])}function Xv(t,e){return t.data[e]}function rA(t,e){return t[e]}function Vn(t,e){let n=e[t];return ur(n)?n:n[fn]}function Eh(t){return(t[C]&128)===128}function iA(t){return pn(t[ke])}function rc(t,e){return e==null?null:t[e]}function ew(t){t[hi]=0}function sA(t){t[C]&1024||(t[C]|=1024,Eh(t)&&Ds(t))}function Ch(t){return!!(t[C]&9216||t[fr]?.dirty)}function jd(t){t[Dt].changeDetectionScheduler?.notify(1),Ch(t)?Ds(t):t[C]&64&&(tA()?(t[C]|=1024,Ds(t)):t[Dt].changeDetectionScheduler?.notify())}function Ds(t){t[Dt].changeDetectionScheduler?.notify();let e=bs(t);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!Eh(e)));)e=bs(e)}function tw(t,e){if((t[C]&256)===256)throw new I(911,!1);t[On]===null&&(t[On]=[]),t[On].push(e)}function oA(t,e){if(t[On]===null)return;let n=t[On].indexOf(e);n!==-1&&t[On].splice(n,1)}function bs(t){let e=t[ke];return pn(e)?e[ke]:e}var j={lFrame:uw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function aA(){return j.lFrame.elementDepthCount}function cA(){j.lFrame.elementDepthCount++}function uA(){j.lFrame.elementDepthCount--}function nw(){return j.bindingsEnabled}function lA(){return j.skipHydrationRootTNode!==null}function dA(t){return j.skipHydrationRootTNode===t}function hA(){j.skipHydrationRootTNode=null}function ne(){return j.lFrame.lView}function Bt(){return j.lFrame.tView}function ft(){let t=rw();for(;t!==null&&t.type===64;)t=t.parent;return t}function rw(){return j.lFrame.currentTNode}function fA(){let t=j.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ls(t,e){let n=j.lFrame;n.currentTNode=t,n.isParent=e}function iw(){return j.lFrame.isParent}function pA(){j.lFrame.isParent=!1}function sw(){let t=j.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function gA(){return j.lFrame.bindingIndex}function mA(t){return j.lFrame.bindingIndex=t}function Th(){return j.lFrame.bindingIndex++}function yA(t){let e=j.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function _A(){return j.lFrame.inI18n}function vA(t,e){let n=j.lFrame;n.bindingIndex=n.bindingRootIndex=t,Bd(e)}function wA(){return j.lFrame.currentDirectiveIndex}function Bd(t){j.lFrame.currentDirectiveIndex=t}function ow(t){j.lFrame.currentQueryIndex=t}function IA(t){let e=t[U];return e.type===2?e.declTNode:e.type===1?t[bt]:null}function aw(t,e,n){if(n&M.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&M.Host);)if(i=IA(s),i===null||(s=s[ks],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=j.lFrame=cw();return r.currentTNode=e,r.lView=t,!0}function Dh(t){let e=cw(),n=t[U];j.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function cw(){let t=j.lFrame,e=t===null?null:t.child;return e===null?uw(t):e}function uw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function lw(){let t=j.lFrame;return j.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var dw=lw;function bh(){let t=lw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ec(){return j.lFrame.selectedIndex}function gr(t){j.lFrame.selectedIndex=t}function Sh(){let t=j.lFrame;return Xv(t.tView,t.selectedIndex)}function Vs(){j.lFrame.currentNamespace=Zv}function hw(){EA()}function EA(){j.lFrame.currentNamespace=null}function CA(){return j.lFrame.currentNamespace}var fw=!0;function Ah(){return fw}function Rh(t){fw=t}function TA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Qv(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function xh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Wa(t,e,n){pw(t,e,3,n)}function Ga(t,e,n,r){(t[C]&3)===n&&pw(t,e,n,r)}function Cd(t,e){let n=t[C];(n&3)===e&&(n&=16383,n+=1,t[C]=n)}function pw(t,e,n,r){let i=r!==void 0?t[hi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[hi]+=65536),(a<s||s==-1)&&(DA(t,n,e,c),t[hi]=(t[hi]&4294901760)+c+2),c++}function K_(t,e){Ot(4,t,e);let n=G(null);try{e.call(t)}finally{G(n),Ot(5,t,e)}}function DA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[C]>>14<t[hi]>>16&&(t[C]&3)===e&&(t[C]+=16384,K_(a,s)):K_(a,s)}var gi=-1,Ss=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function bA(t){return t instanceof Ss}function SA(t){return(t.flags&8)!==0}function AA(t){return(t.flags&16)!==0}function gw(t){return t!==gi}function ic(t){return t&32767}function RA(t){return t>>16}function sc(t,e){let n=RA(t),r=e;for(;n>0;)r=r[ks],n--;return r}var $d=!0;function oc(t){let e=$d;return $d=t,e}var xA=256,mw=xA-1,yw=5,NA=0,Ft={};function PA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(vs)&&(r=n[vs]),r==null&&(r=n[vs]=NA++);let i=r&mw,s=1<<i;e.data[t+(i>>yw)]|=s}function _w(t,e){let n=vw(t,e);if(n!==-1)return n;let r=e[U];r.firstCreatePass&&(t.injectorIndex=e.length,Td(r.data,t),Td(e,null),Td(r.blueprint,null));let i=Nh(t,e),s=t.injectorIndex;if(gw(i)){let o=ic(i),a=sc(i,e),c=a[U].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Td(t,e){t.push(0,0,0,0,0,0,0,0,e)}function vw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Nh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Tw(i),r===null)return gi;if(n++,i=i[ks],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return gi}function MA(t,e,n){PA(t,e,n)}function kA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(Mv(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function ww(t,e,n){if(n&M.Optional||t!==void 0)return t;ph(e,"NodeInjector")}function Iw(t,e,n,r){if(n&M.Optional&&r===void 0&&(r=null),!(n&(M.Self|M.Host))){let i=t[_i],s=We(void 0);try{return i?i.get(e,r,n&M.Optional):bv(e,r,n&M.Optional)}finally{We(s)}}return ww(r,e,n)}function Ew(t,e,n,r=M.Default,i){if(t!==null){if(e[C]&2048&&!(r&M.Self)){let o=UA(t,e,n,r,Ft);if(o!==Ft)return o}let s=Cw(t,e,n,r,Ft);if(s!==Ft)return s}return Iw(e,n,r,i)}function Cw(t,e,n,r,i){let s=LA(n);if(typeof s=="function"){if(!aw(e,t,r))return r&M.Host?ww(i,n,r):Iw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&M.Optional))ph(n);else return o}finally{dw()}}else if(typeof s=="number"){let o=null,a=vw(t,e),c=gi,u=r&M.Host?e[Vt][bt]:null;for((a===-1||r&M.SkipSelf)&&(c=a===-1?Nh(t,e):e[a+8],c===gi||!Y_(r,!1)?a=-1:(o=e[U],a=ic(c),e=sc(c,e)));a!==-1;){let l=e[U];if(Q_(s,a,l.data)){let d=OA(a,e,n,o,r,u);if(d!==Ft)return d}c=e[a+8],c!==gi&&Y_(r,e[U].data[a+8]===u)&&Q_(s,a,e)?(o=l,a=ic(c),e=sc(c,e)):a=-1}}return i}function OA(t,e,n,r,i,s){let o=e[U],a=o.data[t+8],c=r==null?Ic(a)&&$d:r!=o&&(a.type&3)!==0,u=i&M.Host&&s===a,l=FA(a,o,n,c,u);return l!==null?As(e,o,l,a):Ft}function FA(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&Os(f)&&f.type===n)return c}return null}function As(t,e,n,r){let i=t[n],s=e.data;if(bA(i)){let o=i;o.resolving&&hS(dS(s[n]));let a=oc(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?We(o.injectImpl):null,l=aw(t,r,M.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&TA(n,s[n],e)}finally{u!==null&&We(u),oc(a),o.resolving=!1,dw()}}return i}function LA(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(vs)?t[vs]:void 0;return typeof e=="number"?e>=0?e&mw:VA:e}function Q_(t,e,n){let r=1<<t;return!!(n[e+(t>>yw)]&r)}function Y_(t,e){return!(t&M.Self)&&!(t&M.Host&&e)}var lr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Ew(this._tNode,this._lView,e,mc(r),n)}};function VA(){return new lr(ft(),ne())}function Ph(t){return Ps(()=>{let e=t.prototype.constructor,n=e[Ya]||Hd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Ya]||Hd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Hd(t){return wv(t)?()=>{let e=Hd(ut(t));return e&&e()}:dr(t)}function UA(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[C]&2048&&!(o[C]&512);){let a=Cw(s,o,n,r|M.Self,Ft);if(a!==Ft)return a;let c=s.parent;if(!c){let u=o[zv];if(u){let l=u.get(n,Ft,r);if(l!==Ft)return l}c=Tw(o),o=o[ks]}s=c}return i}function Tw(t){let e=t[U],n=e.type;return n===2?e.declTNode:n===1?t[bt]:null}function Mh(t){return kA(ft(),t)}function J_(t,e=null,n=null,r){let i=Dw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Dw(t,e=null,n=null,r,i=new Set){let s=[n||kt,Ms(t)];return r=r||(typeof t=="object"?void 0:Ge(t)),new Es(s,e||vh(),r||null,i)}var St=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return J_({name:""},i,r,"");{let s=r.name??"";return J_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=ws,e.NULL=new Xa,e.\u0275prov=E({token:e,providedIn:"any",factory:()=>k(xv)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var jA="ngOriginalError";function Dd(t){return t[jA]}var ln=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Dd(e);for(;n&&Dd(n);)n=Dd(n);return n||null}},bw=new N("",{providedIn:"root",factory:()=>v(ln).handleError.bind(void 0)}),Sw=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=BA,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),qd=class extends Sw{constructor(e){super(),this._lView=e}onDestroy(e){return tw(this._lView,e),()=>oA(this._lView,e)}};function BA(){return new qd(ne())}function $A(){return Cc(ft(),ne())}function Cc(t,e){return new Us(ht(t,e))}var Us=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=$A;let t=e;return t})();var zd=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,GS()&&(this.destroyRef=v(Sw,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=bd(s),i&&(i=bd(i)),o&&(o=bd(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof he&&e.add(a),a}};function bd(t){return e=>{setTimeout(t,void 0,e)}}var Et=zd;function Aw(t){return(t.flags&128)===128}var Rw=new Map,HA=0;function qA(){return HA++}function zA(t){Rw.set(t[wc],t)}function WA(t){Rw.delete(t[wc])}var Z_="__ngContext__";function mr(t,e){ur(e)?(t[Z_]=e[wc],zA(e)):t[Z_]=e}function xw(t){return Pw(t[Ts])}function Nw(t){return Pw(t[Ct])}function Pw(t){for(;t!==null&&!pn(t);)t=t[Ct];return t}var Wd;function Mw(t){Wd=t}function GA(){if(Wd!==void 0)return Wd;if(typeof document<"u")return document;throw new I(210,!1)}var kh=new N("",{providedIn:"root",factory:()=>KA}),KA="ng",Oh=new N(""),Un=new N("",{providedIn:"platform",factory:()=>"unknown"});var Fh=new N("",{providedIn:"root",factory:()=>GA().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var QA="h",YA="b";var JA=()=>null;function Lh(t,e,n=!1){return JA(t,e,n)}var kw=!1,ZA=new N("",{providedIn:"root",factory:()=>kw});var qa;function XA(){if(qa===void 0&&(qa=null,cr.trustedTypes))try{qa=cr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return qa}function X_(t){return XA()?.createScriptURL(t)||t}var ac=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yv})`}};function Tc(t){return t instanceof ac?t.changingThisBreaksApplicationSecurity:t}function Vh(t,e){let n=eR(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${yv})`)}return n===e}function eR(t){return t instanceof ac&&t.getTypeName()||null}var tR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ow(t){return t=String(t),t.match(tR)?t:"unsafe:"+t}var Dc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Dc||{});function vr(t){let e=Lw();return e?e.sanitize(Dc.URL,t)||"":Vh(t,"URL")?Tc(t):Ow(mi(t))}function nR(t){let e=Lw();if(e)return X_(e.sanitize(Dc.RESOURCE_URL,t)||"");if(Vh(t,"ResourceURL"))return X_(Tc(t));throw new I(904,!1)}function rR(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?nR:vr}function Fw(t,e,n){return rR(e,n)(t)}function Lw(){let t=ne();return t&&t[Dt].sanitizer}function Vw(t){return t.ownerDocument.defaultView}function Uw(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(wr||{}),iR;function Uh(t,e){return iR(t,e)}function fi(t,e,n,r,i){if(r!=null){let s,o=!1;pn(r)?s=r:ur(r)&&(o=!0,r=r[fn]);let a=jt(r);t===0&&n!==null?i==null?qw(e,n,a):cc(e,n,a,i||null,!0):t===1&&n!==null?cc(e,n,a,i||null,!0):t===2?IR(e,a,o):t===3&&e.destroyNode(a),s!=null&&CR(e,t,s,n,i)}}function sR(t,e){return t.createText(e)}function oR(t,e,n){t.setValue(e,n)}function jw(t,e,n){return t.createElement(e,n)}function aR(t,e){Bw(t,e),e[fn]=null,e[bt]=null}function cR(t,e,n,r,i,s){r[fn]=i,r[bt]=e,bc(t,r,n,1,i,s)}function Bw(t,e){e[Dt].changeDetectionScheduler?.notify(1),bc(t,e,e[Se],2,null,null)}function uR(t){let e=t[Ts];if(!e)return Sd(t[U],t);for(;e;){let n=null;if(ur(e))n=e[Ts];else{let r=e[lt];r&&(n=r)}if(!n){for(;e&&!e[Ct]&&e!==t;)ur(e)&&Sd(e[U],e),e=e[ke];e===null&&(e=t),ur(e)&&Sd(e[U],e),n=e&&e[Ct]}e=n}}function lR(t,e,n,r){let i=lt+r,s=n.length;r>0&&(n[i-1][Ct]=e),r<s-lt?(e[Ct]=n[i],Rv(n,lt+r,e)):(n.push(e),e[Ct]=null),e[ke]=n;let o=e[vc];o!==null&&n!==o&&dR(o,e);let a=e[vi];a!==null&&a.insertView(t),jd(e),e[C]|=128}function dR(t,e){let n=t[nc],i=e[ke][ke][Vt];e[Vt]!==i&&(t[C]|=wh.HasTransplantedViews),n===null?t[nc]=[e]:n.push(e)}function $w(t,e){let n=t[nc],r=n.indexOf(e);n.splice(r,1)}function Gd(t,e){if(t.length<=lt)return;let n=lt+e,r=t[n];if(r){let i=r[vc];i!==null&&i!==t&&$w(i,r),e>0&&(t[n-1][Ct]=r[Ct]);let s=Za(t,lt+e);aR(r[U],r);let o=s[vi];o!==null&&o.detachView(s[U]),r[ke]=null,r[Ct]=null,r[C]&=-129}return r}function Hw(t,e){if(!(e[C]&256)){let n=e[Se];n.destroyNode&&bc(t,e,n,3,null,null),uR(e)}}function Sd(t,e){if(e[C]&256)return;let n=G(null);try{e[C]&=-129,e[C]|=256,e[fr]&&o_(e[fr]),fR(t,e),hR(t,e),e[U].type===1&&e[Se].destroy();let r=e[vc];if(r!==null&&pn(e[ke])){r!==e[ke]&&$w(r,e);let i=e[vi];i!==null&&i.detachView(t)}WA(e)}finally{G(n)}}function hR(t,e){let n=t.cleanup,r=e[Cs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Cs]=null);let i=e[On];if(i!==null){e[On]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function fR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ss)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ot(4,a,c);try{c.call(a)}finally{Ot(5,a,c)}}else{Ot(4,i,s);try{s.call(i)}finally{Ot(5,i,s)}}}}}function pR(t,e,n){return gR(t,e.parent,n)}function gR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Lt.None||s===Lt.Emulated)return null}return ht(r,n)}}function cc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function qw(t,e,n){t.appendChild(e,n)}function ev(t,e,n,r,i){r!==null?cc(t,e,n,r,i):qw(t,e,n)}function mR(t,e,n,r){t.removeChild(e,n,r)}function jh(t,e){return t.parentNode(e)}function yR(t,e){return t.nextSibling(e)}function _R(t,e,n){return wR(t,e,n)}function vR(t,e,n){return t.type&40?ht(t,n):null}var wR=vR,tv;function Bh(t,e,n,r){let i=pR(t,r,e),s=e[Se],o=r.parent||e[bt],a=_R(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)ev(s,i,n[c],a,!1);else ev(s,i,n,a,!1);tv!==void 0&&tv(s,r,e,n,i)}function Ka(t,e){if(e!==null){let n=e.type;if(n&3)return ht(e,t);if(n&4)return Kd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ka(t,r);{let i=t[e.index];return pn(i)?Kd(-1,i):jt(i)}}else{if(n&32)return Uh(e,t)()||jt(t[e.index]);{let r=zw(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=bs(t[Vt]);return Ka(i,r)}else return Ka(t,e.next)}}}return null}function zw(t,e){if(e!==null){let r=t[Vt][bt],i=e.projection;return r.projection[i]}return null}function Kd(t,e){let n=lt+t+1;if(n<e.length){let r=e[n],i=r[U].firstChild;if(i!==null)return Ka(r,i)}return e[pr]}function IR(t,e,n){let r=jh(t,e);r&&mR(t,r,e,n)}function $h(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&mr(jt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)$h(t,e,n.child,r,i,s,!1),fi(e,t,i,a,s);else if(c&32){let u=Uh(n,r),l;for(;l=u();)fi(e,t,i,l,s);fi(e,t,i,a,s)}else c&16?ER(t,e,r,n,i,s):fi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function bc(t,e,n,r,i,s){$h(n,r,t.firstChild,e,i,s,!1)}function ER(t,e,n,r,i,s){let o=n[Vt],c=o[bt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];fi(e,t,i,l,s)}else{let u=c,l=o[ke];Aw(r)&&(u.flags|=128),$h(t,e,u,l,i,s,!0)}}function CR(t,e,n,r,i){let s=n[pr],o=jt(n);s!==o&&fi(e,t,r,s,i);for(let a=lt;a<n.length;a++){let c=n[a];bc(c[U],c,t,e,r,s)}}function TR(t,e,n){t.setAttribute(e,"style",n)}function Ww(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Gw(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&kd(t,e,r),i!==null&&Ww(t,e,i),s!==null&&TR(t,e,s)}var jn={};function pe(t=1){Kw(Bt(),ne(),Ec()+t,!1)}function Kw(t,e,n,r){if(!r)if((e[C]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Wa(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Ga(e,s,0,n)}gr(n)}function oe(t,e=M.Default){let n=ne();if(n===null)return k(t,e);let r=ft();return Ew(r,n,ut(t),e)}function Qw(t,e,n,r,i,s){let o=G(null);try{let a=null;i&Tt.SignalBased&&(a=e[r][n_]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Tt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):Kv(e,a,r,s)}finally{G(o)}}function DR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gr(~i);else{let s=i,o=n[++r],a=n[++r];vA(o,s);let c=e[s];a(2,c)}}}finally{gr(-1)}}function Sc(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[fn]=i,d[C]=r|4|128|8|64,(u!==null||t&&t[C]&2048)&&(d[C]|=2048),ew(d),d[ke]=d[ks]=t,d[un]=n,d[Dt]=o||t&&t[Dt],d[Se]=a||t&&t[Se],d[_i]=c||t&&t[_i]||null,d[bt]=s,d[wc]=qA(),d[ec]=l,d[zv]=u,d[Vt]=e.type==2?t[Vt]:d,d}function Ac(t,e,n,r,i){let s=t.data[e];if(s===null)s=bR(t,e,n,r,i),_A()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=fA();s.injectorIndex=o===null?-1:o.injectorIndex}return Ls(s,!0),s}function bR(t,e,n,r,i){let s=rw(),o=iw(),a=o?s:s&&s.parent,c=t.data[e]=NR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Yw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Jw(t,e,n,r,i){let s=Ec(),o=r&2;try{gr(-1),o&&e.length>Ut&&Kw(t,e,Ut,!1),Ot(o?2:0,i),n(r,i)}finally{gr(s),Ot(o?3:1,i)}}function Zw(t,e,n){if(Gv(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function Xw(t,e,n){nw()&&(LR(t,e,n,ht(n,e)),(n.flags&64)===64&&sI(t,e,n))}function eI(t,e,n=ht){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function tI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Hh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Hh(t,e,n,r,i,s,o,a,c,u,l){let d=Ut+r,h=d+i,f=SR(d,h),g=typeof u=="function"?u():u;return f[U]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function SR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:jn);return n}function AR(t,e,n,r){let s=r.get(ZA,kw)||n===Lt.ShadowDom,o=t.selectRootElement(e,s);return RR(o),o}function RR(t){xR(t)}var xR=()=>null;function NR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return lA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nv(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Tt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?rv(r,n,u,a,c):rv(r,n,u,a)}return r}function rv(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function PR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=nv(0,d.inputs,l,c,f),u=nv(1,d.outputs,l,u,g);let _=c!==null&&o!==null&&!yh(e)?KR(c,l,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function MR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nI(t,e,n,r,i,s,o,a){let c=ht(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(qh(t,n,l,r,i),Ic(e)&&kR(n,e.index)):e.type&3?(r=MR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function kR(t,e){let n=Vn(e,t);n[C]&16||(n[C]|=64)}function rI(t,e,n,r){if(nw()){let i=r===null?null:{"":-1},s=UR(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&iI(t,e,n,o,i,a),i&&jR(n,r,i)}n.mergedAttrs=mh(n.mergedAttrs,n.attrs)}function iI(t,e,n,r,i,s){for(let u=0;u<r.length;u++)MA(_w(n,e),t,r[u].type);$R(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Yw(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=mh(n.mergedAttrs,l.hostAttrs),HR(t,n,e,c,l),BR(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}PR(t,n,s)}function OR(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;FR(o)!=a&&o.push(a),o.push(n,r,s)}}function FR(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function LR(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Ic(n)&&qR(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||_w(n,e),mr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=As(e,t,a,n);if(mr(u,e),o!==null&&GR(e,a-i,u,c,n,o),Os(c)){let l=Vn(n.index,e);l[un]=As(e,t,a,n)}}}function sI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=wA();try{gr(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Bd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&VR(c,u)}}finally{gr(-1),Bd(o)}}function VR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function UR(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(AS(e,o.selectors,!1))if(r||(r=[]),Os(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Qd(t,e,c)}else r.unshift(o),Qd(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Qd(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function jR(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new I(-301,!1);r.push(e[i],s)}}}function BR(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Os(e)&&(n[""]=t)}}function $R(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function HR(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=dr(i.type,!0)),o=new Ss(s,Os(i),oe);t.blueprint[r]=o,n[r]=o,OR(t,e,r,Yw(t,n,i.hostVars,jn),i)}function qR(t,e,n){let r=ht(e,t),i=tI(n),s=t[Dt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Rc(t,Sc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function zR(t,e,n,r,i,s){let o=ht(t,e);WR(e[Se],o,s,t.value,n,r,i)}function WR(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?mi(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function GR(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];Qw(r,n,c,u,l,d)}}function KR(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function oI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function aI(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];ow(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function Rc(t,e){return t[Ts]?t[W_][Ct]=e:t[Ts]=e,t[W_]=e,e}function Yd(t,e,n){ow(0);let r=G(null);try{e(t,n)}finally{G(r)}}function QR(t){return t[Cs]||(t[Cs]=[])}function YR(t){return t.cleanup||(t.cleanup=[])}function cI(t,e){let n=t[_i],r=n?n.get(ln,null):null;r&&r.handleError(e)}function qh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];Qw(l,u,r,a,c,i)}}function uI(t,e,n){let r=nA(e,t);oR(t[Se],r,n)}function JR(t,e){let n=Vn(e,t),r=n[U];ZR(r,n);let i=n[fn];i!==null&&n[ec]===null&&(n[ec]=Lh(i,n[_i])),zh(r,n,n[un])}function ZR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function zh(t,e,n){Dh(e);try{let r=t.viewQuery;r!==null&&Yd(1,r,n);let i=t.template;i!==null&&Jw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[vi]?.finishViewCreation(t),t.staticContentQueries&&aI(t,e),t.staticViewQueries&&Yd(2,t.viewQuery,n);let s=t.components;s!==null&&XR(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[C]&=-5,bh()}}function XR(t,e){for(let n=0;n<e.length;n++)JR(t,e[n])}function ex(t,e,n,r){let i=G(null);try{let s=e.tView,a=t[C]&4096?4096:16,c=Sc(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[vc]=u;let l=t[vi];return l!==null&&(c[vi]=l.createEmbeddedView(s)),zh(s,c,n),c}finally{G(i)}}function iv(t,e){return!e||e.firstChild===null||Aw(t)}function tx(t,e,n,r=!0){let i=e[U];if(lR(i,e,t,n),r){let o=Kd(n,t),a=e[Se],c=jh(a,t[pr]);c!==null&&cR(i,t[bt],a,e,c,o)}let s=e[ec];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function uc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(jt(s)),pn(s)&&nx(s,r);let o=n.type;if(o&8)uc(t,e,n.child,r);else if(o&32){let a=Uh(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=zw(e,n);if(Array.isArray(a))r.push(...a);else{let c=bs(e[Vt]);uc(c[U],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function nx(t,e){for(let n=lt;n<t.length;n++){let r=t[n],i=r[U].firstChild;i!==null&&uc(r[U],r,i,e)}t[pr]!==t[fn]&&e.push(t[pr])}var lI=[];function rx(t){return t[fr]??ix(t)}function ix(t){let e=lI.pop()??Object.create(ox);return e.lView=t,e}function sx(t){t.lView[fr]!==t&&(t.lView=null,lI.push(t))}var ox=se(w({},r_),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ds(t.lView)},consumerOnSignalRead(){this.lView[fr]=this}}),dI=100;function hI(t,e=!0,n=0){let r=t[Dt],i=r.rendererFactory,s=!1;s||i.begin?.();try{ax(t,n)}catch(o){throw e&&cI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function ax(t,e){Jd(t,e);let n=0;for(;Ch(t);){if(n===dI)throw new I(103,!1);n++,Jd(t,1)}}function cx(t,e,n,r){let i=e[C];if((i&256)===256)return;let s=!1;!s&&e[Dt].inlineEffectRunner?.flush(),Dh(e);let o=null,a=null;!s&&ux(t)&&(a=rx(e),o=i_(a));try{ew(e),mA(t.bindingStartIndex),n!==null&&Jw(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Wa(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Ga(e,d,0,null),Cd(e,0)}if(lx(e),fI(e,0),t.contentQueries!==null&&aI(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Wa(e,d)}else{let d=t.contentHooks;d!==null&&Ga(e,d,1),Cd(e,1)}DR(t,e);let u=t.components;u!==null&&gI(e,u,0);let l=t.viewQuery;if(l!==null&&Yd(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Wa(e,d)}else{let d=t.viewHooks;d!==null&&Ga(e,d,2),Cd(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ed]){for(let d of e[Ed])d();e[Ed]=null}s||(e[C]&=-73)}catch(c){throw Ds(e),c}finally{a!==null&&(s_(a,o),sx(a)),bh()}}function ux(t){return t.type!==2}function fI(t,e){for(let n=xw(t);n!==null;n=Nw(n))for(let r=lt;r<n.length;r++){let i=n[r];pI(i,e)}}function lx(t){for(let e=xw(t);e!==null;e=Nw(e)){if(!(e[C]&wh.HasTransplantedViews))continue;let n=e[nc];for(let r=0;r<n.length;r++){let i=n[r],s=i[ke];sA(i)}}}function dx(t,e,n){let r=Vn(e,t);pI(r,n)}function pI(t,e){Eh(t)&&Jd(t,e)}function Jd(t,e){let r=t[U],i=t[C],s=t[fr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Zl(s)),s&&(s.dirty=!1),t[C]&=-9217,o)cx(r,t,r.template,t[un]);else if(i&8192){fI(t,1);let a=r.components;a!==null&&gI(t,a,1)}}function gI(t,e,n){for(let r=0;r<e.length;r++)dx(t,e[r],n)}function Wh(t){for(t[Dt].changeDetectionScheduler?.notify();t;){t[C]|=64;let e=bs(t);if(QS(t)&&!e)return t;t=e}return null}var yr=class{get rootNodes(){let e=this._lView,n=e[U];return uc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ke];if(pn(e)){let n=e[tc],r=n?n.indexOf(this):-1;r>-1&&(Gd(e,r),Za(n,r))}this._attachedToViewContainer=!1}Hw(this._lView[U],this._lView)}onDestroy(e){tw(this._lView,e)}markForCheck(){Wh(this._cdRefInjectingView||this._lView)}detach(){this._lView[C]&=-129}reattach(){jd(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,hI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Bw(this._lView[U],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e,jd(this._lView)}},xc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=px;let t=e;return t})(),hx=xc,fx=class extends hx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=ex(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new yr(i)}};function px(){return gx(ft(),ne())}function gx(t,e){return t.type&4?new fx(e,t,Cc(t,e)):null}var wq=new RegExp(`^(\\d+)*(${YA}|${QA})*(.*)`);var mx=()=>null;function sv(t,e){return mx(t,e)}var Zd=class{},Xd=class{},lc=class{};function yx(t){let e=Error(`No component factory found for ${Ge(t)}.`);return e[_x]=t,e}var _x="ngComponent";var eh=class{resolveComponentFactory(e){throw yx(e)}},Nc=(()=>{let e=class e{};e.NULL=new eh;let t=e;return t})(),Rs=class{},Pc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>vx();let t=e;return t})();function vx(){let t=ne(),e=ft(),n=Vn(e.index,t);return(ur(n)?n:t)[Se]}var wx=(()=>{let e=class e{};e.\u0275prov=E({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ad={};var ov=new Set;function mI(t){ov.has(t)||(ov.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function av(...t){}function Ix(){let t=typeof cr.requestAnimationFrame=="function",e=cr[t?"requestAnimationFrame":"setTimeout"],n=cr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var X=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Ix().nativeRequestAnimationFrame,Tx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new I(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ex,av,av);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Ex={};function Gh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Cx(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(cr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,th(t),t.isCheckStableRunning=!0,Gh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),th(t))}function Tx(t){let e=()=>{Cx(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(Dx(a))return n.invokeTask(i,s,o,a);try{return cv(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),uv(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return cv(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),uv(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,th(t),Gh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function th(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function cv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uv(t){t._nesting--,Gh(t)}function Dx(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var yI=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=E({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function nh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=F_(i,a);else if(s==2){let c=a,u=e[++o];r=F_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var dc=class extends Nc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=hr(e);return new xs(n,this.ngModule)}};function lv(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function bx(t){let e=t.toLowerCase();return e==="svg"?Zv:e==="math"?XS:null}var rh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=mc(r);let i=this.injector.get(e,Ad,r);return i!==Ad||n===Ad?i:this.parentInjector.get(e,n,r)}},xs=class extends lc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=lv(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return lv(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=PS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof dt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new rh(e,o):e,c=a.get(Rs,null);if(c===null)throw new I(407,!1);let u=a.get(wx,null),l=a.get(yI,null),d=a.get(Zd,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?AR(f,r,this.componentDef.encapsulation,a):jw(f,g,bx(g)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let B=null;_!==null&&(B=Lh(_,a,!0));let be=Hh(0,null,null,1,0,null,null,null,null,null,null),ie=Sc(null,be,null,P,null,null,h,f,a,null,B);Dh(ie);let He,sn;try{let Ve=this.componentDef,on,ps=null;Ve.findHostDirectiveDefs?(on=[],ps=new Map,Ve.findHostDirectiveDefs(Ve,on,ps),on.push(Ve)):on=[Ve];let gs=Sx(ie,_),Yl=Ax(gs,_,Ve,on,ie,h,f);sn=Xv(be,Ut),_&&Nx(f,Ve,_,r),n!==void 0&&Px(sn,this.ngContentSelectors,n),He=xx(Yl,Ve,on,ps,ie,[Mx]),zh(be,ie,null)}finally{bh()}return new ih(this.componentType,He,Cc(sn,ie),ie,sn)}finally{G(s)}}},ih=class extends Xd{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new yr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;qh(s[U],s,i,e,n),this.previousInputValues.set(e,n);let o=Vn(this._tNode.index,s);Wh(o)}}get injector(){return new lr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Sx(t,e){let n=t[U],r=Ut;return t[r]=e,Ac(n,r,2,"#host",null)}function Ax(t,e,n,r,i,s,o){let a=i[U];Rx(r,t,e,o);let c=null;e!==null&&(c=Lh(e,i[_i]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Sc(i,tI(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&Qd(a,t,r.length-1),Rc(i,d),i[t.index]=d}function Rx(t,e,n,r){for(let i of t)e.mergedAttrs=mh(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(nh(e,e.mergedAttrs,!0),n!==null&&Gw(r,n,e))}function xx(t,e,n,r,i,s){let o=ft(),a=i[U],c=ht(o,i);iI(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=As(i,a,d,o);mr(h,i)}sI(a,i,o),c&&mr(c,i);let u=As(i,a,o.directiveStart+o.componentOffset,o);if(t[un]=i[un]=u,s!==null)for(let l of s)l(u,e);return Zw(a,o,i),u}function Nx(t,e,n,r){if(r)kd(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=MS(e.selectors[0]);i&&kd(t,n,i),s&&s.length>0&&Ww(t,n,s.join(" "))}}function Px(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Mx(){let t=ft();xh(ne()[U],t)}var Ei=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kx;let t=e;return t})();function kx(){let t=ft();return Fx(t,ne())}var Ox=Ei,_I=class extends Ox{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Cc(this._hostTNode,this._hostLView)}get injector(){return new lr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Nh(this._hostTNode,this._hostLView);if(gw(e)){let n=sc(e,this._hostLView),r=ic(e),i=n[U].data[r+8];return new lr(i,n)}else return new lr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=dv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=sv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,iv(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!KS(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new xs(hr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?u:this.parentInjector).get(dt,null);_&&(s=_)}let l=hr(c.componentType??{}),d=sv(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,iv(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(iA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[ke],u=new _I(c,c[bt],c[ke]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return tx(o,i,s,r),e.attachToViewContainerRef(),Rv(Rd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=dv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Gd(this._lContainer,n);r&&(Za(Rd(this._lContainer),n),Hw(r[U],r))}detach(e){let n=this._adjustIndex(e,-1),r=Gd(this._lContainer,n);return r&&Za(Rd(this._lContainer),n)!=null?new yr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function dv(t){return t[tc]}function Rd(t){return t[tc]||(t[tc]=[])}function Fx(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=oI(r,e,null,t),e[t.index]=n,Rc(e,n)),Vx(n,e,t,r),new _I(n,t,e)}function Lx(t,e){let n=t[Se],r=n.createComment(""),i=ht(e,t),s=jh(n,i);return cc(n,s,r,yR(n,i),!1),r}var Vx=Bx,Ux=()=>!1;function jx(t,e,n){return Ux(t,e,n)}function Bx(t,e,n,r){if(t[pr])return;let i;n.type&8?i=jt(r):i=Lx(e,n),t[pr]=i}function Kh(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Fn=class{},Ns=class{};var sh=class extends Fn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dc(this);let i=Uv(e);this._bootstrapComponents=Uw(i.bootstrap),this._r3Injector=Dw(e,n,[{provide:Fn,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver},...r],Ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},oh=class extends Ns{constructor(e){super(),this.moduleType=e}create(e){return new sh(this.moduleType,e,[])}};var hc=class extends Fn{constructor(e){super(),this.componentFactoryResolver=new dc(this),this.instance=null;let n=new Es([...e.providers,{provide:Fn,useValue:this},{provide:Nc,useValue:this.componentFactoryResolver}],e.parent||vh(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Qh(t,e,n=null){return new hc({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Mc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new fe(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vI(t){return Hx(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function $x(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Hx(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function qx(t,e,n){return t[e]=n}function wi(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function zx(t,e,n,r){let i=wi(t,e,n);return wi(t,e+1,r)||i}function Wx(t){return(t.flags&32)===32}function Gx(t,e,n,r,i,s,o,a,c){let u=e.consts,l=Ac(e,t,4,o||null,rc(u,a));rI(e,n,l,rc(u,c)),xh(e,l);let d=l.tView=Hh(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function gn(t,e,n,r,i,s,o,a){let c=ne(),u=Bt(),l=t+Ut,d=u.firstCreatePass?Gx(l,u,c,e,n,r,i,s,o):u.data[l];Ls(d,!1);let h=Kx(u,c,d,t);Ah()&&Bh(u,c,h,d),mr(h,c);let f=oI(h,c,h,d);return c[l]=f,Rc(c,f),jx(f,d,c),Ih(d)&&Xw(u,c,d),o!=null&&eI(c,d,a),gn}var Kx=Qx;function Qx(t,e,n,r){return Rh(!0),e[Se].createComment("")}function Yh(t,e,n,r){let i=ne(),s=Th();if(wi(i,s,e)){let o=Bt(),a=Sh();zR(a,i,t,e,n,r)}return Yh}function wI(t,e,n,r){return wi(t,Th(),n)?e+mi(n)+r:jn}function Yx(t,e,n,r,i,s){let o=gA(),a=zx(t,o,n,i);return yA(2),a?e+mi(n)+r+mi(i)+s:jn}function $t(t,e,n){let r=ne(),i=Th();if(wi(r,i,e)){let s=Bt(),o=Sh();nI(s,o,r,t,e,r[Se],n,!1)}return $t}function hv(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";qh(t,n,s[o],o,r)}function Jx(t,e,n,r,i,s){let o=e.consts,a=rc(o,i),c=Ac(e,t,2,r,a);return rI(e,n,c,rc(o,s)),c.attrs!==null&&nh(c,c.attrs,!1),c.mergedAttrs!==null&&nh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function A(t,e,n,r){let i=ne(),s=Bt(),o=Ut+t,a=i[Se],c=s.firstCreatePass?Jx(o,s,i,e,n,r):s.data[o],u=Zx(s,i,c,a,e,t);i[o]=u;let l=Ih(c);return Ls(c,!0),Gw(a,u,c),!Wx(c)&&Ah()&&Bh(s,i,u,c),aA()===0&&mr(u,i),cA(),l&&(Xw(s,i,c),Zw(s,c,i)),r!==null&&eI(i,c),A}function V(){let t=ft();iw()?pA():(t=t.parent,Ls(t,!1));let e=t;dA(e)&&hA(),uA();let n=Bt();return n.firstCreatePass&&(xh(n,t),Gv(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&SA(e)&&hv(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&AA(e)&&hv(n,e,ne(),e.stylesWithoutHost,!1),V}function ae(t,e,n,r){return A(t,e,n,r),V(),ae}var Zx=(t,e,n,r,i,s)=>(Rh(!0),jw(r,i,CA()));var fc="en-US";var Xx=fc;function eN(t){typeof t=="string"&&(Xx=t.toLowerCase().replace(/_/g,"-"))}function js(t,e,n,r){let i=ne(),s=Bt(),o=ft();return nN(s,i,i[Se],o,t,e,r),js}function tN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Cs],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function nN(t,e,n,r,i,s,o){let a=Ih(r),u=t.firstCreatePass&&YR(t),l=e[un],d=QR(e),h=!0;if(r.type&3||o){let _=ht(r,e),P=o?o(_):_,B=d.length,be=o?He=>o(jt(He[r.index])):r.index,ie=null;if(!o&&a&&(ie=tN(t,e,i,r.index)),ie!==null){let He=ie.__ngLastListenerFn__||ie;He.__ngNextListenerFn__=s,ie.__ngLastListenerFn__=s,h=!1}else{s=pv(r,e,l,s,!1);let He=n.listen(P,i,s);d.push(s,He),u&&u.push(i,be,B,B+1)}}else s=pv(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let _=g.length;if(_)for(let P=0;P<_;P+=2){let B=g[P],be=g[P+1],sn=e[B][be].subscribe(s),Ve=d.length;d.push(s,sn),u&&u.push(i,r.index,Ve,-(Ve+1))}}}function fv(t,e,n,r){let i=G(null);try{return Ot(6,e,n),n(r)!==!1}catch(s){return cI(t,s),!1}finally{Ot(7,e,n),G(i)}}function pv(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Vn(t.index,e):e;Wh(a);let c=fv(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=fv(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Jh(t,e,n){return Ci(t,"",e,"",n),Jh}function Ci(t,e,n,r,i){let s=ne(),o=wI(s,e,n,r);if(o!==jn){let a=Bt(),c=Sh();nI(a,c,s,t,o,s[Se],i,!1)}return Ci}function rN(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ce(t,e=""){let n=ne(),r=Bt(),i=t+Ut,s=r.firstCreatePass?Ac(r,i,1,e,null):r.data[i],o=iN(r,n,s,e,t);n[i]=o,Ah()&&Bh(r,n,o,s),Ls(s,!1)}var iN=(t,e,n,r,i)=>(Rh(!0),sR(e[Se],r));function pt(t){return II("",t,""),pt}function II(t,e,n){let r=ne(),i=wI(r,t,e,n);return i!==jn&&uI(r,Ec(),i),II}function Zh(t,e,n,r,i){let s=ne(),o=Yx(s,t,e,n,r,i);return o!==jn&&uI(s,Ec(),o),Zh}var sN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=$v(!1,r.type),s=i.length>0?Qh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=E({token:e,providedIn:"environment",factory:()=>new e(k(dt))});let t=e;return t})();function Qe(t){mI("NgStandalone"),t.getStandaloneInjector=e=>e.get(sN).getOrCreateStandaloneInjector(t)}function EI(t,e,n,r){return CI(ne(),sw(),t,e,n,r)}function oN(t,e){let n=t[e];return n===jn?void 0:n}function CI(t,e,n,r,i,s){let o=e+n;return wi(t,o,i)?qx(t,o+1,s?r.call(s,i):r(i)):oN(t,o+1)}function kc(t,e){let n=Bt(),r,i=t+Ut;n.firstCreatePass?(r=aN(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=dr(r.type,!0)),o,a=We(oe);try{let c=oc(!1),u=s();return oc(c),rN(n,ne(),i,u),u}finally{We(a)}}function aN(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Oc(t,e,n){let r=t+Ut,i=ne(),s=rA(i,r);return cN(i,r)?CI(i,sw(),e,s.transform,n,s):s.transform(n)}function cN(t,e){return t[U].data[e].pure}var Ln=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},TI=new Ln("17.3.5"),Fc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var DI=new N("");function Ti(t){return!!t&&typeof t.then=="function"}function Xh(t){return!!t&&typeof t.subscribe=="function"}var bI=new N(""),SI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=v(bI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ti(o))r.push(o);else if(Xh(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ef=new N("");function uN(){a_(()=>{throw new I(600,!1)})}function lN(t){return t.isBoundToModule}function dN(t,e,n){try{let r=n();return Ti(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Bs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=v(bw),this.afterRenderEffectManager=v(yI),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=v(Mc).hasPendingTasks.pipe(z(r=>!r)),this._injector=v(dt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof lc;if(!this._injector.get(SI).done){let f=!s&&Vv(r),g=!1;throw new I(405,g)}let a;s?a=r:a=this._injector.get(Nc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=lN(a)?void 0:this._injector.get(Fn),u=i||a.selector,l=a.create(St.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(DI,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),xd(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new I(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===dI)throw new I(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)hN(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ah(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>ah(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;xd(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ef,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>xd(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new I(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xd(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function hN(t,e,n){!e&&!ah(t)||fN(t,n,e)}function ah(t){return Ch(t)}function fN(t,e,n){let r;n?(r=0,t[C]|=1024):t[C]&64?r=0:r=1,hI(t,e,r)}var ch=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},tf=(()=>{let e=class e{compileModuleSync(r){return new oh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Uv(r),o=Uw(s.declarations).reduce((a,c)=>{let u=hr(c);return u&&a.push(new xs(u)),a},[]);return new ch(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var pN=(()=>{let e=class e{constructor(){this.zone=v(X),this.applicationRef=v(Bs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gN(t){return[{provide:X,useFactory:t},{provide:yi,multi:!0,useFactory:()=>{let e=v(pN,{optional:!0});return()=>e.initialize()}},{provide:yi,multi:!0,useFactory:()=>{let e=v(vN);return()=>{e.initialize()}}},{provide:bw,useFactory:mN}]}function mN(){let t=v(X),e=v(ln);return n=>t.runOutsideAngular(()=>e.handleError(n))}function yN(t){let e=gN(()=>new X(_N(t)));return yc([[],e])}function _N(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var vN=(()=>{let e=class e{constructor(){this.subscription=new he,this.initialized=!1,this.zone=v(X),this.pendingTasks=v(Mc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{X.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function wN(){return typeof $localize<"u"&&$localize.locale||fc}var nf=new N("",{providedIn:"root",factory:()=>v(nf,M.Optional|M.SkipSelf)||wN()});var AI=new N("");var Qa=null;function IN(t=[],e){return St.create({name:e,providers:[{provide:_c,useValue:"platform"},{provide:AI,useValue:new Set([()=>Qa=null])},...t]})}function EN(t=[]){if(Qa)return Qa;let e=IN(t);return Qa=e,uN(),CN(e),e}function CN(t){t.get(Oh,null)?.forEach(n=>n())}var Di=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=TN;let t=e;return t})();function TN(t){return DN(ft(),ne(),(t&16)===16)}function DN(t,e,n){if(Ic(t)&&!n){let r=Vn(t.index,e);return new yr(r,r)}else if(t.type&47){let r=e[Vt];return new yr(r,e)}return null}var uh=class{constructor(){}supports(e){return vI(e)}create(e){return new lh(e)}},bN=(t,e)=>e,lh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||bN}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<gv(r,i,s)?n:r,a=gv(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!vI(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,$x(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new dh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new pc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new pc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},dh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},hh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},pc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new hh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function gv(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function mv(){return new rf([new uh])}var rf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||mv()),deps:[[e,new Av,new je]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new I(901,!1)}};e.\u0275prov=E({token:e,providedIn:"root",factory:mv});let t=e;return t})();function RI(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=EN(r),s=[yN(),...n||[]],a=new hc({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(X);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(ln,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(AI);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),dN(u,c,()=>{let f=a.get(SI);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(nf,fc);eN(g||fc);let _=a.get(Bs);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function $s(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function sf(t){let e=G(null);try{return t()}finally{G(e)}}var kI=null;function bi(){return kI}function OI(t){kI??=t}var Lc=class{};var gt=new N(""),FI=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(SN),providedIn:"platform"});let t=e;return t})();var SN=(()=>{let e=class e extends FI{constructor(){super(),this._doc=v(gt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bi().getBaseHref(this._doc)}onPopState(r){let i=bi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=bi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function LI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ir(t){return t&&t[0]!=="?"?"?"+t:t}var Si=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(VI),providedIn:"root"});let t=e;return t})(),AN=new N(""),VI=(()=>{let e=class e extends Si{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??v(gt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return LI(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Ir(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Ir(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Ir(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(k(FI),k(AN,8))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Hs=(()=>{let e=class e{constructor(r){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=NN(xI(NI(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Ir(i))}normalize(r){return e.stripTrailingSlash(xN(this._basePath,NI(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ir(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Ir(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Ir,e.joinWithSlash=LI,e.stripTrailingSlash=xI,e.\u0275fac=function(i){return new(i||e)(k(Si))},e.\u0275prov=E({token:e,factory:()=>RN(),providedIn:"root"});let t=e;return t})();function RN(){return new Hs(k(Si))}function xN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function NI(t){return t.replace(/\/index.html$/,"")}function NN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function UI(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var of=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Uc=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new of(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),PI(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);PI(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(oe(Ei),oe(xc),oe(rf))},e.\u0275dir=Ii({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function PI(t,e){t.context.$implicit=e.item}var jI=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new af,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){MI("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){MI("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(oe(Ei),oe(xc))},e.\u0275dir=Ii({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),af=class{constructor(){this.$implicit=null,this.ngIf=null}};function MI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ge(e)}'.`)}function PN(t,e){return new I(2100,!1)}var cf=class{createSubscription(e,n){return sf(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){sf(()=>e.unsubscribe())}},uf=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},MN=new uf,kN=new cf,BI=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ti(r))return MN;if(Xh(r))return kN;throw PN(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(oe(Di,16))},e.\u0275pipe=Ov({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var $I="browser",ON="server";function lf(t){return t===ON}var Vc=class{};var ff=class extends Lc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},pf=class t extends ff{static makeCurrent(){OI(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=LN();return n==null?null:VN(n)}resetBaseElement(){qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UI(document.cookie,e)}},qs=null;function LN(){return qs=qs||document.querySelector("base"),qs?qs.getAttribute("href"):null}function VN(t){return new URL(t,document.baseURI).pathname}var UN=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),gf=new N(""),WI=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new I(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(k(gf),k(X))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),jc=class{constructor(e){this._doc=e}},df="ng-app-id",GI=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${df}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(df),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(df,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(k(gt),k(kh),k(Fh,8),k(Un))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),hf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},yf=/%COMP%/g,KI="%COMP%",jN=`_nghost-${KI}`,BN=`_ngcontent-${KI}`,$N=!0,HN=new N("",{providedIn:"root",factory:()=>$N});function qN(t){return BN.replace(yf,t)}function zN(t){return jN.replace(yf,t)}function QI(t,e){return e.map(n=>n.replace(yf,t))}var HI=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=lf(c),this.defaultRenderer=new zs(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Lt.ShadowDom&&(i=se(w({},i),{encapsulation:Lt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Bc?s.applyToHost(r):s instanceof Ws&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Lt.Emulated:o=new Bc(u,l,i,this.appId,d,a,c,h);break;case Lt.ShadowDom:return new mf(u,l,r,i,a,c,this.nonce,h);default:o=new Ws(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(k(WI),k(GI),k(kh),k(HN),k(gt),k(Un),k(X),k(Fh))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),zs=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(hf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(qI(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(qI(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new I(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=hf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=hf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(wr.DashCase|wr.Important)?e.style.setProperty(n,r,i&wr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&wr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=bi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function qI(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var mf=class extends zs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=QI(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ws=class extends zs{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?QI(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bc=class extends Ws{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=qN(u),this.hostAttr=zN(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},WN=(()=>{let e=class e extends jc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(k(gt))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})(),zI=["alt","control","meta","shift"],GN={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},KN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},QN=(()=>{let e=class e extends jc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),zI.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=GN[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),zI.forEach(a=>{if(a!==s){let c=KN[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(k(gt))},e.\u0275prov=E({token:e,factory:e.\u0275fac});let t=e;return t})();function YI(t,e){return RI(w({rootComponent:t},YN(e)))}function YN(t){return{appProviders:[...tP,...t?.providers??[]],platformProviders:eP}}function JN(){pf.makeCurrent()}function ZN(){return new ln}function XN(){return Mw(document),document}var eP=[{provide:Un,useValue:$I},{provide:Oh,useValue:JN,multi:!0},{provide:gt,useFactory:XN,deps:[]}];var tP=[{provide:_c,useValue:"root"},{provide:ln,useFactory:ZN,deps:[]},{provide:gf,useClass:WN,multi:!0,deps:[gt,X,Un]},{provide:gf,useClass:QN,multi:!0,deps:[gt]},HI,GI,WI,{provide:Rs,useExisting:HI},{provide:Vc,useClass:UN,deps:[]},[]];var JI=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(k(gt))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R="primary",ao=Symbol("RouteTitle"),Ef=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Pi(t){return new Ef(t)}function rP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function iP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ht(t[n],e[n]))return!1;return!0}function Ht(t,e){let n=t?Cf(t):void 0,r=e?Cf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!rE(t[i],e[i]))return!1;return!0}function Cf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function iE(t){return t.length>0?t[t.length-1]:null}function qn(t){return pd(t)?t:Ti(t)?ge(Promise.resolve(t)):S(t)}var sP={exact:oE,subset:aE},sE={exact:oP,subset:aP,ignored:()=>!0};function ZI(t,e,n){return sP[n.paths](t.root,e.root,n.matrixParams)&&sE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function oP(t,e){return Ht(t,e)}function oE(t,e,n){if(!Cr(t.segments,e.segments)||!qc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!oE(t.children[r],e.children[r],n))return!1;return!0}function aP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>rE(t[n],e[n]))}function aE(t,e,n){return cE(t,e,e.segments,n)}function cE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Cr(i,n)||e.hasChildren()||!qc(i,n,r))}else if(t.segments.length===n.length){if(!Cr(t.segments,n)||!qc(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!aE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Cr(t.segments,i)||!qc(t.segments,i,r)||!t.children[R]?!1:cE(t.children[R],e,s,r)}}function qc(t,e,n){return e.every((r,i)=>sE[n](t[i].parameters,r.parameters))}var Bn=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){return lP.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zc(this)}},Er=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Pi(this.parameters),this._parameterMap}toString(){return lE(this)}};function cP(t,e){return Cr(t,e)&&t.every((n,r)=>Ht(n.parameters,e[r].parameters))}function Cr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function uP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===R&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==R&&(n=n.concat(e(i,r)))}),n}var Qf=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>new Gc,providedIn:"root"});let t=e;return t})(),Gc=class{parse(e){let n=new Df(e);return new Bn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Gs(e.root,!0)}`,r=fP(e.queryParams),i=typeof e.fragment=="string"?`#${dP(e.fragment)}`:"";return`${n}${r}${i}`}},lP=new Gc;function zc(t){return t.segments.map(e=>lE(e)).join("/")}function Gs(t,e){if(!t.hasChildren())return zc(t);if(e){let n=t.children[R]?Gs(t.children[R],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==R&&r.push(`${i}:${Gs(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=uP(t,(r,i)=>i===R?[Gs(t.children[R],!1)]:[`${i}:${Gs(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[R]!=null?`${zc(t)}/${n[0]}`:`${zc(t)}/(${n.join("//")})`}}function uE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $c(t){return uE(t).replace(/%3B/gi,";")}function dP(t){return encodeURI(t)}function Tf(t){return uE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wc(t){return decodeURIComponent(t)}function XI(t){return Wc(t.replace(/\+/g,"%20"))}function lE(t){return`${Tf(t.path)}${hP(t.parameters)}`}function hP(t){return Object.entries(t).map(([e,n])=>`;${Tf(e)}=${Tf(n)}`).join("")}function fP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${$c(n)}=${$c(i)}`).join("&"):`${$c(n)}=${$c(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var pP=/^[^\/()?;#]+/;function _f(t){let e=t.match(pP);return e?e[0]:""}var gP=/^[^\/()?;=#]+/;function mP(t){let e=t.match(gP);return e?e[0]:""}var yP=/^[^=?&#]+/;function _P(t){let e=t.match(yP);return e?e[0]:""}var vP=/^[^&#]+/;function wP(t){let e=t.match(vP);return e?e[0]:""}var Df=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[R]=new Y(e,n)),r}parseSegment(){let e=_f(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new Er(Wc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=mP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_f(this.remaining);i&&(r=i,this.capture(r))}e[Wc(n)]=Wc(r)}parseQueryParam(e){let n=_P(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=wP(this.remaining);o&&(r=o,this.capture(r))}let i=XI(n),s=XI(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_f(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new I(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=R);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[R]:new Y([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}};function dE(t){return t.segments.length>0?new Y([],{[R]:t}):t}function hE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=hE(i);if(r===R&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Y(t.segments,e);return IP(n)}function IP(t){if(t.numberOfChildren===1&&t.children[R]){let e=t.children[R];return new Y(t.segments.concat(e.segments),e.children)}return t}function Mi(t){return t instanceof Bn}function EP(t,e,n=null,r=null){let i=fE(t);return pE(i,e,n,r)}function fE(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new Y(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=dE(r);return e??i}function pE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return vf(i,i,i,n,r);let s=CP(e);if(s.toRoot())return vf(i,i,new Y([],{}),n,r);let o=TP(s,i,t),a=o.processChildren?Ys(o.segmentGroup,o.index,s.commands):mE(o.segmentGroup,o.index,s.commands);return vf(i,o.segmentGroup,a,n,r)}function Kc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Xs(t){return typeof t=="object"&&t!=null&&t.outlets}function vf(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=gE(t,e,n);let a=dE(hE(o));return new Bn(a,s,i)}function gE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=gE(s,e,n)}),new Y(t.segments,r)}var Qc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Kc(r[0]))throw new I(4003,!1);let i=r.find(Xs);if(i&&i!==iE(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qc(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Qc(n,e,r)}var xi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function TP(t,e,n){if(t.isAbsolute)return new xi(e,!0,0);if(!n)return new xi(e,!1,NaN);if(n.parent===null)return new xi(n,!0,0);let r=Kc(t.commands[0])?0:1,i=n.segments.length-1+r;return DP(n,i,t.numberOfDoubleDots)}function DP(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new I(4005,!1);i=r.segments.length}return new xi(r,!1,i-s)}function bP(t){return Xs(t[0])?t[0].outlets:{[R]:t}}function mE(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return Ys(t,e,n);let r=SP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Y(t.segments.slice(0,r.pathIndex),{});return s.children[R]=new Y(t.segments.slice(r.pathIndex),t.children),Ys(s,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?bf(t,e,n):r.match?Ys(t,0,i):bf(t,e,n)}function Ys(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=bP(n),i={};if(Object.keys(r).some(s=>s!==R)&&t.children[R]&&t.numberOfChildren===1&&t.children[R].segments.length===0){let s=Ys(t.children[R],e,n);return new Y(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=mE(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Y(t.segments,i)}}function SP(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Xs(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!tE(c,u,o))return s;r+=2}else{if(!tE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function bf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Xs(s)){let c=AP(s.outlets);return new Y(r,c)}if(i===0&&Kc(n[0])){let c=t.segments[e];r.push(new Er(c.path,eE(n[0]))),i++;continue}let o=Xs(s)?s.outlets[R]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Kc(a)?(r.push(new Er(o,eE(a))),i+=2):(r.push(new Er(o,{})),i++)}return new Y(r,{})}function AP(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=bf(new Y([],{}),0,r))}),e}function eE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function tE(t,e,n){return t==n.path&&Ht(e,n.parameters)}var Js="imperative",Ae=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ae||{}),mt=class{constructor(e,n){this.id=e,this.url=n}},eo=class extends mt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ae.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$n=class extends mt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ae.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},st=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(st||{}),Sf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Sf||{}),Hn=class extends mt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ae.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Tr=class extends mt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ae.NavigationSkipped}},to=class extends mt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ae.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yc=class extends mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ae.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Af=class extends mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ae.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rf=class extends mt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ae.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},xf=class extends mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ae.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nf=class extends mt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ae.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pf=class{constructor(e){this.route=e,this.type=Ae.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mf=class{constructor(e){this.route=e,this.type=Ae.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},kf=class{constructor(e){this.snapshot=e,this.type=Ae.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Of=class{constructor(e){this.snapshot=e,this.type=Ae.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ff=class{constructor(e){this.snapshot=e,this.type=Ae.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Lf=class{constructor(e){this.snapshot=e,this.type=Ae.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var no=class{},ro=class{constructor(e){this.url=e}};var Vf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new nu,this.attachRef=null}},nu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Vf,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Uf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Uf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=jf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return jf(e,this._root).map(n=>n.value)}};function Uf(t,e){if(t===e.value)return e;for(let n of e.children){let r=Uf(t,n);if(r)return r}return null}function jf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=jf(t,n);if(r.length)return r.unshift(e),r}return[]}var it=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ri(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Zc=class extends Jc{constructor(e,n){super(e),this.snapshot=n,Jf(this,e)}toString(){return this.snapshot.toString()}};function yE(t){let e=RP(t),n=new fe([new Er("",{})]),r=new fe({}),i=new fe({}),s=new fe({}),o=new fe(""),a=new mn(n,r,s,o,i,R,t,e.root);return a.snapshot=e.root,new Zc(new it(a,[]),e)}function RP(t){let e={},n={},r={},i="",s=new io([],e,r,i,n,R,t,null,{});return new Xc("",new it(s,[]))}var mn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(z(u=>u[ao]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>Pi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>Pi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Yf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),i?.data),t._resolvedData)}:r={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},i&&vE(i)&&(r.resolve[ao]=i.title),r}var io=class{get title(){return this.data?.[ao]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Pi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Pi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Xc=class extends Jc{constructor(e,n){super(n),this.url=e,Jf(this,n)}toString(){return _E(this._root)}};function Jf(t,e){e.value._routerState=t,e.children.forEach(n=>Jf(t,n))}function _E(t){let e=t.children.length>0?` { ${t.children.map(_E).join(", ")} } `:"";return`${t.value}${e}`}function wf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ht(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ht(e.params,n.params)||t.paramsSubject.next(n.params),iP(e.url,n.url)||t.urlSubject.next(n.url),Ht(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Bf(t,e){let n=Ht(t.params,e.params)&&cP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Bf(t.parent,e.parent))}function vE(t){return typeof t.title=="string"||t.title===null}var Zf=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=R,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=v(nu),this.location=v(Ei),this.changeDetector=v(Di),this.environmentInjector=v(dt),this.inputBinder=v(Xf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new $f(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ii({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fs]});let t=e;return t})(),$f=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===mn?this.route:e===nu?this.childContexts:this.parent.get(e,n)}},Xf=new N("");function xP(t,e,n){let r=so(t,e._root,n?n._root:void 0);return new Zc(r,e)}function so(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=NP(t,e,n);return new it(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>so(t,a)),o}}let r=PP(e.value),i=e.children.map(s=>so(t,s));return new it(r,i)}}function NP(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return so(t,r,i);return so(t,r)})}function PP(t){return new mn(new fe(t.url),new fe(t.params),new fe(t.queryParams),new fe(t.fragment),new fe(t.data),t.outlet,t.component,t)}var wE="ngNavigationCancelingError";function IE(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Mi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=EE(!1,st.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function EE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[wE]=!0,n.cancellationCode=e,n}function MP(t){return CE(t)&&Mi(t.url)}function CE(t){return!!t&&t[wE]}var kP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["ng-component"]],standalone:!0,features:[Qe],decls:1,vars:0,template:function(i,s){i&1&&ae(0,"router-outlet")},dependencies:[Zf],encapsulation:2});let t=e;return t})();function OP(t,e){return t.providers&&!t._injector&&(t._injector=Qh(t.providers,e,`Route: ${t.path}`)),t._injector??e}function ep(t){let e=t.children&&t.children.map(ep),n=e?se(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==R&&(n.component=kP),n}function qt(t){return t.outlet||R}function FP(t,e){let n=t.filter(r=>qt(r)===e);return n.push(...t.filter(r=>qt(r)!==e)),n}function co(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var LP=(t,e,n,r)=>z(i=>(new Hf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Hf=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),wf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ri(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ri(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ri(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ri(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Lf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Of(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(wf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),wf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=co(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},eu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ni=class{constructor(e,n){this.component=e,this.route=n}};function VP(t,e,n){let r=t._root,i=e?e._root:null;return Ks(r,i,n,[r.value])}function UP(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Oi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Iv(t)?t:e.get(t):r}function Ks(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ri(e);return t.children.forEach(o=>{jP(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Zs(a,n.getContext(o),i)),i}function jP(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=BP(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new eu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ks(t,e,a?a.children:null,r,i):Ks(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ni(a.outlet.component,o))}else o&&Zs(e,a,i),i.canActivateChecks.push(new eu(r)),s.component?Ks(t,null,a?a.children:null,r,i):Ks(t,null,n,r,i);return i}function BP(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Cr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Cr(t.url,e.url)||!Ht(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bf(t,e)||!Ht(t.queryParams,e.queryParams);case"paramsChange":default:return!Bf(t,e)}}function Zs(t,e,n){let r=Ri(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Zs(o,e.children.getContext(s),n):Zs(o,null,n):Zs(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ni(e.outlet.component,i)):n.canDeactivateChecks.push(new Ni(null,i)):n.canDeactivateChecks.push(new Ni(null,i))}function uo(t){return typeof t=="function"}function $P(t){return typeof t=="boolean"}function HP(t){return t&&uo(t.canLoad)}function qP(t){return t&&uo(t.canActivate)}function zP(t){return t&&uo(t.canActivateChild)}function WP(t){return t&&uo(t.canDeactivate)}function GP(t){return t&&uo(t.canMatch)}function TE(t){return t instanceof an||t?.name==="EmptyError"}var Hc=Symbol("INITIAL_VALUE");function ki(){return ze(t=>ja(t.map(e=>e.pipe(cn(1),vd(Hc)))).pipe(z(e=>{for(let n of e)if(n!==!0){if(n===Hc)return Hc;if(n===!1||n instanceof Bn)return n}return!0}),wt(e=>e!==Hc),cn(1)))}function KP(t,e){return me(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?S(se(w({},n),{guardsResult:!0})):QP(o,r,i,t).pipe(me(a=>a&&$P(a)?YP(r,s,t,e):S(a)),z(a=>se(w({},n),{guardsResult:a})))})}function QP(t,e,n,r){return ge(t).pipe(me(i=>tM(i.component,i.route,n,e,r)),Mt(i=>i!==!0,!0))}function YP(t,e,n,r){return ge(e).pipe(ui(i=>ci(ZP(i.route.parent,r),JP(i.route,r),eM(t,i.path,n),XP(t,i.route,n))),Mt(i=>i!==!0,!0))}function JP(t,e){return t!==null&&e&&e(new Ff(t)),S(!0)}function ZP(t,e){return t!==null&&e&&e(new kf(t)),S(!0)}function XP(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(s=>Ba(()=>{let o=co(e)??n,a=Oi(s,o),c=qP(a)?a.canActivate(e,t):_r(o,()=>a(e,t));return qn(c).pipe(Mt())}));return S(i).pipe(ki())}function eM(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>UP(o)).filter(o=>o!==null).map(o=>Ba(()=>{let a=o.guards.map(c=>{let u=co(o.node)??n,l=Oi(c,u),d=zP(l)?l.canActivateChild(r,t):_r(u,()=>l(r,t));return qn(d).pipe(Mt())});return S(a).pipe(ki())}));return S(s).pipe(ki())}function tM(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return S(!0);let o=s.map(a=>{let c=co(e)??i,u=Oi(a,c),l=WP(u)?u.canDeactivate(t,e,n,r):_r(c,()=>u(t,e,n,r));return qn(l).pipe(Mt())});return S(o).pipe(ki())}function nM(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let s=i.map(o=>{let a=Oi(o,t),c=HP(a)?a.canLoad(e,n):_r(t,()=>a(e,n));return qn(c)});return S(s).pipe(ki(),DE(r))}function DE(t){return od(ye(e=>{if(Mi(e))throw IE(t,e)}),z(e=>e===!0))}function rM(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let s=i.map(o=>{let a=Oi(o,t),c=GP(a)?a.canMatch(e,n):_r(t,()=>a(e,n));return qn(c)});return S(s).pipe(ki(),DE(r))}var oo=class{constructor(e){this.segmentGroup=e||null}},tu=class extends Error{constructor(e){super(),this.urlTree=e}};function Ai(t){return ai(new oo(t))}function iM(t){return ai(new I(4e3,!1))}function sM(t){return ai(EE(!1,st.GuardRejected))}var qf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[R])return iM(e.redirectTo);i=i.children[R]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new tu(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Bn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Y(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new I(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},zf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oM(t,e,n,r,i){let s=tp(t,e,n);return s.matched?(r=OP(e,r),rM(r,e,n,i).pipe(z(o=>o===!0?s:w({},zf)))):S(s)}function tp(t,e,n){if(e.path==="**")return aM(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},zf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rP)(n,t,e);if(!i)return w({},zf);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function aM(t){return{matched:!0,parameters:t.length>0?iE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function nE(t,e,n,r){return n.length>0&&lM(t,n,r)?{segmentGroup:new Y(e,uM(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&dM(t,n,r)?{segmentGroup:new Y(t.segments,cM(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function cM(t,e,n,r){let i={};for(let s of n)if(ru(t,e,s)&&!r[qt(s)]){let o=new Y([],{});i[qt(s)]=o}return w(w({},r),i)}function uM(t,e){let n={};n[R]=e;for(let r of t)if(r.path===""&&qt(r)!==R){let i=new Y([],{});n[qt(r)]=i}return n}function lM(t,e,n){return n.some(r=>ru(t,e,r)&&qt(r)!==R)}function dM(t,e,n){return n.some(r=>ru(t,e,r))}function ru(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function hM(t,e,n,r){return qt(t)!==r&&(r===R||!ru(e,n,t))?!1:tp(e,t,n).matched}function fM(t,e,n){return e.length===0&&!t.children[n]}var Wf=class{};function pM(t,e,n,r,i,s,o="emptyOnly"){return new Gf(t,e,n,r,i,o,s).recognize()}var gM=31,Gf=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new qf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new I(4002,`'${e.segmentGroup}'`)}recognize(){let e=nE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(n=>{let r=new io([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},R,this.rootComponentType,null,{}),i=new it(r,n),s=new Xc("",i),o=EP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,R).pipe(Pn(r=>{if(r instanceof tu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof oo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Yf(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(z(s=>s instanceof it?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ge(i).pipe(ui(s=>{let o=r.children[s],a=FP(n,s);return this.processSegmentGroup(e,a,o,s)}),_d((s,o)=>(s.push(...o),s)),Mn(null),yd(),me(s=>{if(s===null)return Ai(r);let o=bE(s);return mM(o),S(o)}))}processSegment(e,n,r,i,s,o){return ge(n).pipe(ui(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Pn(c=>{if(c instanceof oo)return S(null);throw c}))),Mt(a=>!!a),Pn(a=>{if(TE(a))return fM(r,i,s)?S(new Wf):Ai(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return hM(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Ai(i):Ai(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=tp(n,i,s);if(!a)return Ai(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gM&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(me(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=oM(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(ze(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ze(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new io(l,h,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,_M(r),qt(r),r.component??r._loadedComponent??null,r,vM(r)),{segmentGroup:g,slicedSegments:_}=nE(n,l,d,c);if(_.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(z(B=>B===null?null:new it(f,B)));if(c.length===0&&_.length===0)return S(new it(f,[]));let P=qt(r)===s;return this.processSegment(u,c,g,_,P?R:s,!0).pipe(z(B=>new it(f,B instanceof it?[B]:[])))}))):Ai(n)))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):nM(e,n,r,this.urlSerializer).pipe(me(i=>i?this.configLoader.loadChildren(e,n).pipe(ye(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):sM(n))):S({routes:[],injector:e})}};function mM(t){t.sort((e,n)=>e.value.outlet===R?-1:n.value.outlet===R?1:e.value.outlet.localeCompare(n.value.outlet))}function yM(t){let e=t.value.routeConfig;return e&&e.path===""}function bE(t){let e=[],n=new Set;for(let r of t){if(!yM(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=bE(r.children);e.push(new it(r.value,i))}return e.filter(r=>!n.has(r))}function _M(t){return t.data||{}}function vM(t){return t.resolve||{}}function wM(t,e,n,r,i,s){return me(o=>pM(t,e,n,r,o.extractedUrl,i,s).pipe(z(({state:a,tree:c})=>se(w({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function IM(t,e){return me(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of SE(c))o.add(u);let a=0;return ge(o).pipe(ui(c=>s.has(c)?EM(c,r,t,e):(c.data=Yf(c,c.parent,t).resolve,S(void 0))),ye(()=>a++),li(1),me(c=>a===o.size?S(n):Ue))})}function SE(t){let e=t.children.map(n=>SE(n)).flat();return[t,...e]}function EM(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!vE(i)&&(s[ao]=i.title),CM(s,t,e,r).pipe(z(o=>(t._resolvedData=o,t.data=Yf(t,t.parent,n).resolve,null)))}function CM(t,e,n,r){let i=Cf(t);if(i.length===0)return S({});let s={};return ge(i).pipe(me(o=>TM(t[o],e,n,r).pipe(Mt(),ye(a=>{s[o]=a}))),li(1),md(s),Pn(o=>TE(o)?Ue:ai(o)))}function TM(t,e,n,r){let i=co(e)??r,s=Oi(t,i),o=s.resolve?s.resolve(e,n):_r(i,()=>s(e,n));return qn(o)}function If(t){return ze(e=>{let n=t(e);return n?ge(n).pipe(z(()=>e)):S(e)})}var AE=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===R);return i}getResolvedTitleForRoute(r){return r.data[ao]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(DM),providedIn:"root"});let t=e;return t})(),DM=(()=>{let e=class e extends AE{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(k(JI))},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),np=new N("",{providedIn:"root",factory:()=>({})}),rp=new N(""),bM=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=v(tf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qn(r.loadComponent()).pipe(z(RE),ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),_s(()=>{this.componentLoaders.delete(r)})),s=new ri(i,()=>new Me).pipe(ni());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=SM(i,this.compiler,r,this.onLoadEndListener).pipe(_s(()=>{this.childrenLoaders.delete(i)})),a=new ri(o,()=>new Me).pipe(ni());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SM(t,e,n,r){return qn(t.loadChildren()).pipe(z(RE),me(i=>i instanceof Ns||Array.isArray(i)?S(i):ge(e.compileModuleAsync(i))),z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(rp,[],{optional:!0,self:!0}).flat()),{routes:o.map(ep),injector:s}}))}function AM(t){return t&&typeof t=="object"&&"default"in t}function RE(t){return AM(t)?t.default:t}var ip=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(RM),providedIn:"root"});let t=e;return t})(),RM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xM=new N("");var NM=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=v(bM),this.environmentInjector=v(dt),this.urlSerializer=v(Qf),this.rootContexts=v(nu),this.location=v(Hs),this.inputBindingEnabled=v(Xf,{optional:!0})!==null,this.titleStrategy=v(AE),this.options=v(np,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=v(ip),this.createViewTransition=v(xM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Pf(s)),i=s=>this.events.next(new Mf(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(se(w(w({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new fe({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Js,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wt(o=>o.id!==0),z(o=>se(w({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ze(o=>{let a=!1,c=!1;return S(o).pipe(ze(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",st.SupersededByNewNavigation),Ue;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?se(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Tr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Sf.IgnoredSameUrlNavigation)),u.resolve(null),Ue}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return S(u).pipe(ze(h=>{let f=this.transitions?.getValue();return this.events.next(new eo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ue:Promise.resolve(h)}),wM(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ye(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=se(w({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Yc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:_,extras:P}=u,B=new eo(h,this.urlSerializer.serialize(f),g,_);this.events.next(B);let be=yE(this.rootComponentType).snapshot;return this.currentTransition=o=se(w({},u),{targetSnapshot:be,urlAfterRedirects:f,extras:se(w({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,S(o)}else{let h="";return this.events.next(new Tr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Sf.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ue}}),ye(u=>{let l=new Af(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),z(u=>(this.currentTransition=o=se(w({},u),{guards:VP(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),KP(this.environmentInjector,u=>this.events.next(u)),ye(u=>{if(o.guardsResult=u.guardsResult,Mi(u.guardsResult))throw IE(this.urlSerializer,u.guardsResult);let l=new Rf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),wt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",st.GuardRejected),!1)),If(u=>{if(u.guards.canActivateChecks.length)return S(u).pipe(ye(l=>{let d=new xf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ze(l=>{let d=!1;return S(l).pipe(IM(this.paramsInheritanceStrategy,this.environmentInjector),ye({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",st.NoDataFromResolver)}}))}),ye(l=>{let d=new Nf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),If(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ye(f=>{d.component=f}),z(()=>{})));for(let f of d.children)h.push(...l(f));return h};return ja(l(u.targetSnapshot.root)).pipe(Mn(null),cn(1))}),If(()=>this.afterPreactivation()),ze(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ge(d).pipe(z(()=>o)):S(o)}),z(u=>{let l=xP(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=se(w({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ye(()=>{this.events.next(new no)}),LP(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),cn(1),ye({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $n(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),wd(this.transitionAbortSubject.pipe(ye(u=>{throw u}))),_s(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",st.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Pn(u=>{if(c=!0,CE(u))this.events.next(new Hn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),MP(u)?this.events.next(new ro(u.url)):o.resolve(!1);else{this.events.next(new to(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ue}))}))}cancelNavigationTransition(r,i,s){let o=new Hn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PM(t){return t!==Js}var MM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(kM),providedIn:"root"});let t=e;return t})(),Kf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},kM=(()=>{let e=class e extends Kf{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ph(e)))(s||e)}})(),e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:()=>v(OM),providedIn:"root"});let t=e;return t})(),OM=(()=>{let e=class e extends xE{constructor(){super(...arguments),this.location=v(Hs),this.urlSerializer=v(Qf),this.options=v(np,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=v(ip),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Bn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=yE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof eo)this.stateMemento=this.createStateMemento();else if(r instanceof Tr)this.rawUrlTree=i.initialUrl;else if(r instanceof Yc){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof no?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Hn&&(r.code===st.GuardRejected||r.code===st.NoDataFromResolver)?this.restoreHistory(i):r instanceof to?this.restoreHistory(i,!0):r instanceof $n&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=w(w({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=w(w({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ph(e)))(s||e)}})(),e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qs=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Qs||{});function FM(t,e){t.events.pipe(wt(n=>n instanceof $n||n instanceof Hn||n instanceof to||n instanceof Tr),z(n=>n instanceof $n||n instanceof Tr?Qs.COMPLETE:(n instanceof Hn?n.code===st.Redirect||n.code===st.SupersededByNewNavigation:!1)?Qs.REDIRECTING:Qs.FAILED),wt(n=>n!==Qs.REDIRECTING),cn(1)).subscribe(()=>{e()})}function LM(t){throw t}var VM={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UM={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},sp=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=v(Fc),this.stateManager=v(xE),this.options=v(np,{optional:!0})||{},this.pendingTasks=v(Mc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=v(NM),this.urlSerializer=v(Qf),this.location=v(Hs),this.urlHandlingStrategy=v(ip),this._events=new Me,this.errorHandler=this.options.errorHandler||LM,this.navigated=!1,this.routeReuseStrategy=v(MM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=v(rp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!v(Xf,{optional:!0}),this.eventsSubscription=new he,this.isNgZoneEnabled=v(X)instanceof X&&X.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Hn&&i.code!==st.Redirect&&i.code!==st.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof $n)this.navigated=!0;else if(i instanceof ro){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||PM(s.source)};this.scheduleNavigation(a,Js,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}BM(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Js,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=w({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(ep),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=w(w({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=fE(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return pE(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Mi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Js,null,i)}navigate(r,i={skipLocationChange:!1}){return jM(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=w({},VM):i===!1?s=w({},UM):s=i,Mi(r))return ZI(this.currentUrlTree,r,s);let o=this.parseUrl(r);return ZI(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return FM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jM(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new I(4008,!1)}function BM(t){return!(t instanceof no)&&!(t instanceof ro)}var iu=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Me,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof $n&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Fw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(oe(sp),oe(mn),Mh("tabindex"),oe(Pc),oe(Us),oe(Si))},e.\u0275dir=Ii({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&js("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&Yh("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Tt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",$s],skipLocationChange:[Tt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",$s],replaceUrl:[Tt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",$s],routerLink:"routerLink"},standalone:!0,features:[Kh,Fs]});let t=e;return t})();var $M=new N("");function NE(t,...e){return yc([{provide:rp,multi:!0,useValue:t},[],{provide:mn,useFactory:HM,deps:[sp]},{provide:ef,multi:!0,useFactory:qM},e.map(n=>n.\u0275providers)])}function HM(t){return t.routerState.root}function qM(){let t=v(St);return e=>{let n=t.get(Bs);if(e!==n.components[0])return;let r=t.get(sp),i=t.get(zM);t.get(WM)===1&&r.initialNavigation(),t.get(GM,null,M.Optional)?.setUpPreloading(),t.get($M,null,M.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var zM=new N("",{factory:()=>new Me}),WM=new N("",{providedIn:"root",factory:()=>1});var GM=new N("");var QM=t=>["/title/",t];function YM(t,e){if(t&1&&(A(0,"div",16)(1,"div",17)(2,"div",4),ae(3,"img",18),V(),A(4,"div",19)(5,"h3",10),ce(6),V(),A(7,"div",6)(8,"span",7),ce(9),V(),A(10,"span",8),ce(11),V()(),A(12,"div",20)(13,"span",21),ce(14),V(),ae(15,"div",22),A(16,"div",23),ce(17),V()()()()()),t&2){let n=e.$implicit;$t("routerLink",EI(8,QM,n[6])),pe(3),Ci("src","/assets/test-list/",n[1],"",vr),pe(3),pt(n[0]),pe(3),pt(n[2]),pe(2),pt(n[3]),pe(3),pt(n[4]),pe(3),pt(n[5])}}var PE=(()=>{let e=class e{constructor(){this.title_list=[["\u0421\u0442\u0430\u043D\u0446\u0456\u044F \u043F\u0440\u043E\u0449\u0430\u043D\u044C","1.jpg","\u041C\u0430\u043D\u0491\u0430","\u0412\u0430\u043D\u0448\u043E\u0442","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E","03 \u0431\u0435\u0440. 2024","1"],["\u0410\u043B\u044C\u044F\u043D\u0441 \u043F\u0430\u0440\u0430\u0441\u043E\u043B\u044F","Parasol.jpg","\u041C\u0430\u043D\u0491\u0430","\u0412\u0430\u043D\u0448\u043E\u0442","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E","17 \u0441\u0456\u0447. 2024","2"],["\u0421\u0442\u043E\u0441\u0443\u043D\u043A\u0438, \u0432\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u043E \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u0456 \u043D\u0430 \u043D\u0435\u0431\u0435\u0441\u0430\u0445","Match.jpg","\u041C\u0430\u043D\u0445\u0432\u0430","80 \u0437 80","\u041F\u0435\u0440\u0435\u043A\u043B\u0430\u0434\u0430\u0454\u0442\u044C\u0441\u044F","13 \u0433\u0440\u0443. 2023","3"],["\u041D\u0443\u043B\u044C\u043E\u0432\u0438\u0439 \u0415\u0434\u0435\u043C","0.jpg","\u041C\u0430\u043D\u0491\u0430","3 \u0437 124","\u041F\u0440\u0438\u0437\u0443\u043F\u0438\u043D\u0435\u043D\u043E","01 \u043B\u044E\u0442. 2024","4"]]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["bido-titleslist"]],standalone:!0,features:[Qe],decls:24,vars:1,consts:[[1,"background_preview"],[1,"blured"],[1,"container"],[1,"intro"],[1,"cover"],["alt","2","src","/assets/test-list/MHA_Volume_Cover.webp"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"info"],[1,"info_name"],[1,"info_descr"],["routerLink","/chapter/mah_420"],[1,"previous"],[1,"items"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"item"],["alt","2",3,"src"],[1,"content"],[1,"detail"],[1,"status"],[1,"line"],[1,"time"]],template:function(i,s){i&1&&(A(0,"div",0),ae(1,"div",1),A(2,"div",2)(3,"div",3)(4,"div",4),ae(5,"img",5),V(),A(6,"div",6)(7,"span",7),ce(8,"\u041C\u0430\u043D\u0491\u0430"),V(),A(9,"span",8),ce(10,"\u0420\u043E\u0437\u0434\u0456\u043B: 420"),V()()(),A(11,"div",9)(12,"h3",10),ce(13,"\u041C\u043E\u044F \u0413\u0435\u0440\u043E\u0439\u0441\u044C\u043A\u0430 \u0410\u043A\u0430\u0434\u0435\u043C\u0456\u044F"),V(),A(14,"div",11),ce(15,"\u041B\u044E\u0434\u0438 \u043D\u0435 \u043D\u0430\u0440\u043E\u0434\u0436\u0443\u044E\u0442\u044C\u0441\u044F \u0440\u0456\u0432\u043D\u0438\u043C\u0438. \u0406\u0437\u0443\u043A\u0443 \u041C\u0456\u0434\u043E\u0440\u0456\u044F \u0443\u0441\u0432\u0456\u0434\u043E\u043C\u0438\u0432 \u0446\u0435 \u0449\u0435 \u0443 \u0447\u043E\u0442\u0438\u0440\u044C\u043E\u0445\u0440\u0456\u0447\u043D\u043E\u043C\u0443 \u0432\u0456\u0446\u0456. \u0422\u0430 \u0446\u0435 \u043D\u0435 \u0437\u0430\u0432\u0430\u0434\u0438\u0442\u044C \u0439\u043E\u043C\u0443 \u0437\u0434\u0456\u0439\u0441\u043D\u0438\u0442\u0438 \u0441\u0432\u043E\u044E \u043C\u0440\u0456\u044E \u2014 \u0441\u0442\u0430\u0442\u0438 \u0432\u0435\u043B\u0438\u043A\u0438\u043C \u0433\u0435\u0440\u043E\u0454\u043C, \u044F\u043A \u043B\u0435\u0433\u0435\u043D\u0434\u0430\u0440\u043D\u0438\u0439 \u0412\u0441\u0435\u043C\u043E\u0433\u0443\u0442\u043D\u0456\u0439. "),V()(),A(16,"a",12),ce(17,"\u0427\u0438\u0442\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0440\u043E\u0437\u0434\u0456\u043B"),V()()(),A(18,"div",13)(19,"div",2)(20,"h2",10),ce(21,"\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043E\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F"),V(),A(22,"div",14),gn(23,YM,18,10,"div",15),V()()()),i&2&&(pe(23),$t("ngForOf",s.title_list))},dependencies:[Uc,iu],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;color:#e6f5fd;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px}.intro[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:5px}.background_preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:var(--background);background:var(--primary);margin:15px 0;padding:7px 19px;border-radius:5px;box-shadow:0 0 80px -5px var(--primary);font-family:UZSansB;font-weight:400}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.items[_ngcontent-%COMP%]{display:grid;gap:36px 15px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr))}.item[_ngcontent-%COMP%]{background:var(--background);-webkit-box-shadow:0px 9px 19px -10px var(--text-3);box-shadow:0 9px 19px -10px var(--text-3);position:relative;padding-bottom:40px}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:2%;background:linear-gradient(180deg,rgba(0,0,0,0) 65%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{align-self:center;display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:90%;font-size:14px;color:var(--gray-400);font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:var(--gray-400);margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed var(--gray-400) 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{white-space:nowrap}"]});let t=e;return t})();var su=(()=>{let e=class e{constructor(){this.currentPageIndexSubject=new fe(0),this.currentPageIndex$=this.currentPageIndexSubject.asObservable()}getAllPagesChapter(){return["/assets/test-webp-chapter/bnha_420_a_001-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_002-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_003-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_004-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_005-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_006-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_007-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_008-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_009-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_010-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_011-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_012-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_013-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_014-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_015.webp"]}setCurrentPageIndex(r){this.currentPageIndexSubject.next(r)}getAllPagesCount(){return this.getAllPagesChapter().length}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kE=(()=>{let e=class e{constructor(r){this.chapterService=r,this.currentPageIndex=1,this.name="\u041C\u043E\u044F \u0433\u0435\u0440\u043E\u0439\u0441\u044C\u043A\u0430 \u0430\u043A\u0430\u0434\u0435\u043C\u0456\u044F 420",this.pages=["\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 1","\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 2","\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 3"],this.allPages=this.chapterService.getAllPagesCount()}ngOnInit(){this.chapterService.currentPageIndex$.subscribe(r=>{this.currentPageIndex=r})}};e.\u0275fac=function(i){return new(i||e)(oe(su))},e.\u0275cmp=Ke({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Qe],decls:11,vars:2,consts:[[1,"nav-content"],[1,"chapters_button"],["viewBox","3 3 18 18"],["d","M4 7a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1z"],[1,"pages"],[1,"reload_button"],["viewBox","0 0 24 24"],["d","M14.55 22.42C14.22 22.42 13.91 22.2 13.82 21.86C13.72 21.46 13.95 21.05 14.35 20.94C18.41 19.87 21.24 16.19 21.24 11.99C21.24 6.89 17.09 2.74 11.99 2.74C7.66 2.74 4.82 5.27 3.49 6.8H6.43C6.84 6.8 7.18 7.14 7.18 7.55C7.18 7.96 6.86 8.31 6.44 8.31H2.01C1.94 8.31 1.87 8.3 1.8 8.28C1.71 8.25 1.63 8.21 1.56 8.16C1.47 8.1 1.4 8.02 1.35 7.93C1.3 7.83 1.26 7.73 1.25 7.62C1.25 7.59 1.25 7.57 1.25 7.54V3C1.25 2.59 1.59 2.25 2 2.25C2.41 2.25 2.75 2.59 2.75 3V5.39C4.38 3.64 7.45 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 16.88 19.46 21.16 14.74 22.4C14.68 22.41 14.61 22.42 14.55 22.42Z"],["d","M11.29 22.73C11.27 22.73 11.24 22.73 11.22 22.72C10.15 22.65 9.1 22.41 8.1 22.02C7.81 21.91 7.62 21.62 7.62 21.31C7.62 21.22 7.64 21.13 7.67 21.05C7.82 20.67 8.26 20.47 8.64 20.62C9.5 20.96 10.41 21.16 11.33 21.23H11.34C11.74 21.25 12.04 21.59 12.04 21.99C12.04 22 12.04 22.02 12.04 22.03C12.01 22.42 11.68 22.73 11.29 22.73ZM5.78 20.58C5.61 20.58 5.45 20.53 5.31 20.42C4.47 19.75 3.74 18.96 3.13 18.07C3.04 17.94 2.99 17.8 2.99 17.65C2.99 17.4 3.11 17.17 3.32 17.03C3.65 16.8 4.14 16.89 4.36 17.22C4.89 17.99 5.52 18.67 6.25 19.24C6.42 19.38 6.53 19.59 6.53 19.82C6.53 19.99 6.48 20.16 6.37 20.3C6.23 20.48 6.01 20.58 5.78 20.58ZM2.44 15.7C2.11 15.7 1.82 15.49 1.73 15.18C1.41 14.15 1.25 13.08 1.25 12C1.25 11.59 1.59 11.25 2 11.25C2.41 11.25 2.75 11.59 2.75 12C2.75 12.93 2.89 13.85 3.16 14.73C3.18 14.8 3.19 14.88 3.19 14.96C3.19 15.29 2.98 15.57 2.67 15.67C2.59 15.69 2.52 15.7 2.44 15.7Z"],["d","M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"]],template:function(i,s){i&1&&(A(0,"div",0)(1,"div",1),Vs(),A(2,"svg",2),ae(3,"path",3),V()(),hw(),A(4,"div",4),ce(5),V(),A(6,"div",5),Vs(),A(7,"svg",6),ae(8,"path",7)(9,"path",8)(10,"path",9),V()()()),i&2&&(pe(5),Zh("",s.currentPageIndex,"/",s.allPages,""))},styles:[".nav-content[_ngcontent-%COMP%]{background:var(--background);color:var(--text);position:fixed;bottom:0;width:100%;display:flex;justify-content:space-around;align-items:center}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}"]});let t=e;return t})();function JM(t,e){if(t&1&&(A(0,"div"),ae(1,"img",1),V()),t&2){let n=e.$implicit;pe(),Jh("src",n,vr)}}var OE=(()=>{let e=class e{constructor(r){this.chapterService=r,this.pages=[],this.currentPageIndex=0,this.allPagesCount=0}ngOnInit(){this.pages=this.chapterService.getAllPagesChapter(),this.allPagesCount=this.pages.length}onScroll(r){let i=window.scrollY,s=window.innerHeight,o=document.body.scrollHeight,a=s+i,c=0,u=0;for(let l=0;l<this.pages.length;l++)if(u+=document.querySelector("img")?.clientHeight??0,u>=a){c=l;break}this.currentPageIndex!==c&&(this.currentPageIndex=c,this.chapterService.setCurrentPageIndex(c))}};e.\u0275fac=function(i){return new(i||e)(oe(su))},e.\u0275cmp=Ke({type:e,selectors:[["bido-chapter"]],hostBindings:function(i,s){i&1&&js("scroll",function(a){return s.onScroll(a)},!1,Vw)},standalone:!0,features:[Qe],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["alt","","loading","lazy",3,"src"]],template:function(i,s){i&1&&(gn(0,JM,2,1,"div",0),ae(1,"app-navbar")),i&2&&$t("ngForOf",s.pages)},dependencies:[Uc,kE],styles:["img[_ngcontent-%COMP%]{max-width:100%;display:block}"]});let t=e;return t})();var FE={firebase:{apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",databaseURL:"https://bidosi-manga-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bidosi-manga",storageBucket:"bidosi-manga.appspot.com",messagingSenderId:"24335793429",appId:"1:24335793429:web:c9616afea73ecf763dfd1c"}};var ap={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw Dr(e)},Dr=function(t){return new Error("Firebase Database ("+ap.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var VE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ZM=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},au={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ZM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new cp;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},cp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},lp=function(t){let e=VE(t);return au.encodeByteArray(e,!0)},lo=function(t){return lp(t).replace(/\./g,"")},ho=function(t){try{return au.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function UE(t){return jE(void 0,t)}function jE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!XM(n)||(t[n]=jE(t[n],e[n]));return t}function XM(t){return t!=="__proto__"}function e1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var t1=()=>e1().__FIREBASE_DEFAULTS__,n1=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},r1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&ho(t[1]);return e&&JSON.parse(e)},dp=()=>{try{return t1()||n1()||r1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hp=t=>{var e,n;return(n=(e=dp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cu=t=>{let e=hp(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fp=()=>{var t;return(t=dp())===null||t===void 0?void 0:t.config},pp=t=>{var e;return(e=dp())===null||e===void 0?void 0:e[`_${t}`]};var zn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function uu(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[lo(JSON.stringify(n)),lo(JSON.stringify(o)),""].join(".")}function Ee(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fo(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ee())}function BE(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lu(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $E(){let t=Ee();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zt(){return ap.NODE_CLIENT===!0||ap.NODE_ADMIN===!0}function gp(){try{return typeof indexedDB=="object"}catch{return!1}}function HE(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var i1="FirebaseError",ot=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=i1,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yn.prototype.create)}},yn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?s1(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ot(i,a,r)}};function s1(t,e){return t.replace(o1,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var o1=/\{\$([^}]+)}/g;function Fi(t){return JSON.parse(t)}function _e(t){return JSON.stringify(t)}var qE=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Fi(ho(s[0])||""),n=Fi(ho(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var zE=function(t){let e=qE(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WE=function(t){let e=qE(t).claims;return typeof e=="object"&&e.admin===!0};function Wt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function br(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function po(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function go(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Sr(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(LE(s)&&LE(o)){if(!Sr(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function LE(t){return t!==null&&typeof t=="object"}function Ar(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var ou=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function GE(t,e){let n=new up(t,e);return n.subscribe.bind(n)}var up=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");a1(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=op),i.error===void 0&&(i.error=op),i.complete===void 0&&(i.complete=op);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function a1(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function op(){}function du(t,e){return`${t} failed: ${e} argument `}var KE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mo=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var Xz=4*60*60*1e3;function Ye(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Rr="[DEFAULT]";var hu=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new zn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u1(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:c1(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function c1(t){return t===Rr?void 0:t}function u1(t){return t.instantiationMode==="EAGER"}var yo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new hu(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var l1=[],K=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(K||{}),d1={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},h1=K.INFO,f1={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},p1=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=f1[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gt=class{constructor(e){this.name=e,this._logLevel=h1,this._logHandler=p1,this._userLogHandler=null,l1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?d1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};var g1=(t,e)=>e.some(n=>t instanceof n),QE,YE;function m1(){return QE||(QE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function y1(){return YE||(YE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var JE=new WeakMap,yp=new WeakMap,ZE=new WeakMap,mp=new WeakMap,vp=new WeakMap;function _1(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&JE.set(n,t)}).catch(()=>{}),vp.set(e,t),e}function v1(t){if(yp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});yp.set(t,e)}var _p={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return yp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ZE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function XE(t){_p=t(_p)}function w1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(fu(this),e,...n);return ZE.set(r,e.sort?e.sort():[e]),Kt(r)}:y1().includes(t)?function(...e){return t.apply(fu(this),e),Kt(JE.get(this))}:function(...e){return Kt(t.apply(fu(this),e))}}function I1(t){return typeof t=="function"?w1(t):(t instanceof IDBTransaction&&v1(t),g1(t,m1())?new Proxy(t,_p):t)}function Kt(t){if(t instanceof IDBRequest)return _1(t);if(mp.has(t))return mp.get(t);let e=I1(t);return e!==t&&(mp.set(t,e),vp.set(e,t)),e}var fu=t=>vp.get(t);function t0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Kt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kt(o.result),c.oldVersion,c.newVersion,Kt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var E1=["get","getKey","getAll","getAllKeys","count"],C1=["put","add","delete","clear"],wp=new Map;function e0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(wp.get(e))return wp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=C1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||E1.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return wp.set(e,s),s}XE(t=>se(w({},t),{get:(e,n,r)=>e0(e,n)||t.get(e,n,r),has:(e,n)=>!!e0(e,n)||t.has(e,n)}));var Ep=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(T1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function T1(t){let e=t.getComponent();return e?.type==="VERSION"}var Cp="@firebase/app",n0="0.10.1";var xr=new Gt("@firebase/app"),D1="@firebase/app-compat",b1="@firebase/analytics-compat",S1="@firebase/analytics",A1="@firebase/app-check-compat",R1="@firebase/app-check",x1="@firebase/auth",N1="@firebase/auth-compat",P1="@firebase/database",M1="@firebase/database-compat",k1="@firebase/functions",O1="@firebase/functions-compat",F1="@firebase/installations",L1="@firebase/installations-compat",V1="@firebase/messaging",U1="@firebase/messaging-compat",j1="@firebase/performance",B1="@firebase/performance-compat",$1="@firebase/remote-config",H1="@firebase/remote-config-compat",q1="@firebase/storage",z1="@firebase/storage-compat",W1="@firebase/firestore",G1="@firebase/firestore-compat",K1="firebase",Q1="10.11.0";var Tp="[DEFAULT]",Y1={[Cp]:"fire-core",[D1]:"fire-core-compat",[S1]:"fire-analytics",[b1]:"fire-analytics-compat",[R1]:"fire-app-check",[A1]:"fire-app-check-compat",[x1]:"fire-auth",[N1]:"fire-auth-compat",[P1]:"fire-rtdb",[M1]:"fire-rtdb-compat",[k1]:"fire-fn",[O1]:"fire-fn-compat",[F1]:"fire-iid",[L1]:"fire-iid-compat",[V1]:"fire-fcm",[U1]:"fire-fcm-compat",[j1]:"fire-perf",[B1]:"fire-perf-compat",[$1]:"fire-rc",[H1]:"fire-rc-compat",[q1]:"fire-gcs",[z1]:"fire-gcs-compat",[W1]:"fire-fst",[G1]:"fire-fst-compat","fire-js":"fire-js",[K1]:"fire-js-all"};var _o=new Map,J1=new Map,Dp=new Map;function r0(t,e){try{t.container.addComponent(e)}catch(n){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qt(t){let e=t.name;if(Dp.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;Dp.set(e,t);for(let n of _o.values())r0(n,t);for(let n of J1.values())r0(n,t);return!0}function Nr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _n(t){return t.settings!==void 0}var Z1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Wn=new yn("app","Firebase",Z1);var bp=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wn.create("app-deleted",{appName:this._name})}};var Yt=Q1;function wo(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Tp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Wn.create("bad-app-name",{appName:String(i)});if(n||(n=fp()),!n)throw Wn.create("no-options");let s=_o.get(i);if(s){if(Sr(n,s.options)&&Sr(r,s.config))return s;throw Wn.create("duplicate-app",{appName:i})}let o=new yo(i);for(let c of Dp.values())o.addComponent(c);let a=new bp(n,r,o);return _o.set(i,a),a}function Gn(t=Tp){let e=_o.get(t);if(!e&&t===Tp&&fp())return wo();if(!e)throw Wn.create("no-app",{appName:t});return e}function pu(){return Array.from(_o.values())}function ue(t,e,n){var r;let i=(r=Y1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(a.join(" "));return}Qt(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var X1="firebase-heartbeat-database",ek=1,vo="firebase-heartbeat-store",Ip=null;function a0(){return Ip||(Ip=t0(X1,ek,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(vo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Wn.create("idb-open",{originalErrorMessage:t.message})})),Ip}function tk(t){return p(this,null,function*(){try{let n=(yield a0()).transaction(vo),r=yield n.objectStore(vo).get(c0(t));return yield n.done,r}catch(e){if(e instanceof ot)xr.warn(e.message);else{let n=Wn.create("idb-get",{originalErrorMessage:e?.message});xr.warn(n.message)}}})}function i0(t,e){return p(this,null,function*(){try{let r=(yield a0()).transaction(vo,"readwrite");yield r.objectStore(vo).put(e,c0(t)),yield r.done}catch(n){if(n instanceof ot)xr.warn(n.message);else{let r=Wn.create("idb-set",{originalErrorMessage:n?.message});xr.warn(r.message)}}})}function c0(t){return`${t.name}!${t.options.appId}`}var nk=1024,rk=30*24*60*60*1e3,Sp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Ap(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=s0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=rk}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=s0(),{heartbeatsToSend:r,unsentEntries:i}=ik(this._heartbeatsCache.heartbeats),s=lo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function s0(){return new Date().toISOString().substring(0,10)}function ik(t,e=nk){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),o0(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),o0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Ap=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return gp()?HE().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield tk(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return i0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function o0(t){return lo(JSON.stringify({version:2,heartbeats:t})).length}function sk(t){Qt(new Je("platform-logger",e=>new Ep(e),"PRIVATE")),Qt(new Je("heartbeat",e=>new Sp(e),"PRIVATE")),ue(Cp,n0,t),ue(Cp,n0,"esm2017"),ue("fire-js","")}sk("");var ok="firebase",ak="10.11.0";ue(ok,ak,"app");var u0="@firebase/database",l0="1.0.4";var Mg="";function ck(t){Mg=t}var Fp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_e(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Fi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var Lp=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var H0=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Fp(e)}}catch{}return new Lp},Mr=H0("localStorage"),Vp=H0("sessionStorage");var Ui=new Gt("@firebase/database"),uk=function(){let t=1;return function(){return t++}}(),q0=function(t){let e=KE(t),n=new ou;n.update(e);let r=n.digest();return au.encodeByteArray(r)},Fo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Fo.apply(null,r):typeof r=="object"?e+=_e(r):e+=r,e+=" "}return e},Or=null,d0=!0,lk=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ui.logLevel=K.VERBOSE,Or=Ui.log.bind(Ui),e&&Vp.set("logging_enabled",!0)):typeof t=="function"?Or=t:(Or=null,Vp.remove("logging_enabled"))},Oe=function(...t){if(d0===!0&&(d0=!1,Or===null&&Vp.get("logging_enabled")===!0&&lk(!0)),Or){let e=Fo.apply(null,t);Or(e)}},Lo=function(t){return function(...e){Oe(t,...e)}},Up=function(...t){let e="FIREBASE INTERNAL ERROR: "+Fo(...t);Ui.error(e)},vn=function(...t){let e=`FIREBASE FATAL ERROR: ${Fo(...t)}`;throw Ui.error(e),new Error(e)},Xe=function(...t){let e="FIREBASE WARNING: "+Fo(...t);Ui.warn(e)},dk=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},z0=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},hk=function(t){if(zt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},$i="[MIN_NAME]",Fr="[MAX_NAME]",Qi=function(t,e){if(t===e)return 0;if(t===$i||e===Fr)return-1;if(e===$i||t===Fr)return 1;{let n=h0(t),r=h0(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},fk=function(t,e){return t===e?0:t<e?-1:1},Io=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_e(e))},kg=function(t){if(typeof t!="object"||t===null)return _e(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=_e(e[r]),n+=":",n+=kg(t[e[r]]);return n+="}",n},W0=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function et(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var G0=function(t){m(!z0(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},pk=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},gk=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function mk(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var yk=new RegExp("^-?(0*)\\d{1,10}$"),_k=-2147483648,vk=2147483647,h0=function(t){if(yk.test(t)){let e=Number(t);if(e>=_k&&e<=vk)return e}return null},Yi=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Xe("Exception was thrown by user callback.",n),e},Math.floor(0))}},wk=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},bo=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var jp=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Bp=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Oe("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xe(e)}},So=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),mu="5",K0="v",Q0="s",Y0="r",J0="f",Z0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,X0="ls",eC="p",$p="ac",tC="websocket",nC="long_polling";var yu=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Ik(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function rC(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===tC)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===nC)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Ik(t)&&(n.ns=t.namespace);let i=[];return et(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Hp=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Wt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return UE(this.counters_)}};var Rp={},xp={};function Og(t){let e=t.toString();return Rp[e]||(Rp[e]=new Hp),Rp[e]}function Ek(t,e){let n=t.toString();return xp[n]||(xp[n]=e()),xp[n]}var qp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Yi(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var f0="start",Ck="close",Tk="pLPCommand",Dk="pRTLPCB",iC="id",sC="pw",oC="ser",bk="cb",Sk="seg",Ak="ts",Rk="d",xk="dframe",aC=1870,cC=30,Nk=aC-cC,Pk=25e3,Mk=3e4,zp=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lo(e),this.stats_=Og(n),this.urlFn=c=>(this.appCheckToken&&(c[$p]=this.appCheckToken),rC(n,nC,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Mk)),hk(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Wp((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===f0)this.id=a,this.password=c;else if(o===Ck)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[f0]="t",r[oC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[bk]=this.scriptTagHolder.uniqueCallbackIdentifier),r[K0]=mu,this.transportSessionId&&(r[Q0]=this.transportSessionId),this.lastSessionId&&(r[X0]=this.lastSessionId),this.applicationId&&(r[eC]=this.applicationId),this.appCheckToken&&(r[$p]=this.appCheckToken),typeof location<"u"&&location.hostname&&Z0.test(location.hostname)&&(r[Y0]=J0);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return zt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!pk()&&!gk()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=_e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=lp(n),i=W0(r,Nk);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(zt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[xk]="t",r[iC]=e,r[sC]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=_e(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Wp=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,zt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=uk(),window[Tk+this.uniqueCallbackIdentifier]=e,window[Dk+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Oe("frame writing exception"),a.stack&&Oe(a.stack),Oe(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Oe("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[iC]=this.myID,e[sC]=this.myPW,e[oC]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+cC+r.length<=aC;){let o=this.pendingSegs.shift();r=r+"&"+Sk+i+"="+o.seg+"&"+Ak+i+"="+o.ts+"&"+Rk+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Pk)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){zt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Oe("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var kk=16384,Ok=45e3,_u=null;typeof MozWebSocket<"u"?_u=MozWebSocket:typeof WebSocket<"u"&&(_u=WebSocket);var Eo=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lo(this.connId),this.stats_=Og(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[K0]=mu,!zt()&&typeof location<"u"&&location.hostname&&Z0.test(location.hostname)&&(a[Y0]=J0),r&&(a[Q0]=r),i&&(a[X0]=i),s&&(a[$p]=s),o&&(a[eC]=o),rC(n,tC,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mr.set("previous_websocket_failure",!0);try{let i;if(zt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${mu}/${Mg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new _u(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&_u!==null&&!t.forceDisallow_}static previouslyFailed(){return Mr.isInMemoryStorage||Mr.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Fi(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=_e(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=W0(r,kk);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ok))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),Fk=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[zp,Eo]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Eo&&Eo.isAvailable(),i=r&&!Eo.previouslyFailed();if(n.webSocketOnly&&(r||Xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Eo];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Lk=6e4,Vk=5e3,Uk=10*1024,jk=100*1024,Np="t",p0="d",Bk="s",g0="r",$k="e",m0="o",y0="a",_0="n",v0="p",Hk="h",Gp=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lo("c:"+this.id+":"),this.transportManager_=new Fk(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=bo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>jk?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Uk?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Np in e){let n=e[Np];n===y0?this.upgradeIfSecondaryHealthy_():n===g0?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===m0&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Io("t",e),r=Io("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:v0,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:y0,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:_0,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Io("t",e),r=Io("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Io(Np,e);if(p0 in e){let r=e[p0];if(n===Hk){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===_0){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Bk?this.onConnectionShutdown_(r):n===g0?this.onReset_(r):n===$k?Up("Server Error: "+r):n===m0?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Up("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),mu!==r&&Xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),bo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Lk))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Vk))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:v0,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var vu=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var wu=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Iu=class t extends wu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!fo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var w0=32,I0=768,J=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Q(){return new J("")}function O(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Qn(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new J(t.pieces_,e)}function uC(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function qk(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function lC(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function dC(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new J(e,0)}function ve(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Ze(t,e){let n=O(t),r=O(e);if(n===null)return e;if(n===r)return Ze(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Fg(t,e){if(Qn(t)!==Qn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Rt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Qn(t)>Qn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Kp=class{constructor(e,n){this.errorPrefix_=n,this.parts_=lC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=mo(this.parts_[r]);hC(this)}};function zk(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=mo(e),hC(t)}function Wk(t){let e=t.parts_.pop();t.byteLength_-=mo(e),t.parts_.length>0&&(t.byteLength_-=1)}function hC(t){if(t.byteLength_>I0)throw new Error(t.errorPrefix_+"has a key path longer than "+I0+" bytes ("+t.byteLength_+").");if(t.parts_.length>w0)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+w0+") or object contains a cycle "+Pr(t))}function Pr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var Qp=class t extends wu{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Co=1e3,Gk=60*5*1e3,E0=30*1e3,Kk=1.3,Qk=3e4,Yk="server_kill",C0=3,Lg=(()=>{class t extends vu{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=Lo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Co,this.maxReconnectDelay_=Gk,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!zt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Qp.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Iu.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(_e(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new zn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Wt(n,"w")){let i=br(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WE(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=E0)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=zE(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+_e(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Up("Unrecognized action received from server: "+_e(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Co,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Co,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Qk&&(this.reconnectDelay_=Co),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Kk)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Oe("getToken() completed but was canceled"):(Oe("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Gp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{Xe(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Yk)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Xe(h),u())}}})}interrupt(n){Oe("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Oe("Resuming connection for reason: "+n),delete this.interruptReasons_[n],po(this.interruptReasons_)&&(this.reconnectDelay_=Co,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>kg(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Oe("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=C0&&(this.reconnectDelay_=E0,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Oe("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=C0&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";zt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Mg.replace(/\./g,"-")]=1,fo()?n["framework.cordova"]=1:lu()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Iu.getInstance().currentlyOnline();return po(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),F=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Hi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new F($i,e),i=new F($i,n);return this.compare(r,i)!==0}minPost(){return F.MIN}};var gu,Eu=class extends Hi{static get __EMPTY_NODE(){return gu}static set __EMPTY_NODE(e){gu=e}compare(e,n){return Qi(e.name,n.name)}isDefinedOn(e){throw Dr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(Fr,gu)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,gu)}toString(){return".key"}},ji=new Eu;var Vi=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},At=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??yt.EMPTY_NODE,this.right=o??yt.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return yt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return yt.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Yp=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new At(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},yt=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,At.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,At.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Vi(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Vi(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Vi(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Vi(this.root_,null,this.comparator_,!0,e)}};yt.EMPTY_NODE=new Yp;function Jk(t,e){return Qi(t.name,e.name)}function Vg(t,e){return Qi(t,e)}var Jp;function Zk(t){Jp=t}var fC=function(t){return typeof t=="number"?"number:"+G0(t):"string:"+t},pC=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wt(e,".sv"),"Priority must be a string or number.")}else m(t===Jp||t.isEmpty(),"priority of unexpected type.");m(t===Jp||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var T0,qi=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pC(this.priorityNode_)}static set __childrenNodeConstructor(n){T0=n}static get __childrenNodeConstructor(){return T0}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:O(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=O(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Qn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+fC(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=G0(this.value_):n+=this.value_,this.lazyHash_=q0(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),gC,mC;function Xk(t){gC=t}function eO(t){mC=t}var Zp=class extends Hi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Qi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(Fr,new qi("[PRIORITY-POST]",mC))}makePost(e,n){let r=gC(e);return new F(n,new qi("[PRIORITY-POST]",r))}toString(){return".priority"}},le=new Zp;var tO=Math.log(2),Xp=class{constructor(e){let n=s=>parseInt(Math.log(s)/tO,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Cu=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new At(h,d.node,At.BLACK,null,null);{let f=parseInt(l/2,10)+c,g=i(c,f),_=i(f+1,u);return d=t[f],h=n?n(d):d,new At(h,d.node,At.BLACK,g,_)}},s=function(c){let u=null,l=null,d=t.length,h=function(g,_){let P=d-g,B=d;d-=g;let be=i(P+1,B),ie=t[P],He=n?n(ie):ie;f(new At(He,ie.node,_,null,be))},f=function(g){u?(u.left=g,u=g):(l=g,u=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),P=Math.pow(2,c.count-(g+1));_?h(P,At.BLACK):(h(P,At.BLACK),h(P,At.RED))}return l},o=new Xp(t.length),a=s(o);return new yt(r||e,a)};var Pp,Li={},zi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(Li&&le,"ChildrenNode.ts has not been loaded"),Pp=Pp||new t({".priority":Li},{".priority":le}),Pp}get(e){let n=br(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof yt?n:null}hasIndex(e){return Wt(this.indexSet_,e.toString())}addIndex(e,n){m(e!==ji,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(F.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Cu(r,e.getCompare()):a=Li;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=go(this.indexes_,(i,s)=>{let o=br(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===Li)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(F.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Cu(a,o.getCompare())}else return Li;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new F(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=go(this.indexes_,i=>{if(i===Li)return i;{let s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new t(r,this.indexSet_)}};var To,x=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pC(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return To||(To=new t(new yt(Vg),null,zi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||To}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?To:r}}getChild(n){let r=O(n);return r===null?this:this.getImmediateChild(r).getChild(te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new F(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?To:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=O(n);if(i===null)return r;{m(O(n)!==".priority"||Qn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(le,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+fC(this.getPriority().val())+":"),this.forEachChild(le,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":q0(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new F(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new F(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new F(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vo?-1:0}withIndex(n){if(n===ji||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===ji||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(le),s=r.getIterator(le),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===ji?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),eg=class extends x{constructor(){super(new yt(Vg),x.EMPTY_NODE,zi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return x.EMPTY_NODE}isEmpty(){return!1}},Vo=new eg;Object.defineProperties(F,{MIN:{value:new F($i,x.EMPTY_NODE)},MAX:{value:new F(Fr,Vo)}});Eu.__EMPTY_NODE=x.EMPTY_NODE;qi.__childrenNodeConstructor=x;Zk(Vo);eO(Vo);var nO=!0;function Re(t,e=null){if(t===null)return x.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new qi(n,Re(e))}if(!(t instanceof Array)&&nO){let n=[],r=!1;if(et(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Re(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new F(o,c)))}}),n.length===0)return x.EMPTY_NODE;let s=Cu(n,Jk,o=>o.name,Vg);if(r){let o=Cu(n,le.getCompare());return new x(s,Re(e),new zi({".priority":o},{".priority":le}))}else return new x(s,Re(e),zi.Default)}else{let n=x.EMPTY_NODE;return et(t,(r,i)=>{if(Wt(t,r)&&r.substring(0,1)!=="."){let s=Re(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Re(e))}}Xk(Re);var tg=class extends Hi{constructor(e){super(),this.indexPath_=e,m(!L(e)&&O(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Qi(e.name,n.name):s}makePost(e,n){let r=Re(e),i=x.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){let e=x.EMPTY_NODE.updateChild(this.indexPath_,Vo);return new F(Fr,e)}toString(){return lC(this.indexPath_,0).join("/")}};var ng=class extends Hi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Qi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){let r=Re(e);return new F(n,r)}toString(){return".value"}},rO=new ng;function yC(t){return{type:"value",snapshotNode:t}}function Wi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function No(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Po(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function iO(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Mo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(No(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Wi(n,r)):o.trackChildChange(Po(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(le,(i,s)=>{n.hasChild(i)||r.trackChildChange(No(i,s))}),n.isLeafNode()||n.forEachChild(le,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Po(i,s,o))}else r.trackChildChange(Wi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?x.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Tu=class t{constructor(e){this.indexedFilter_=new Mo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=x.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=x.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(x.EMPTY_NODE);let s=this;return n.forEachChild(le,(o,a)=>{s.matches(new F(o,a))||(i=i.updateImmediateChild(o,x.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var rg=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Tu(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=x.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=x.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=x.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(x.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,x.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new F(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(l&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Po(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(No(n,d));let _=a.updateImmediateChild(n,x.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Wi(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?e:l&&o(u,c)>=0?(s!=null&&(s.trackChildChange(No(u.name,u.node)),s.trackChildChange(Wi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,x.EMPTY_NODE)):e}};var ig=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=le}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$i}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===le}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function sO(t){return t.loadsAllData()?new Mo(t.getIndex()):t.hasLimit()?new rg(t):new Tu(t)}function D0(t){let e={};if(t.isDefault())return e;let n;if(t.index_===le?n="$priority":t.index_===rO?n="$value":t.index_===ji?n="$key":(m(t.index_ instanceof tg,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=_e(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=_e(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+_e(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=_e(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+_e(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function b0(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==le&&(e.i=t.index_.toString()),e}var sg=class t extends vu{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=D0(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),br(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=D0(e._queryParams),r=e._path.toString(),i=new zn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Ar(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Fi(a.responseText)}catch{Xe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var og=class{constructor(){this.rootNode_=x.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Du(){return{value:null,children:new Map}}function _C(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=O(e);t.children.has(r)||t.children.set(r,Du());let i=t.children.get(r);e=te(e),_C(i,e,n)}}function ag(t,e,n){t.value!==null?n(e,t.value):oO(t,(r,i)=>{let s=new J(e.toString()+"/"+r);ag(i,s,n)})}function oO(t,e){t.children.forEach((n,r)=>{e(r,n)})}var cg=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&et(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var S0=10*1e3,aO=30*1e3,cO=5*60*1e3,ug=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cg(e);let r=S0+(aO-S0)*Math.random();bo(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;et(e,(i,s)=>{s>0&&Wt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),bo(this.reportStats_.bind(this),Math.floor(Math.random()*2*cO))}};var Jt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Jt||{});function vC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ug(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function jg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var lg=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Jt.ACK_USER_WRITE,this.source=vC()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(e));return new t(Q(),n,this.revert)}}else return m(O(this.path)===e,"operationForChild called for unrelated child."),new t(te(this.path),this.affectedTree,this.revert)}};var bu=class t{constructor(e,n){this.source=e,this.path=n,this.type=Jt.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,Q()):new t(this.source,te(this.path))}};var Gi=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Jt.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,Q(),this.snap.getImmediateChild(e)):new t(this.source,te(this.path),this.snap)}};var Su=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Jt.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new Gi(this.source,Q(),n.value):new t(this.source,Q(),n)}else return m(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var wn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=O(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var dg=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function uO(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(iO(o.childName,o.snapshotNode))}),Do(t,i,"child_removed",e,r,n),Do(t,i,"child_added",e,r,n),Do(t,i,"child_moved",s,r,n),Do(t,i,"child_changed",e,r,n),Do(t,i,"value",e,r,n),i}function Do(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>dO(t,a,c)),o.forEach(a=>{let c=lO(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function lO(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function dO(t,e,n){if(e.childName==null||n.childName==null)throw Dr("Should only compare child_ events.");let r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Uu(t,e){return{eventCache:t,serverCache:e}}function Ao(t,e,n,r){return Uu(new wn(e,n,r),t.serverCache)}function wC(t,e,n,r){return Uu(t.eventCache,new wn(e,n,r))}function hg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Lr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Mp,hO=()=>(Mp||(Mp=new yt(fk)),Mp),tt=class t{constructor(e,n=hO()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return et(e,(r,i)=>{n=n.set(new J(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(L(e))return null;{let r=O(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(te(e),n);return s!=null?{path:ve(new J(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=O(e),r=this.children.get(n);return r!==null?r.subtree(te(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=O(e),s=(this.children.get(r)||new t(null)).set(te(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=O(e),r=this.children.get(n);if(r){let i=r.remove(te(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(L(e))return this.value;{let n=O(e),r=this.children.get(n);return r?r.get(te(e)):null}}setTree(e,n){if(L(e))return n;{let r=O(e),s=(this.children.get(r)||new t(null)).setTree(te(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ve(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let s=O(e),o=this.children.get(s);return o?o.findOnPath_(te(e),ve(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=O(e),s=this.children.get(i);return s?s.foreachOnPath_(te(e),ve(n,i),r):new t(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ve(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var xt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new tt(null))}};function Ro(t,e,n){if(L(e))return new xt(new tt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ze(i,e);return s=s.updateChild(o,n),new xt(t.writeTree_.set(i,s))}else{let i=new tt(n),s=t.writeTree_.setTree(e,i);return new xt(s)}}}function A0(t,e,n){let r=t;return et(n,(i,s)=>{r=Ro(r,ve(e,i),s)}),r}function R0(t,e){if(L(e))return xt.empty();{let n=t.writeTree_.setTree(e,new tt(null));return new xt(n)}}function fg(t,e){return Vr(t,e)!=null}function Vr(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function x0(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(le,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function Kn(t,e){if(L(e))return t;{let n=Vr(t,e);return n!=null?new xt(new tt(n)):new xt(t.writeTree_.subtree(e))}}function pg(t){return t.writeTree_.isEmpty()}function Ki(t,e){return IC(Q(),t.writeTree_,e)}function IC(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=IC(ve(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ve(t,".priority"),r)),n}}function Bg(t,e){return DC(e,t)}function fO(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ro(t.visibleWrites,e,n)),t.lastWriteId=r}function pO(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function gO(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&mO(a,r.path)?i=!1:Rt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return yO(t),!0;if(r.snap)t.visibleWrites=R0(t.visibleWrites,r.path);else{let a=r.children;et(a,c=>{t.visibleWrites=R0(t.visibleWrites,ve(r.path,c))})}return!0}else return!1}function mO(t,e){if(t.snap)return Rt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Rt(ve(t.path,n),e))return!0;return!1}function yO(t){t.visibleWrites=EC(t.allWrites,_O,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function _O(t){return t.visible}function EC(t,e,n){let r=xt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Rt(n,o)?(a=Ze(n,o),r=Ro(r,a,s.snap)):Rt(o,n)&&(a=Ze(o,n),r=Ro(r,Q(),s.snap.getChild(a)));else if(s.children){if(Rt(n,o))a=Ze(n,o),r=A0(r,a,s.children);else if(Rt(o,n))if(a=Ze(o,n),L(a))r=A0(r,Q(),s.children);else{let c=br(s.children,O(a));if(c){let u=c.getChild(te(a));r=Ro(r,Q(),u)}}}else throw Dr("WriteRecord should have .snap or .children")}}return r}function CC(t,e,n,r,i){if(!r&&!i){let s=Vr(t.visibleWrites,e);if(s!=null)return s;{let o=Kn(t.visibleWrites,e);if(pg(o))return n;if(n==null&&!fg(o,Q()))return null;{let a=n||x.EMPTY_NODE;return Ki(o,a)}}}else{let s=Kn(t.visibleWrites,e);if(!i&&pg(s))return n;if(!i&&n==null&&!fg(s,Q()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Rt(u.path,e)||Rt(e,u.path))},a=EC(t.allWrites,o,e),c=n||x.EMPTY_NODE;return Ki(a,c)}}}function vO(t,e,n){let r=x.EMPTY_NODE,i=Vr(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(le,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Kn(t.visibleWrites,e);return n.forEachChild(le,(o,a)=>{let c=Ki(Kn(s,new J(o)),a);r=r.updateImmediateChild(o,c)}),x0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Kn(t.visibleWrites,e);return x0(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function wO(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ve(e,n);if(fg(t.visibleWrites,s))return null;{let o=Kn(t.visibleWrites,s);return pg(o)?i.getChild(n):Ki(o,i.getChild(n))}}function IO(t,e,n,r){let i=ve(e,n),s=Vr(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Kn(t.visibleWrites,i);return Ki(o,r.getNode().getImmediateChild(n))}else return null}function EO(t,e){return Vr(t.visibleWrites,e)}function CO(t,e,n,r,i,s,o){let a,c=Kn(t.visibleWrites,e),u=Vr(c,Q());if(u!=null)a=u;else if(n!=null)a=Ki(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function TO(){return{visibleWrites:xt.empty(),allWrites:[],lastWriteId:-1}}function Au(t,e,n,r){return CC(t.writeTree,t.treePath,e,n,r)}function $g(t,e){return vO(t.writeTree,t.treePath,e)}function N0(t,e,n,r){return wO(t.writeTree,t.treePath,e,n,r)}function Ru(t,e){return EO(t.writeTree,ve(t.treePath,e))}function DO(t,e,n,r,i,s){return CO(t.writeTree,t.treePath,e,n,r,i,s)}function Hg(t,e,n){return IO(t.writeTree,t.treePath,e,n)}function TC(t,e){return DC(ve(t.treePath,e),t.writeTree)}function DC(t,e){return{treePath:t,writeTree:e}}var gg=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Po(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,No(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Wi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Po(r,e.snapshotNode,i.oldSnap));else throw Dr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var mg=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},bC=new mg,ko=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new wn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hg(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Lr(this.viewCache_),s=DO(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function bO(t){return{filter:t}}function SO(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function AO(t,e,n,r,i){let s=new gg,o,a;if(n.type===Jt.OVERWRITE){let u=n;u.source.fromUser?o=yg(t,e,u.path,u.snap,r,i,s):(m(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!L(u.path),o=xu(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Jt.MERGE){let u=n;u.source.fromUser?o=xO(t,e,u.path,u.children,r,i,s):(m(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=_g(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Jt.ACK_USER_WRITE){let u=n;u.revert?o=MO(t,e,u.path,r,i,s):o=NO(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Jt.LISTEN_COMPLETE)o=PO(t,e,n.path,r,s);else throw Dr("Unknown operation type: "+n.type);let c=s.getChanges();return RO(e,o,c),{viewCache:o,changes:c}}function RO(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=hg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(yC(hg(e)))}}function SC(t,e,n,r,i,s){let o=e.eventCache;if(Ru(r,n)!=null)return e;{let a,c;if(L(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Lr(e),l=u instanceof x?u:x.EMPTY_NODE,d=$g(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=Au(r,Lr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=O(n);if(u===".priority"){m(Qn(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=N0(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=te(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=N0(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=Hg(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return Ao(e,a,o.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function xu(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(L(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=O(n);if(!c.isCompleteForPath(n)&&Qn(n)>1)return e;let g=te(n),P=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?u=l.updatePriority(c.getNode(),P):u=l.updateChild(c.getNode(),f,P,g,bC,null)}let d=wC(e,u,c.isFullyInitialized()||L(n),l.filtersNodes()),h=new ko(i,d,s);return SC(t,d,n,i,h,a)}function yg(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new ko(i,e,s);if(L(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ao(e,u,!0,t.filter.filtersNodes());else{let d=O(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Ao(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=te(n),f=a.getNode().getImmediateChild(d),g;if(L(h))g=r;else{let _=l.getCompleteChild(d);_!=null?uC(h)===".priority"&&_.getChild(dC(h)).isEmpty()?g=_:g=_.updateChild(h,r):g=x.EMPTY_NODE}if(f.equals(g))c=e;else{let _=t.filter.updateChild(a.getNode(),d,g,h,l,o);c=Ao(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function P0(t,e){return t.eventCache.isCompleteForChild(e)}function xO(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=ve(n,c);P0(e,O(l))&&(a=yg(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=ve(n,c);P0(e,O(l))||(a=yg(t,a,l,u,i,s,o))}),a}function M0(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function _g(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;L(n)?u=r:u=new tt(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=M0(t,f,h);c=xu(t,c,new J(d),g,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),_=M0(t,g,h);c=xu(t,c,new J(d),_,i,s,o,a)}}),c}function NO(t,e,n,r,i,s,o){if(Ru(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return xu(t,e,n,c.getNode().getChild(n),i,s,a,o);if(L(n)){let u=new tt(null);return c.getNode().forEachChild(ji,(l,d)=>{u=u.set(new J(l),d)}),_g(t,e,n,u,i,s,a,o)}else return e}else{let u=new tt(null);return r.foreach((l,d)=>{let h=ve(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),_g(t,e,n,u,i,s,a,o)}}function PO(t,e,n,r,i){let s=e.serverCache,o=wC(e,s.getNode(),s.isFullyInitialized()||L(n),s.isFiltered());return SC(t,o,n,r,bC,i)}function MO(t,e,n,r,i,s){let o;if(Ru(r,n)!=null)return e;{let a=new ko(r,e,i),c=e.eventCache.getNode(),u;if(L(n)||O(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=Au(r,Lr(e));else{let d=e.serverCache.getNode();m(d instanceof x,"serverChildren would be complete if leaf node"),l=$g(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=O(n),d=Hg(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,te(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,x.EMPTY_NODE,te(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Au(r,Lr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Ru(r,Q())!=null,Ao(e,u,o,t.filter.filtersNodes())}}var vg=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Mo(r.getIndex()),s=sO(r);this.processor_=bO(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(x.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(x.EMPTY_NODE,a.getNode(),null),l=new wn(c,o.isFullyInitialized(),i.filtersNodes()),d=new wn(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Uu(d,l),this.eventGenerator_=new dg(this.query_)}get query(){return this.query_}};function kO(t){return t.viewCache_.serverCache.getNode()}function OO(t,e){let n=Lr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(O(e)).isEmpty())?n.getChild(e):null}function k0(t){return t.eventRegistrations_.length===0}function FO(t,e){t.eventRegistrations_.push(e)}function O0(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function F0(t,e,n,r){e.type===Jt.MERGE&&e.source.queryId!==null&&(m(Lr(t.viewCache_),"We should always have a full cache before handling merges"),m(hg(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=AO(t.processor_,i,e,n,r);return SO(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,AC(t,s.changes,s.viewCache.eventCache.getNode(),null)}function LO(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(le,(s,o)=>{r.push(Wi(s,o))}),n.isFullyInitialized()&&r.push(yC(n.getNode())),AC(t,r,n.getNode(),e)}function AC(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return uO(t.eventGenerator_,e,n,i)}var Nu,wg=class{constructor(){this.views=new Map}};function VO(t){m(!Nu,"__referenceConstructor has already been defined"),Nu=t}function UO(){return m(Nu,"Reference.ts has not been loaded"),Nu}function jO(t){return t.views.size===0}function qg(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),F0(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(F0(o,e,n,r));return s}}function BO(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Au(n,i?r:null),c=!1;a?c=!0:r instanceof x?(a=$g(n,r),c=!1):(a=x.EMPTY_NODE,c=!1);let u=Uu(new wn(a,c,!1),new wn(r,i,!1));return new vg(e,u)}return o}function $O(t,e,n,r,i,s){let o=BO(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),FO(o,n),LO(o,n)}function HO(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Yn(t);if(i==="default")for(let[c,u]of t.views.entries())o=o.concat(O0(u,n,r)),k0(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{let c=t.views.get(i);c&&(o=o.concat(O0(c,n,r)),k0(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Yn(t)&&s.push(new(UO())(e._repo,e._path)),{removed:s,events:o}}function RC(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Bi(t,e){let n=null;for(let r of t.views.values())n=n||OO(r,e);return n}function xC(t,e){if(e._queryParams.loadsAllData())return ju(t);{let r=e._queryIdentifier;return t.views.get(r)}}function NC(t,e){return xC(t,e)!=null}function Yn(t){return ju(t)!=null}function ju(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Pu;function qO(t){m(!Pu,"__referenceConstructor has already been defined"),Pu=t}function zO(){return m(Pu,"Reference.ts has not been loaded"),Pu}var WO=1,Mu=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=TO(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function PC(t,e,n,r,i){return fO(t.pendingWriteTree_,e,n,r,i),i?Uo(t,new Gi(vC(),e,n)):[]}function kr(t,e,n=!1){let r=pO(t.pendingWriteTree_,e);if(gO(t.pendingWriteTree_,e)){let s=new tt(null);return r.snap!=null?s=s.set(Q(),!0):et(r.children,o=>{s=s.set(new J(o),!0)}),Uo(t,new lg(r.path,s,n))}else return[]}function Bu(t,e,n){return Uo(t,new Gi(Ug(),e,n))}function GO(t,e,n){let r=tt.fromObject(n);return Uo(t,new Su(Ug(),e,r))}function KO(t,e){return Uo(t,new bu(Ug(),e))}function QO(t,e,n){let r=Wg(t,n);if(r){let i=Gg(r),s=i.path,o=i.queryId,a=Ze(s,e),c=new bu(jg(o),a);return Kg(t,s,c)}else return[]}function Ig(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||NC(o,e))){let c=HO(o,e,n,r);jO(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let u=c.removed;if(a=c.events,!i){let l=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Yn(f));if(l&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=ZO(h);for(let g=0;g<f.length;++g){let _=f[g],P=_.query,B=OC(t,_);t.listenProvider_.startListening(xo(P),ku(t,P),B.hashFn,B.onComplete)}}}!d&&u.length>0&&!r&&(l?t.listenProvider_.stopListening(xo(e),null):u.forEach(h=>{let f=t.queryToTagMap.get($u(h));t.listenProvider_.stopListening(xo(h),f)}))}XO(t,u)}return a}function YO(t,e,n,r){let i=Wg(t,r);if(i!=null){let s=Gg(i),o=s.path,a=s.queryId,c=Ze(o,e),u=new Gi(jg(a),c,n);return Kg(t,o,u)}else return[]}function JO(t,e,n,r){let i=Wg(t,r);if(i){let s=Gg(i),o=s.path,a=s.queryId,c=Ze(o,e),u=tt.fromObject(n),l=new Su(jg(a),c,u);return Kg(t,o,l)}else return[]}function L0(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let g=Ze(h,i);s=s||Bi(f,g),o=o||Yn(f)});let a=t.syncPointTree_.get(i);a?(o=o||Yn(a),s=s||Bi(a,Q())):(a=new wg,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=x.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,g)=>{let _=Bi(g,Q());_&&(s=s.updateImmediateChild(f,_))}));let u=NC(a,e);if(!u&&!e._queryParams.loadsAllData()){let h=$u(e);m(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=eF();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let l=Bg(t.pendingWriteTree_,i),d=$O(a,e,n,l,s,c);if(!u&&!o&&!r){let h=xC(a,e);d=d.concat(tF(t,e,h))}return d}function zg(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ze(o,e),u=Bi(a,c);if(u)return u});return CC(i,e,s,n,!0)}function Uo(t,e){return MC(e,t.syncPointTree_,null,Bg(t.pendingWriteTree_,Q()))}function MC(t,e,n,r){if(L(t.path))return kC(t,e,n,r);{let i=e.get(Q());n==null&&i!=null&&(n=Bi(i,Q()));let s=[],o=O(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=TC(r,o);s=s.concat(MC(a,c,u,l))}return i&&(s=s.concat(qg(i,t,r,n))),s}}function kC(t,e,n,r){let i=e.get(Q());n==null&&i!=null&&(n=Bi(i,Q()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=TC(r,o),l=t.operationForChild(o);l&&(s=s.concat(kC(l,a,c,u)))}),i&&(s=s.concat(qg(i,t,r,n))),s}function OC(t,e){let n=e.query,r=ku(t,n);return{hashFn:()=>(kO(e)||x.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?QO(t,n._path,r):KO(t,n._path);{let s=mk(i,n);return Ig(t,n,null,s)}}}}function ku(t,e){let n=$u(e);return t.queryToTagMap.get(n)}function $u(t){return t._path.toString()+"$"+t._queryIdentifier}function Wg(t,e){return t.tagToQueryMap.get(e)}function Gg(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}}function Kg(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Bg(t.pendingWriteTree_,e);return qg(r,n,i,null)}function ZO(t){return t.fold((e,n,r)=>{if(n&&Yn(n))return[ju(n)];{let i=[];return n&&(i=RC(n)),et(r,(s,o)=>{i=i.concat(o)}),i}})}function xo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(zO())(t._repo,t._path):t}function XO(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=$u(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function eF(){return WO++}function tF(t,e,n){let r=e._path,i=ku(t,e),s=OC(t,n),o=t.listenProvider_.startListening(xo(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!Yn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((u,l,d)=>{if(!L(u)&&l&&Yn(l))return[ju(l).query];{let h=[];return l&&(h=h.concat(RC(l).map(f=>f.query))),et(d,(f,g)=>{h=h.concat(g)}),h}});for(let u=0;u<c.length;++u){let l=c[u];t.listenProvider_.stopListening(xo(l),ku(t,l))}}return o}var Eg=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Cg=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ve(this.path_,e);return new t(this.syncTree_,n)}node(){return zg(this.syncTree_,this.path_)}},nF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},V0=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return rF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return iF(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},rF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},iF=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},sF=function(t,e,n,r){return Qg(e,new Cg(n,t),r)},FC=function(t,e,n){return Qg(t,new Eg(e),n)};function Qg(t,e,n){let r=t.getPriority().val(),i=V0(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=V0(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new qi(a,Re(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new qi(i))),o.forEachChild(le,(a,c)=>{let u=Qg(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var Oo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Yg(t,e){let n=e instanceof J?e:new J(e),r=t,i=O(n);for(;i!==null;){let s=br(r.node.children,i)||{children:{},childCount:0};r=new Oo(i,r,s),n=te(n),i=O(n)}return r}function Ji(t){return t.node.value}function LC(t,e){t.node.value=e,Tg(t)}function VC(t){return t.node.childCount>0}function oF(t){return Ji(t)===void 0&&!VC(t)}function Hu(t,e){et(t.node.children,(n,r)=>{e(new Oo(n,t,r))})}function UC(t,e,n,r){n&&!r&&e(t),Hu(t,i=>{UC(i,e,!0,r)}),n&&r&&e(t)}function aF(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function jo(t){return new J(t.parent===null?t.name:jo(t.parent)+"/"+t.name)}function Tg(t){t.parent!==null&&cF(t.parent,t.name,t)}function cF(t,e,n){let r=oF(n),i=Wt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Tg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Tg(t))}var uF=/[\[\].#$\/\u0000-\u001F\u007F]/,lF=/[\[\].#$\u0000-\u001F\u007F]/,kp=10*1024*1024,jC=function(t){return typeof t=="string"&&t.length!==0&&!uF.test(t)},BC=function(t){return typeof t=="string"&&t.length!==0&&!lF.test(t)},dF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),BC(t)};var hF=function(t,e,n,r){r&&e===void 0||Jg(du(t,"value"),e,n)},Jg=function(t,e,n){let r=n instanceof J?new Kp(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Pr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Pr(r)+" with contents = "+e.toString());if(z0(e))throw new Error(t+"contains "+e.toString()+" "+Pr(r));if(typeof e=="string"&&e.length>kp/3&&mo(e)>kp)throw new Error(t+"contains a string greater than "+kp+" utf8 bytes "+Pr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(et(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!jC(o)))throw new Error(t+" contains an invalid key ("+o+") "+Pr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);zk(r,o),Jg(t,a,r),Wk(r)}),i&&s)throw new Error(t+' contains ".value" child '+Pr(r)+" in addition to actual children.")}};var $C=function(t,e,n,r){if(!(r&&n===void 0)&&!BC(n))throw new Error(du(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},fF=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),$C(t,e,n,r)},pF=function(t,e){if(O(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},gF=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!jC(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!dF(n))throw new Error(du(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Dg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Zg(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Fg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function HC(t,e,n){Zg(t,n),qC(t,r=>Fg(r,e))}function In(t,e,n){Zg(t,n),qC(t,r=>Rt(r,e)||Rt(e,r))}function qC(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(mF(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function mF(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Or&&Oe("event: "+n.toString()),Yi(r)}}}var yF="repo_interrupt",_F=25,bg=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Du(),this.transactionQueueTree_=new Oo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function vF(t,e,n){if(t.stats_=Og(t.repoInfo_),t.forceRestClient_||wk())t.server_=new sg(t.repoInfo_,(r,i,s,o)=>{U0(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>j0(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Lg(t.repoInfo_,e,(r,i,s,o)=>{U0(t,r,i,s,o)},r=>{j0(t,r)},r=>{IF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Ek(t.repoInfo_,()=>new ug(t.stats_,t.server_)),t.infoData_=new og,t.infoSyncTree_=new Mu({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Bu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),em(t,"connected",!1),t.serverSyncTree_=new Mu({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);In(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function wF(t){let n=t.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Xg(t){return nF({timestamp:wF(t)})}function U0(t,e,n,r,i){t.dataUpdateCount++;let s=new J(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=go(n,u=>Re(u));o=JO(t.serverSyncTree_,s,c,i)}else{let c=Re(n);o=YO(t.serverSyncTree_,s,c,i)}else if(r){let c=go(n,u=>Re(u));o=GO(t.serverSyncTree_,s,c)}else{let c=Re(n);o=Bu(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=qu(t,s)),In(t.eventQueue_,a,o)}function j0(t,e){em(t,"connected",e),e===!1&&CF(t)}function IF(t,e){et(e,(n,r)=>{em(t,n,r)})}function em(t,e,n){let r=new J("/.info/"+e),i=Re(n);t.infoData_.updateSnapshot(r,i);let s=Bu(t.infoSyncTree_,r,i);In(t.eventQueue_,r,s)}function zC(t){return t.nextWriteId_++}function EF(t,e,n,r,i){tm(t,"set",{path:e.toString(),value:n,priority:r});let s=Xg(t),o=Re(n,r),a=zg(t.serverSyncTree_,e),c=FC(o,a,s),u=zC(t),l=PC(t.serverSyncTree_,e,c,u,!0);Zg(t.eventQueue_,l),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let g=h==="ok";g||Xe("set at "+e+" failed: "+h);let _=kr(t.serverSyncTree_,u,!g);In(t.eventQueue_,e,_),bF(t,i,h,f)});let d=YC(t,e);qu(t,d),In(t.eventQueue_,d,[])}function CF(t){tm(t,"onDisconnectEvents");let e=Xg(t),n=Du();ag(t.onDisconnect_,Q(),(i,s)=>{let o=sF(i,s,t.serverSyncTree_,e);_C(n,i,o)});let r=[];ag(n,Q(),(i,s)=>{r=r.concat(Bu(t.serverSyncTree_,i,s));let o=YC(t,i);qu(t,o)}),t.onDisconnect_=Du(),In(t.eventQueue_,Q(),r)}function TF(t,e,n){let r;O(e._path)===".info"?r=L0(t.infoSyncTree_,e,n):r=L0(t.serverSyncTree_,e,n),HC(t.eventQueue_,e._path,r)}function B0(t,e,n){let r;O(e._path)===".info"?r=Ig(t.infoSyncTree_,e,n):r=Ig(t.serverSyncTree_,e,n),HC(t.eventQueue_,e._path,r)}function DF(t){t.persistentConnection_&&t.persistentConnection_.interrupt(yF)}function tm(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Oe(n,...e)}function bF(t,e,n,r){e&&Yi(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function WC(t,e,n){return zg(t.serverSyncTree_,e,n)||x.EMPTY_NODE}function nm(t,e=t.transactionQueueTree_){if(e||zu(t,e),Ji(e)){let n=KC(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&SF(t,jo(e),n)}else VC(e)&&Hu(e,n=>{nm(t,n)})}function SF(t,e,n){let r=n.map(u=>u.currentWriteId),i=WC(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];m(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=Ze(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{tm(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(kr(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();zu(t,Yg(t.transactionQueueTree_,e)),nm(t,t.transactionQueueTree_),In(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)Yi(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Xe("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}qu(t,e)}},o)}function qu(t,e){let n=GC(t,e),r=jo(n),i=KC(t,n);return AF(t,i,r),r}function AF(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=Ze(n,c.path),l=!1,d;if(m(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(kr(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=_F)l=!0,d="maxretry",i=i.concat(kr(t.serverSyncTree_,c.currentWriteId,!0));else{let h=WC(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Jg("transaction failed: Data returned ",f,c.path);let g=Re(f);typeof f=="object"&&f!=null&&Wt(f,".priority")||(g=g.updatePriority(h.getPriority()));let P=c.currentWriteId,B=Xg(t),be=FC(g,h,B);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=be,c.currentWriteId=zC(t),o.splice(o.indexOf(P),1),i=i.concat(PC(t.serverSyncTree_,c.path,be,c.currentWriteId,c.applyLocally)),i=i.concat(kr(t.serverSyncTree_,P,!0))}else l=!0,d="nodata",i=i.concat(kr(t.serverSyncTree_,c.currentWriteId,!0))}In(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}zu(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Yi(r[a]);nm(t,t.transactionQueueTree_)}function GC(t,e){let n,r=t.transactionQueueTree_;for(n=O(e);n!==null&&Ji(r)===void 0;)r=Yg(r,n),e=te(e),n=O(e);return r}function KC(t,e){let n=[];return QC(t,e,n),n.sort((r,i)=>r.order-i.order),n}function QC(t,e,n){let r=Ji(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Hu(e,i=>{QC(t,i,n)})}function zu(t,e){let n=Ji(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,LC(e,n.length>0?n:void 0)}Hu(e,r=>{zu(t,r)})}function YC(t,e){let n=jo(GC(t,e)),r=Yg(t.transactionQueueTree_,e);return aF(r,i=>{Op(t,i)}),Op(t,r),UC(r,i=>{Op(t,i)}),n}function Op(t,e){let n=Ji(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(kr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?LC(e,void 0):n.length=s+1,In(t.eventQueue_,jo(e),i);for(let o=0;o<r.length;o++)Yi(r[o])}}function RF(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function xF(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xe(`Invalid query segment '${n}' in query '${t}'`)}return e}var $0=function(t,e){let n=NF(t),r=n.namespace;n.domain==="firebase.com"&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||dk();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new yu(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new J(n.pathString)}},NF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=RF(t.substring(l,d)));let h=xF(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Ou=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_e(this.snapshot.exportVal())}},Fu=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Sg=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Ag=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:uC(this._path)}get ref(){return new En(this._repo,this._path)}get _queryIdentifier(){let e=b0(this._queryParams),n=kg(e);return n==="{}"?"default":n}get _queryObject(){return b0(this._queryParams)}isEqual(e){if(e=Ye(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Fg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+qk(this._path)}};var En=class t extends Ag{constructor(e,n){super(e,n,new ig,!1)}get parent(){let e=dC(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Lu=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new J(e),r=Vu(this.ref,e);return new t(this._node.getChild(n),r,le)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Vu(this.ref,r),le)))}hasChild(e){let n=new J(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Wu(t,e){return t=Ye(t),t._checkNotDeleted("ref"),e!==void 0?Vu(t._root,e):t._root}function Vu(t,e){return t=Ye(t),O(t._path)===null?fF("child","path",e,!1):$C("child","path",e,!1),new En(t._repo,ve(t._path,e))}function JC(t,e){t=Ye(t),pF("set",t._path),hF("set",e,t._path,!1);let n=new zn;return EF(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var Rg=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Ou("value",this,new Lu(e.snapshotNode,new En(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Fu(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},xg=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Fu(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=Vu(new En(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Ou(e.type,this,new Lu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function PF(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,u=(l,d)=>{B0(t._repo,t,a),c(l,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}let o=new Sg(n,s||void 0),a=e==="value"?new Rg(o):new xg(e,o);return TF(t._repo,t,a),()=>B0(t._repo,t,a)}function rm(t,e,n,r){return PF(t,"value",e,n,r)}VO(En);qO(En);var MF="FIREBASE_DATABASE_EMULATOR_HOST",Ng={},kF=!1;function OF(t,e,n,r){t.repoInfo_=new yu(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function FF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Oe("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=$0(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[MF]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=$0(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new So(So.OWNER):new Bp(t.name,t.options,e);gF("Invalid Firebase Database URL",o),L(o.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");let d=VF(a,t,l,new jp(t.name,n));return new Pg(d,t)}function LF(t,e){let n=Ng[e];(!n||n[t.key]!==t)&&vn(`Database ${e}(${t.repoInfo_}) has already been deleted.`),DF(t),delete n[t.key]}function VF(t,e,n,r){let i=Ng[e.name];i||(i={},Ng[e.name]=i);let s=i[t.toURLString()];return s&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new bg(t,kF,n,r),i[t.toURLString()]=s,s}var Pg=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(vF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new En(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(LF(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vn("Cannot call "+e+" on a deleted database.")}};function Gu(t=Gn(),e){let n=Nr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=cu("database");r&&UF(n,...r)}return n}function UF(t,e,n,r={}){t=Ye(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new So(So.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:uu(r.mockUserToken,t.app.options.projectId);s=new So(o)}OF(i,e,n,s)}function jF(t){ck(Yt),Qt(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return FF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ue(u0,l0,t),ue(u0,l0,"esm2017")}Lg.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Lg.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};jF();var ZC=(()=>{let e=class e{constructor(){this.detailsSubject=new fe(null),this.details$=this.detailsSubject.asObservable(),this.app=wo(FE.firebase)}writeTittleData(r,i,s,o,a,c,u,l,d){let h=Gu(),f=Wu(h,"mangas/"+r);JC(f,{link:i,name:s,image:o,type:a,status:c,total_chapter:u,update_chapter:l,last_update:d})}readTittleData(r){return new $(i=>{let s=Gu(),o=Wu(s,"mangas/"+r),a=rm(o,c=>{let u=c.val();i.next(u)});return{unsubscribe(){a()}}})}readAddTittlesData(){let r,i=Gu(),s=Wu(i,"mangas");return rm(s,o=>{r=o.val(),console.log(r)}),r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=E({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $F(t,e){if(t&1&&ae(0,"img",10),t&2){let n=e.ngIf;Ci("src","/assets/test-list/",n.image,"",vr)}}function HF(t,e){if(t&1&&(A(0,"div",11)(1,"span",12),ce(2),V(),A(3,"span",13),ce(4),V(),A(5,"span",14),ce(6),V()()),t&2){let n=e.ngIf;pe(2),pt(n.type),pe(2),pt(n.last_chapter),pe(2),pt(n.status)}}function qF(t,e){if(t&1&&(A(0,"h3",15),ce(1),V()),t&2){let n=e.ngIf;pe(),pt(n.name)}}var XC=(()=>{let e=class e{constructor(r,i){this.route=r,this.titleService=i,this.details$=Ue,this.nameTitle=""}ngOnInit(){this.details$=this.route.paramMap.pipe(ze(r=>{let i=r.get("name");return this.titleService.readTittleData(this.nameTitle)}))}};e.\u0275fac=function(i){return new(i||e)(oe(mn),oe(ZC))},e.\u0275cmp=Ke({type:e,selectors:[["bido-title"]],standalone:!0,features:[Qe],decls:14,vars:9,consts:[[1,"background_preview"],[1,"blured"],[1,"container"],[1,"intro"],[1,"cover"],["alt","2",3,"src",4,"ngIf"],["class","tags",4,"ngIf"],[1,"info"],["class","info_name",4,"ngIf"],[1,"info_descr"],["alt","2",3,"src"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"tag"],[1,"info_name"]],template:function(i,s){i&1&&(A(0,"div",0),ae(1,"div",1),A(2,"div",2)(3,"div",3)(4,"div",4),gn(5,$F,1,2,"img",5),kc(6,"async"),V(),gn(7,HF,7,3,"div",6),kc(8,"async"),V(),A(9,"div",7),gn(10,qF,2,1,"h3",8),kc(11,"async"),A(12,"div",9),ce(13,"\u041B\u044E\u0434\u0438 \u043D\u0435 \u043D\u0430\u0440\u043E\u0434\u0436\u0443\u044E\u0442\u044C\u0441\u044F \u0440\u0456\u0432\u043D\u0438\u043C\u0438. \u0406\u0437\u0443\u043A\u0443 \u041C\u0456\u0434\u043E\u0440\u0456\u044F \u0443\u0441\u0432\u0456\u0434\u043E\u043C\u0438\u0432 \u0446\u0435 \u0449\u0435 \u0443 \u0447\u043E\u0442\u0438\u0440\u044C\u043E\u0445\u0440\u0456\u0447\u043D\u043E\u043C\u0443 \u0432\u0456\u0446\u0456. \u0422\u0430 \u0446\u0435 \u043D\u0435 \u0437\u0430\u0432\u0430\u0434\u0438\u0442\u044C \u0439\u043E\u043C\u0443 \u0437\u0434\u0456\u0439\u0441\u043D\u0438\u0442\u0438 \u0441\u0432\u043E\u044E \u043C\u0440\u0456\u044E \u2014 \u0441\u0442\u0430\u0442\u0438 \u0432\u0435\u043B\u0438\u043A\u0438\u043C \u0433\u0435\u0440\u043E\u0454\u043C, \u044F\u043A \u043B\u0435\u0433\u0435\u043D\u0434\u0430\u0440\u043D\u0438\u0439 \u0412\u0441\u0435\u043C\u043E\u0433\u0443\u0442\u043D\u0456\u0439. "),V()()()()),i&2&&(pe(5),$t("ngIf",Oc(6,3,s.details$)),pe(2),$t("ngIf",Oc(8,5,s.details$)),pe(3),$t("ngIf",Oc(11,7,s.details$)))},dependencies:[jI,BI],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:5px}.background_preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:var(--background);background:var(--primary);margin:15px 0;padding:7px 19px;border-radius:5px;box-shadow:0 0 80px -5px var(--primary);font-family:UZSansB;font-weight:400}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.items[_ngcontent-%COMP%]{display:grid;gap:36px 15px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr))}.item[_ngcontent-%COMP%]{background:#edf5f808;border-radius:10px;position:relative;padding-bottom:40px}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:0;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:100%;font-size:14px;color:gray;font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:gray;margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed gray 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{text-wrap:nowrap;white-space:nowrap}"]});let t=e;return t})();var eT=[{path:"",component:PE},{path:"chapter/:name",component:OE},{path:"title/:name",component:XC}];var jr=new Ln("ANGULARFIRE2_VERSION");function Qu(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Bo=(t,e)=>{let n=e?[e]:pu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Xi=class{constructor(){return Bo(zF)}},zF="app-check";function Zi(){}var Ku=class{zone;delegate;constructor(e,n=hd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},im=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zi,{},Zi,Zi)),n.pipe(ye({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},es=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ku(Zone.current)),this.insideAngular=n.run(()=>new Ku(Zone.current,dd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(k(X))};static \u0275prov=E({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Yu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function WF(t){return Yu().ngZone.runOutsideAngular(()=>t())}function Ur(t){return Yu().ngZone.run(()=>t())}function GF(t){return KF(Yu())(t)}function KF(t){return function(n){return n=n.lift(new im(t.ngZone)),n.pipe(Nn(t.outsideAngular),xn(t.insideAngular))}}var QF=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ur(()=>t.apply(void 0,r))},ts=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ur(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zi,{},Zi,Zi))),r[s]=QF(r[s],n));let i=WF(()=>t.apply(this,r));if(!e)if(i instanceof $){let s=Yu();return i.pipe(Nn(s.outsideAngular),xn(s.insideAngular))}else return Ur(()=>i);return i instanceof $?i.pipe(GF):i instanceof Promise?Ur(()=>new Promise((s,o)=>i.then(a=>Ur(()=>s(a)),a=>Ur(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ur(()=>i)};var Cn=class{constructor(e){return e}},Br=class{constructor(){return pu()}};function YF(t){return t&&t.length===1?t[0]:new Cn(Gn())}var sm=new N("angularfire2._apps"),JF={provide:Cn,useFactory:YF,deps:[[new je,sm]]},ZF={provide:Br,deps:[[new je,sm]]};function XF(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Cn(r)}}var eL=(()=>{class t{constructor(n){ue("angularfire",jr.full,"core"),ue("angularfire",jr.full,"app"),ue("angular",TI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(k(Un))};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[JF,ZF]})}return t})();function tT(t,...e){return{ngModule:eL,providers:[{provide:sm,useFactory:XF(t),multi:!0,deps:[X,St,es,...e]}]}}var nT=ts(wo,!0);function yT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var _T=yT,vT=new yn("auth","Firebase",yT());var nl=new Gt("@firebase/auth");function tL(t,...e){nl.logLevel<=K.WARN&&nl.warn(`Auth (${Yt}): ${t}`,...e)}function Zu(t,...e){nl.logLevel<=K.ERROR&&nl.error(`Auth (${Yt}): ${t}`,...e)}function Zn(t,...e){throw Dm(t,...e)}function Hr(t,...e){return Dm(t,...e)}function wT(t,e,n){let r=Object.assign(Object.assign({},_T()),{[e]:n});return new yn("auth","Firebase",r).create(e,{appName:t.name})}function $r(t){return wT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return vT.create(t,...e)}function T(t,e,...n){if(!t)throw Dm(e,...n)}function Tn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Zu(e),new Error(e)}function Xn(t,e){t||Tn(e)}function um(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function nL(){return rT()==="http:"||rT()==="https:"}function rT(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function rL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nL()||BE()||"connection"in navigator)?navigator.onLine:!0}function iL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var qr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=fo()||lu()}get(){return rL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function bm(t,e){Xn(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var rl=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oL=new qr(3e4,6e4);function Sm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function rs(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return IT(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Ar(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),rl.fetch()(ET(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function IT(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},sL),e);try{let i=new lm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ju(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ju(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ju(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw wT(t,l,u);Zn(t,l)}}catch(i){if(i instanceof ot)throw i;Zn(t,"network-request-failed",{message:String(i)})}})}function aL(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let u=yield rs(t,e,n,r,i);return"mfaPendingCredential"in u&&Zn(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function ET(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?bm(t.config,i):`${t.config.apiScheme}://${i}`}var lm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),oL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ju(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Hr(t,e,r);return i.customData._tokenResponse=n,i}function cL(t,e){return p(this,null,function*(){return rs(t,"POST","/v1/accounts:delete",e)})}function CT(t,e){return p(this,null,function*(){return rs(t,"POST","/v1/accounts:lookup",e)})}function $o(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Am(t,e=!1){return p(this,null,function*(){let n=Ye(t),r=yield n.getIdToken(e),i=Rm(r);T(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:$o(om(i.auth_time)),issuedAtTime:$o(om(i.iat)),expirationTime:$o(om(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function om(t){return Number(t)*1e3}function Rm(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Zu("JWT malformed, contained fewer than 3 sections"),null;try{let i=ho(n);return i?JSON.parse(i):(Zu("Failed to decode base64 JWT payload"),null)}catch(i){return Zu("Caught error parsing JWT payload as JSON",i?.toString()),null}}function iT(t){let e=Rm(t);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function qo(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof ot&&uL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function uL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var dm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var zo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function il(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield qo(t,CT(n,{idToken:r}));T(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?TT(s.providerUserInfo):[],a=lL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new zo(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function xm(t){return p(this,null,function*(){let e=Ye(t);yield il(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function TT(t){return t.map(e=>{var{providerId:n}=e,r=fd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dL(t,e){return p(this,null,function*(){let n=yield IT(t,{},()=>p(this,null,function*(){let r=Ar({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=ET(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rl.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function hL(t,e){return p(this,null,function*(){return rs(t,"POST","/v2/accounts:revokeToken",Sm(t,e))})}var Ho=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){T(e.length!==0,"internal-error");let n=iT(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(T(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(T(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(T(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Tn("not implemented")}};function Jn(t,e){T(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var ns=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=fd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new dm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new zo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield qo(this,this.stsTokenManager.getToken(this.auth,e));return T(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Am(this,e)}reload(){return xm(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield il(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(_n(this.auth.app))return Promise.reject($r(this.auth));let e=yield this.getIdToken();return yield qo(this,cL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,B=(u=n.createdAt)!==null&&u!==void 0?u:void 0,be=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:ie,emailVerified:He,isAnonymous:sn,providerData:Ve,stsTokenManager:on}=n;T(ie&&on,e,"internal-error");let ps=Ho.fromJSON(this.name,on);T(typeof ie=="string",e,"internal-error"),Jn(d,e.name),Jn(h,e.name),T(typeof He=="boolean",e,"internal-error"),T(typeof sn=="boolean",e,"internal-error"),Jn(f,e.name),Jn(g,e.name),Jn(_,e.name),Jn(P,e.name),Jn(B,e.name),Jn(be,e.name);let gs=new t({uid:ie,auth:e,email:h,emailVerified:He,displayName:d,isAnonymous:sn,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:ps,createdAt:B,lastLoginAt:be});return Ve&&Array.isArray(Ve)&&(gs.providerData=Ve.map(Yl=>Object.assign({},Yl))),P&&(gs._redirectEventId=P),gs}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Ho;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield il(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];T(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?TT(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ho;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new zo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var sT=new Map;function Dn(t){Xn(t instanceof Function,"Expected a class definition");let e=sT.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sT.set(t,e),e)}var fL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),hm=fL;function Xu(t,e,n){return`firebase:${t}:${e}:${n}`}var sl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Xu(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ns._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Dn(hm),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Dn(hm),o=Xu(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=ns._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function oT(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ST(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(DT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(RT(e))return"Blackberry";if(xT(e))return"Webos";if(Nm(e))return"Safari";if((e.includes("chrome/")||bT(e))&&!e.includes("edge/"))return"Chrome";if(AT(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function DT(t=Ee()){return/firefox\//i.test(t)}function Nm(t=Ee()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bT(t=Ee()){return/crios\//i.test(t)}function ST(t=Ee()){return/iemobile/i.test(t)}function AT(t=Ee()){return/android/i.test(t)}function RT(t=Ee()){return/blackberry/i.test(t)}function xT(t=Ee()){return/webos/i.test(t)}function fl(t=Ee()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function pL(t=Ee()){var e;return fl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gL(){return $E()&&document.documentMode===10}function NT(t=Ee()){return fl(t)||AT(t)||xT(t)||RT(t)||/windows phone/i.test(t)||ST(t)}function mL(){try{return!!(window&&window!==window.top)}catch{return!1}}function PT(t,e=[]){let n;switch(t){case"Browser":n=oT(Ee());break;case"Worker":n=`${oT(Ee())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yt}/${r}`}var fm=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function yL(n){return p(this,arguments,function*(t,e={}){return rs(t,"GET","/v2/passwordPolicy",Sm(t,e))})}var _L=6,pm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_L,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var gm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ol(this),this.idTokenSubscription=new ol(this),this.beforeStateQueue=new fm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Dn(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield sl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield CT(this,{idToken:e}),r=yield ns._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(_n(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield il(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=iL()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(_n(this.app))return Promise.reject($r(this));let n=e?Ye(e):null;return n&&T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return _n(this.app)?Promise.reject($r(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _n(this.app)?Promise.reject($r(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Dn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield yL(this),n=new pm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new yn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield hL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Dn(e)||this._popupRedirectResolver;T(n,this,"argument-error"),this.redirectPersistenceManager=yield sl.create(this,[Dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&tL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Pm(t){return Ye(t)}var ol=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=GE(n=>this.observer=n)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Mm={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function vL(t){Mm=t}function wL(t){return Mm.loadJS(t)}function IL(){return Mm.gapiScript}function MT(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function km(t,e){let n=Nr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Sr(s,e??{}))return i;Zn(i,"already-initialized")}return n.initialize({options:e})}function EL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Dn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Om(t,e,n){let r=Pm(t);T(r._canInitEmulator,r,"emulator-config-failed"),T(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=kT(e),{host:o,port:a}=CL(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||TL()}function kT(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CL(t){let e=kT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:aT(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:aT(o)}}}function aT(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function TL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var al=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tn("not implemented")}_getIdTokenResponse(e){return Tn("not implemented")}_linkToIdToken(e,n){return Tn("not implemented")}_getReauthenticationResolver(e){return Tn("not implemented")}};function am(t,e){return p(this,null,function*(){return aL(t,"POST","/v1/accounts:signInWithIdp",Sm(t,e))})}var cl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var mm=class extends cl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Wo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield ns._fromIdTokenResponse(e,r,i),o=cT(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=cT(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function cT(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var ym=class t extends ot{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function OT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ym._fromErrorAndOperation(t,s,e,r):s})}function DL(t,e,n=!1){return p(this,null,function*(){let r=yield qo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Wo._forOperation(t,"link",r)})}function bL(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(_n(r.app))return Promise.reject($r(r));let i="reauthenticate";try{let s=yield qo(t,OT(r,i,e,t),n);T(s.idToken,r,"internal-error");let o=Rm(s.idToken);T(o,r,"internal-error");let{sub:a}=o;return T(t.uid===a,r,"user-mismatch"),Wo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zn(r,"user-mismatch"),s}})}function SL(t,e,n=!1){return p(this,null,function*(){if(_n(t.app))return Promise.reject($r(t));let r="signIn",i=yield OT(t,r,e),s=yield Wo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Fm(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function Lm(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}var ul="__sak";var ll=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ul,"1"),this.storage.removeItem(ul),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function AL(){let t=Ee();return Nm(t)||fl(t)}var RL=1e3,xL=10,NL=(()=>{class t extends ll{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=AL()&&mL(),this.fallbackToPolling=NT(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,xL):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},RL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield An(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield An(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield An(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),FT=NL;var PL=(()=>{class t extends ll{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Vm=PL;function ML(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var kL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>p(this,null,function*(){return l(r.origin,o)})),u=yield ML(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function LT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var _m=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=LT("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Zt(){return window}function OL(t){Zt().location.href=t}function VT(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}function FL(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function LL(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function VL(){return VT()?self:null}var UT="firebaseLocalStorageDb",UL=1,dl="firebaseLocalStorage",jT="fbase_key",zr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function pl(t,e){return t.transaction([dl],e?"readwrite":"readonly").objectStore(dl)}function jL(){let t=indexedDB.deleteDatabase(UT);return new zr(t).toPromise()}function vm(){let t=indexedDB.open(UT,UL);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(dl,{keyPath:jT})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(dl)?e(r):(r.close(),yield jL(),e(yield vm()))}))})}function uT(t,e,n){return p(this,null,function*(){let r=pl(t,!0).put({[jT]:e,value:n});return new zr(r).toPromise()})}function BL(t,e){return p(this,null,function*(){let n=pl(t,!1).get(e),r=yield new zr(n).toPromise();return r===void 0?null:r.value})}function lT(t,e){let n=pl(t,!0).delete(e);return new zr(n).toPromise()}var $L=800,HL=3,qL=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield vm(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>HL)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return VT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=kL._getInstance(VL()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield FL(),!this.activeServiceWorker)return;this.sender=new _m(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||LL()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield vm();return yield uT(n,ul,"1"),yield lT(n,ul),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>uT(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>BL(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>lT(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=pl(s,!1).getAll();return new zr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),$L)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),BT=qL;var d5=MT("rcb"),h5=new qr(3e4,6e4);function zL(t,e){return e?Dn(e):(T(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Go=class extends al{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return am(e,this._buildIdpRequest())}_linkToIdToken(e,n){return am(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return am(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function WL(t){return SL(t.auth,new Go(t),t.bypassAuthState)}function GL(t){let{auth:e,user:n}=t;return T(n,e,"internal-error"),bL(n,new Go(t),t.bypassAuthState)}function KL(t){return p(this,null,function*(){let{auth:e,user:n}=t;return T(n,e,"internal-error"),DL(n,new Go(t),t.bypassAuthState)})}var wm=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WL;case"linkViaPopup":case"linkViaRedirect":return KL;case"reauthViaPopup":case"reauthViaRedirect":return GL;default:Zn(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var f5=new qr(2e3,1e4);var QL="pendingRedirect",el=new Map,Im=class t extends wm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=el.get(this.auth._key());if(!e){try{let r=(yield YL(this.resolver,this.auth))?yield An(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}el.set(this.auth._key(),e)}return this.bypassAuthState||el.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return An(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,An(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function YL(t,e){return p(this,null,function*(){let n=XL(e),r=ZL(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function JL(t,e){el.set(t._key(),e)}function ZL(t){return Dn(t._redirectPersistence)}function XL(t){return Xu(QL,t.config.apiKey,t.name)}function eV(t,e,n=!1){return p(this,null,function*(){if(_n(t.app))return Promise.reject($r(t));let r=Pm(t),i=zL(r,e),o=yield new Im(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var tV=10*60*1e3,Em=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$T(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Hr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tV&&this.cachedEventUids.clear(),this.cachedEventUids.has(dT(e))}saveEventToCache(e){this.cachedEventUids.add(dT(e)),this.lastProcessedEventTime=Date.now()}};function dT(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $T({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function nV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $T(t);default:return!1}}function rV(n){return p(this,arguments,function*(t,e={}){return rs(t,"GET","/v1/projects",e)})}var iV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sV=/^https?/;function oV(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield rV(t);for(let n of e)try{if(aV(n))return}catch{}Zn(t,"unauthorized-domain")})}function aV(t){let e=um(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!sV.test(n))return!1;if(iV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cV=new qr(3e4,6e4);function hT(){let t=Zt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function uV(t){return new Promise((e,n)=>{var r,i,s;function o(){hT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hT(),n(Hr(t,"network-request-failed"))},timeout:cV.get()})}if(!((i=(r=Zt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zt().gapi)===null||s===void 0)&&s.load)o();else{let a=MT("iframefcb");return Zt()[a]=()=>{gapi.load?o():n(Hr(t,"network-request-failed"))},wL(`${IL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw tl=null,e})}var tl=null;function lV(t){return tl=tl||uV(t),tl}var dV=new qr(5e3,15e3),hV="__/auth/iframe",fV="emulator/auth/iframe",pV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mV(t){let e=t.config;T(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?bm(e,fV):`https://${t.config.authDomain}/${hV}`,r={apiKey:e.apiKey,appName:t.name,v:Yt},i=gV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Ar(r).slice(1)}`}function yV(t){return p(this,null,function*(){let e=yield lV(t),n=Zt().gapi;return T(n,t,"internal-error"),e.open({where:document.body,url:mV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pV,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Hr(t,"network-request-failed"),a=Zt().setTimeout(()=>{s(o)},dV.get());function c(){Zt().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var _V={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vV=500,wV=600,IV="_blank",EV="http://localhost",hl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function CV(t,e,n,r=vV,i=wV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},_V),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ee().toLowerCase();n&&(a=bT(u)?IV:n),DT(u)&&(e=e||EV,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(pL(u)&&a!=="_self")return TV(e||"",a),new hl(null);let d=window.open(e||"",a,l);T(d,t,"popup-blocked");try{d.focus()}catch{}return new hl(d)}function TV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var DV="__/auth/handler",bV="emulator/auth/handler",SV=encodeURIComponent("fac");function fT(t,e,n,r,i,s){return p(this,null,function*(){T(t.config.authDomain,t,"auth-domain-config-required"),T(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yt,eventId:i};if(e instanceof cl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",po(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof mm){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${SV}=${encodeURIComponent(c)}`:"";return`${AV(t)}?${Ar(a).slice(1)}${u}`})}function AV({config:t}){return t.emulator?bm(t,bV):`https://${t.authDomain}/${DV}`}var cm="webStorageSupport",Cm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vm,this._completeRedirectFn=eV,this._overrideRedirectResult=JL}_openPopup(e,n,r,i){return p(this,null,function*(){var s;Xn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield fT(e,n,r,um(),i);return CV(e,o,LT())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield fT(e,n,r,um(),i);return OL(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield yV(e),r=new Em(e);return n.register("authEvent",i=>(T(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(cm,{type:cm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[cm];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=oV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return NT()||Nm()||fl()}},HT=Cm;var pT="@firebase/auth",gT="1.7.1";var Tm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function RV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xV(t){Qt(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;T(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PT(t)},u=new gm(r,i,s,c);return EL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qt(new Je("auth-internal",e=>{let n=Pm(e.getProvider("auth").getImmediate());return(r=>new Tm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ue(pT,gT,RV(t)),ue(pT,gT,"esm2017")}var NV=5*60,PV=pp("authIdTokenMaxAge")||NV,mT=null,MV=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>PV)return;let i=n?.token;mT!==i&&(mT=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Um(t=Gn()){let e=Nr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=km(t,{popupRedirectResolver:HT,persistence:[BT,FT,Vm]}),r=pp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=MV(s.toString());Lm(n,o,()=>o(n.currentUser)),Fm(n,a=>o(a))}}let i=hp("auth");return i&&Om(n,`http://${i}`),n}function kV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}vL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Hr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xV("Browser");var qT="auth",Ko=class{constructor(e){return e}},Qo=class{constructor(){return Bo(qT)}};var jm=new N("angularfire2.auth-instances");function A2(t,e){let n=Qu(qT,t,e);return n&&new Ko(n)}function R2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ko(r)}}var x2={provide:Qo,deps:[[new je,jm]]},N2={provide:Ko,useFactory:A2,deps:[[new je,jm],Cn]},P2=(()=>{class t{constructor(){ue("angularfire",jr.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[N2,x2]})}return t})();function zT(t,...e){return{ngModule:P2,providers:[{provide:jm,useFactory:R2(t),multi:!0,deps:[X,St,es,Br,[new je,Xi],...e]}]}}var WT=ts(Um,!0);var M2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pt={},y,cy=cy||{},D=M2||self;function Al(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function ua(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function k2(t){return Object.prototype.hasOwnProperty.call(t,Bm)&&t[Bm]||(t[Bm]=++O2)}var Bm="closure_uid_"+(1e9*Math.random()>>>0),O2=0;function F2(t,e,n){return t.call.apply(t.bind,arguments)}function L2(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Fe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Fe=F2:Fe=L2,Fe.apply(null,arguments)}function gl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Te(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function er(){this.s=this.s,this.o=this.o}var V2=0;er.prototype.s=!1;er.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),V2!=0)&&k2(this)};er.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var sD=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function uy(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function GT(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Al(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Le(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Le.prototype.h=function(){this.defaultPrevented=!0};var U2=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};D.addEventListener("test",n,e),D.removeEventListener("test",n,e)}catch{}return t}();function ta(t){return/^[\s\xa0]*$/.test(t)}function Rl(){var t=D.navigator;return t&&(t=t.userAgent)?t:""}function Xt(t){return Rl().indexOf(t)!=-1}function ly(t){return ly[" "](t),t}ly[" "]=function(){};function j2(t,e){var n=AU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var B2=Xt("Opera"),as=Xt("Trident")||Xt("MSIE"),oD=Xt("Edge"),Wm=oD||as,aD=Xt("Gecko")&&!(Rl().toLowerCase().indexOf("webkit")!=-1&&!Xt("Edge"))&&!(Xt("Trident")||Xt("MSIE"))&&!Xt("Edge"),$2=Rl().toLowerCase().indexOf("webkit")!=-1&&!Xt("Edge");function cD(){var t=D.document;return t?t.documentMode:void 0}var Gm;e:{if(ml="",yl=function(){var t=Rl();if(aD)return/rv:([^\);]+)(\)|;)/.exec(t);if(oD)return/Edge\/([\d\.]+)/.exec(t);if(as)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if($2)return/WebKit\/(\S+)/.exec(t);if(B2)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),yl&&(ml=yl?yl[1]:""),as&&(_l=cD(),_l!=null&&_l>parseFloat(ml))){Gm=String(_l);break e}Gm=ml}var ml,yl,_l,Km;D.document&&as?($m=cD(),Km=$m||parseInt(Gm,10)||void 0):Km=void 0;var $m,H2=Km;function na(t,e){if(Le.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(aD){e:{try{ly(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:q2[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&na.$.h.call(this)}}Te(na,Le);var q2={2:"touch",3:"pen",4:"mouse"};na.prototype.h=function(){na.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var la="closure_listenable_"+(1e6*Math.random()|0),z2=0;function W2(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++z2,this.fa=this.ia=!1}function xl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function dy(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function G2(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function uD(t){let e={};for(let n in t)e[n]=t[n];return e}var KT="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lD(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<KT.length;s++)n=KT[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Nl(t){this.src=t,this.g={},this.h=0}Nl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Ym(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new W2(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Qm(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=sD(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(xl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Ym(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var hy="closure_lm_"+(1e6*Math.random()|0),Hm={};function dD(t,e,n,r,i){if(r&&r.once)return fD(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)dD(t,e[s],n,r,i);return null}return n=gy(n),t&&t[la]?t.O(e,n,ua(r)?!!r.capture:!!r,i):hD(t,e,n,!1,r,i)}function hD(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=ua(i)?!!i.capture:!!i,a=py(t);if(a||(t[hy]=a=new Nl(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=K2(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)U2||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gD(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function K2(){function t(n){return e.call(t.src,t.listener,n)}let e=Q2;return t}function fD(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)fD(t,e[s],n,r,i);return null}return n=gy(n),t&&t[la]?t.P(e,n,ua(r)?!!r.capture:!!r,i):hD(t,e,n,!0,r,i)}function pD(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pD(t,e[s],n,r,i);else r=ua(r)?!!r.capture:!!r,n=gy(n),t&&t[la]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Ym(s,n,r,i),-1<n&&(xl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=py(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ym(e,n,r,i)),(n=-1<t?e[t]:null)&&fy(n))}function fy(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[la])Qm(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gD(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=py(e))?(Qm(n,t),n.h==0&&(n.src=null,e[hy]=null)):xl(t)}}}function gD(t){return t in Hm?Hm[t]:Hm[t]="on"+t}function Q2(t,e){if(t.fa)t=!0;else{e=new na(e,this);var n=t.listener,r=t.la||t.src;t.ia&&fy(t),t=n.call(r,e)}return t}function py(t){return t=t[hy],t instanceof Nl?t:null}var qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function gy(t){return typeof t=="function"?t:(t[qm]||(t[qm]=function(e){return t.handleEvent(e)}),t[qm])}function Ce(){er.call(this),this.i=new Nl(this),this.S=this,this.J=null}Te(Ce,er);Ce.prototype[la]=!0;Ce.prototype.removeEventListener=function(t,e,n,r){pD(this,t,e,n,r)};function Ne(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Le(e,t);else if(e instanceof Le)e.target=e.target||t;else{var i=e;e=new Le(r,t),lD(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=vl(o,r,!0,e)&&i}if(o=e.g=t,i=vl(o,r,!0,e)&&i,i=vl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=vl(o,r,!1,e)&&i}Ce.prototype.N=function(){if(Ce.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)xl(n[r]);delete t.g[e],t.h--}}this.J=null};Ce.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ce.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function vl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Qm(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var my=D.JSON.stringify,Jm=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Y2(){var t=yy;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Zm=class{constructor(){this.h=this.g=null}add(e,n){let r=mD.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},mD=new Jm(()=>new Xm,t=>t.reset()),Xm=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function J2(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Z2(t){D.setTimeout(()=>{throw t},0)}var ra,ia=!1,yy=new Zm,yD=()=>{let t=D.Promise.resolve(void 0);ra=()=>{t.then(X2)}},X2=()=>{for(var t;t=Y2();){try{t.h.call(t.g)}catch(n){Z2(n)}var e=mD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ia=!1};function Pl(t,e){Ce.call(this),this.h=t||1,this.g=e||D,this.j=Fe(this.qb,this),this.l=Date.now()}Te(Pl,Ce);y=Pl.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ne(this,"tick"),this.ga&&(_y(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function _y(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){Pl.$.N.call(this),_y(this),delete this.g};function vy(t,e,n){if(typeof t=="function")n&&(t=Fe(t,n));else if(t&&typeof t.handleEvent=="function")t=Fe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}function _D(t){t.g=vy(()=>{t.g=null,t.i&&(t.i=!1,_D(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var ey=class extends er{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:_D(this)}N(){super.N(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function sa(t){er.call(this),this.h=t,this.g={}}Te(sa,er);var QT=[];function vD(t,e,n,r){Array.isArray(n)||(n&&(QT[0]=n.toString()),n=QT);for(var i=0;i<n.length;i++){var s=dD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function wD(t){dy(t.g,function(e,n){this.g.hasOwnProperty(n)&&fy(e)},t),t.g={}}sa.prototype.N=function(){sa.$.N.call(this),wD(this)};sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ml(){this.g=!0}Ml.prototype.Ea=function(){this.g=!1};function eU(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function tU(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ss(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+rU(t,n)+(r?" "+r:"")})}function nU(t,e){t.info(function(){return"TIMEOUT: "+e})}Ml.prototype.info=function(){};function rU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return my(n)}catch{return e}}var Qr={},YT=null;function kl(){return YT=YT||new Ce}Qr.Ta="serverreachability";function ID(t){Le.call(this,Qr.Ta,t)}Te(ID,Le);function oa(t){let e=kl();Ne(e,new ID(e))}Qr.STAT_EVENT="statevent";function ED(t,e){Le.call(this,Qr.STAT_EVENT,t),this.stat=e}Te(ED,Le);function $e(t){let e=kl();Ne(e,new ED(e,t))}Qr.Ua="timingevent";function CD(t,e){Le.call(this,Qr.Ua,t),this.size=e}Te(CD,Le);function da(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){t()},e)}var Ol={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},TD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function wy(){}wy.prototype.h=null;function JT(t){return t.h||(t.h=t.i())}function DD(){}var ha={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Iy(){Le.call(this,"d")}Te(Iy,Le);function Ey(){Le.call(this,"c")}Te(Ey,Le);var ty;function Fl(){}Te(Fl,wy);Fl.prototype.g=function(){return new XMLHttpRequest};Fl.prototype.i=function(){return{}};ty=new Fl;function fa(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new sa(this),this.P=iU,t=Wm?125:void 0,this.V=new Pl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new bD}function bD(){this.i=null,this.g="",this.h=!1}var iU=45e3,SD={},ny={};y=fa.prototype;y.setTimeout=function(t){this.P=t};function ry(t,e,n){t.L=1,t.A=Vl(Sn(e)),t.u=n,t.S=!0,AD(t,null)}function AD(t,e){t.G=Date.now(),pa(t),t.B=Sn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),FD(n.i,"t",r),t.o=0,n=t.l.J,t.h=new bD,t.g=rb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new ey(Fe(t.Pa,t,t.g),t.O)),vD(t.U,t.g,"readystatechange",t.nb),e=t.I?uD(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),oa(),eU(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&en(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=en(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Wm||this.g&&(this.h.h||this.g.ja()||tD(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?oa(3):oa(2)),Ll(this);var n=this.g.da();this.ca=n;t:if(RD(this)){var r=tD(this.g);t="";var i=r.length,s=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),ea(this);var o="";break t}this.h.i=new D.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,tU(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ta(a)){var u=a;break t}}u=null}if(n=u)ss(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iy(this,n);else{this.i=!1,this.s=3,$e(12),Wr(this),ea(this);break e}}this.S?(xD(this,l,o),Wm&&this.i&&l==3&&(vD(this.U,this.V,"tick",this.mb),this.V.start())):(ss(this.j,this.m,o,null),iy(this,o)),l==4&&Wr(this),this.i&&!this.J&&(l==4?XD(this.l,this):(this.i=!1,pa(this)))}else DU(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,$e(12)):(this.s=0,$e(13)),Wr(this),ea(this)}}}catch{}finally{}};function RD(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function xD(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=sU(t,n),i==ny){e==4&&(t.s=4,$e(14),r=!1),ss(t.j,t.m,null,"[Incomplete Response]");break}else if(i==SD){t.s=4,$e(15),ss(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ss(t.j,t.m,i,null),iy(t,i);RD(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,$e(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ay(e),e.M=!0,$e(11))):(ss(t.j,t.m,n,"[Invalid Chunked Response]"),Wr(t),ea(t))}y.mb=function(){if(this.g){var t=en(this.g),e=this.g.ja();this.o<e.length&&(Ll(this),xD(this,t,e),this.i&&t!=4&&pa(this))}};function sU(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ny:(n=Number(e.substring(n,r)),isNaN(n)?SD:(r+=1,r+n>e.length?ny:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,Wr(this)};function pa(t){t.Y=Date.now()+t.P,ND(t,t.P)}function ND(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=da(Fe(t.lb,t),e)}function Ll(t){t.C&&(D.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(nU(this.j,this.B),this.L!=2&&(oa(),$e(17)),Wr(this),this.s=2,ea(this)):ND(this,this.Y-t)};function ea(t){t.l.H==0||t.J||XD(t.l,t)}function Wr(t){Ll(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,_y(t.V),wD(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function iy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||sy(n.i,t))){if(!t.K&&sy(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Tl(n),Bl(n);else break e;Sy(n),$e(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=da(Fe(n.ib,n),6e3));if(1>=UD(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Gr(n,11)}else if((t.K||n.g==t)&&Tl(n),!ta(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Cy(s,s.h),s.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,re(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=nb(r,r.J?r.pa:null,r.Y),o.K){jD(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Ll(a),pa(a)),r.g=o}else JD(r);0<n.j.length&&$l(n)}else u[0]!="stop"&&u[0]!="close"||Gr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Gr(n,7):by(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}oa(4)}catch{}}function oU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Al(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function aU(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Al(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function PD(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Al(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=aU(t),r=oU(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var MD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Kr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Kr){this.h=t.h,El(this,t.j),this.s=t.s,this.g=t.g,Cl(this,t.m),this.l=t.l;var e=t.i,n=new aa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),ZT(this,n),this.o=t.o}else t&&(e=String(t).match(MD))?(this.h=!1,El(this,e[1]||"",!0),this.s=Zo(e[2]||""),this.g=Zo(e[3]||"",!0),Cl(this,e[4]),this.l=Zo(e[5]||"",!0),ZT(this,e[6]||"",!0),this.o=Zo(e[7]||"")):(this.h=!1,this.i=new aa(null,this.h))}Kr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Xo(e,XT,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Xo(e,XT,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Xo(n,n.charAt(0)=="/"?dU:lU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Xo(n,fU)),t.join("")};function Sn(t){return new Kr(t)}function El(t,e,n){t.j=n?Zo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Cl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function ZT(t,e,n){e instanceof aa?(t.i=e,pU(t.i,t.h)):(n||(e=Xo(e,hU)),t.i=new aa(e,t.h))}function re(t,e,n){t.i.set(e,n)}function Vl(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Zo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Xo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,uU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function uU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var XT=/[#\/\?@]/g,lU=/[#\?:]/g,dU=/[#\?]/g,hU=/[#\?@]/g,fU=/#/g;function aa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tr(t){t.g||(t.g=new Map,t.h=0,t.i&&cU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=aa.prototype;y.add=function(t,e){tr(this),this.i=null,t=cs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function kD(t,e){tr(t),e=cs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function OD(t,e){return tr(t),e=cs(t,e),t.g.has(e)}y.forEach=function(t,e){tr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){tr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){tr(this);let e=[];if(typeof t=="string")OD(this,t)&&(e=e.concat(this.g.get(cs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return tr(this),this.i=null,t=cs(this,t),OD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function FD(t,e,n){kD(t,e),0<n.length&&(t.i=null,t.g.set(cs(t,e),uy(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function cs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function pU(t,e){e&&!t.j&&(tr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(kD(this,r),FD(this,i,n))},t)),t.j=e}var gU=class{constructor(t,e){this.g=t,this.map=e}};function LD(t){this.l=t||mU,D.PerformanceNavigationTiming?(t=D.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(D.g&&D.g.Ka&&D.g.Ka()&&D.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var mU=10;function VD(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function UD(t){return t.h?1:t.g?t.g.size:0}function sy(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Cy(t,e){t.g?t.g.add(e):t.h=e}function jD(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}LD.prototype.cancel=function(){if(this.i=BD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function BD(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return uy(t.i)}var yU=class{stringify(t){return D.JSON.stringify(t,void 0)}parse(t){return D.JSON.parse(t,void 0)}};function _U(){this.g=new yU}function vU(t,e,n){let r=n||"";try{PD(t,function(i,s){let o=i;ua(i)&&(o=my(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function wU(t,e){let n=new Ml;if(D.Image){let r=new Image;r.onload=gl(wl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=gl(wl,n,r,"TestLoadImage: error",!1,e),r.onabort=gl(wl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=gl(wl,n,r,"TestLoadImage: timeout",!1,e),D.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function wl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ga(t){this.l=t.ec||null,this.j=t.ob||!1}Te(ga,wy);ga.prototype.g=function(){return new Ul(this.l,this.j)};ga.prototype.i=function(t){return function(){return t}}({});function Ul(t,e){Ce.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ty,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Te(Ul,Ce);var Ty=0;y=Ul.prototype;y.open=function(t,e){if(this.readyState!=Ty)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ca(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||D).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ma(this)),this.readyState=Ty};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ca(this)),this.g&&(this.readyState=3,ca(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof D.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$D(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $D(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?ma(this):ca(this),this.readyState==3&&$D(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,ma(this))};y.Ya=function(t){this.g&&(this.response=t,ma(this))};y.ka=function(){this.g&&ma(this)};function ma(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ca(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ca(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ul.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var IU=D.JSON.parse;function de(t){Ce.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=HD,this.L=this.M=!1}Te(de,Ce);var HD="",EU=/^https?$/i,CU=["POST","PUT"];y=de.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ty.g(),this.C=this.u?JT(this.u):JT(ty),this.g.onreadystatechange=Fe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){eD(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=D.FormData&&t instanceof D.FormData,!(0<=sD(CU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{WD(this),0<this.B&&((this.L=TU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fe(this.ua,this)):this.A=vy(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){eD(this,s)}};function TU(t){return as&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof cy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ne(this,"timeout"),this.abort(8))};function eD(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qD(t),jl(t)}function qD(t){t.F||(t.F=!0,Ne(t,"complete"),Ne(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ne(this,"complete"),Ne(this,"abort"),jl(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jl(this,!0)),de.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?zD(this):this.kb())};y.kb=function(){zD(this)};function zD(t){if(t.h&&typeof cy<"u"&&(!t.C[1]||en(t)!=4||t.da()!=2)){if(t.v&&en(t)==4)vy(t.La,0,t);else if(Ne(t,"readystatechange"),en(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(MD)[1]||null;!i&&D.self&&D.self.location&&(i=D.self.location.protocol.slice(0,-1)),r=!EU.test(i?i.toLowerCase():"")}n=r}if(n)Ne(t,"complete"),Ne(t,"success");else{t.m=6;try{var s=2<en(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",qD(t)}}finally{jl(t)}}}}function jl(t,e){if(t.g){WD(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ne(t,"ready");try{n.onreadystatechange=r}catch{}}}function WD(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(D.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function en(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),IU(e)}};function tD(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case HD:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function DU(t){let e={};t=(t.g&&2<=en(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(ta(t[r]))continue;var n=J2(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}G2(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function GD(t){let e="";return dy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Dy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=GD(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function Yo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function KD(t){this.Ga=0,this.j=[],this.l=new Ml,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Yo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Yo("baseRetryDelayMs",5e3,t),this.hb=Yo("retryDelaySeedMs",1e4,t),this.eb=Yo("forwardChannelMaxRetries",2,t),this.xa=Yo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new LD(t&&t.concurrentRequestLimit),this.Ja=new _U,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=KD.prototype;y.ra=8;y.H=1;function by(t){if(QD(t),t.H==3){var e=t.W++,n=Sn(t.I);if(re(n,"SID",t.K),re(n,"RID",e),re(n,"TYPE","terminate"),ya(t,n),e=new fa(t,t.l,e),e.L=2,e.A=Vl(Sn(n)),n=!1,D.navigator&&D.navigator.sendBeacon)try{n=D.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&D.Image&&(new Image().src=e.A,n=!0),n||(e.g=rb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),pa(e)}tb(t)}function Bl(t){t.g&&(Ay(t),t.g.cancel(),t.g=null)}function QD(t){Bl(t),t.u&&(D.clearTimeout(t.u),t.u=null),Tl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&D.clearTimeout(t.m),t.m=null)}function $l(t){if(!VD(t.i)&&!t.m){t.m=!0;var e=t.Na;ra||yD(),ia||(ra(),ia=!0),yy.add(e,t),t.C=0}}function bU(t,e){return UD(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=da(Fe(t.Na,t,e),eb(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new fa(this,this.l,t),s=this.s;if(this.U&&(s?(s=uD(s),lD(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=YD(this,i,e),n=Sn(this.I),re(n,"RID",t),re(n,"CVER",22),this.F&&re(n,"X-HTTP-Session-Id",this.F),ya(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(GD(s)))+"&"+e:this.o&&Dy(n,this.o,s)),Cy(this.i,i),this.bb&&re(n,"TYPE","init"),this.P?(re(n,"$req",e),re(n,"SID","null"),i.aa=!0,ry(i,n,null)):ry(i,n,e),this.H=2}}else this.H==3&&(t?nD(this,t):this.j.length==0||VD(this.i)||nD(this))};function nD(t,e){var n;e?n=e.m:n=t.W++;let r=Sn(t.I);re(r,"SID",t.K),re(r,"RID",n),re(r,"AID",t.V),ya(t,r),t.o&&t.s&&Dy(r,t.o,t.s),n=new fa(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=YD(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Cy(t.i,n),ry(n,r,e)}function ya(t,e){t.na&&dy(t.na,function(n,r){re(e,r,n)}),t.h&&PD({},function(n,r){re(e,r,n)})}function YD(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Fe(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{vU(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function JD(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ra||yD(),ia||(ra(),ia=!0),yy.add(e,t),t.A=0}}function Sy(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=da(Fe(t.Ma,t),eb(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,ZD(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=da(Fe(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$e(10),Bl(this),ZD(this))};function Ay(t){t.B!=null&&(D.clearTimeout(t.B),t.B=null)}function ZD(t){t.g=new fa(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Sn(t.wa);re(e,"RID","rpc"),re(e,"SID",t.K),re(e,"AID",t.V),re(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&re(e,"TO",t.qa),re(e,"TYPE","xmlhttp"),ya(t,e),t.o&&t.s&&Dy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Vl(Sn(e)),n.u=null,n.S=!0,AD(n,t)}y.ib=function(){this.v!=null&&(this.v=null,Bl(this),Sy(this),$e(19))};function Tl(t){t.v!=null&&(D.clearTimeout(t.v),t.v=null)}function XD(t,e){var n=null;if(t.g==e){Tl(t),Ay(t),t.g=null;var r=2}else if(sy(t.i,e))n=e.F,jD(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=kl(),Ne(r,new CD(r,n)),$l(t)}else JD(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&bU(t,e)||r==2&&Sy(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Gr(t,5);break;case 4:Gr(t,10);break;case 3:Gr(t,6);break;default:Gr(t,2)}}}function eb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Gr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Fe(t.pb,t);n||(n=new Kr("//www.google.com/images/cleardot.gif"),D.location&&D.location.protocol=="http"||El(n,"https"),Vl(n)),wU(n.toString(),r)}else $e(2);t.H=0,t.h&&t.h.za(e),tb(t),QD(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),$e(2)):(this.l.info("Failed to ping google.com"),$e(1))};function tb(t){if(t.H=0,t.ma=[],t.h){let e=BD(t.i);(e.length!=0||t.j.length!=0)&&(GT(t.ma,e),GT(t.ma,t.j),t.i.i.length=0,uy(t.j),t.j.length=0),t.h.ya()}}function nb(t,e,n){var r=n instanceof Kr?Sn(n):new Kr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Cl(r,r.m);else{var i=D.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Kr(null);r&&El(s,r),e&&(s.g=e),i&&Cl(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&re(r,n,e),re(r,"VER",t.ra),ya(t,r),r}function rb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new de(new ga({ob:n})):new de(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function ib(){}y=ib.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function Dl(){if(as&&!(10<=Number(H2)))throw Error("Environmental error: no available transport.")}Dl.prototype.g=function(t,e){return new at(t,e)};function at(t,e){Ce.call(this),this.g=new KD(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!ta(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ta(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new us(this)}Te(at,Ce);at.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;$e(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=nb(t,null,t.Y),$l(t)};at.prototype.close=function(){by(this.g)};at.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=my(t),t=n);e.j.push(new gU(e.fb++,t)),e.H==3&&$l(e)};at.prototype.N=function(){this.g.h=null,delete this.j,by(this.g),delete this.g,at.$.N.call(this)};function sb(t){Iy.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Te(sb,Iy);function ob(){Ey.call(this),this.status=1}Te(ob,Ey);function us(t){this.g=t}Te(us,ib);us.prototype.Ba=function(){Ne(this.g,"a")};us.prototype.Aa=function(t){Ne(this.g,new sb(t))};us.prototype.za=function(t){Ne(this.g,new ob)};us.prototype.ya=function(){Ne(this.g,"b")};function SU(){this.blockSize=-1}function Nt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Te(Nt,SU);Nt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function zm(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Nt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)zm(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){zm(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){zm(this,r),i=0;break}}this.h=i,this.i+=e};Nt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Z(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var AU={};function Ry(t){return-128<=t&&128>t?j2(t,function(e){return new Z([e|0],0>e?-1:0)}):new Z([t|0],0>t?-1:0)}function tn(t){if(isNaN(t)||!isFinite(t))return os;if(0>t)return xe(tn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=oy;return new Z(e,0)}function ab(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return xe(ab(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tn(Math.pow(e,8)),r=os,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=tn(Math.pow(e,s)),r=r.R(s).add(tn(o))):(r=r.R(n),r=r.add(tn(o)))}return r}var oy=4294967296,os=Ry(0),ay=Ry(1),rD=Ry(16777216);y=Z.prototype;y.ea=function(){if(_t(this))return-xe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:oy+r)*e,e*=oy}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(bn(this))return"0";if(_t(this))return"-"+xe(this).toString(t);for(var e=tn(Math.pow(t,6)),n=this,r="";;){var i=Sl(n,e).g;n=bl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,bn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function bn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function _t(t){return t.h==-1}y.X=function(t){return t=bl(this,t),_t(t)?-1:bn(t)?0:1};function xe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Z(n,~t.h).add(ay)}y.abs=function(){return _t(this)?xe(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Z(n,n[n.length-1]&-2147483648?-1:0)};function bl(t,e){return t.add(xe(e))}y.R=function(t){if(bn(this)||bn(t))return os;if(_t(this))return _t(t)?xe(this).R(xe(t)):xe(xe(this).R(t));if(_t(t))return xe(this.R(xe(t)));if(0>this.X(rD)&&0>t.X(rD))return tn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Il(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Il(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Il(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Il(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Z(n,0)};function Il(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Jo(t,e){this.g=t,this.h=e}function Sl(t,e){if(bn(e))throw Error("division by zero");if(bn(t))return new Jo(os,os);if(_t(t))return e=Sl(xe(t),e),new Jo(xe(e.g),xe(e.h));if(_t(e))return e=Sl(t,xe(e)),new Jo(xe(e.g),e.h);if(30<t.g.length){if(_t(t)||_t(e))throw Error("slowDivide_ only works with positive integers.");for(var n=ay,r=e;0>=r.X(t);)n=iD(n),r=iD(r);var i=is(n,1),s=is(r,1);for(r=is(r,2),n=is(n,2);!bn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=is(r,1),n=is(n,1)}return e=bl(t,i.R(e)),new Jo(i,e)}for(i=os;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=tn(n),o=s.R(e);_t(o)||0<o.X(t);)n-=r,s=tn(n),o=s.R(e);bn(s)&&(s=ay),i=i.add(s),t=bl(t,o)}return new Jo(i,t)}y.gb=function(t){return Sl(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Z(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Z(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Z(n,this.h^t.h)};function iD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Z(n,t.h)}function is(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Z(i,t.h)}Dl.prototype.createWebChannel=Dl.prototype.g;at.prototype.send=at.prototype.u;at.prototype.open=at.prototype.m;at.prototype.close=at.prototype.close;Ol.NO_ERROR=0;Ol.TIMEOUT=8;Ol.HTTP_ERROR=6;TD.COMPLETE="complete";DD.EventType=ha;ha.OPEN="a";ha.CLOSE="b";ha.ERROR="c";ha.MESSAGE="d";Ce.prototype.listen=Ce.prototype.O;de.prototype.listenOnce=de.prototype.P;de.prototype.getLastError=de.prototype.Sa;de.prototype.getLastErrorCode=de.prototype.Ia;de.prototype.getStatus=de.prototype.da;de.prototype.getResponseJson=de.prototype.Wa;de.prototype.getResponseText=de.prototype.ja;de.prototype.send=de.prototype.ha;de.prototype.setWithCredentials=de.prototype.Oa;Nt.prototype.digest=Nt.prototype.l;Nt.prototype.reset=Nt.prototype.reset;Nt.prototype.update=Nt.prototype.j;Z.prototype.add=Z.prototype.add;Z.prototype.multiply=Z.prototype.R;Z.prototype.modulo=Z.prototype.gb;Z.prototype.compare=Z.prototype.X;Z.prototype.toNumber=Z.prototype.ea;Z.prototype.toString=Z.prototype.toString;Z.prototype.getBits=Z.prototype.D;Z.fromNumber=tn;Z.fromString=ab;var RU=Pt.createWebChannelTransport=function(){return new Dl},xU=Pt.getStatEventTarget=function(){return kl()},NU=Pt.ErrorCode=Ol,PU=Pt.EventType=TD,MU=Pt.Event=Qr,kU=Pt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tG=Pt.FetchXmlHttpFactory=ga,OU=Pt.WebChannel=DD,FU=Pt.XhrIo=de,LU=Pt.Md5=Nt,cb=Pt.Integer=Z;var ub="@firebase/firestore";var De=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};De.UNAUTHENTICATED=new De(null),De.GOOGLE_CREDENTIALS=new De("google-credentials-uid"),De.FIRST_PARTY=new De("first-party-uid"),De.MOCK_USER=new De("mock-user");var va="10.11.0";var ds=new Gt("@firebase/firestore");function ct(t,...e){if(ds.logLevel<=K.DEBUG){let n=e.map(Yy);ds.debug(`Firestore (${va}): ${t}`,...n)}}function Qy(t,...e){if(ds.logLevel<=K.ERROR){let n=e.map(Yy);ds.error(`Firestore (${va}): ${t}`,...n)}}function VU(t,...e){if(ds.logLevel<=K.WARN){let n=e.map(Yy);ds.warn(`Firestore (${va}): ${t}`,...n)}}function Yy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function nt(t="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+t;throw Qy(e),new Error(e)}function _a(t,e){t||nt()}var Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},we=class extends ot{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Hl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ny=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(De.UNAUTHENTICATED))}shutdown(){}},Py=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},My=class{constructor(e){this.t=e,this.currentUser=De.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_a(typeof r.accessToken=="string"),new Hl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return _a(e===null||typeof e=="string"),new De(e)}},ky=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=De.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Oy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ky(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(De.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Fy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ly=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,ct("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_a(typeof n.token=="string"),this.R=n.token,new Fy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function UU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Vy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=UU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function pb(t,e){return t<e?-1:t>e?1:0}var Uy=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&nt(),r===void 0?r=e.length-n:r>e.length-n&&nt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},nr=class t extends Uy{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new we(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var Yr=class t{constructor(e){this.path=e}static fromPath(e){return new t(nr.fromString(e))}static fromName(e){return new t(nr.fromString(e).popFirst(5))}static empty(){return new t(nr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return nr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new nr(e.slice()))}};var jy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};jy.UNKNOWN_ID=-1;function gb(t){return t.name==="IndexedDbTransactionError"}function jU(t){return t===0&&1/t==-1/0}var BU=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],hG=[...BU,"documentOverlays"],$U=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],HU=$U,fG=[...HU,"indexConfiguration","indexState","indexEntries"];var hs=class t{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}},ls=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();let e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}};rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ql=class t{constructor(e){this.comparator=e,this.data=new hs(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zl(this.data.getIterator())}getIteratorFrom(e){return new zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var By=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var fs=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new By("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pb(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};fs.EMPTY_BYTE_STRING=new fs("");var qU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zU(t){if(_a(!!t),typeof t=="string"){let e=0,n=qU.exec(t);if(_a(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Wl(t.seconds),nanos:Wl(t.nanos)}}function Wl(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function WU(t){return typeof t=="string"?fs.fromBase64String(t):fs.fromUint8Array(t)}var $y=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Hy=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function GU(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var gG=new hs(Yr.comparator);var mG=new hs(Yr.comparator);var yG=new hs(Yr.comparator),_G=new ql(Yr.comparator);var vG=new ql(pb);var lb,W;(W=lb||(lb={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var wG=new cb([4294967295,4294967295],0);var Gl=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Wl(e.integerValue));else if("doubleValue"in e){let r=Wl(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),jU(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=zU(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(WU(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?GU(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):nt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Yr.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Gl.bt=new Gl;var IG=new Uint8Array(0);var nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);function xy(){return typeof document<"u"?document:null}var qy=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var zy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function KU(t,e){if(Qy("AsyncQueue",`${e}: ${t}`),gb(t))return new we(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}var db,hb;(hb=db||(db={})).j_="default",hb.Cache="cache";var Wy=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=De.UNAUTHENTICATED,this.clientId=Vy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){ct("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ct("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new we(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=KU(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var fb=new Map;function QU(t,e,n,r){if(e===!0&&r===!0)throw new we(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function YU(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":nt()}function JU(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=YU(t);throw new we(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Kl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ql=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new we(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new we(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ny;switch(r.type){case"firstParty":return new Oy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=fb.get(n);r&&(ct("ComponentProvider","Removing Datastore"),fb.delete(n),r.terminate())}(this),Promise.resolve()}};function yb(t,e,n,r={}){var i;let s=(t=JU(t,Ql))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&VU("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=De.MOCK_USER;else{a=uu(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new we(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new De(u)}t._authCredentials=new Py(new Hl(a,c))}}var Gy=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new qy(this,"async_queue_retry"),this.cu=()=>{let n=xy();n&&ct("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=xy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=xy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new rr;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!gb(e))throw e;ct("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Qy("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=zy.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&nt()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};var Ky=class extends Ql{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Gy}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ZU(this),this._firestoreClient.terminate()}};function _b(t,e){let n=typeof t=="object"?t:Gn(),r=typeof t=="string"?t:e||"(default)",i=Nr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=cu("firestore");s&&yb(i,...s)}return i}function ZU(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new $y(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,mb(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Wy(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var EG=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){va=i})(Yt),Qt(new Je("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ky(new My(r.getProvider("auth-internal")),new Ly(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hy(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ue(ub,"4.6.0",e),ue(ub,"4.6.0","esm2017")})();var wa=class{constructor(e){return e}},vb="firestore",Jy=class{constructor(){return Bo(vb)}};var Zy=new N("angularfire2.firestore-instances");function XU(t,e){let n=Qu(vb,t,e);return n&&new wa(n)}function ej(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new wa(r)}}var tj={provide:Jy,deps:[[new je,Zy]]},nj={provide:wa,useFactory:XU,deps:[[new je,Zy],Cn]},rj=(()=>{class t{constructor(){ue("angularfire",jr.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[nj,tj]})}return t})();function wb(t,...e){return{ngModule:rj,providers:[{provide:Zy,useFactory:ej(t),multi:!0,deps:[X,St,es,Br,[new je,Qo],[new je,Xi],...e]}]}}var Ib=ts(_b,!0);var Eb={providers:[NE(eT),Ms(tT(()=>nT({projectId:"bidosi-manga",appId:"1:24335793429:web:c9616afea73ecf763dfd1c",storageBucket:"bidosi-manga.appspot.com",apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",messagingSenderId:"24335793429"}))),Ms(zT(()=>WT())),Ms(wb(()=>Ib()))]};var Cb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["bido-dom-nav"]],standalone:!0,features:[Qe],decls:8,vars:0,consts:[[1,"nav-content"],[1,"chapters","button"],["routerLink","/",1,"color-effect","logo"],[1,"reload","button"],["viewBox","0 0 24 24"],["d","M2.25 10C2.25 5.71979 5.71979 2.25 10 2.25C14.2802 2.25 17.75 5.71979 17.75 10C17.75 14.2802 14.2802 17.75 10 17.75C5.71979 17.75 2.25 14.2802 2.25 10Z"],["d","M16.8214 15.618C17.1645 15.2749 17.7044 15.2276 18.1019 15.5059L21.9536 18.2021C22.8451 18.8261 22.957 20.1037 22.1875 20.8731L21.8731 21.1875C21.1037 21.957 19.8261 21.8451 19.2021 20.9536L16.5059 17.1019C16.2276 16.7044 16.2749 16.1645 16.618 15.8214L16.8214 15.618Z"]],template:function(i,s){i&1&&(A(0,"div",0)(1,"div",1)(2,"span",2),ce(3,"\u0411\u0456\u0434\u043E\u0441\u0456"),V()(),A(4,"div",3),Vs(),A(5,"svg",4),ae(6,"path",5)(7,"path",6),V()()())},dependencies:[iu],styles:["@font-face{font-family:PopB;src:url(/assets/fonts/Poppins-ExtraBold.ttf);font-weight:800}.nav-content[_ngcontent-%COMP%]{background:var(--background);color:var(--text);position:fixed;top:0;width:100vw;z-index:3;display:flex;justify-content:space-between;align-items:center}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}.nav-content[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background:url(/assets/favicon.ico) no-repeat center;background-size:90% 100%;width:35px;height:30px;margin:5px}.button[_ngcontent-%COMP%]{padding:0 20px}.color-effect[_ngcontent-%COMP%]{font-family:PopB;font-weight:800;font-size:22px;background:linear-gradient(120deg,var(--primary),var(--accent));background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}"]});let t=e;return t})();var Tb=(()=>{let e=class e{constructor(){this.title="Mabido Manga \u0434\u043B\u044F \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0456\u0432 "}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["app-root"]],standalone:!0,features:[Qe],decls:3,vars:0,consts:[[1,"main"]],template:function(i,s){i&1&&(A(0,"main",0),ae(1,"bido-dom-nav"),V(),ae(2,"router-outlet"))},dependencies:[Zf,Cb],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,UZ Sans;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media (prefers-color-scheme: light){[_nghost-%COMP%]{--text: #021018;--text-3: rgba(2, 16, 24, .3);--background: #f4f9fb;--primary: #0b6484;--primary-8: rgba(11, 100, 132, .4);--secondary: #f15fd2;--accent: #c5112c}}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--text: #f4f9fb;--text-3: rgba(244, 249, 251, .1);--background: #04090b;--primary: #7ad3f4;--secondary: #a00e80;--accent: #ee3854}}@font-face{font-family:UZSansB;src:url(/assets/fonts/UZSans-SemiBold.ttf);font-weight:400}body[_ngcontent-%COMP%]{margin:0;padding:0;background:var(--background);color:var(--text)}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--text);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}.main[_ngcontent-%COMP%]{padding:0}}']});let t=e;return t})();YI(Tb,Eb).catch(t=>console.error(t));
