var Bb=Object.defineProperty,$b=Object.defineProperties;var Hb=Object.getOwnPropertyDescriptors;var i_=Object.getOwnPropertySymbols,qb=Object.getPrototypeOf,zb=Object.prototype.hasOwnProperty,Wb=Object.prototype.propertyIsEnumerable,Gb=Reflect.get;var s_=(t,e,n)=>e in t?Bb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||={})zb.call(e,n)&&s_(t,n,e[n]);if(i_)for(var n of i_(e))Wb.call(e,n)&&s_(t,n,e[n]);return t},ie=(t,e)=>$b(t,Hb(e));var Sn=(t,e,n)=>Gb(qb(t),n,e);var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function Kb(t,e){return Object.is(t,e)}var Ie=null,ba=!1,Sa=1,Xr=Symbol("SIGNAL");function G(t){let e=Ie;return Ie=t,e}var rd={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function o_(t){if(ba)throw new Error("");if(Ie===null)return;Ie.consumerOnSignalRead(t);let e=Ie.nextProducerIndex++;if(Zr(Ie),e<Ie.producerNode.length&&Ie.producerNode[e]!==t&&ws(Ie)){let n=Ie.producerNode[e];Aa(n,Ie.producerIndexOfThis[e])}Ie.producerNode[e]!==t&&(Ie.producerNode[e]=t,Ie.producerIndexOfThis[e]=ws(Ie)?h_(t,Ie,e):0),Ie.producerLastReadVersion[e]=t.version}function Qb(){Sa++}function Yb(t){if(!(ws(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Sa)){if(!t.producerMustRecompute(t)&&!id(t)){t.dirty=!1,t.lastCleanEpoch=Sa;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Sa}}function a_(t){if(t.liveConsumerNode===void 0)return;let e=ba;ba=!0;try{for(let n of t.liveConsumerNode)n.dirty||Jb(n)}finally{ba=e}}function c_(){return Ie?.consumerAllowSignalWrites!==!1}function Jb(t){t.dirty=!0,a_(t),t.consumerMarkedDirty?.(t)}function u_(t){return t&&(t.nextProducerIndex=0),G(t)}function l_(t,e){if(G(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ws(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Aa(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function id(t){Zr(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Yb(n),r!==n.version))return!0}return!1}function d_(t){if(Zr(t),ws(t))for(let e=0;e<t.producerNode.length;e++)Aa(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function h_(t,e,n){if(f_(t),Zr(t),t.liveConsumerNode.length===0)for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=h_(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Aa(t,e){if(f_(t),Zr(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Aa(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Zr(i),i.producerIndexOfThis[r]=e}}function ws(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Zr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function f_(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Zb(){throw new Error}var p_=Zb;function g_(){p_()}function m_(t){p_=t}var Xb=null;function y_(t){let e=Object.create(v_);e.value=t;let n=()=>(o_(e),e.value);return n[Xr]=e,n}function sd(t,e){c_()||g_(),t.equal(t.value,e)||(t.value=e,eS(t))}function __(t,e){c_()||g_(),sd(t,e(t.value))}var v_=ie(w({},rd),{equal:Kb,value:void 0});function eS(t){t.version++,Qb(),a_(t),Xb?.()}function b(t){return typeof t=="function"}function ei(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ra=ei(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function sr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var de=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(b(r))try{r()}catch(s){e=s instanceof Ra?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{w_(s)}catch(o){e=e??[],o instanceof Ra?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Ra(e)}}add(e){var n;if(e&&e!==this)if(this.closed)w_(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&sr(n,e)}remove(e){let{_finalizers:n}=this;n&&sr(n,e),e instanceof t&&e._removeParent(this)}};de.EMPTY=(()=>{let t=new de;return t.closed=!0,t})();var od=de.EMPTY;function xa(t){return t instanceof de||t&&"closed"in t&&b(t.remove)&&b(t.add)&&b(t.unsubscribe)}function w_(t){b(t)?t():t.unsubscribe()}var wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ti={setTimeout(t,e,...n){let{delegate:r}=ti;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ti;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Na(t){ti.setTimeout(()=>{let{onUnhandledError:e}=wt;if(e)e(t);else throw t})}function Is(){}var I_=ad("C",void 0,void 0);function E_(t){return ad("E",void 0,t)}function C_(t){return ad("N",t,void 0)}function ad(t,e,n){return{kind:t,value:e,error:n}}var or=null;function ni(t){if(wt.useDeprecatedSynchronousErrorHandling){let e=!or;if(e&&(or={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=or;if(or=null,n)throw r}}else t()}function T_(t){wt.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=t)}var ar=class extends de{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xa(e)&&e.add(this)):this.destination=rS}static create(e,n,r){return new ri(e,n,r)}next(e){this.isStopped?ud(C_(e),this):this._next(e)}error(e){this.isStopped?ud(E_(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ud(I_,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tS=Function.prototype.bind;function cd(t,e){return tS.call(t,e)}var ld=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Pa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Pa(r)}else Pa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pa(n)}}},ri=class extends ar{constructor(e,n,r){super();let i;if(b(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cd(e.next,s),error:e.error&&cd(e.error,s),complete:e.complete&&cd(e.complete,s)}):i=e}this.destination=new ld(i)}};function Pa(t){wt.useDeprecatedSynchronousErrorHandling?T_(t):Na(t)}function nS(t){throw t}function ud(t,e){let{onStoppedNotification:n}=wt;n&&ti.setTimeout(()=>n(t,e))}var rS={closed:!0,next:Is,error:nS,complete:Is};var ii=typeof Symbol=="function"&&Symbol.observable||"@@observable";function rt(t){return t}function dd(...t){return hd(t)}function hd(t){return t.length===0?rt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var U=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=sS(n)?n:new ri(n,r,i);return ni(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=D_(r),new r((i,s)=>{let o=new ri({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ii](){return this}pipe(...n){return hd(n)(this)}toPromise(n){return n=D_(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function D_(t){var e;return(e=t??wt.Promise)!==null&&e!==void 0?e:Promise}function iS(t){return t&&b(t.next)&&b(t.error)&&b(t.complete)}function sS(t){return t&&t instanceof ar||iS(t)&&xa(t)}function fd(t){return b(t?.lift)}function H(t){return e=>{if(fd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function q(t,e,n,r,i){return new pd(t,e,n,r,i)}var pd=class extends ar{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function si(){return H((t,e)=>{let n=null;t._refCount++;let r=q(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var oi=class extends U{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new de;let n=this.getSubject();e.add(this.source.subscribe(q(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=de.EMPTY)}return e}refCount(){return si()(this)}};var b_=ei(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class t extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ma(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new b_}next(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ni(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?od:(this.currentObservers=null,s.push(n),new de(()=>{this.currentObservers=null,sr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new U;return n.source=this,n}}return t.create=(e,n)=>new Ma(e,n),t})(),Ma=class extends Oe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:od}};var he=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gd={now(){return(gd.delegate||Date).now()},delegate:void 0};var ka=class extends de{constructor(e,n){super()}schedule(e,n=0){return this}};var Es={setInterval(t,e,...n){let{delegate:r}=Es;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Es;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ai=class extends ka{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Es.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Es.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,sr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ci=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ci.now=gd.now;var ui=class extends ci{constructor(e,n=ci.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var md=new ui(ai);var Oa=class extends ai{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Fa=class extends ui{};var yd=new Fa(Oa);var Ae=new U(t=>t.complete());function S_(t){return t&&b(t.schedule)}function A_(t){return t[t.length-1]}function R_(t){return b(A_(t))?t.pop():void 0}function An(t){return S_(A_(t))?t.pop():void 0}function _d(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function N_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function x_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cr(t){return this instanceof cr?(this.v=t,this):new cr(t)}function P_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,_){s.push([h,f,g,_])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof cr?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function M_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof x_=="function"?x_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var La=t=>t&&typeof t.length=="number"&&typeof t!="function";function Va(t){return b(t?.then)}function Ua(t){return b(t[ii])}function ja(t){return Symbol.asyncIterator&&b(t?.[Symbol.asyncIterator])}function Ba(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function oS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $a=oS();function Ha(t){return b(t?.[$a])}function qa(t){return P_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield cr(n.read());if(i)return yield cr(void 0);yield yield cr(r)}}finally{n.releaseLock()}})}function za(t){return b(t?.getReader)}function Ee(t){if(t instanceof U)return t;if(t!=null){if(Ua(t))return aS(t);if(La(t))return cS(t);if(Va(t))return uS(t);if(ja(t))return k_(t);if(Ha(t))return lS(t);if(za(t))return dS(t)}throw Ba(t)}function aS(t){return new U(e=>{let n=t[ii]();if(b(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cS(t){return new U(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function uS(t){return new U(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Na)})}function lS(t){return new U(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function k_(t){return new U(e=>{hS(t,e).catch(n=>e.error(n))})}function dS(t){return k_(qa(t))}function hS(t,e){var n,r,i,s;return N_(this,void 0,void 0,function*(){try{for(n=M_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ze(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Rn(t,e=0){return H((n,r)=>{n.subscribe(q(r,i=>ze(r,t,()=>r.next(i),e),()=>ze(r,t,()=>r.complete(),e),i=>ze(r,t,()=>r.error(i),e)))})}function xn(t,e=0){return H((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function O_(t,e){return Ee(t).pipe(xn(e),Rn(e))}function F_(t,e){return Ee(t).pipe(xn(e),Rn(e))}function L_(t,e){return new U(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function V_(t,e){return new U(n=>{let r;return ze(n,e,()=>{r=t[$a](),ze(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>b(r?.return)&&r.return()})}function Wa(t,e){if(!t)throw new Error("Iterable cannot be null");return new U(n=>{ze(n,e,()=>{let r=t[Symbol.asyncIterator]();ze(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function U_(t,e){return Wa(qa(t),e)}function j_(t,e){if(t!=null){if(Ua(t))return O_(t,e);if(La(t))return L_(t,e);if(Va(t))return F_(t,e);if(ja(t))return Wa(t,e);if(Ha(t))return V_(t,e);if(za(t))return U_(t,e)}throw Ba(t)}function pe(t,e){return e?j_(t,e):Ee(t)}function S(...t){let e=An(t);return pe(t,e)}function li(t,e){let n=b(t)?t:()=>t,r=i=>i.error(n());return new U(e?i=>e.schedule(r,0,i):r)}function vd(t){return!!t&&(t instanceof U||b(t.lift)&&b(t.subscribe))}var an=ei(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function z(t,e){return H((n,r)=>{let i=0;n.subscribe(q(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:fS}=Array;function pS(t,e){return fS(e)?t(...e):t(e)}function B_(t){return z(e=>pS(t,e))}var{isArray:gS}=Array,{getPrototypeOf:mS,prototype:yS,keys:_S}=Object;function $_(t){if(t.length===1){let e=t[0];if(gS(e))return{args:e,keys:null};if(vS(e)){let n=_S(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function vS(t){return t&&typeof t=="object"&&mS(t)===yS}function H_(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Cs(...t){let e=An(t),n=R_(t),{args:r,keys:i}=$_(t);if(r.length===0)return pe([],e);let s=new U(wS(r,e,i?o=>H_(i,o):rt));return n?s.pipe(B_(n)):s}function wS(t,e,n=rt){return r=>{q_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)q_(e,()=>{let u=pe(t[c],e),l=!1;u.subscribe(q(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function q_(t,e,n){t?ze(n,t,e):e()}function z_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?g(_):c.push(_),g=_=>{s&&e.next(_),u++;let P=!1;Ee(n(_,l++)).subscribe(q(e,$=>{i?.($),s?f($):e.next($)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;c.length&&u<r;){let $=c.shift();o?ze(e,o,()=>g($)):g($)}h()}catch($){e.error($)}}))};return t.subscribe(q(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ge(t,e,n=1/0){return b(e)?ge((r,i)=>z((s,o)=>e(r,s,i,o))(Ee(t(r,i))),n):(typeof e=="number"&&(n=e),H((r,i)=>z_(r,i,t,n)))}function wd(t=1/0){return ge(rt,t)}function W_(){return wd(1)}function di(...t){return W_()(pe(t,An(t)))}function Ga(t){return new U(e=>{Ee(t()).subscribe(e)})}function It(t,e){return H((n,r)=>{let i=0;n.subscribe(q(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Nn(t){return H((e,n)=>{let r=null,i=!1,s;r=e.subscribe(q(n,void 0,void 0,o=>{s=Ee(t(o,Nn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function G_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(q(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function hi(t,e){return b(e)?ge(t,e,1):ge(t,1)}function Pn(t){return H((e,n)=>{let r=!1;e.subscribe(q(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function cn(t){return t<=0?()=>Ae:H((e,n)=>{let r=0;e.subscribe(q(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Id(t){return z(()=>t)}function Ka(t=IS){return H((e,n)=>{let r=!1;e.subscribe(q(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function IS(){return new an}function Ts(t){return H((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function kt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):rt,cn(1),n?Pn(e):Ka(()=>new an))}function fi(t){return t<=0?()=>Ae:H((e,n)=>{let r=[];e.subscribe(q(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ed(t,e){let n=arguments.length>=2;return r=>r.pipe(t?It((i,s)=>t(i,s,r)):rt,fi(1),n?Pn(e):Ka(()=>new an))}function Cd(t,e){return H(G_(t,e,arguments.length>=2,!0))}function Td(...t){let e=An(t);return H((n,r)=>{(e?di(t,n,e):di(t,n)).subscribe(r)})}function lt(t,e){return H((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(q(r,c=>{i?.unsubscribe();let u=0,l=s++;Ee(t(c,l)).subscribe(i=q(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Dd(t){return H((e,n)=>{Ee(t).subscribe(q(n,()=>n.complete(),Is)),!n.closed&&e.subscribe(n)})}function me(t,e,n){let r=b(t)||e||n?{next:t,error:e,complete:n}:t;return r?H((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(q(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):rt}var Rv="https://g.co/ng/security#xss",E=class extends Error{constructor(e,n){super(_h(e,n)),this.code=e}};function _h(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Ls(t){return{toString:t}.toString()}var Qa="__parameters__";function ES(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function xv(t,e,n){return Ls(()=>{let r=ES(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(Qa)?c[Qa]:Object.defineProperty(c,Qa,{value:[]})[Qa];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ur=globalThis;function ee(t){for(let e in t)if(t[e]===ee)return e;throw Error("Could not find renamed property on target object.")}function Ge(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ge).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function K_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var CS=ee({__forward_ref__:ee});function Nv(t){return t.__forward_ref__=Nv,t.toString=function(){return Ge(this())},t}function dt(t){return Pv(t)?t():t}function Pv(t){return typeof t=="function"&&t.hasOwnProperty(CS)&&t.__forward_ref__===Nv}function I(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ic(t){return Q_(t,kv)||Q_(t,Ov)}function Mv(t){return Ic(t)!==null}function Q_(t,e){return t.hasOwnProperty(e)?t[e]:null}function TS(t){let e=t&&(t[kv]||t[Ov]);return e||null}function Y_(t){return t&&(t.hasOwnProperty(J_)||t.hasOwnProperty(DS))?t[J_]:null}var kv=ee({\u0275prov:ee}),J_=ee({\u0275inj:ee}),Ov=ee({ngInjectableDef:ee}),DS=ee({ngInjectorDef:ee}),x=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Fv(t){return t&&!!t.\u0275providers}var bS=ee({\u0275cmp:ee}),SS=ee({\u0275dir:ee}),AS=ee({\u0275pipe:ee}),RS=ee({\u0275mod:ee}),nc=ee({\u0275fac:ee}),Ds=ee({__NG_ELEMENT_ID__:ee}),Z_=ee({__NG_ENV_ID__:ee});function vi(t){return typeof t=="string"?t:t==null?"":String(t)}function xS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():vi(t)}function NS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new E(-200,t)}function vh(t,e){throw new E(-201,!1)}var M=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(M||{}),Fd;function Lv(){return Fd}function We(t){let e=Fd;return Fd=t,e}function Vv(t,e,n){let r=Ic(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&M.Optional)return null;if(e!==void 0)return e;vh(t,"Injector")}var PS={},bs=PS,Ld="__NG_DI_FLAG__",rc="ngTempTokenPath",MS="ngTokenPath",kS=/\n/gm,OS="\u0275",X_="__source",yi;function FS(){return yi}function Mn(t){let e=yi;return yi=t,e}function LS(t,e=M.Default){if(yi===void 0)throw new E(-203,!1);return yi===null?Vv(t,void 0,e):yi.get(t,e&M.Optional?null:void 0,e)}function k(t,e=M.Default){return(Lv()||LS)(dt(t),e)}function v(t,e=M.Default){return k(t,Ec(e))}function Ec(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Vd(t){let e=[];for(let n=0;n<t.length;n++){let r=dt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,s=M.Default;for(let o=0;o<r.length;o++){let a=r[o],c=VS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(k(i,s))}else e.push(k(r))}return e}function Uv(t,e){return t[Ld]=e,t.prototype[Ld]=e,t}function VS(t){return t[Ld]}function US(t,e,n,r){let i=t[rc];throw e[X_]&&i.unshift(e[X_]),t.message=jS(`
`+t.message,i,n,r),t[MS]=i,t[rc]=null,t}function jS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==OS?t.slice(2):t;let i=Ge(e);if(Array.isArray(e))i=e.map(Ge).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ge(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(kS,`
  `)}`}var Be=Uv(xv("Optional"),8);var jv=Uv(xv("SkipSelf"),4);function hr(t,e){let n=t.hasOwnProperty(nc);return n?t[nc]:null}function wh(t,e){t.forEach(n=>Array.isArray(n)?wh(n,e):e(n))}function Bv(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ic(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}var Ss={},Ot=[],wi=new x(""),$v=new x("",-1),Hv=new x(""),sc=class{get(e,n=bs){if(n===bs){let r=new Error(`NullInjectorError: No provider for ${Ge(e)}!`);throw r.name="NullInjectorError",r}return n}},qv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(qv||{}),Vt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vt||{}),Dt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Dt||{});function BS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ud(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];$S(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function zv(t){return t===3||t===4||t===6}function $S(t){return t.charCodeAt(0)===64}function Ih(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?ev(t,n,i,null,e[++r]):ev(t,n,i,null,null))}}return t}function ev(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Wv="ng-template";function HS(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&BS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Eh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Eh(t){return t.type===4&&t.value!==Wv}function qS(t,e,n){let r=t.type===4&&!n?Wv:t.value;return e===r}function zS(t,e,n){let r=4,i=t.attrs,s=i!==null?KS(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Et(r)&&!Et(c))return!1;if(o&&Et(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!qS(t,c,n)||c===""&&e.length===1){if(Et(r))return!1;o=!0}}else if(r&8){if(i===null||!HS(t,i,c,n)){if(Et(r))return!1;o=!0}}else{let u=e[++a],l=WS(c,i,Eh(t),n);if(l===-1){if(Et(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Et(r))return!1;o=!0}}}}return Et(r)||o}function Et(t){return(t&1)===0}function WS(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return QS(e,t)}function GS(t,e,n=!1){for(let r=0;r<e.length;r++)if(zS(t,e[r],n))return!0;return!1}function KS(t){for(let e=0;e<t.length;e++){let n=t[e];if(zv(n))return e}return t.length}function QS(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tv(t,e){return t?":not("+e.trim()+")":e}function YS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Et(o)&&(e+=tv(s,i),i=""),r=o,s=s||!Et(r);n++}return i!==""&&(e+=tv(s,i)),e}function JS(t){return t.map(YS).join(",")}function ZS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Et(i))break;i=s}r++}return{attrs:e,classes:n}}function Ke(t){return Ls(()=>{let e=Zv(t),n=ie(w({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===qv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vt.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});Xv(n);let r=t.dependencies;return n.directiveDefs=rv(r,!1),n.pipeDefs=rv(r,!0),n.id=tA(n),n})}function XS(t){return On(t)||Kv(t)}function eA(t){return t!==null}function hn(t){return Ls(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nv(t,e){if(t==null)return Ss;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Dt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Dt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function Di(t){return Ls(()=>{let e=Zv(t);return Xv(e),e})}function Gv(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function On(t){return t[bS]||null}function Kv(t){return t[SS]||null}function Qv(t){return t[AS]||null}function Yv(t){let e=On(t)||Kv(t)||Qv(t);return e!==null?e.standalone:!1}function Jv(t,e){let n=t[RS]||null;if(!n&&e===!0)throw new Error(`Type ${Ge(t)} does not have '\u0275mod' property.`);return n}function Zv(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ss,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nv(t.inputs,e),outputs:nv(t.outputs),debugInfo:null}}function Xv(t){t.features?.forEach(e=>e(t))}function rv(t,e){if(!t)return null;let n=e?Qv:XS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(eA)}function tA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cc(t){return{\u0275providers:t}}function Vs(...t){return{\u0275providers:ew(!0,t),\u0275fromNgModule:!0}}function ew(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return wh(e,o=>{let a=o;jd(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tw(i,s),n}function tw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ch(i,s=>{e(s,r)})}}function jd(t,e,n,r){if(t=dt(t),!t)return!1;let i=null,s=Y_(t),o=!s&&On(t);if(!s&&!o){let c=t.ngModule;if(s=Y_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)jd(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{wh(s.imports,l=>{jd(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&tw(u,e)}if(!a){let u=hr(i)||(()=>new i);e({provide:i,useFactory:u,deps:Ot},i),e({provide:Hv,useValue:i,multi:!0},i),e({provide:wi,useValue:()=>k(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;Ch(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Ch(t,e){for(let n of t)Fv(n)&&(n=n.\u0275providers),Array.isArray(n)?Ch(n,e):e(n)}var nA=ee({provide:String,useValue:ee});function nw(t){return t!==null&&typeof t=="object"&&nA in t}function rA(t){return!!(t&&t.useExisting)}function iA(t){return!!(t&&t.useFactory)}function Bd(t){return typeof t=="function"}var Tc=new x(""),Ja={},sA={},bd;function Th(){return bd===void 0&&(bd=new sc),bd}var ft=class{},As=class extends ft{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Hd(e,o=>this.processProvider(o)),this.records.set($v,pi(void 0,this)),i.has("environment")&&this.records.set(ft,pi(void 0,this));let s=this.records.get(Tc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Hv,Ot,M.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=G(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),G(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Mn(this),r=We(void 0),i;try{return e()}finally{Mn(n),We(r)}}get(e,n=bs,r=M.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Z_))return e[Z_](this);r=Ec(r);let i,s=Mn(this),o=We(void 0);try{if(!(r&M.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=dA(e)&&Ic(e);u&&this.injectableDefInScope(u)?c=pi($d(e),Ja):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&M.Self?Th():this.parent;return n=r&M.Optional&&n===bs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[rc]=a[rc]||[]).unshift(Ge(e)),s)throw a;return US(a,e,"R3InjectorError",this.source)}else throw a}finally{We(o),Mn(s)}}resolveInjectorInitializers(){let e=G(null),n=Mn(this),r=We(void 0),i;try{let s=this.get(wi,Ot,M.Self);for(let o of s)o()}finally{Mn(n),We(r),G(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new E(205,!1)}processProvider(e){e=dt(e);let n=Bd(e)?e:dt(e&&e.provide),r=aA(e);if(!Bd(e)&&e.multi===!0){let i=this.records.get(n);i||(i=pi(void 0,Ja,!0),i.factory=()=>Vd(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=G(null);try{return n.value===Ja&&(n.value=sA,n.value=n.factory()),typeof n.value=="object"&&n.value&&lA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{G(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=dt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function $d(t){let e=Ic(t),n=e!==null?e.factory:hr(t);if(n!==null)return n;if(t instanceof x)throw new E(204,!1);if(t instanceof Function)return oA(t);throw new E(204,!1)}function oA(t){if(t.length>0)throw new E(204,!1);let n=TS(t);return n!==null?()=>n.factory(t):()=>new t}function aA(t){if(nw(t))return pi(void 0,t.useValue);{let e=cA(t);return pi(e,Ja)}}function cA(t,e,n){let r;if(Bd(t)){let i=dt(t);return hr(i)||$d(i)}else if(nw(t))r=()=>dt(t.useValue);else if(iA(t))r=()=>t.useFactory(...Vd(t.deps||[]));else if(rA(t))r=()=>k(dt(t.useExisting));else{let i=dt(t&&(t.useClass||t.provide));if(uA(t))r=()=>new i(...Vd(t.deps));else return hr(i)||$d(i)}return r}function pi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uA(t){return!!t.deps}function lA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dA(t){return typeof t=="function"||typeof t=="object"&&t instanceof x}function Hd(t,e){for(let n of t)Array.isArray(n)?Hd(n,e):n&&Fv(n)?Hd(n.\u0275providers,e):e(n)}function _r(t,e){t instanceof As&&t.assertNotDestroyed();let n,r=Mn(t),i=We(void 0);try{return e()}finally{Mn(r),We(i)}}function hA(){return Lv()!==void 0||FS()!=null}function fA(t){return typeof t=="function"}var fn=0,j=1,C=2,Fe=3,Tt=4,St=5,oc=6,Rs=7,un=8,Ii=9,bt=10,Re=11,xs=12,iv=13,Us=14,Ut=15,Dc=16,gi=17,Ei=18,bc=19,rw=20,kn=21,Sd=22,fr=23,jt=25,iw=1;var pr=7,ac=8,cc=9,ht=10,Dh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Dh||{});function lr(t){return Array.isArray(t)&&typeof t[iw]=="object"}function pn(t){return Array.isArray(t)&&t[iw]===!0}function sw(t){return(t.flags&4)!==0}function Sc(t){return t.componentOffset>-1}function bh(t){return(t.flags&1)===1}function js(t){return!!t.template}function pA(t){return(t[C]&512)!==0}var qd=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function ow(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Bs(){return aw}function aw(t){return t.type.prototype.ngOnChanges&&(t.setInput=mA),gA}Bs.ngInherit=!0;function gA(){let t=uw(this),e=t?.current;if(e){let n=t.previous;if(n===Ss)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mA(t,e,n,r,i){let s=this.declaredInputs[r],o=uw(t)||yA(t,{previous:Ss,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new qd(u&&u.currentValue,n,c===Ss),ow(t,e,i,n)}var cw="__ngSimpleChanges__";function uw(t){return t[cw]||null}function yA(t,e){return t[cw]=e}var sv=null;var Ft=function(t,e,n){sv?.(t,e,n)},lw="svg",_A="math",vA=!1;function wA(){return vA}function Bt(t){for(;Array.isArray(t);)t=t[fn];return t}function IA(t,e){return Bt(e[t])}function pt(t,e){return Bt(e[t.index])}function dw(t,e){return t.data[e]}function EA(t,e){return t[e]}function Vn(t,e){let n=e[t];return lr(n)?n:n[fn]}function Sh(t){return(t[C]&128)===128}function CA(t){return pn(t[Fe])}function uc(t,e){return e==null?null:t[e]}function hw(t){t[gi]=0}function TA(t){t[C]&1024||(t[C]|=1024,Sh(t)&&Ns(t))}function Ah(t){return!!(t[C]&9216||t[fr]?.dirty)}function zd(t){t[bt].changeDetectionScheduler?.notify(1),Ah(t)?Ns(t):t[C]&64&&(wA()?(t[C]|=1024,Ns(t)):t[bt].changeDetectionScheduler?.notify())}function Ns(t){t[bt].changeDetectionScheduler?.notify();let e=Ps(t);for(;e!==null&&!(e[C]&8192||(e[C]|=8192,!Sh(e)));)e=Ps(e)}function fw(t,e){if((t[C]&256)===256)throw new E(911,!1);t[kn]===null&&(t[kn]=[]),t[kn].push(e)}function DA(t,e){if(t[kn]===null)return;let n=t[kn].indexOf(e);n!==-1&&t[kn].splice(n,1)}function Ps(t){let e=t[Fe];return pn(e)?e[Fe]:e}var B={lFrame:Iw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function bA(){return B.lFrame.elementDepthCount}function SA(){B.lFrame.elementDepthCount++}function AA(){B.lFrame.elementDepthCount--}function pw(){return B.bindingsEnabled}function RA(){return B.skipHydrationRootTNode!==null}function xA(t){return B.skipHydrationRootTNode===t}function NA(){B.skipHydrationRootTNode=null}function ne(){return B.lFrame.lView}function $t(){return B.lFrame.tView}function gt(){let t=gw();for(;t!==null&&t.type===64;)t=t.parent;return t}function gw(){return B.lFrame.currentTNode}function PA(){let t=B.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $s(t,e){let n=B.lFrame;n.currentTNode=t,n.isParent=e}function mw(){return B.lFrame.isParent}function MA(){B.lFrame.isParent=!1}function yw(){let t=B.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function kA(){return B.lFrame.bindingIndex}function OA(t){return B.lFrame.bindingIndex=t}function Rh(){return B.lFrame.bindingIndex++}function FA(t){let e=B.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function LA(){return B.lFrame.inI18n}function VA(t,e){let n=B.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wd(e)}function UA(){return B.lFrame.currentDirectiveIndex}function Wd(t){B.lFrame.currentDirectiveIndex=t}function _w(t){B.lFrame.currentQueryIndex=t}function jA(t){let e=t[j];return e.type===2?e.declTNode:e.type===1?t[St]:null}function vw(t,e,n){if(n&M.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&M.Host);)if(i=jA(s),i===null||(s=s[Us],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=B.lFrame=ww();return r.currentTNode=e,r.lView=t,!0}function xh(t){let e=ww(),n=t[j];B.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ww(){let t=B.lFrame,e=t===null?null:t.child;return e===null?Iw(t):e}function Iw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Ew(){let t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Cw=Ew;function Nh(){let t=Ew();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Ac(){return B.lFrame.selectedIndex}function gr(t){B.lFrame.selectedIndex=t}function Ph(){let t=B.lFrame;return dw(t.tView,t.selectedIndex)}function Hs(){B.lFrame.currentNamespace=lw}function Tw(){BA()}function BA(){B.lFrame.currentNamespace=null}function $A(){return B.lFrame.currentNamespace}var Dw=!0;function Mh(){return Dw}function kh(t){Dw=t}function HA(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=aw(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Oh(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function Za(t,e,n){bw(t,e,3,n)}function Xa(t,e,n,r){(t[C]&3)===n&&bw(t,e,n,r)}function Ad(t,e){let n=t[C];(n&3)===e&&(n&=16383,n+=1,t[C]=n)}function bw(t,e,n,r){let i=r!==void 0?t[gi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[gi]+=65536),(a<s||s==-1)&&(qA(t,n,e,c),t[gi]=(t[gi]&4294901760)+c+2),c++}function ov(t,e){Ft(4,t,e);let n=G(null);try{e.call(t)}finally{G(n),Ft(5,t,e)}}function qA(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[C]>>14<t[gi]>>16&&(t[C]&3)===e&&(t[C]+=16384,ov(a,s)):ov(a,s)}var _i=-1,Ms=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function zA(t){return t instanceof Ms}function WA(t){return(t.flags&8)!==0}function GA(t){return(t.flags&16)!==0}function Sw(t){return t!==_i}function lc(t){return t&32767}function KA(t){return t>>16}function dc(t,e){let n=KA(t),r=e;for(;n>0;)r=r[Us],n--;return r}var Gd=!0;function hc(t){let e=Gd;return Gd=t,e}var QA=256,Aw=QA-1,Rw=5,YA=0,Lt={};function JA(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ds)&&(r=n[Ds]),r==null&&(r=n[Ds]=YA++);let i=r&Aw,s=1<<i;e.data[t+(i>>Rw)]|=s}function xw(t,e){let n=Nw(t,e);if(n!==-1)return n;let r=e[j];r.firstCreatePass&&(t.injectorIndex=e.length,Rd(r.data,t),Rd(e,null),Rd(r.blueprint,null));let i=Fh(t,e),s=t.injectorIndex;if(Sw(i)){let o=lc(i),a=dc(i,e),c=a[j].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Rd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Nw(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Fh(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Fw(i),r===null)return _i;if(n++,i=i[Us],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return _i}function ZA(t,e,n){JA(t,e,n)}function XA(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(zv(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function Pw(t,e,n){if(n&M.Optional||t!==void 0)return t;vh(e,"NodeInjector")}function Mw(t,e,n,r){if(n&M.Optional&&r===void 0&&(r=null),!(n&(M.Self|M.Host))){let i=t[Ii],s=We(void 0);try{return i?i.get(e,r,n&M.Optional):Vv(e,r,n&M.Optional)}finally{We(s)}}return Pw(r,e,n)}function kw(t,e,n,r=M.Default,i){if(t!==null){if(e[C]&2048&&!(r&M.Self)){let o=iR(t,e,n,r,Lt);if(o!==Lt)return o}let s=Ow(t,e,n,r,Lt);if(s!==Lt)return s}return Mw(e,n,r,i)}function Ow(t,e,n,r,i){let s=nR(n);if(typeof s=="function"){if(!vw(e,t,r))return r&M.Host?Pw(i,n,r):Mw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&M.Optional))vh(n);else return o}finally{Cw()}}else if(typeof s=="number"){let o=null,a=Nw(t,e),c=_i,u=r&M.Host?e[Ut][St]:null;for((a===-1||r&M.SkipSelf)&&(c=a===-1?Fh(t,e):e[a+8],c===_i||!cv(r,!1)?a=-1:(o=e[j],a=lc(c),e=dc(c,e)));a!==-1;){let l=e[j];if(av(s,a,l.data)){let d=eR(a,e,n,o,r,u);if(d!==Lt)return d}c=e[a+8],c!==_i&&cv(r,e[j].data[a+8]===u)&&av(s,a,e)?(o=l,a=lc(c),e=dc(c,e)):a=-1}}return i}function eR(t,e,n,r,i,s){let o=e[j],a=o.data[t+8],c=r==null?Sc(a)&&Gd:r!=o&&(a.type&3)!==0,u=i&M.Host&&s===a,l=tR(a,o,n,c,u);return l!==null?ks(e,o,l,a):Lt}function tR(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&js(f)&&f.type===n)return c}return null}function ks(t,e,n,r){let i=t[n],s=e.data;if(zA(i)){let o=i;o.resolving&&NS(xS(s[n]));let a=hc(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?We(o.injectImpl):null,l=vw(t,r,M.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&HA(n,s[n],e)}finally{u!==null&&We(u),hc(a),o.resolving=!1,Cw()}}return i}function nR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ds)?t[Ds]:void 0;return typeof e=="number"?e>=0?e&Aw:rR:e}function av(t,e,n){let r=1<<t;return!!(n[e+(t>>Rw)]&r)}function cv(t,e){return!(t&M.Self)&&!(t&M.Host&&e)}var dr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return kw(this._tNode,this._lView,e,Ec(r),n)}};function rR(){return new dr(gt(),ne())}function Lh(t){return Ls(()=>{let e=t.prototype.constructor,n=e[nc]||Kd(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[nc]||Kd(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Kd(t){return Pv(t)?()=>{let e=Kd(dt(t));return e&&e()}:hr(t)}function iR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[C]&2048&&!(o[C]&512);){let a=Ow(s,o,n,r|M.Self,Lt);if(a!==Lt)return a;let c=s.parent;if(!c){let u=o[rw];if(u){let l=u.get(n,Lt,r);if(l!==Lt)return l}c=Fw(o),o=o[Us]}s=c}return i}function Fw(t){let e=t[j],n=e.type;return n===2?e.declTNode:n===1?t[St]:null}function Vh(t){return XA(gt(),t)}function uv(t,e=null,n=null,r){let i=Lw(t,e,n,r);return i.resolveInjectorInitializers(),i}function Lw(t,e=null,n=null,r,i=new Set){let s=[n||Ot,Vs(t)];return r=r||(typeof t=="object"?void 0:Ge(t)),new As(s,e||Th(),r||null,i)}var At=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return uv({name:""},i,r,"");{let s=r.name??"";return uv({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=bs,e.NULL=new sc,e.\u0275prov=I({token:e,providedIn:"any",factory:()=>k($v)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var sR="ngOriginalError";function xd(t){return t[sR]}var ln=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&xd(e);for(;n&&xd(n);)n=xd(n);return n||null}},Vw=new x("",{providedIn:"root",factory:()=>v(ln).handleError.bind(void 0)}),Uw=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=oR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Qd=class extends Uw{constructor(e){super(),this._lView=e}onDestroy(e){return fw(this._lView,e),()=>DA(this._lView,e)}};function oR(){return new Qd(ne())}function aR(){return Rc(gt(),ne())}function Rc(t,e){return new qs(pt(t,e))}var qs=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=aR;let t=e;return t})();var Yd=class extends Oe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,hA()&&(this.destroyRef=v(Uw,{optional:!0})??void 0)}emit(e){let n=G(null);try{super.next(e)}finally{G(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Nd(s),i&&(i=Nd(i)),o&&(o=Nd(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof de&&e.add(a),a}};function Nd(t){return e=>{setTimeout(t,void 0,e)}}var Ct=Yd;function jw(t){return(t.flags&128)===128}var Bw=new Map,cR=0;function uR(){return cR++}function lR(t){Bw.set(t[bc],t)}function dR(t){Bw.delete(t[bc])}var lv="__ngContext__";function mr(t,e){lr(e)?(t[lv]=e[bc],lR(e)):t[lv]=e}function $w(t){return qw(t[xs])}function Hw(t){return qw(t[Tt])}function qw(t){for(;t!==null&&!pn(t);)t=t[Tt];return t}var Jd;function zw(t){Jd=t}function hR(){if(Jd!==void 0)return Jd;if(typeof document<"u")return document;throw new E(210,!1)}var Uh=new x("",{providedIn:"root",factory:()=>fR}),fR="ng",jh=new x(""),Un=new x("",{providedIn:"platform",factory:()=>"unknown"});var Bh=new x("",{providedIn:"root",factory:()=>hR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pR="h",gR="b";var mR=()=>null;function $h(t,e,n=!1){return mR(t,e,n)}var Ww=!1,yR=new x("",{providedIn:"root",factory:()=>Ww});var Ya;function _R(){if(Ya===void 0&&(Ya=null,ur.trustedTypes))try{Ya=ur.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Ya}function dv(t){return _R()?.createScriptURL(t)||t}var fc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Rv})`}};function xc(t){return t instanceof fc?t.changingThisBreaksApplicationSecurity:t}function Hh(t,e){let n=vR(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Rv})`)}return n===e}function vR(t){return t instanceof fc&&t.getTypeName()||null}var wR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gw(t){return t=String(t),t.match(wR)?t:"unsafe:"+t}var Nc=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Nc||{});function vr(t){let e=Qw();return e?e.sanitize(Nc.URL,t)||"":Hh(t,"URL")?xc(t):Gw(vi(t))}function IR(t){let e=Qw();if(e)return dv(e.sanitize(Nc.RESOURCE_URL,t)||"");if(Hh(t,"ResourceURL"))return dv(xc(t));throw new E(904,!1)}function ER(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?IR:vr}function Kw(t,e,n){return ER(e,n)(t)}function Qw(){let t=ne();return t&&t[bt].sanitizer}function Yw(t){return t.ownerDocument.defaultView}function Jw(t){return t instanceof Function?t():t}var wr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(wr||{}),CR;function qh(t,e){return CR(t,e)}function mi(t,e,n,r,i){if(r!=null){let s,o=!1;pn(r)?s=r:lr(r)&&(o=!0,r=r[fn]);let a=Bt(r);t===0&&n!==null?i==null?nI(e,n,a):pc(e,n,a,i||null,!0):t===1&&n!==null?pc(e,n,a,i||null,!0):t===2?jR(e,a,o):t===3&&e.destroyNode(a),s!=null&&$R(e,t,s,n,i)}}function TR(t,e){return t.createText(e)}function DR(t,e,n){t.setValue(e,n)}function Zw(t,e,n){return t.createElement(e,n)}function bR(t,e){Xw(t,e),e[fn]=null,e[St]=null}function SR(t,e,n,r,i,s){r[fn]=i,r[St]=e,Pc(t,r,n,1,i,s)}function Xw(t,e){e[bt].changeDetectionScheduler?.notify(1),Pc(t,e,e[Re],2,null,null)}function AR(t){let e=t[xs];if(!e)return Pd(t[j],t);for(;e;){let n=null;if(lr(e))n=e[xs];else{let r=e[ht];r&&(n=r)}if(!n){for(;e&&!e[Tt]&&e!==t;)lr(e)&&Pd(e[j],e),e=e[Fe];e===null&&(e=t),lr(e)&&Pd(e[j],e),n=e&&e[Tt]}e=n}}function RR(t,e,n,r){let i=ht+r,s=n.length;r>0&&(n[i-1][Tt]=e),r<s-ht?(e[Tt]=n[i],Bv(n,ht+r,e)):(n.push(e),e[Tt]=null),e[Fe]=n;let o=e[Dc];o!==null&&n!==o&&xR(o,e);let a=e[Ei];a!==null&&a.insertView(t),zd(e),e[C]|=128}function xR(t,e){let n=t[cc],i=e[Fe][Fe][Ut];e[Ut]!==i&&(t[C]|=Dh.HasTransplantedViews),n===null?t[cc]=[e]:n.push(e)}function eI(t,e){let n=t[cc],r=n.indexOf(e);n.splice(r,1)}function Zd(t,e){if(t.length<=ht)return;let n=ht+e,r=t[n];if(r){let i=r[Dc];i!==null&&i!==t&&eI(i,r),e>0&&(t[n-1][Tt]=r[Tt]);let s=ic(t,ht+e);bR(r[j],r);let o=s[Ei];o!==null&&o.detachView(s[j]),r[Fe]=null,r[Tt]=null,r[C]&=-129}return r}function tI(t,e){if(!(e[C]&256)){let n=e[Re];n.destroyNode&&Pc(t,e,n,3,null,null),AR(e)}}function Pd(t,e){if(e[C]&256)return;let n=G(null);try{e[C]&=-129,e[C]|=256,e[fr]&&d_(e[fr]),PR(t,e),NR(t,e),e[j].type===1&&e[Re].destroy();let r=e[Dc];if(r!==null&&pn(e[Fe])){r!==e[Fe]&&eI(r,e);let i=e[Ei];i!==null&&i.detachView(t)}dR(e)}finally{G(n)}}function NR(t,e){let n=t.cleanup,r=e[Rs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Rs]=null);let i=e[kn];if(i!==null){e[kn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function PR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ms)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ft(4,a,c);try{c.call(a)}finally{Ft(5,a,c)}}else{Ft(4,i,s);try{s.call(i)}finally{Ft(5,i,s)}}}}}function MR(t,e,n){return kR(t,e.parent,n)}function kR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[fn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Vt.None||s===Vt.Emulated)return null}return pt(r,n)}}function pc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function nI(t,e,n){t.appendChild(e,n)}function hv(t,e,n,r,i){r!==null?pc(t,e,n,r,i):nI(t,e,n)}function OR(t,e,n,r){t.removeChild(e,n,r)}function zh(t,e){return t.parentNode(e)}function FR(t,e){return t.nextSibling(e)}function LR(t,e,n){return UR(t,e,n)}function VR(t,e,n){return t.type&40?pt(t,n):null}var UR=VR,fv;function Wh(t,e,n,r){let i=MR(t,r,e),s=e[Re],o=r.parent||e[St],a=LR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)hv(s,i,n[c],a,!1);else hv(s,i,n,a,!1);fv!==void 0&&fv(s,r,e,n,i)}function ec(t,e){if(e!==null){let n=e.type;if(n&3)return pt(e,t);if(n&4)return Xd(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ec(t,r);{let i=t[e.index];return pn(i)?Xd(-1,i):Bt(i)}}else{if(n&32)return qh(e,t)()||Bt(t[e.index]);{let r=rI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ps(t[Ut]);return ec(i,r)}else return ec(t,e.next)}}}return null}function rI(t,e){if(e!==null){let r=t[Ut][St],i=e.projection;return r.projection[i]}return null}function Xd(t,e){let n=ht+t+1;if(n<e.length){let r=e[n],i=r[j].firstChild;if(i!==null)return ec(r,i)}return e[pr]}function jR(t,e,n){let r=zh(t,e);r&&OR(t,r,e,n)}function Gh(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&mr(Bt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Gh(t,e,n.child,r,i,s,!1),mi(e,t,i,a,s);else if(c&32){let u=qh(n,r),l;for(;l=u();)mi(e,t,i,l,s);mi(e,t,i,a,s)}else c&16?BR(t,e,r,n,i,s):mi(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Pc(t,e,n,r,i,s){Gh(n,r,t.firstChild,e,i,s,!1)}function BR(t,e,n,r,i,s){let o=n[Ut],c=o[St].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];mi(e,t,i,l,s)}else{let u=c,l=o[Fe];jw(r)&&(u.flags|=128),Gh(t,e,u,l,i,s,!0)}}function $R(t,e,n,r,i){let s=n[pr],o=Bt(n);s!==o&&mi(e,t,r,s,i);for(let a=ht;a<n.length;a++){let c=n[a];Pc(c[j],c,t,e,r,s)}}function HR(t,e,n){t.setAttribute(e,"style",n)}function iI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function sI(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ud(t,e,r),i!==null&&iI(t,e,i),s!==null&&HR(t,e,s)}var jn={};function fe(t=1){oI($t(),ne(),Ac()+t,!1)}function oI(t,e,n,r){if(!r)if((e[C]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Za(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Xa(e,s,0,n)}gr(n)}function ye(t,e=M.Default){let n=ne();if(n===null)return k(t,e);let r=gt();return kw(r,n,dt(t),e)}function aI(t,e,n,r,i,s){let o=G(null);try{let a=null;i&Dt.SignalBased&&(a=e[r][Xr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Dt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):ow(e,a,r,s)}finally{G(o)}}function qR(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)gr(~i);else{let s=i,o=n[++r],a=n[++r];VA(o,s);let c=e[s];a(2,c)}}}finally{gr(-1)}}function Mc(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[fn]=i,d[C]=r|4|128|8|64,(u!==null||t&&t[C]&2048)&&(d[C]|=2048),hw(d),d[Fe]=d[Us]=t,d[un]=n,d[bt]=o||t&&t[bt],d[Re]=a||t&&t[Re],d[Ii]=c||t&&t[Ii]||null,d[St]=s,d[bc]=uR(),d[oc]=l,d[rw]=u,d[Ut]=e.type==2?t[Ut]:d,d}function kc(t,e,n,r,i){let s=t.data[e];if(s===null)s=zR(t,e,n,r,i),LA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=PA();s.injectorIndex=o===null?-1:o.injectorIndex}return $s(s,!0),s}function zR(t,e,n,r,i){let s=gw(),o=mw(),a=o?s:s&&s.parent,c=t.data[e]=YR(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function cI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function uI(t,e,n,r,i){let s=Ac(),o=r&2;try{gr(-1),o&&e.length>jt&&oI(t,e,jt,!1),Ft(o?2:0,i),n(r,i)}finally{gr(s),Ft(o?3:1,i)}}function lI(t,e,n){if(sw(e)){let r=G(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{G(r)}}}function dI(t,e,n){pw()&&(nx(t,e,n,pt(n,e)),(n.flags&64)===64&&yI(t,e,n))}function hI(t,e,n=pt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function fI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Kh(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Kh(t,e,n,r,i,s,o,a,c,u,l){let d=jt+r,h=d+i,f=WR(d,h),g=typeof u=="function"?u():u;return f[j]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function WR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:jn);return n}function GR(t,e,n,r){let s=r.get(yR,Ww)||n===Vt.ShadowDom,o=t.selectRootElement(e,s);return KR(o),o}function KR(t){QR(t)}var QR=()=>null;function YR(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return RA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pv(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Dt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?gv(r,n,u,a,c):gv(r,n,u,a)}return r}function gv(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function JR(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=pv(0,d.inputs,l,c,f),u=pv(1,d.outputs,l,u,g);let _=c!==null&&o!==null&&!Eh(e)?fx(c,l,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function ZR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function pI(t,e,n,r,i,s,o,a){let c=pt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Qh(t,n,l,r,i),Sc(e)&&XR(n,e.index)):e.type&3?(r=ZR(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function XR(t,e){let n=Vn(e,t);n[C]&16||(n[C]|=64)}function gI(t,e,n,r){if(pw()){let i=r===null?null:{"":-1},s=ix(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&mI(t,e,n,o,i,a),i&&sx(n,r,i)}n.mergedAttrs=Ih(n.mergedAttrs,n.attrs)}function mI(t,e,n,r,i,s){for(let u=0;u<r.length;u++)ZA(xw(n,e),t,r[u].type);ax(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=cI(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Ih(n.mergedAttrs,l.hostAttrs),cx(t,n,e,c,l),ox(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}JR(t,n,s)}function ex(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;tx(o)!=a&&o.push(a),o.push(n,r,s)}}function tx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function nx(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Sc(n)&&ux(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||xw(n,e),mr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ks(e,t,a,n);if(mr(u,e),o!==null&&hx(e,a-i,u,c,n,o),js(c)){let l=Vn(n.index,e);l[un]=ks(e,t,a,n)}}}function yI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=UA();try{gr(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Wd(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&rx(c,u)}}finally{gr(-1),Wd(o)}}function rx(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ix(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(GS(e,o.selectors,!1))if(r||(r=[]),js(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;eh(t,e,c)}else r.unshift(o),eh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function eh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function sx(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new E(-301,!1);r.push(e[i],s)}}}function ox(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;js(e)&&(n[""]=t)}}function ax(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function cx(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=hr(i.type,!0)),o=new Ms(s,js(i),ye);t.blueprint[r]=o,n[r]=o,ex(t,e,r,cI(t,n,i.hostVars,jn),i)}function ux(t,e,n){let r=pt(e,t),i=fI(n),s=t[bt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Oc(t,Mc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function lx(t,e,n,r,i,s){let o=pt(t,e);dx(e[Re],o,s,t.value,n,r,i)}function dx(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?vi(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function hx(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];aI(r,n,c,u,l,d)}}function fx(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function _I(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function vI(t,e){let n=t.contentQueries;if(n!==null){let r=G(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_w(s),a.contentQueries(2,e[o],o)}}}finally{G(r)}}}function Oc(t,e){return t[xs]?t[iv][Tt]=e:t[xs]=e,t[iv]=e,e}function th(t,e,n){_w(0);let r=G(null);try{e(t,n)}finally{G(r)}}function px(t){return t[Rs]||(t[Rs]=[])}function gx(t){return t.cleanup||(t.cleanup=[])}function wI(t,e){let n=t[Ii],r=n?n.get(ln,null):null;r&&r.handleError(e)}function Qh(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];aI(l,u,r,a,c,i)}}function II(t,e,n){let r=IA(e,t);DR(t[Re],r,n)}function mx(t,e){let n=Vn(e,t),r=n[j];yx(r,n);let i=n[fn];i!==null&&n[oc]===null&&(n[oc]=$h(i,n[Ii])),Yh(r,n,n[un])}function yx(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Yh(t,e,n){xh(e);try{let r=t.viewQuery;r!==null&&th(1,r,n);let i=t.template;i!==null&&uI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ei]?.finishViewCreation(t),t.staticContentQueries&&vI(t,e),t.staticViewQueries&&th(2,t.viewQuery,n);let s=t.components;s!==null&&_x(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[C]&=-5,Nh()}}function _x(t,e){for(let n=0;n<e.length;n++)mx(t,e[n])}function vx(t,e,n,r){let i=G(null);try{let s=e.tView,a=t[C]&4096?4096:16,c=Mc(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Dc]=u;let l=t[Ei];return l!==null&&(c[Ei]=l.createEmbeddedView(s)),Yh(s,c,n),c}finally{G(i)}}function mv(t,e){return!e||e.firstChild===null||jw(t)}function wx(t,e,n,r=!0){let i=e[j];if(RR(i,e,t,n),r){let o=Xd(n,t),a=e[Re],c=zh(a,t[pr]);c!==null&&SR(i,t[St],a,e,c,o)}let s=e[oc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function gc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Bt(s)),pn(s)&&Ix(s,r);let o=n.type;if(o&8)gc(t,e,n.child,r);else if(o&32){let a=qh(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=rI(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ps(e[Ut]);gc(c[j],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ix(t,e){for(let n=ht;n<t.length;n++){let r=t[n],i=r[j].firstChild;i!==null&&gc(r[j],r,i,e)}t[pr]!==t[fn]&&e.push(t[pr])}var EI=[];function Ex(t){return t[fr]??Cx(t)}function Cx(t){let e=EI.pop()??Object.create(Dx);return e.lView=t,e}function Tx(t){t.lView[fr]!==t&&(t.lView=null,EI.push(t))}var Dx=ie(w({},rd),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ns(t.lView)},consumerOnSignalRead(){this.lView[fr]=this}}),CI=100;function TI(t,e=!0,n=0){let r=t[bt],i=r.rendererFactory,s=!1;s||i.begin?.();try{bx(t,n)}catch(o){throw e&&wI(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bx(t,e){nh(t,e);let n=0;for(;Ah(t);){if(n===CI)throw new E(103,!1);n++,nh(t,1)}}function Sx(t,e,n,r){let i=e[C];if((i&256)===256)return;let s=!1;!s&&e[bt].inlineEffectRunner?.flush(),xh(e);let o=null,a=null;!s&&Ax(t)&&(a=Ex(e),o=u_(a));try{hw(e),OA(t.bindingStartIndex),n!==null&&uI(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&Za(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Xa(e,d,0,null),Ad(e,0)}if(Rx(e),DI(e,0),t.contentQueries!==null&&vI(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&Za(e,d)}else{let d=t.contentHooks;d!==null&&Xa(e,d,1),Ad(e,1)}qR(t,e);let u=t.components;u!==null&&SI(e,u,0);let l=t.viewQuery;if(l!==null&&th(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&Za(e,d)}else{let d=t.viewHooks;d!==null&&Xa(e,d,2),Ad(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Sd]){for(let d of e[Sd])d();e[Sd]=null}s||(e[C]&=-73)}catch(c){throw Ns(e),c}finally{a!==null&&(l_(a,o),Tx(a)),Nh()}}function Ax(t){return t.type!==2}function DI(t,e){for(let n=$w(t);n!==null;n=Hw(n))for(let r=ht;r<n.length;r++){let i=n[r];bI(i,e)}}function Rx(t){for(let e=$w(t);e!==null;e=Hw(e)){if(!(e[C]&Dh.HasTransplantedViews))continue;let n=e[cc];for(let r=0;r<n.length;r++){let i=n[r],s=i[Fe];TA(i)}}}function xx(t,e,n){let r=Vn(e,t);bI(r,n)}function bI(t,e){Sh(t)&&nh(t,e)}function nh(t,e){let r=t[j],i=t[C],s=t[fr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&id(s)),s&&(s.dirty=!1),t[C]&=-9217,o)Sx(r,t,r.template,t[un]);else if(i&8192){DI(t,1);let a=r.components;a!==null&&SI(t,a,1)}}function SI(t,e,n){for(let r=0;r<e.length;r++)xx(t,e[r],n)}function Jh(t){for(t[bt].changeDetectionScheduler?.notify();t;){t[C]|=64;let e=Ps(t);if(pA(t)&&!e)return t;t=e}return null}var yr=class{get rootNodes(){let e=this._lView,n=e[j];return gc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[un]}set context(e){this._lView[un]=e}get destroyed(){return(this._lView[C]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Fe];if(pn(e)){let n=e[ac],r=n?n.indexOf(this):-1;r>-1&&(Zd(e,r),ic(n,r))}this._attachedToViewContainer=!1}tI(this._lView[j],this._lView)}onDestroy(e){fw(this._lView,e)}markForCheck(){Jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[C]&=-129}reattach(){zd(this._lView),this._lView[C]|=128}detectChanges(){this._lView[C]|=1024,TI(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Xw(this._lView[j],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=e,zd(this._lView)}},Fc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Mx;let t=e;return t})(),Nx=Fc,Px=class extends Nx{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=vx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new yr(i)}};function Mx(){return kx(gt(),ne())}function kx(t,e){return t.type&4?new Px(e,t,Rc(t,e)):null}var N3=new RegExp(`^(\\d+)*(${gR}|${pR})*(.*)`);var Ox=()=>null;function yv(t,e){return Ox(t,e)}var rh=class{},ih=class{},mc=class{};function Fx(t){let e=Error(`No component factory found for ${Ge(t)}.`);return e[Lx]=t,e}var Lx="ngComponent";var sh=class{resolveComponentFactory(e){throw Fx(e)}},Lc=(()=>{let e=class e{};e.NULL=new sh;let t=e;return t})(),Os=class{},Vc=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Vx();let t=e;return t})();function Vx(){let t=ne(),e=gt(),n=Vn(e.index,t);return(lr(n)?n:t)[Re]}var Ux=(()=>{let e=class e{};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Md={};var _v=new Set;function Zh(t){_v.has(t)||(_v.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function vv(...t){}function jx(){let t=typeof ur.requestAnimationFrame=="function",e=ur[t?"requestAnimationFrame":"setTimeout"],n=ur[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var X=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ct(!1),this.onMicrotaskEmpty=new Ct(!1),this.onStable=new Ct(!1),this.onError=new Ct(!1),typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=jx().nativeRequestAnimationFrame,Hx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new E(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Bx,vv,vv);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Bx={};function Xh(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $x(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ur,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,oh(t),t.isCheckStableRunning=!0,Xh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),oh(t))}function Hx(t){let e=()=>{$x(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(qx(a))return n.invokeTask(i,s,o,a);try{return wv(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Iv(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return wv(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),Iv(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,oh(t),Xh(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function oh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function wv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Iv(t){t._nesting--,Xh(t)}function qx(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var AI=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=I({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function ah(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=K_(i,a);else if(s==2){let c=a,u=e[++o];r=K_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var yc=class extends Lc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=On(e);return new Ci(n,this.ngModule)}};function Ev(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function zx(t){let e=t.toLowerCase();return e==="svg"?lw:e==="math"?_A:null}var ch=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ec(r);let i=this.injector.get(e,Md,r);return i!==Md||n===Md?i:this.parentInjector.get(e,n,r)}},Ci=class extends mc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Ev(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Ev(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=JS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=G(null);try{i=i||this.ngModule;let o=i instanceof ft?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ch(e,o):e,c=a.get(Os,null);if(c===null)throw new E(407,!1);let u=a.get(Ux,null),l=a.get(AI,null),d=a.get(rh,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?GR(f,r,this.componentDef.encapsulation,a):Zw(f,g,zx(g)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let $=null;_!==null&&($=$h(_,a,!0));let Se=Kh(0,null,null,1,0,null,null,null,null,null,null),se=Mc(null,Se,null,P,null,null,h,f,a,null,$);xh(se);let qe,sn;try{let je=this.componentDef,on,_s=null;je.findHostDirectiveDefs?(on=[],_s=new Map,je.findHostDirectiveDefs(je,on,_s),on.push(je)):on=[je];let vs=Wx(se,_),nd=Gx(vs,_,je,on,se,h,f);sn=dw(Se,jt),_&&Yx(f,je,_,r),n!==void 0&&Jx(sn,this.ngContentSelectors,n),qe=Qx(nd,je,on,_s,se,[Zx]),Yh(Se,se,null)}finally{Nh()}return new uh(this.componentType,qe,Rc(sn,se),se,sn)}finally{G(s)}}},uh=class extends ih{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new yr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Qh(s[j],s,i,e,n),this.previousInputValues.set(e,n);let o=Vn(this._tNode.index,s);Jh(o)}}get injector(){return new dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Wx(t,e){let n=t[j],r=jt;return t[r]=e,kc(n,r,2,"#host",null)}function Gx(t,e,n,r,i,s,o){let a=i[j];Kx(r,t,e,o);let c=null;e!==null&&(c=$h(e,i[Ii]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=Mc(i,fI(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&eh(a,t,r.length-1),Oc(i,d),i[t.index]=d}function Kx(t,e,n,r){for(let i of t)e.mergedAttrs=Ih(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ah(e,e.mergedAttrs,!0),n!==null&&sI(r,n,e))}function Qx(t,e,n,r,i,s){let o=gt(),a=i[j],c=pt(o,i);mI(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ks(i,a,d,o);mr(h,i)}yI(a,i,o),c&&mr(c,i);let u=ks(i,a,o.directiveStart+o.componentOffset,o);if(t[un]=i[un]=u,s!==null)for(let l of s)l(u,e);return lI(a,o,i),u}function Yx(t,e,n,r){if(r)Ud(t,n,["ng-version","17.3.5"]);else{let{attrs:i,classes:s}=ZS(e.selectors[0]);i&&Ud(t,n,i),s&&s.length>0&&iI(t,n,s.join(" "))}}function Jx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Zx(){let t=gt();Oh(ne()[j],t)}var bi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Xx;let t=e;return t})();function Xx(){let t=gt();return tN(t,ne())}var eN=bi,RI=class extends eN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Rc(this._hostTNode,this._hostLView)}get injector(){return new dr(this._hostTNode,this._hostLView)}get parentInjector(){let e=Fh(this._hostTNode,this._hostLView);if(Sw(e)){let n=dc(e,this._hostLView),r=lc(e),i=n[j].data[r+8];return new dr(i,n)}else return new dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Cv(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ht}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=yv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,mv(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!fA(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new Ci(On(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?u:this.parentInjector).get(ft,null);_&&(s=_)}let l=On(c.componentType??{}),d=yv(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,mv(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(CA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Fe],u=new RI(c,c[St],c[Fe]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return wx(o,i,s,r),e.attachToViewContainerRef(),Bv(kd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Cv(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Zd(this._lContainer,n);r&&(ic(kd(this._lContainer),n),tI(r[j],r))}detach(e){let n=this._adjustIndex(e,-1),r=Zd(this._lContainer,n);return r&&ic(kd(this._lContainer),n)!=null?new yr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Cv(t){return t[ac]}function kd(t){return t[ac]||(t[ac]=[])}function tN(t,e){let n,r=e[t.index];return pn(r)?n=r:(n=_I(r,e,null,t),e[t.index]=n,Oc(e,n)),rN(n,e,t,r),new RI(n,t,e)}function nN(t,e){let n=t[Re],r=n.createComment(""),i=pt(e,t),s=zh(n,i);return pc(n,s,r,FR(n,i),!1),r}var rN=oN,iN=()=>!1;function sN(t,e,n){return iN(t,e,n)}function oN(t,e,n,r){if(t[pr])return;let i;n.type&8?i=Bt(r):i=nN(e,n),t[pr]=i}function xI(t,e){Zh("NgSignals");let n=y_(t),r=n[Xr];return e?.equal&&(r.equal=e.equal),n.set=i=>sd(r,i),n.update=i=>__(r,i),n.asReadonly=aN.bind(n),n}function aN(){let t=this[Xr];if(t.readonlyFn===void 0){let e=()=>this();e[Xr]=t,t.readonlyFn=e}return t.readonlyFn}function ef(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Fn=class{},Fs=class{};var lh=class extends Fn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yc(this);let i=Jv(e);this._bootstrapComponents=Jw(i.bootstrap),this._r3Injector=Lw(e,n,[{provide:Fn,useValue:this},{provide:Lc,useValue:this.componentFactoryResolver},...r],Ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},dh=class extends Fs{constructor(e){super(),this.moduleType=e}create(e){return new lh(this.moduleType,e,[])}};var _c=class extends Fn{constructor(e){super(),this.componentFactoryResolver=new yc(this),this.instance=null;let n=new As([...e.providers,{provide:Fn,useValue:this},{provide:Lc,useValue:this.componentFactoryResolver}],e.parent||Th(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tf(t,e,n=null){return new _c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Uc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new he(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NI(t){return uN(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function cN(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function uN(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function lN(t,e,n){return t[e]=n}function Ti(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function dN(t,e,n,r){let i=Ti(t,e,n);return Ti(t,e+1,r)||i}function hN(t){return(t.flags&32)===32}function fN(t,e,n,r,i,s,o,a,c){let u=e.consts,l=kc(e,t,4,o||null,uc(u,a));gI(e,n,l,uc(u,c)),Oh(e,l);let d=l.tView=Kh(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Ir(t,e,n,r,i,s,o,a){let c=ne(),u=$t(),l=t+jt,d=u.firstCreatePass?fN(l,u,c,e,n,r,i,s,o):u.data[l];$s(d,!1);let h=pN(u,c,d,t);Mh()&&Wh(u,c,h,d),mr(h,c);let f=_I(h,c,h,d);return c[l]=f,Oc(c,f),sN(f,d,c),bh(d)&&dI(u,c,d),o!=null&&hI(c,d,a),Ir}var pN=gN;function gN(t,e,n,r){return kh(!0),e[Re].createComment("")}function nf(t,e,n,r){let i=ne(),s=Rh();if(Ti(i,s,e)){let o=$t(),a=Ph();lx(a,i,t,e,n,r)}return nf}function PI(t,e,n,r){return Ti(t,Rh(),n)?e+vi(n)+r:jn}function mN(t,e,n,r,i,s){let o=kA(),a=dN(t,o,n,i);return FA(2),a?e+vi(n)+r+vi(i)+s:jn}function Bn(t,e,n){let r=ne(),i=Rh();if(Ti(r,i,e)){let s=$t(),o=Ph();pI(s,o,r,t,e,r[Re],n,!1)}return Bn}function Tv(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Qh(t,n,s[o],o,r)}function yN(t,e,n,r,i,s){let o=e.consts,a=uc(o,i),c=kc(e,t,2,r,a);return gI(e,n,c,uc(o,s)),c.attrs!==null&&ah(c,c.attrs,!1),c.mergedAttrs!==null&&ah(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function N(t,e,n,r){let i=ne(),s=$t(),o=jt+t,a=i[Re],c=s.firstCreatePass?yN(o,s,i,e,n,r):s.data[o],u=_N(s,i,c,a,e,t);i[o]=u;let l=bh(c);return $s(c,!0),sI(a,u,c),!hN(c)&&Mh()&&Wh(s,i,u,c),bA()===0&&mr(u,i),SA(),l&&(dI(s,i,c),lI(s,c,i)),r!==null&&hI(i,c),N}function V(){let t=gt();mw()?MA():(t=t.parent,$s(t,!1));let e=t;xA(e)&&NA(),AA();let n=$t();return n.firstCreatePass&&(Oh(n,t),sw(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&WA(e)&&Tv(n,e,ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GA(e)&&Tv(n,e,ne(),e.stylesWithoutHost,!1),V}function oe(t,e,n,r){return N(t,e,n,r),V(),oe}var _N=(t,e,n,r,i,s)=>(kh(!0),Zw(r,i,$A()));var vc="en-US";var vN=vc;function wN(t){typeof t=="string"&&(vN=t.toLowerCase().replace(/_/g,"-"))}function zs(t,e,n,r){let i=ne(),s=$t(),o=gt();return EN(s,i,i[Re],o,t,e,r),zs}function IN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Rs],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function EN(t,e,n,r,i,s,o){let a=bh(r),u=t.firstCreatePass&&gx(t),l=e[un],d=px(e),h=!0;if(r.type&3||o){let _=pt(r,e),P=o?o(_):_,$=d.length,Se=o?qe=>o(Bt(qe[r.index])):r.index,se=null;if(!o&&a&&(se=IN(t,e,i,r.index)),se!==null){let qe=se.__ngLastListenerFn__||se;qe.__ngNextListenerFn__=s,se.__ngLastListenerFn__=s,h=!1}else{s=bv(r,e,l,s,!1);let qe=n.listen(P,i,s);d.push(s,qe),u&&u.push(i,Se,$,$+1)}}else s=bv(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let _=g.length;if(_)for(let P=0;P<_;P+=2){let $=g[P],Se=g[P+1],sn=e[$][Se].subscribe(s),je=d.length;d.push(s,sn),u&&u.push(i,r.index,je,-(je+1))}}}function Dv(t,e,n,r){let i=G(null);try{return Ft(6,e,n),n(r)!==!1}catch(s){return wI(t,s),!1}finally{Ft(7,e,n),G(i)}}function bv(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Vn(t.index,e):e;Jh(a);let c=Dv(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=Dv(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function rf(t,e,n){return Si(t,"",e,"",n),rf}function Si(t,e,n,r,i){let s=ne(),o=PI(s,e,n,r);if(o!==jn){let a=$t(),c=Ph();pI(a,c,s,t,o,s[Re],i,!1)}return Si}function CN(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function ae(t,e=""){let n=ne(),r=$t(),i=t+jt,s=r.firstCreatePass?kc(r,i,1,e,null):r.data[i],o=TN(r,n,s,e,t);n[i]=o,Mh()&&Wh(r,n,o,s),$s(s,!1)}var TN=(t,e,n,r,i)=>(kh(!0),TR(e[Re],r));function it(t){return MI("",t,""),it}function MI(t,e,n){let r=ne(),i=PI(r,t,e,n);return i!==jn&&II(r,Ac(),i),MI}function sf(t,e,n,r,i){let s=ne(),o=mN(s,t,e,n,r,i);return o!==jn&&II(s,Ac(),o),sf}var DN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=ew(!1,r.type),s=i.length>0?tf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(k(ft))});let t=e;return t})();function Qe(t){Zh("NgStandalone"),t.getStandaloneInjector=e=>e.get(DN).getOrCreateStandaloneInjector(t)}function kI(t,e,n,r){return OI(ne(),yw(),t,e,n,r)}function bN(t,e){let n=t[e];return n===jn?void 0:n}function OI(t,e,n,r,i,s){let o=e+n;return Ti(t,o,i)?lN(t,o+1,s?r.call(s,i):r(i)):bN(t,o+1)}function FI(t,e){let n=$t(),r,i=t+jt;n.firstCreatePass?(r=SN(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=hr(r.type,!0)),o,a=We(ye);try{let c=hc(!1),u=s();return hc(c),CN(n,ne(),i,u),u}finally{We(a)}}function SN(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function LI(t,e,n){let r=t+jt,i=ne(),s=EA(i,r);return AN(i,r)?OI(i,yw(),e,s.transform,n,s):s.transform(n)}function AN(t,e){return t[j].data[e].pure}var Ln=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},VI=new Ln("17.3.5"),jc=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var UI=new x("");function Ai(t){return!!t&&typeof t.then=="function"}function of(t){return!!t&&typeof t.subscribe=="function"}var jI=new x(""),BI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=v(jI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Ai(o))r.push(o);else if(of(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),af=new x("");function RN(){m_(()=>{throw new E(600,!1)})}function xN(t){return t.isBoundToModule}function NN(t,e,n){try{let r=n();return Ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ws=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=v(Vw),this.afterRenderEffectManager=v(AI),this.externalTestViews=new Set,this.beforeRender=new Oe,this.afterTick=new Oe,this.componentTypes=[],this.components=[],this.isStable=v(Uc).hasPendingTasks.pipe(z(r=>!r)),this._injector=v(ft)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof mc;if(!this._injector.get(BI).done){let f=!s&&Yv(r),g=!1;throw new E(405,g)}let a;s?a=r:a=this._injector.get(Lc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=xN(a)?void 0:this._injector.get(Fn),u=i||a.selector,l=a.create(At.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(UI,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Od(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new E(101,!1);let i=G(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,G(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===CI)throw new E(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)PN(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>hh(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>hh(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Od(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(af,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Od(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new E(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Od(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function PN(t,e,n){!e&&!hh(t)||MN(t,n,e)}function hh(t){return Ah(t)}function MN(t,e,n){let r;n?(r=0,t[C]|=1024):t[C]&64?r=0:r=1,TI(t,e,r)}var fh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},cf=(()=>{let e=class e{compileModuleSync(r){return new dh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Jv(r),o=Jw(s.declarations).reduce((a,c)=>{let u=On(c);return u&&a.push(new Ci(u)),a},[]);return new fh(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var kN=(()=>{let e=class e{constructor(){this.zone=v(X),this.applicationRef=v(Ws)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ON(t){return[{provide:X,useFactory:t},{provide:wi,multi:!0,useFactory:()=>{let e=v(kN,{optional:!0});return()=>e.initialize()}},{provide:wi,multi:!0,useFactory:()=>{let e=v(UN);return()=>{e.initialize()}}},{provide:Vw,useFactory:FN}]}function FN(){let t=v(X),e=v(ln);return n=>t.runOutsideAngular(()=>e.handleError(n))}function LN(t){let e=ON(()=>new X(VN(t)));return Cc([[],e])}function VN(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var UN=(()=>{let e=class e{constructor(){this.subscription=new de,this.initialized=!1,this.zone=v(X),this.pendingTasks=v(Uc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{X.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jN(){return typeof $localize<"u"&&$localize.locale||vc}var uf=new x("",{providedIn:"root",factory:()=>v(uf,M.Optional|M.SkipSelf)||jN()});var $I=new x("");var tc=null;function BN(t=[],e){return At.create({name:e,providers:[{provide:Tc,useValue:"platform"},{provide:$I,useValue:new Set([()=>tc=null])},...t]})}function $N(t=[]){if(tc)return tc;let e=BN(t);return tc=e,RN(),HN(e),e}function HN(t){t.get(jh,null)?.forEach(n=>n())}var Ri=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qN;let t=e;return t})();function qN(t){return zN(gt(),ne(),(t&16)===16)}function zN(t,e,n){if(Sc(t)&&!n){let r=Vn(t.index,e);return new yr(r,r)}else if(t.type&47){let r=e[Ut];return new yr(r,e)}return null}var ph=class{constructor(){}supports(e){return NI(e)}create(e){return new gh(e)}},WN=(t,e)=>e,gh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||WN}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Sv(r,i,s)?n:r,a=Sv(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!NI(e))throw new E(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,cN(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new mh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new wc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new wc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},mh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},wc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new yh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Sv(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function Av(){return new lf([new ph])}var lf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||Av()),deps:[[e,new jv,new Be]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new E(901,!1)}};e.\u0275prov=I({token:e,providedIn:"root",factory:Av});let t=e;return t})();function HI(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=$N(r),s=[LN(),...n||[]],a=new _c({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(X);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(ln,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get($I);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),NN(u,c,()=>{let f=a.get(BI);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(uf,vc);wN(g||vc);let _=a.get(Ws);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function Gs(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function df(t){let e=G(null);try{return t()}finally{G(e)}}function qI(t){let e=On(t);if(!e)return null;let n=new Ci(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var QI=null;function xi(){return QI}function YI(t){QI??=t}var Bc=class{};var mt=new x(""),JI=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(GN),providedIn:"platform"});let t=e;return t})();var GN=(()=>{let e=class e extends JI{constructor(){super(),this._doc=v(mt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function ZI(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function zI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Er(t){return t&&t[0]!=="?"?"?"+t:t}var Ni=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(XI),providedIn:"root"});let t=e;return t})(),KN=new x(""),XI=(()=>{let e=class e extends Ni{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??v(mt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ZI(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Er(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Er(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(k(JI),k(KN,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ks=(()=>{let e=class e{constructor(r){this._subject=new Ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=JN(zI(WI(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Er(i))}normalize(r){return e.stripTrailingSlash(YN(this._basePath,WI(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Er(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Er,e.joinWithSlash=ZI,e.stripTrailingSlash=zI,e.\u0275fac=function(i){return new(i||e)(k(Ni))},e.\u0275prov=I({token:e,factory:()=>QN(),providedIn:"root"});let t=e;return t})();function QN(){return new Ks(k(Ni))}function YN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function WI(t){return t.replace(/\/index.html$/,"")}function JN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function eE(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var hf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Hc=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new hf(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),GI(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);GI(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ye(bi),ye(Fc),ye(lf))},e.\u0275dir=Di({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function GI(t,e){t.context.$implicit=e.item}var tE=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new ff,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){KI("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){KI("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ye(bi),ye(Fc))},e.\u0275dir=Di({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),ff=class{constructor(){this.$implicit=null,this.ngIf=null}};function KI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ge(e)}'.`)}function ZN(t,e){return new E(2100,!1)}var pf=class{createSubscription(e,n){return df(()=>e.subscribe({next:n,error:r=>{throw r}}))}dispose(e){df(()=>e.unsubscribe())}},gf=class{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}},XN=new gf,eP=new pf,nE=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Ai(r))return XN;if(of(r))return eP;throw ZN(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ye(Ri,16))},e.\u0275pipe=Gv({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var rE="browser",tP="server";function mf(t){return t===tP}var $c=class{};var vf=class extends Bc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wf=class t extends vf{static makeCurrent(){YI(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=rP();return n==null?null:iP(n)}resetBaseElement(){Qs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eE(document.cookie,e)}},Qs=null;function rP(){return Qs=Qs||document.querySelector("base"),Qs?Qs.getAttribute("href"):null}function iP(t){return new URL(t,document.baseURI).pathname}var sP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),If=new x(""),aE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new E(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(k(If),k(X))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),qc=class{constructor(e){this._doc=e}},yf="ng-app-id",cE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=mf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${yf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(yf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(yf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(k(mt),k(Uh),k(Bh,8),k(Un))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),_f={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Cf=/%COMP%/g,uE="%COMP%",oP=`_nghost-${uE}`,aP=`_ngcontent-${uE}`,cP=!0,uP=new x("",{providedIn:"root",factory:()=>cP});function lP(t){return aP.replace(Cf,t)}function dP(t){return oP.replace(Cf,t)}function lE(t,e){return e.map(n=>n.replace(Cf,t))}var iE=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=mf(c),this.defaultRenderer=new Ys(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Vt.ShadowDom&&(i=ie(w({},i),{encapsulation:Vt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof zc?s.applyToHost(r):s instanceof Js&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Vt.Emulated:o=new zc(u,l,i,this.appId,d,a,c,h);break;case Vt.ShadowDom:return new Ef(u,l,r,i,a,c,this.nonce,h);default:o=new Js(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(k(aE),k(cE),k(Uh),k(uP),k(mt),k(Un),k(X),k(Bh))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ys=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_f[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(sE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=_f[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=_f[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(wr.DashCase|wr.Important)?e.style.setProperty(n,r,i&wr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&wr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function sE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ef=class extends Ys{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=lE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Js=class extends Ys{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?lE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zc=class extends Js{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=lP(u),this.hostAttr=dP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},hP=(()=>{let e=class e extends qc{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(k(mt))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),oE=["alt","control","meta","shift"],fP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},gP=(()=>{let e=class e extends qc{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),oE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=fP[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),oE.forEach(a=>{if(a!==s){let c=pP[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(k(mt))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function dE(t,e){return HI(w({rootComponent:t},mP(e)))}function mP(t){return{appProviders:[...IP,...t?.providers??[]],platformProviders:wP}}function yP(){wf.makeCurrent()}function _P(){return new ln}function vP(){return zw(document),document}var wP=[{provide:Un,useValue:rE},{provide:jh,useValue:yP,multi:!0},{provide:mt,useFactory:vP,deps:[]}];var IP=[{provide:Tc,useValue:"root"},{provide:ln,useFactory:_P,deps:[]},{provide:If,useClass:hP,multi:!0,deps:[mt,X,Un]},{provide:If,useClass:gP,multi:!0,deps:[mt]},iE,cE,aE,{provide:Os,useExisting:iE},{provide:$c,useClass:sP,deps:[]},[]];var hE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(k(mt))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var A="primary",fo=Symbol("RouteTitle"),Af=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Fi(t){return new Af(t)}function CP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function TP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ht(t[n],e[n]))return!1;return!0}function Ht(t,e){let n=t?Rf(t):void 0,r=e?Rf(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!vE(t[i],e[i]))return!1;return!0}function Rf(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function vE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function wE(t){return t.length>0?t[t.length-1]:null}function zn(t){return vd(t)?t:Ai(t)?pe(Promise.resolve(t)):S(t)}var DP={exact:EE,subset:CE},IE={exact:bP,subset:SP,ignored:()=>!0};function fE(t,e,n){return DP[n.paths](t.root,e.root,n.matrixParams)&&IE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function bP(t,e){return Ht(t,e)}function EE(t,e,n){if(!Tr(t.segments,e.segments)||!Kc(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!EE(t.children[r],e.children[r],n))return!1;return!0}function SP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>vE(t[n],e[n]))}function CE(t,e,n){return TE(t,e,e.segments,n)}function TE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Tr(i,n)||e.hasChildren()||!Kc(i,n,r))}else if(t.segments.length===n.length){if(!Tr(t.segments,n)||!Kc(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!CE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Tr(t.segments,i)||!Kc(t.segments,i,r)||!t.children[A]?!1:TE(t.children[A],e,s,r)}}function Kc(t,e,n){return e.every((r,i)=>IE[n](t[i].parameters,r.parameters))}var $n=class{constructor(e=new Y([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){return xP.serialize(this)}},Y=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qc(this)}},Cr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Fi(this.parameters),this._parameterMap}toString(){return bE(this)}};function AP(t,e){return Tr(t,e)&&t.every((n,r)=>Ht(n.parameters,e[r].parameters))}function Tr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function RP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===A&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==A&&(n=n.concat(e(i,r)))}),n}var tp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>new Jc,providedIn:"root"});let t=e;return t})(),Jc=class{parse(e){let n=new Nf(e);return new $n(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Zs(e.root,!0)}`,r=MP(e.queryParams),i=typeof e.fragment=="string"?`#${NP(e.fragment)}`:"";return`${n}${r}${i}`}},xP=new Jc;function Qc(t){return t.segments.map(e=>bE(e)).join("/")}function Zs(t,e){if(!t.hasChildren())return Qc(t);if(e){let n=t.children[A]?Zs(t.children[A],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==A&&r.push(`${i}:${Zs(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=RP(t,(r,i)=>i===A?[Zs(t.children[A],!1)]:[`${i}:${Zs(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[A]!=null?`${Qc(t)}/${n[0]}`:`${Qc(t)}/(${n.join("//")})`}}function DE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wc(t){return DE(t).replace(/%3B/gi,";")}function NP(t){return encodeURI(t)}function xf(t){return DE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yc(t){return decodeURIComponent(t)}function pE(t){return Yc(t.replace(/\+/g,"%20"))}function bE(t){return`${xf(t.path)}${PP(t.parameters)}`}function PP(t){return Object.entries(t).map(([e,n])=>`;${xf(e)}=${xf(n)}`).join("")}function MP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Wc(n)}=${Wc(i)}`).join("&"):`${Wc(n)}=${Wc(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var kP=/^[^\/()?;#]+/;function Tf(t){let e=t.match(kP);return e?e[0]:""}var OP=/^[^\/()?;=#]+/;function FP(t){let e=t.match(OP);return e?e[0]:""}var LP=/^[^=?&#]+/;function VP(t){let e=t.match(LP);return e?e[0]:""}var UP=/^[^&#]+/;function jP(t){let e=t.match(UP);return e?e[0]:""}var Nf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Y([],{}):new Y([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[A]=new Y(e,n)),r}parseSegment(){let e=Tf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(e),new Cr(Yc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=FP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Tf(this.remaining);i&&(r=i,this.capture(r))}e[Yc(n)]=Yc(r)}parseQueryParam(e){let n=VP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=jP(this.remaining);o&&(r=o,this.capture(r))}let i=pE(n),s=pE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Tf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=A);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[A]:new Y([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new E(4011,!1)}};function SE(t){return t.segments.length>0?new Y([],{[A]:t}):t}function AE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=AE(i);if(r===A&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Y(t.segments,e);return BP(n)}function BP(t){if(t.numberOfChildren===1&&t.children[A]){let e=t.children[A];return new Y(t.segments.concat(e.segments),e.children)}return t}function Li(t){return t instanceof $n}function $P(t,e,n=null,r=null){let i=RE(t);return xE(i,e,n,r)}function RE(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new Y(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=SE(r);return e??i}function xE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Df(i,i,i,n,r);let s=HP(e);if(s.toRoot())return Df(i,i,new Y([],{}),n,r);let o=qP(s,i,t),a=o.processChildren?to(o.segmentGroup,o.index,s.commands):PE(o.segmentGroup,o.index,s.commands);return Df(i,o.segmentGroup,a,n,r)}function Zc(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function io(t){return typeof t=="object"&&t!=null&&t.outlets}function Df(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=NE(t,e,n);let a=SE(AE(o));return new $n(a,s,i)}function NE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=NE(s,e,n)}),new Y(t.segments,r)}var Xc=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Zc(r[0]))throw new E(4003,!1);let i=r.find(io);if(i&&i!==wE(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function HP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Xc(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Xc(n,e,r)}var ki=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qP(t,e,n){if(t.isAbsolute)return new ki(e,!0,0);if(!n)return new ki(e,!1,NaN);if(n.parent===null)return new ki(n,!0,0);let r=Zc(t.commands[0])?0:1,i=n.segments.length-1+r;return zP(n,i,t.numberOfDoubleDots)}function zP(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new ki(r,!1,i-s)}function WP(t){return io(t[0])?t[0].outlets:{[A]:t}}function PE(t,e,n){if(t??=new Y([],{}),t.segments.length===0&&t.hasChildren())return to(t,e,n);let r=GP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Y(t.segments.slice(0,r.pathIndex),{});return s.children[A]=new Y(t.segments.slice(r.pathIndex),t.children),to(s,0,i)}else return r.match&&i.length===0?new Y(t.segments,{}):r.match&&!t.hasChildren()?Pf(t,e,n):r.match?to(t,0,i):Pf(t,e,n)}function to(t,e,n){if(n.length===0)return new Y(t.segments,{});{let r=WP(n),i={};if(Object.keys(r).some(s=>s!==A)&&t.children[A]&&t.numberOfChildren===1&&t.children[A].segments.length===0){let s=to(t.children[A],e,n);return new Y(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=PE(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Y(t.segments,i)}}function GP(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(io(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!mE(c,u,o))return s;r+=2}else{if(!mE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Pf(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(io(s)){let c=KP(s.outlets);return new Y(r,c)}if(i===0&&Zc(n[0])){let c=t.segments[e];r.push(new Cr(c.path,gE(n[0]))),i++;continue}let o=io(s)?s.outlets[A]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Zc(a)?(r.push(new Cr(o,gE(a))),i+=2):(r.push(new Cr(o,{})),i++)}return new Y(r,{})}function KP(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Pf(new Y([],{}),0,r))}),e}function gE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function mE(t,e,n){return t==n.path&&Ht(e,n.parameters)}var no="imperative",xe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(xe||{}),yt=class{constructor(e,n){this.id=e,this.url=n}},so=class extends yt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=xe.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Hn=class extends yt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=xe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ot=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ot||{}),Mf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Mf||{}),qn=class extends yt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=xe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Dr=class extends yt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=xe.NavigationSkipped}},oo=class extends yt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=xe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},eu=class extends yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=xe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kf=class extends yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=xe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Of=class extends yt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=xe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ff=class extends yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=xe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lf=class extends yt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=xe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vf=class{constructor(e){this.route=e,this.type=xe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Uf=class{constructor(e){this.route=e,this.type=xe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jf=class{constructor(e){this.snapshot=e,this.type=xe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bf=class{constructor(e){this.snapshot=e,this.type=xe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$f=class{constructor(e){this.snapshot=e,this.type=xe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hf=class{constructor(e){this.snapshot=e,this.type=xe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ao=class{},co=class{constructor(e){this.url=e}};var qf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ou,this.attachRef=null}},ou=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new qf,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=zf(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=zf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Wf(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Wf(e,this._root).map(n=>n.value)}};function zf(t,e){if(t===e.value)return e;for(let n of e.children){let r=zf(t,n);if(r)return r}return null}function Wf(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Wf(t,n);if(r.length)return r.unshift(e),r}return[]}var st=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Mi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var nu=class extends tu{constructor(e,n){super(e),this.snapshot=n,rp(this,e)}toString(){return this.snapshot.toString()}};function ME(t){let e=QP(t),n=new he([new Cr("",{})]),r=new he({}),i=new he({}),s=new he({}),o=new he(""),a=new gn(n,r,s,o,i,A,t,e.root);return a.snapshot=e.root,new nu(new st(a,[]),e)}function QP(t){let e={},n={},r={},i="",s=new uo([],e,r,i,n,A,t,null,{});return new ru("",new st(s,[]))}var gn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(z(u=>u[fo]))??S(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>Fi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>Fi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function np(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:w(w({},e.params),t.params),data:w(w({},e.data),t.data),resolve:w(w(w(w({},t.data),e.data),i?.data),t._resolvedData)}:r={params:w({},t.params),data:w({},t.data),resolve:w(w({},t.data),t._resolvedData??{})},i&&OE(i)&&(r.resolve[fo]=i.title),r}var uo=class{get title(){return this.data?.[fo]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ru=class extends tu{constructor(e,n){super(n),this.url=e,rp(this,n)}toString(){return kE(this._root)}};function rp(t,e){e.value._routerState=t,e.children.forEach(n=>rp(t,n))}function kE(t){let e=t.children.length>0?` { ${t.children.map(kE).join(", ")} } `:"";return`${t.value}${e}`}function bf(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ht(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ht(e.params,n.params)||t.paramsSubject.next(n.params),TP(e.url,n.url)||t.urlSubject.next(n.url),Ht(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Gf(t,e){let n=Ht(t.params,e.params)&&AP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Gf(t.parent,e.parent))}function OE(t){return typeof t.title=="string"||t.title===null}var ip=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=A,this.activateEvents=new Ct,this.deactivateEvents=new Ct,this.attachEvents=new Ct,this.detachEvents=new Ct,this.parentContexts=v(ou),this.location=v(bi),this.changeDetector=v(Ri),this.environmentInjector=v(ft),this.inputBinder=v(au,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Kf(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Di({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bs]});let t=e;return t})(),Kf=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r,this.__ngOutletInjector=!0}get(e,n){return e===gn?this.route:e===ou?this.childContexts:this.parent.get(e,n)}},au=new x(""),yE=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Cs([i.queryParams,i.params,i.data]).pipe(lt(([o,a,c],u)=>(c=w(w(w({},o),a),c),u===0?S(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=qI(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function YP(t,e,n){let r=lo(t,e._root,n?n._root:void 0);return new nu(r,e)}function lo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=JP(t,e,n);return new st(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>lo(t,a)),o}}let r=ZP(e.value),i=e.children.map(s=>lo(t,s));return new st(r,i)}}function JP(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return lo(t,r,i);return lo(t,r)})}function ZP(t){return new gn(new he(t.url),new he(t.params),new he(t.queryParams),new he(t.fragment),new he(t.data),t.outlet,t.component,t)}var FE="ngNavigationCancelingError";function LE(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Li(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=VE(!1,ot.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function VE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[FE]=!0,n.cancellationCode=e,n}function XP(t){return UE(t)&&Li(t.url)}function UE(t){return!!t&&t[FE]}var eM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["ng-component"]],standalone:!0,features:[Qe],decls:1,vars:0,template:function(i,s){i&1&&oe(0,"router-outlet")},dependencies:[ip],encapsulation:2});let t=e;return t})();function tM(t,e){return t.providers&&!t._injector&&(t._injector=tf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function sp(t){let e=t.children&&t.children.map(sp),n=e?ie(w({},t),{children:e}):w({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==A&&(n.component=eM),n}function qt(t){return t.outlet||A}function nM(t,e){let n=t.filter(r=>qt(r)===e);return n.push(...t.filter(r=>qt(r)!==e)),n}function po(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var rM=(t,e,n,r)=>z(i=>(new Qf(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Qf=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),bf(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Mi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Mi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Mi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Mi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Hf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Bf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(bf(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),bf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=po(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},iu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Oi=class{constructor(e,n){this.component=e,this.route=n}};function iM(t,e,n){let r=t._root,i=e?e._root:null;return Xs(r,i,n,[r.value])}function sM(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ui(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Mv(t)?t:e.get(t):r}function Xs(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Mi(e);return t.children.forEach(o=>{oM(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ro(a,n.getContext(o),i)),i}function oM(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=aM(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new iu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Xs(t,e,a?a.children:null,r,i):Xs(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oi(a.outlet.component,o))}else o&&ro(e,a,i),i.canActivateChecks.push(new iu(r)),s.component?Xs(t,null,a?a.children:null,r,i):Xs(t,null,n,r,i);return i}function aM(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Tr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Tr(t.url,e.url)||!Ht(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gf(t,e)||!Ht(t.queryParams,e.queryParams);case"paramsChange":default:return!Gf(t,e)}}function ro(t,e,n){let r=Mi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ro(o,e.children.getContext(s),n):ro(o,null,n):ro(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Oi(e.outlet.component,i)):n.canDeactivateChecks.push(new Oi(null,i)):n.canDeactivateChecks.push(new Oi(null,i))}function go(t){return typeof t=="function"}function cM(t){return typeof t=="boolean"}function uM(t){return t&&go(t.canLoad)}function lM(t){return t&&go(t.canActivate)}function dM(t){return t&&go(t.canActivateChild)}function hM(t){return t&&go(t.canDeactivate)}function fM(t){return t&&go(t.canMatch)}function jE(t){return t instanceof an||t?.name==="EmptyError"}var Gc=Symbol("INITIAL_VALUE");function Vi(){return lt(t=>Cs(t.map(e=>e.pipe(cn(1),Td(Gc)))).pipe(z(e=>{for(let n of e)if(n!==!0){if(n===Gc)return Gc;if(n===!1||n instanceof $n)return n}return!0}),It(e=>e!==Gc),cn(1)))}function pM(t,e){return ge(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?S(ie(w({},n),{guardsResult:!0})):gM(o,r,i,t).pipe(ge(a=>a&&cM(a)?mM(r,s,t,e):S(a)),z(a=>ie(w({},n),{guardsResult:a})))})}function gM(t,e,n,r){return pe(t).pipe(ge(i=>IM(i.component,i.route,n,e,r)),kt(i=>i!==!0,!0))}function mM(t,e,n,r){return pe(e).pipe(hi(i=>di(_M(i.route.parent,r),yM(i.route,r),wM(t,i.path,n),vM(t,i.route,n))),kt(i=>i!==!0,!0))}function yM(t,e){return t!==null&&e&&e(new $f(t)),S(!0)}function _M(t,e){return t!==null&&e&&e(new jf(t)),S(!0)}function vM(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return S(!0);let i=r.map(s=>Ga(()=>{let o=po(e)??n,a=Ui(s,o),c=lM(a)?a.canActivate(e,t):_r(o,()=>a(e,t));return zn(c).pipe(kt())}));return S(i).pipe(Vi())}function wM(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>sM(o)).filter(o=>o!==null).map(o=>Ga(()=>{let a=o.guards.map(c=>{let u=po(o.node)??n,l=Ui(c,u),d=dM(l)?l.canActivateChild(r,t):_r(u,()=>l(r,t));return zn(d).pipe(kt())});return S(a).pipe(Vi())}));return S(s).pipe(Vi())}function IM(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return S(!0);let o=s.map(a=>{let c=po(e)??i,u=Ui(a,c),l=hM(u)?u.canDeactivate(t,e,n,r):_r(c,()=>u(t,e,n,r));return zn(l).pipe(kt())});return S(o).pipe(Vi())}function EM(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return S(!0);let s=i.map(o=>{let a=Ui(o,t),c=uM(a)?a.canLoad(e,n):_r(t,()=>a(e,n));return zn(c)});return S(s).pipe(Vi(),BE(r))}function BE(t){return dd(me(e=>{if(Li(e))throw LE(t,e)}),z(e=>e===!0))}function CM(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return S(!0);let s=i.map(o=>{let a=Ui(o,t),c=fM(a)?a.canMatch(e,n):_r(t,()=>a(e,n));return zn(c)});return S(s).pipe(Vi(),BE(r))}var ho=class{constructor(e){this.segmentGroup=e||null}},su=class extends Error{constructor(e){super(),this.urlTree=e}};function Pi(t){return li(new ho(t))}function TM(t){return li(new E(4e3,!1))}function DM(t){return li(VE(!1,ot.GuardRejected))}var Yf=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return S(r);if(i.numberOfChildren>1||!i.children[A])return TM(e.redirectTo);i=i.children[A]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new su(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new $n(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Y(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Jf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bM(t,e,n,r,i){let s=op(t,e,n);return s.matched?(r=tM(e,r),CM(r,e,n,i).pipe(z(o=>o===!0?s:w({},Jf)))):S(s)}function op(t,e,n){if(e.path==="**")return SM(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?w({},Jf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||CP)(n,t,e);if(!i)return w({},Jf);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?w(w({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function SM(t){return{matched:!0,parameters:t.length>0?wE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function _E(t,e,n,r){return n.length>0&&xM(t,n,r)?{segmentGroup:new Y(e,RM(r,new Y(n,t.children))),slicedSegments:[]}:n.length===0&&NM(t,n,r)?{segmentGroup:new Y(t.segments,AM(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Y(t.segments,t.children),slicedSegments:n}}function AM(t,e,n,r){let i={};for(let s of n)if(cu(t,e,s)&&!r[qt(s)]){let o=new Y([],{});i[qt(s)]=o}return w(w({},r),i)}function RM(t,e){let n={};n[A]=e;for(let r of t)if(r.path===""&&qt(r)!==A){let i=new Y([],{});n[qt(r)]=i}return n}function xM(t,e,n){return n.some(r=>cu(t,e,r)&&qt(r)!==A)}function NM(t,e,n){return n.some(r=>cu(t,e,r))}function cu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function PM(t,e,n,r){return qt(t)!==r&&(r===A||!cu(e,n,t))?!1:op(e,t,n).matched}function MM(t,e,n){return e.length===0&&!t.children[n]}var Zf=class{};function kM(t,e,n,r,i,s,o="emptyOnly"){return new Xf(t,e,n,r,i,o,s).recognize()}var OM=31,Xf=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Yf(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new E(4002,`'${e.segmentGroup}'`)}recognize(){let e=_E(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(n=>{let r=new uo([],Object.freeze({}),Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,{},A,this.rootComponentType,null,{}),i=new st(r,n),s=new ru("",i),o=$P(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,A).pipe(Nn(r=>{if(r instanceof su)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ho?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=np(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(z(s=>s instanceof st?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return pe(i).pipe(hi(s=>{let o=r.children[s],a=nM(n,s);return this.processSegmentGroup(e,a,o,s)}),Cd((s,o)=>(s.push(...o),s)),Pn(null),Ed(),ge(s=>{if(s===null)return Pi(r);let o=$E(s);return FM(o),S(o)}))}processSegment(e,n,r,i,s,o){return pe(n).pipe(hi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Nn(c=>{if(c instanceof ho)return S(null);throw c}))),kt(a=>!!a),Nn(a=>{if(jE(a))return MM(r,i,s)?S(new Zf):Pi(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return PM(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):Pi(i):Pi(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=op(n,i,s);if(!a)return Pi(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OM&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(ge(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=bM(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(lt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(lt(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new uo(l,h,Object.freeze(w({},this.urlTree.queryParams)),this.urlTree.fragment,VM(r),qt(r),r.component??r._loadedComponent??null,r,UM(r)),{segmentGroup:g,slicedSegments:_}=_E(n,l,d,c);if(_.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(z($=>$===null?null:new st(f,$)));if(c.length===0&&_.length===0)return S(new st(f,[]));let P=qt(r)===s;return this.processSegment(u,c,g,_,P?A:s,!0).pipe(z($=>new st(f,$ instanceof st?[$]:[])))}))):Pi(n)))}getChildConfig(e,n,r){return n.children?S({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?S({routes:n._loadedRoutes,injector:n._loadedInjector}):EM(e,n,r,this.urlSerializer).pipe(ge(i=>i?this.configLoader.loadChildren(e,n).pipe(me(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):DM(n))):S({routes:[],injector:e})}};function FM(t){t.sort((e,n)=>e.value.outlet===A?-1:n.value.outlet===A?1:e.value.outlet.localeCompare(n.value.outlet))}function LM(t){let e=t.value.routeConfig;return e&&e.path===""}function $E(t){let e=[],n=new Set;for(let r of t){if(!LM(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=$E(r.children);e.push(new st(r.value,i))}return e.filter(r=>!n.has(r))}function VM(t){return t.data||{}}function UM(t){return t.resolve||{}}function jM(t,e,n,r,i,s){return ge(o=>kM(t,e,n,r,o.extractedUrl,i,s).pipe(z(({state:a,tree:c})=>ie(w({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function BM(t,e){return ge(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return S(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of HE(c))o.add(u);let a=0;return pe(o).pipe(hi(c=>s.has(c)?$M(c,r,t,e):(c.data=np(c,c.parent,t).resolve,S(void 0))),me(()=>a++),fi(1),ge(c=>a===o.size?S(n):Ae))})}function HE(t){let e=t.children.map(n=>HE(n)).flat();return[t,...e]}function $M(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!OE(i)&&(s[fo]=i.title),HM(s,t,e,r).pipe(z(o=>(t._resolvedData=o,t.data=np(t,t.parent,n).resolve,null)))}function HM(t,e,n,r){let i=Rf(t);if(i.length===0)return S({});let s={};return pe(i).pipe(ge(o=>qM(t[o],e,n,r).pipe(kt(),me(a=>{s[o]=a}))),fi(1),Id(s),Nn(o=>jE(o)?Ae:li(o)))}function qM(t,e,n,r){let i=po(e)??r,s=Ui(t,i),o=s.resolve?s.resolve(e,n):_r(i,()=>s(e,n));return zn(o)}function Sf(t){return lt(e=>{let n=t(e);return n?pe(n).pipe(z(()=>e)):S(e)})}var qE=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===A);return i}getResolvedTitleForRoute(r){return r.data[fo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(zM),providedIn:"root"});let t=e;return t})(),zM=(()=>{let e=class e extends qE{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(k(hE))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ap=new x("",{providedIn:"root",factory:()=>({})}),cp=new x(""),WM=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=v(cf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return S(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=zn(r.loadComponent()).pipe(z(zE),me(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ts(()=>{this.componentLoaders.delete(r)})),s=new oi(i,()=>new Oe).pipe(si());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=GM(i,this.compiler,r,this.onLoadEndListener).pipe(Ts(()=>{this.childrenLoaders.delete(i)})),a=new oi(o,()=>new Oe).pipe(si());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function GM(t,e,n,r){return zn(t.loadChildren()).pipe(z(zE),ge(i=>i instanceof Fs||Array.isArray(i)?S(i):pe(e.compileModuleAsync(i))),z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(cp,[],{optional:!0,self:!0}).flat()),{routes:o.map(sp),injector:s}}))}function KM(t){return t&&typeof t=="object"&&"default"in t}function zE(t){return KM(t)?t.default:t}var up=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(QM),providedIn:"root"});let t=e;return t})(),QM=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),YM=new x("");var JM=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=v(WM),this.environmentInjector=v(ft),this.urlSerializer=v(tp),this.rootContexts=v(ou),this.location=v(Ks),this.inputBindingEnabled=v(au,{optional:!0})!==null,this.titleStrategy=v(qE),this.options=v(ap,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=v(up),this.createViewTransition=v(YM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>S(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Vf(s)),i=s=>this.events.next(new Uf(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ie(w(w({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new he({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:no,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(It(o=>o.id!==0),z(o=>ie(w({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),lt(o=>{let a=!1,c=!1;return S(o).pipe(lt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),Ae;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ie(w({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Dr(u.id,this.urlSerializer.serialize(u.rawUrl),h,Mf.IgnoredSameUrlNavigation)),u.resolve(null),Ae}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return S(u).pipe(lt(h=>{let f=this.transitions?.getValue();return this.events.next(new so(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Ae:Promise.resolve(h)}),jM(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),me(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ie(w({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new eu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:_,extras:P}=u,$=new so(h,this.urlSerializer.serialize(f),g,_);this.events.next($);let Se=ME(this.rootComponentType).snapshot;return this.currentTransition=o=ie(w({},u),{targetSnapshot:Se,urlAfterRedirects:f,extras:ie(w({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,S(o)}else{let h="";return this.events.next(new Dr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,Mf.IgnoredByUrlHandlingStrategy)),u.resolve(null),Ae}}),me(u=>{let l=new kf(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),z(u=>(this.currentTransition=o=ie(w({},u),{guards:iM(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),pM(this.environmentInjector,u=>this.events.next(u)),me(u=>{if(o.guardsResult=u.guardsResult,Li(u.guardsResult))throw LE(this.urlSerializer,u.guardsResult);let l=new Of(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),It(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",ot.GuardRejected),!1)),Sf(u=>{if(u.guards.canActivateChecks.length)return S(u).pipe(me(l=>{let d=new Ff(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),lt(l=>{let d=!1;return S(l).pipe(BM(this.paramsInheritanceStrategy,this.environmentInjector),me({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",ot.NoDataFromResolver)}}))}),me(l=>{let d=new Lf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Sf(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(me(f=>{d.component=f}),z(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Cs(l(u.targetSnapshot.root)).pipe(Pn(null),cn(1))}),Sf(()=>this.afterPreactivation()),lt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?pe(d).pipe(z(()=>o)):S(o)}),z(u=>{let l=YP(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ie(w({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),me(()=>{this.events.next(new ao)}),rM(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),cn(1),me({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Hn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Dd(this.transitionAbortSubject.pipe(me(u=>{throw u}))),Ts(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",ot.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Nn(u=>{if(c=!0,UE(u))this.events.next(new qn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),XP(u)?this.events.next(new co(u.url)):o.resolve(!1);else{this.events.next(new oo(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Ae}))}))}cancelNavigationTransition(r,i,s){let o=new qn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZM(t){return t!==no}var XM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(ek),providedIn:"root"});let t=e;return t})(),ep=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},ek=(()=>{let e=class e extends ep{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Lh(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),WE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:()=>v(tk),providedIn:"root"});let t=e;return t})(),tk=(()=>{let e=class e extends WE{constructor(){super(...arguments),this.location=v(Ks),this.urlSerializer=v(tp),this.options=v(ap,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=v(up),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $n,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ME(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof so)this.stateMemento=this.createStateMemento();else if(r instanceof Dr)this.rawUrlTree=i.initialUrl;else if(r instanceof eu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ao?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof qn&&(r.code===ot.GuardRejected||r.code===ot.NoDataFromResolver)?this.restoreHistory(i):r instanceof oo?this.restoreHistory(i,!0):r instanceof Hn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=w(w({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=w(w({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Lh(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(eo||{});function nk(t,e){t.events.pipe(It(n=>n instanceof Hn||n instanceof qn||n instanceof oo||n instanceof Dr),z(n=>n instanceof Hn||n instanceof Dr?eo.COMPLETE:(n instanceof qn?n.code===ot.Redirect||n.code===ot.SupersededByNewNavigation:!1)?eo.REDIRECTING:eo.FAILED),It(n=>n!==eo.REDIRECTING),cn(1)).subscribe(()=>{e()})}function rk(t){throw t}var ik={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lp=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=v(jc),this.stateManager=v(WE),this.options=v(ap,{optional:!0})||{},this.pendingTasks=v(Uc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=v(JM),this.urlSerializer=v(tp),this.location=v(Ks),this.urlHandlingStrategy=v(up),this._events=new Oe,this.errorHandler=this.options.errorHandler||rk,this.navigated=!1,this.routeReuseStrategy=v(XM),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=v(cp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!v(au,{optional:!0}),this.eventsSubscription=new de,this.isNgZoneEnabled=v(X)instanceof X&&X.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof qn&&i.code!==ot.Redirect&&i.code!==ot.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Hn)this.navigated=!0;else if(i instanceof co){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||ZM(s.source)};this.scheduleNavigation(a,no,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}ak(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),no,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=w({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(sp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=w(w({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=RE(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return xE(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Li(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,no,null,i)}navigate(r,i={skipLocationChange:!1}){return ok(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=w({},ik):i===!1?s=w({},sk):s=i,Li(r))return fE(this.currentUrlTree,r,s);let o=this.parseUrl(r);return fE(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return nk(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ok(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new E(4008,!1)}function ak(t){return!(t instanceof ao)&&!(t instanceof co)}var uu=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new Oe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=r.events.subscribe(l=>{l instanceof Hn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Kw(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(ye(lp),ye(gn),Vh("tabindex"),ye(Vc),ye(qs),ye(Ni))},e.\u0275dir=Di({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&zs("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&nf("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Dt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",Gs],skipLocationChange:[Dt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",Gs],replaceUrl:[Dt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",Gs],routerLink:"routerLink"},standalone:!0,features:[ef,Bs]});let t=e;return t})();var ck=new x("");function GE(t,...e){return Cc([{provide:cp,multi:!0,useValue:t},[],{provide:gn,useFactory:uk,deps:[lp]},{provide:af,multi:!0,useFactory:dk},e.map(n=>n.\u0275providers)])}function uk(t){return t.routerState.root}function lk(t,e){return{\u0275kind:t,\u0275providers:e}}function dk(){let t=v(At);return e=>{let n=t.get(Ws);if(e!==n.components[0])return;let r=t.get(lp),i=t.get(hk);t.get(fk)===1&&r.initialNavigation(),t.get(pk,null,M.Optional)?.setUpPreloading(),t.get(ck,null,M.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hk=new x("",{factory:()=>new Oe}),fk=new x("",{providedIn:"root",factory:()=>1});var pk=new x("");function KE(){return lk(8,[yE,{provide:au,useExisting:yE}])}var QE={firebase:{apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",databaseURL:"https://bidosi-manga-default-rtdb.europe-west1.firebasedatabase.app",projectId:"bidosi-manga",storageBucket:"bidosi-manga.appspot.com",messagingSenderId:"24335793429",appId:"1:24335793429:web:c9616afea73ecf763dfd1c"}};var hp={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var m=function(t,e){if(!t)throw br(e)},br=function(t){return new Error("Firebase Database ("+hp.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var JE=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},du={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(JE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new fp;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},fp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},gp=function(t){let e=JE(t);return du.encodeByteArray(e,!0)},mo=function(t){return gp(t).replace(/\./g,"")},yo=function(t){try{return du.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ZE(t){return XE(void 0,t)}function XE(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!mk(n)||(t[n]=XE(t[n],e[n]));return t}function mk(t){return t!=="__proto__"}function yk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var _k=()=>yk().__FIREBASE_DEFAULTS__,vk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&yo(t[1]);return e&&JSON.parse(e)},mp=()=>{try{return _k()||vk()||wk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yp=t=>{var e,n;return(n=(e=mp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hu=t=>{let e=yp(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},_p=()=>{var t;return(t=mp())===null||t===void 0?void 0:t.config},vp=t=>{var e;return(e=mp())===null||e===void 0?void 0:e[`_${t}`]};var Wn=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function fu(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mo(JSON.stringify(n)),mo(JSON.stringify(o)),""].join(".")}function Ce(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _o(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ce())}function eC(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pu(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tC(){let t=Ce();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function zt(){return hp.NODE_CLIENT===!0||hp.NODE_ADMIN===!0}function wp(){try{return typeof indexedDB=="object"}catch{return!1}}function nC(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var Ik="FirebaseError",at=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ik,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}},mn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Ek(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new at(i,a,r)}};function Ek(t,e){return t.replace(Ck,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Ck=/\{\$([^}]+)}/g;function ji(t){return JSON.parse(t)}function _e(t){return JSON.stringify(t)}var rC=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=ji(yo(s[0])||""),n=ji(yo(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var iC=function(t){let e=rC(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},sC=function(t){let e=rC(t).claims;return typeof e=="object"&&e.admin===!0};function Wt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vo(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ar(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(YE(s)&&YE(o)){if(!Ar(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function YE(t){return t!==null&&typeof t=="object"}function Rr(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var lu=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(h<<1|h>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],u,l;for(let d=0;d<80;d++){d<40?d<20?(u=a^s&(o^a),l=1518500249):(u=s^o^a,l=1859775393):d<60?(u=s&o|a&(s|o),l=2400959708):(u=s^o^a,l=3395469782);let h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function oC(t,e){let n=new pp(t,e);return n.subscribe.bind(n)}var pp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Tk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=dp),i.error===void 0&&(i.error=dp),i.complete===void 0&&(i.complete=dp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Tk(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dp(){}function gu(t,e){return`${t} failed: ${e} argument `}var aC=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,m(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Io=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var tW=4*60*60*1e3;function Ye(t){return t&&t._delegate?t._delegate:t}var Je=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var xr="[DEFAULT]";var mu=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Wn;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bk(e))try{this.getOrInitializeService({instanceIdentifier:xr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=xr){return this.instances.has(e)}getOptions(e=xr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xr){return this.component?this.component.multipleInstances?e:xr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dk(t){return t===xr?void 0:t}function bk(t){return t.instantiationMode==="EAGER"}var Eo=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new mu(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Sk=[],K=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(K||{}),Ak={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Rk=K.INFO,xk={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},Nk=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=xk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gt=class{constructor(e){this.name=e,this._logLevel=Rk,this._logHandler=Nk,this._userLogHandler=null,Sk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ak[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...e),this._logHandler(this,K.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...e),this._logHandler(this,K.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,K.INFO,...e),this._logHandler(this,K.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,K.WARN,...e),this._logHandler(this,K.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...e),this._logHandler(this,K.ERROR,...e)}};var Pk=(t,e)=>e.some(n=>t instanceof n),cC,uC;function Mk(){return cC||(cC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kk(){return uC||(uC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var lC=new WeakMap,Ep=new WeakMap,dC=new WeakMap,Ip=new WeakMap,Tp=new WeakMap;function Ok(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kt(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&lC.set(n,t)}).catch(()=>{}),Tp.set(e,t),e}function Fk(t){if(Ep.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ep.set(t,e)}var Cp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ep.get(t);if(e==="objectStoreNames")return t.objectStoreNames||dC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hC(t){Cp=t(Cp)}function Lk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(yu(this),e,...n);return dC.set(r,e.sort?e.sort():[e]),Kt(r)}:kk().includes(t)?function(...e){return t.apply(yu(this),e),Kt(lC.get(this))}:function(...e){return Kt(t.apply(yu(this),e))}}function Vk(t){return typeof t=="function"?Lk(t):(t instanceof IDBTransaction&&Fk(t),Pk(t,Mk())?new Proxy(t,Cp):t)}function Kt(t){if(t instanceof IDBRequest)return Ok(t);if(Ip.has(t))return Ip.get(t);let e=Vk(t);return e!==t&&(Ip.set(t,e),Tp.set(e,t)),e}var yu=t=>Tp.get(t);function pC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Kt(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Kt(o.result),c.oldVersion,c.newVersion,Kt(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Uk=["get","getKey","getAll","getAllKeys","count"],jk=["put","add","delete","clear"],Dp=new Map;function fC(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=jk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Uk.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return Dp.set(e,s),s}hC(t=>ie(w({},t),{get:(e,n,r)=>fC(e,n)||t.get(e,n,r),has:(e,n)=>!!fC(e,n)||t.has(e,n)}));var Sp=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Bk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Bk(t){let e=t.getComponent();return e?.type==="VERSION"}var Ap="@firebase/app",gC="0.10.1";var Nr=new Gt("@firebase/app"),$k="@firebase/app-compat",Hk="@firebase/analytics-compat",qk="@firebase/analytics",zk="@firebase/app-check-compat",Wk="@firebase/app-check",Gk="@firebase/auth",Kk="@firebase/auth-compat",Qk="@firebase/database",Yk="@firebase/database-compat",Jk="@firebase/functions",Zk="@firebase/functions-compat",Xk="@firebase/installations",eO="@firebase/installations-compat",tO="@firebase/messaging",nO="@firebase/messaging-compat",rO="@firebase/performance",iO="@firebase/performance-compat",sO="@firebase/remote-config",oO="@firebase/remote-config-compat",aO="@firebase/storage",cO="@firebase/storage-compat",uO="@firebase/firestore",lO="@firebase/firestore-compat",dO="firebase",hO="10.11.0";var Rp="[DEFAULT]",fO={[Ap]:"fire-core",[$k]:"fire-core-compat",[qk]:"fire-analytics",[Hk]:"fire-analytics-compat",[Wk]:"fire-app-check",[zk]:"fire-app-check-compat",[Gk]:"fire-auth",[Kk]:"fire-auth-compat",[Qk]:"fire-rtdb",[Yk]:"fire-rtdb-compat",[Jk]:"fire-fn",[Zk]:"fire-fn-compat",[Xk]:"fire-iid",[eO]:"fire-iid-compat",[tO]:"fire-fcm",[nO]:"fire-fcm-compat",[rO]:"fire-perf",[iO]:"fire-perf-compat",[sO]:"fire-rc",[oO]:"fire-rc-compat",[aO]:"fire-gcs",[cO]:"fire-gcs-compat",[uO]:"fire-fst",[lO]:"fire-fst-compat","fire-js":"fire-js",[dO]:"fire-js-all"};var Co=new Map,pO=new Map,xp=new Map;function mC(t,e){try{t.container.addComponent(e)}catch(n){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qt(t){let e=t.name;if(xp.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,t);for(let n of Co.values())mC(n,t);for(let n of pO.values())mC(n,t);return!0}function Pr(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t.settings!==void 0}var gO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new mn("app","Firebase",gO);var Np=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Je("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}};var Yt=hO;function Do(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Rp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gn.create("bad-app-name",{appName:String(i)});if(n||(n=_p()),!n)throw Gn.create("no-options");let s=Co.get(i);if(s){if(Ar(n,s.options)&&Ar(r,s.config))return s;throw Gn.create("duplicate-app",{appName:i})}let o=new Eo(i);for(let c of xp.values())o.addComponent(c);let a=new Np(n,r,o);return Co.set(i,a),a}function Kn(t=Rp){let e=Co.get(t);if(!e&&t===Rp&&_p())return Do();if(!e)throw Gn.create("no-app",{appName:t});return e}function _u(){return Array.from(Co.values())}function ce(t,e,n){var r;let i=(r=fO[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(a.join(" "));return}Qt(new Je(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var mO="firebase-heartbeat-database",yO=1,To="firebase-heartbeat-store",bp=null;function wC(){return bp||(bp=pC(mO,yO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(To)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gn.create("idb-open",{originalErrorMessage:t.message})})),bp}function _O(t){return p(this,null,function*(){try{let n=(yield wC()).transaction(To),r=yield n.objectStore(To).get(IC(t));return yield n.done,r}catch(e){if(e instanceof at)Nr.warn(e.message);else{let n=Gn.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(n.message)}}})}function yC(t,e){return p(this,null,function*(){try{let r=(yield wC()).transaction(To,"readwrite");yield r.objectStore(To).put(e,IC(t)),yield r.done}catch(n){if(n instanceof at)Nr.warn(n.message);else{let r=Gn.create("idb-set",{originalErrorMessage:n?.message});Nr.warn(r.message)}}})}function IC(t){return`${t.name}!${t.options.appId}`}var vO=1024,wO=30*24*60*60*1e3,Pp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Mp(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_C();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=wO}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=_C(),{heartbeatsToSend:r,unsentEntries:i}=IO(this._heartbeatsCache.heartbeats),s=mo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function _C(){return new Date().toISOString().substring(0,10)}function IO(t,e=vO){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vC(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vC(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Mp=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return wp()?nC().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield _O(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return yC(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function vC(t){return mo(JSON.stringify({version:2,heartbeats:t})).length}function EO(t){Qt(new Je("platform-logger",e=>new Sp(e),"PRIVATE")),Qt(new Je("heartbeat",e=>new Pp(e),"PRIVATE")),ce(Ap,gC,t),ce(Ap,gC,"esm2017"),ce("fire-js","")}EO("");var CO="firebase",TO="10.11.0";ce(CO,TO,"app");var EC="@firebase/database",CC="1.0.4";var Vg="";function DO(t){Vg=t}var Bp=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),_e(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ji(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var $p=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return Wt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var nT=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bp(e)}}catch{}return new $p},kr=nT("localStorage"),Hp=nT("sessionStorage");var Hi=new Gt("@firebase/database"),bO=function(){let t=1;return function(){return t++}}(),rT=function(t){let e=aC(t),n=new lu;n.update(e);let r=n.digest();return du.encodeByteArray(r)},Bo=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Bo.apply(null,r):typeof r=="object"?e+=_e(r):e+=r,e+=" "}return e},Fr=null,TC=!0,SO=function(t,e){m(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Hi.logLevel=K.VERBOSE,Fr=Hi.log.bind(Hi),e&&Hp.set("logging_enabled",!0)):typeof t=="function"?Fr=t:(Fr=null,Hp.remove("logging_enabled"))},Le=function(...t){if(TC===!0&&(TC=!1,Fr===null&&Hp.get("logging_enabled")===!0&&SO(!0)),Fr){let e=Bo.apply(null,t);Fr(e)}},$o=function(t){return function(...e){Le(t,...e)}},qp=function(...t){let e="FIREBASE INTERNAL ERROR: "+Bo(...t);Hi.error(e)},_n=function(...t){let e=`FIREBASE FATAL ERROR: ${Bo(...t)}`;throw Hi.error(e),new Error(e)},Xe=function(...t){let e="FIREBASE WARNING: "+Bo(...t);Hi.warn(e)},AO=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},iT=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},RO=function(t){if(zt()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Wi="[MIN_NAME]",Lr="[MAX_NAME]",Xi=function(t,e){if(t===e)return 0;if(t===Wi||e===Lr)return-1;if(e===Wi||t===Lr)return 1;{let n=DC(t),r=DC(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},xO=function(t,e){return t===e?0:t<e?-1:1},bo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+_e(e))},Ug=function(t){if(typeof t!="object"||t===null)return _e(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=_e(e[r]),n+=":",n+=Ug(t[e[r]]);return n+="}",n},sT=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function et(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var oT=function(t){m(!iT(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(c=n;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let l=u.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},NO=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},PO=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function MO(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var kO=new RegExp("^-?(0*)\\d{1,10}$"),OO=-2147483648,FO=2147483647,DC=function(t){if(kO.test(t)){let e=Number(t);if(e>=OO&&e<=FO)return e}return null},es=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Xe("Exception was thrown by user callback.",n),e},Math.floor(0))}},LO=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},No=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var zp=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Wp=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Le("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xe(e)}},Po=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),wu="5",aT="v",cT="s",uT="r",lT="f",dT=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hT="ls",fT="p",Gp="ac",pT="websocket",gT="long_polling";var Iu=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kr.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kr.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function VO(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function mT(t,e,n){m(typeof e=="string","typeof type must == string"),m(typeof n=="object","typeof params must == object");let r;if(e===pT)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===gT)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);VO(t)&&(n.ns=t.namespace);let i=[];return et(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var Kp=class{constructor(){this.counters_={}}incrementCounter(e,n=1){Wt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ZE(this.counters_)}};var kp={},Op={};function jg(t){let e=t.toString();return kp[e]||(kp[e]=new Kp),kp[e]}function UO(t,e){let n=t.toString();return Op[n]||(Op[n]=e()),Op[n]}var Qp=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&es(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var bC="start",jO="close",BO="pLPCommand",$O="pRTLPCB",yT="id",_T="pw",vT="ser",HO="cb",qO="seg",zO="ts",WO="d",GO="dframe",wT=1870,IT=30,KO=wT-IT,QO=25e3,YO=3e4,Yp=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$o(e),this.stats_=jg(n),this.urlFn=c=>(this.appCheckToken&&(c[Gp]=this.appCheckToken),mT(n,gT,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Qp(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(YO)),RO(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Jp((...s)=>{let[o,a,c,u,l]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===bC)this.id=a,this.password=c;else if(o===jO)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[bC]="t",r[vT]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[HO]=this.scriptTagHolder.uniqueCallbackIdentifier),r[aT]=wu,this.transportSessionId&&(r[cT]=this.transportSessionId),this.lastSessionId&&(r[hT]=this.lastSessionId),this.applicationId&&(r[fT]=this.applicationId),this.appCheckToken&&(r[Gp]=this.appCheckToken),typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(r[uT]=lT);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return zt()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!NO()&&!PO()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=_e(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=gp(n),i=sT(r,KO);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(zt())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[GO]="t",r[yT]=e,r[_T]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=_e(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Jp=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,zt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=bO(),window[BO+this.uniqueCallbackIdentifier]=e,window[$O+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Le("frame writing exception"),a.stack&&Le(a.stack),Le(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Le("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[yT]=this.myID,e[_T]=this.myPW,e[vT]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+IT+r.length<=wT;){let o=this.pendingSegs.shift();r=r+"&"+qO+i+"="+o.seg+"&"+zO+i+"="+o.ts+"&"+WO+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(QO)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){zt()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Le("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var JO=16384,ZO=45e3,Eu=null;typeof MozWebSocket<"u"?Eu=MozWebSocket:typeof WebSocket<"u"&&(Eu=WebSocket);var So=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$o(this.connId),this.stats_=jg(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[aT]=wu,!zt()&&typeof location<"u"&&location.hostname&&dT.test(location.hostname)&&(a[uT]=lT),r&&(a[cT]=r),i&&(a[hT]=i),s&&(a[Gp]=s),o&&(a[fT]=o),mT(n,pT,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kr.set("previous_websocket_failure",!0);try{let i;if(zt()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${wu}/${Vg}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Eu(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Eu!==null&&!t.forceDisallow_}static previouslyFailed(){return kr.isInMemoryStorage||kr.get("previous_websocket_failure")===!0}markConnectionHealthy(){kr.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=ji(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(m(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=_e(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=sT(r,JO);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZO))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),XO=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Yp,So]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=So&&So.isAvailable(),i=r&&!So.previouslyFailed();if(n.webSocketOnly&&(r||Xe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[So];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),e1=6e4,t1=5e3,n1=10*1024,r1=100*1024,Fp="t",SC="d",i1="s",AC="r",s1="e",RC="o",xC="a",NC="n",PC="p",o1="h",Zp=class{constructor(e,n,r,i,s,o,a,c,u,l){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$o("c:"+this.id+":"),this.transportManager_=new XO(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=No(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>r1?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>n1?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Fp in e){let n=e[Fp];n===xC?this.upgradeIfSecondaryHealthy_():n===AC?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===RC&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=bo("t",e),r=bo("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PC,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:xC,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:NC,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=bo("t",e),r=bo("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=bo(Fp,e);if(SC in e){let r=e[SC];if(n===o1){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===NC){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===i1?this.onConnectionShutdown_(r):n===AC?this.onReset_(r):n===s1?qp("Server Error: "+r):n===RC?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qp("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),wu!==r&&Xe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),No(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(e1))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):No(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(t1))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PC,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Cu=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Tu=class{constructor(e){this.allowedEvents_=e,this.listeners_={},m(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){m(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Du=class t extends Tu{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!_o()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return m(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var MC=32,kC=768,J=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Q(){return new J("")}function O(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Yn(t){return t.pieces_.length-t.pieceNum_}function te(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new J(t.pieces_,e)}function ET(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function a1(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function CT(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function TT(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new J(e,0)}function ve(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof J)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new J(n,0)}function L(t){return t.pieceNum_>=t.pieces_.length}function Ze(t,e){let n=O(t),r=O(e);if(n===null)return e;if(n===r)return Ze(te(t),te(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Bg(t,e){if(Yn(t)!==Yn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function xt(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Yn(t)>Yn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Xp=class{constructor(e,n){this.errorPrefix_=n,this.parts_=CT(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Io(this.parts_[r]);DT(this)}};function c1(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Io(e),DT(t)}function u1(t){let e=t.parts_.pop();t.byteLength_-=Io(e),t.parts_.length>0&&(t.byteLength_-=1)}function DT(t){if(t.byteLength_>kC)throw new Error(t.errorPrefix_+"has a key path longer than "+kC+" bytes ("+t.byteLength_+").");if(t.parts_.length>MC)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MC+") or object contains a cycle "+Mr(t))}function Mr(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var eg=class t extends Tu{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return m(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ao=1e3,l1=60*5*1e3,OC=30*1e3,d1=1.3,h1=3e4,f1="server_kill",FC=3,$g=(()=>{class t extends Cu{constructor(n,r,i,s,o,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=$o("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ao,this.maxReconnectDelay_=l1,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!zt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eg.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Du.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(_e(o)),m(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Wn,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),m(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,l=c.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),l!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&Wt(n,"w")){let i=Sr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Xe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||sC(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=OC)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=iC(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),m(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+_e(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):qp("Unrecognized action received from server: "+_e(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){m(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>h1&&(this.reconnectDelay_=Ao),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*d1)}this.onConnectStatus_(!1)}establishConnection_(){return p(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},l=function(h){m(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:u,sendRequest:l};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Le("getToken() completed but was canceled"):(Le("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new Zp(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,g=>{Xe(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(f1)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Xe(h),u())}}})}interrupt(n){Le("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Le("Resuming connection for reason: "+n),delete this.interruptReasons_[n],vo(this.interruptReasons_)&&(this.reconnectDelay_=Ao,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Ug(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new J(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Le("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=FC&&(this.reconnectDelay_=OC,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Le("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=FC&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";zt()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Vg.replace(/\./g,"-")]=1,_o()?n["framework.cordova"]=1:pu()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Du.getInstance().currentlyOnline();return vo(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),F=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Gi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new F(Wi,e),i=new F(Wi,n);return this.compare(r,i)!==0}minPost(){return F.MIN}};var vu,bu=class extends Gi{static get __EMPTY_NODE(){return vu}static set __EMPTY_NODE(e){vu=e}compare(e,n){return Xi(e.name,n.name)}isDefinedOn(e){throw br("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(Lr,vu)}makePost(e,n){return m(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,vu)}toString(){return".key"}},qi=new bu;var $i=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Rt=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??_t.EMPTY_NODE,this.right=o??_t.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return _t.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return _t.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),tg=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Rt(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},_t=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Rt.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Rt.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new $i(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new $i(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new $i(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new $i(this.root_,null,this.comparator_,!0,e)}};_t.EMPTY_NODE=new tg;function p1(t,e){return Xi(t.name,e.name)}function Hg(t,e){return Xi(t,e)}var ng;function g1(t){ng=t}var bT=function(t){return typeof t=="number"?"number:"+oT(t):"string:"+t},ST=function(t){if(t.isLeafNode()){let e=t.val();m(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Wt(e,".sv"),"Priority must be a string or number.")}else m(t===ng||t.isEmpty(),"priority of unexpected type.");m(t===ng||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var LC,Ki=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,m(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ST(this.priorityNode_)}static set __childrenNodeConstructor(n){LC=n}static get __childrenNodeConstructor(){return LC}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return L(n)?this:O(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=O(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(m(i!==".priority"||Yn(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(te(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+bT(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=oT(this.value_):n+=this.value_,this.lazyHash_=rT(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(m(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return m(s>=0,"Unknown leaf type: "+r),m(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),AT,RT;function m1(t){AT=t}function y1(t){RT=t}var rg=class extends Gi{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Xi(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(Lr,new Ki("[PRIORITY-POST]",RT))}makePost(e,n){let r=AT(e);return new F(n,new Ki("[PRIORITY-POST]",r))}toString(){return".priority"}},ue=new rg;var _1=Math.log(2),ig=class{constructor(e){let n=s=>parseInt(Math.log(s)/_1,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Su=function(t,e,n,r){t.sort(e);let i=function(c,u){let l=u-c,d,h;if(l===0)return null;if(l===1)return d=t[c],h=n?n(d):d,new Rt(h,d.node,Rt.BLACK,null,null);{let f=parseInt(l/2,10)+c,g=i(c,f),_=i(f+1,u);return d=t[f],h=n?n(d):d,new Rt(h,d.node,Rt.BLACK,g,_)}},s=function(c){let u=null,l=null,d=t.length,h=function(g,_){let P=d-g,$=d;d-=g;let Se=i(P+1,$),se=t[P],qe=n?n(se):se;f(new Rt(qe,se.node,_,null,Se))},f=function(g){u?(u.left=g,u=g):(l=g,u=g)};for(let g=0;g<c.count;++g){let _=c.nextBitIsOne(),P=Math.pow(2,c.count-(g+1));_?h(P,Rt.BLACK):(h(P,Rt.BLACK),h(P,Rt.RED))}return l},o=new ig(t.length),a=s(o);return new _t(r||e,a)};var Lp,Bi={},Qi=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return m(Bi&&ue,"ChildrenNode.ts has not been loaded"),Lp=Lp||new t({".priority":Bi},{".priority":ue}),Lp}get(e){let n=Sr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof _t?n:null}hasIndex(e){return Wt(this.indexSet_,e.toString())}addIndex(e,n){m(e!==qi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(F.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Su(r,e.getCompare()):a=Bi;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let l=Object.assign({},this.indexes_);return l[c]=a,new t(l,u)}addToIndexes(e,n){let r=wo(this.indexes_,(i,s)=>{let o=Sr(this.indexSet_,s);if(m(o,"Missing index implementation for "+s),i===Bi)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(F.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Su(a,o.getCompare())}else return Bi;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new F(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=wo(this.indexes_,i=>{if(i===Bi)return i;{let s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new t(r,this.indexSet_)}};var Ro,R=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ST(this.priorityNode_),this.children_.isEmpty()&&m(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ro||(Ro=new t(new _t(Hg),null,Qi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ro}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Ro:r}}getChild(n){let r=O(n);return r===null?this:this.getImmediateChild(r).getChild(te(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(m(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new F(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Ro:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=O(n);if(i===null)return r;{m(O(n)!==".priority"||Yn(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(te(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ue,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+bT(this.getPriority().val())+":"),this.forEachChild(ue,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":rT(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new F(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new F(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new F(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,F.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ho?-1:0}withIndex(n){if(n===qi||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===qi||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ue),s=r.getIterator(ue),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===qi?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),sg=class extends R{constructor(){super(new _t(Hg),R.EMPTY_NODE,Qi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return R.EMPTY_NODE}isEmpty(){return!1}},Ho=new sg;Object.defineProperties(F,{MIN:{value:new F(Wi,R.EMPTY_NODE)},MAX:{value:new F(Lr,Ho)}});bu.__EMPTY_NODE=R.EMPTY_NODE;Ki.__childrenNodeConstructor=R;g1(Ho);y1(Ho);var v1=!0;function Ne(t,e=null){if(t===null)return R.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),m(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ki(n,Ne(e))}if(!(t instanceof Array)&&v1){let n=[],r=!1;if(et(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Ne(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new F(o,c)))}}),n.length===0)return R.EMPTY_NODE;let s=Su(n,p1,o=>o.name,Hg);if(r){let o=Su(n,ue.getCompare());return new R(s,Ne(e),new Qi({".priority":o},{".priority":ue}))}else return new R(s,Ne(e),Qi.Default)}else{let n=R.EMPTY_NODE;return et(t,(r,i)=>{if(Wt(t,r)&&r.substring(0,1)!=="."){let s=Ne(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ne(e))}}m1(Ne);var og=class extends Gi{constructor(e){super(),this.indexPath_=e,m(!L(e)&&O(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Xi(e.name,n.name):s}makePost(e,n){let r=Ne(e),i=R.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){let e=R.EMPTY_NODE.updateChild(this.indexPath_,Ho);return new F(Lr,e)}toString(){return CT(this.indexPath_,0).join("/")}};var ag=class extends Gi{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Xi(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){let r=Ne(e);return new F(n,r)}toString(){return".value"}},w1=new ag;function xT(t){return{type:"value",snapshotNode:t}}function Yi(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fo(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Lo(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function I1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Vo=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){m(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Fo(n,a)):m(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Yi(n,r)):o.trackChildChange(Lo(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ue,(i,s)=>{n.hasChild(i)||r.trackChildChange(Fo(i,s))}),n.isLeafNode()||n.forEachChild(ue,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Lo(i,s,o))}else r.trackChildChange(Yi(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?R.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var Au=class t{constructor(e){this.indexedFilter_=new Vo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=R.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=R.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(R.EMPTY_NODE);let s=this;return n.forEachChild(ue,(o,a)=>{s.matches(new F(o,a))||(i=i.updateImmediateChild(o,R.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var cg=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Au(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=R.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=R.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=R.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(R.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,R.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;m(a.numChildren()===this.limit_,"");let c=new F(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,c);if(l&&!r.isEmpty()&&f>=0)return s?.trackChildChange(Lo(n,r,d)),a.updateImmediateChild(n,r);{s?.trackChildChange(Fo(n,d));let _=a.updateImmediateChild(n,R.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Yi(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?e:l&&o(u,c)>=0?(s!=null&&(s.trackChildChange(Fo(u.name,u.node)),s.trackChildChange(Yi(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,R.EMPTY_NODE)):e}};var ug=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ue}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return m(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return m(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wi}hasEnd(){return this.endSet_}getIndexEndValue(){return m(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return m(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return m(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ue}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function E1(t){return t.loadsAllData()?new Vo(t.getIndex()):t.hasLimit()?new cg(t):new Au(t)}function VC(t){let e={};if(t.isDefault())return e;let n;if(t.index_===ue?n="$priority":t.index_===w1?n="$value":t.index_===qi?n="$key":(m(t.index_ instanceof og,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=_e(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=_e(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+_e(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=_e(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+_e(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function UC(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ue&&(e.i=t.index_.toString()),e}var lg=class t extends Cu{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=$o("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(m(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=VC(e._queryParams);this.restRequest_(s+".json",c,(u,l)=>{let d=l;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Sr(this.listens_,o)===a){let h;u?u===401?h="permission_denied":h="rest_error:"+u:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=VC(e._queryParams),r=e._path.toString(),i=new Wn;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rr(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=ji(a.responseText)}catch{Xe("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xe("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var dg=class{constructor(){this.rootNode_=R.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Ru(){return{value:null,children:new Map}}function NT(t,e,n){if(L(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=O(e);t.children.has(r)||t.children.set(r,Ru());let i=t.children.get(r);e=te(e),NT(i,e,n)}}function hg(t,e,n){t.value!==null?n(e,t.value):C1(t,(r,i)=>{let s=new J(e.toString()+"/"+r);hg(i,s,n)})}function C1(t,e){t.children.forEach((n,r)=>{e(r,n)})}var fg=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&et(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var jC=10*1e3,T1=30*1e3,D1=5*60*1e3,pg=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new fg(e);let r=jC+(T1-jC)*Math.random();No(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;et(e,(i,s)=>{s>0&&Wt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),No(this.reportStats_.bind(this),Math.floor(Math.random()*2*D1))}};var Jt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Jt||{});function PT(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qg(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zg(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var gg=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Jt.ACK_USER_WRITE,this.source=PT()}operationForChild(e){if(L(this.path)){if(this.affectedTree.value!=null)return m(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new J(e));return new t(Q(),n,this.revert)}}else return m(O(this.path)===e,"operationForChild called for unrelated child."),new t(te(this.path),this.affectedTree,this.revert)}};var xu=class t{constructor(e,n){this.source=e,this.path=n,this.type=Jt.LISTEN_COMPLETE}operationForChild(e){return L(this.path)?new t(this.source,Q()):new t(this.source,te(this.path))}};var Ji=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Jt.OVERWRITE}operationForChild(e){return L(this.path)?new t(this.source,Q(),this.snap.getImmediateChild(e)):new t(this.source,te(this.path),this.snap)}};var Nu=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Jt.MERGE}operationForChild(e){if(L(this.path)){let n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new Ji(this.source,Q(),n.value):new t(this.source,Q(),n)}else return m(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,te(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var vn=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(L(e))return this.isFullyInitialized()&&!this.filtered_;let n=O(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var mg=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function b1(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(I1(o.childName,o.snapshotNode))}),xo(t,i,"child_removed",e,r,n),xo(t,i,"child_added",e,r,n),xo(t,i,"child_moved",s,r,n),xo(t,i,"child_changed",e,r,n),xo(t,i,"value",e,r,n),i}function xo(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>A1(t,a,c)),o.forEach(a=>{let c=S1(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,t.query_))})})}function S1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function A1(t,e,n){if(e.childName==null||n.childName==null)throw br("Should only compare child_ events.");let r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Hu(t,e){return{eventCache:t,serverCache:e}}function Mo(t,e,n,r){return Hu(new vn(e,n,r),t.serverCache)}function MT(t,e,n,r){return Hu(t.eventCache,new vn(e,n,r))}function yg(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Vr(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Vp,R1=()=>(Vp||(Vp=new _t(xO)),Vp),tt=class t{constructor(e,n=R1()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return et(e,(r,i)=>{n=n.set(new J(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Q(),value:this.value};if(L(e))return null;{let r=O(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(te(e),n);return s!=null?{path:ve(new J(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(L(e))return this;{let n=O(e),r=this.children.get(n);return r!==null?r.subtree(te(e)):new t(null)}}set(e,n){if(L(e))return new t(n,this.children);{let r=O(e),s=(this.children.get(r)||new t(null)).set(te(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(L(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=O(e),r=this.children.get(n);if(r){let i=r.remove(te(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(L(e))return this.value;{let n=O(e),r=this.children.get(n);return r?r.get(te(e)):null}}setTree(e,n){if(L(e))return n;{let r=O(e),s=(this.children.get(r)||new t(null)).setTree(te(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Q(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(ve(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Q(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(L(e))return null;{let s=O(e),o=this.children.get(s);return o?o.findOnPath_(te(e),ve(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Q(),n)}foreachOnPath_(e,n,r){if(L(e))return this;{this.value&&r(n,this.value);let i=O(e),s=this.children.get(i);return s?s.foreachOnPath_(te(e),ve(n,i),r):new t(null)}}foreach(e){this.foreach_(Q(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(ve(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Nt=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new tt(null))}};function ko(t,e,n){if(L(e))return new Nt(new tt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Ze(i,e);return s=s.updateChild(o,n),new Nt(t.writeTree_.set(i,s))}else{let i=new tt(n),s=t.writeTree_.setTree(e,i);return new Nt(s)}}}function BC(t,e,n){let r=t;return et(n,(i,s)=>{r=ko(r,ve(e,i),s)}),r}function $C(t,e){if(L(e))return Nt.empty();{let n=t.writeTree_.setTree(e,new tt(null));return new Nt(n)}}function _g(t,e){return Ur(t,e)!=null}function Ur(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Ze(n.path,e)):null}function HC(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ue,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function Qn(t,e){if(L(e))return t;{let n=Ur(t,e);return n!=null?new Nt(new tt(n)):new Nt(t.writeTree_.subtree(e))}}function vg(t){return t.writeTree_.isEmpty()}function Zi(t,e){return kT(Q(),t.writeTree_,e)}function kT(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(m(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=kT(ve(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(ve(t,".priority"),r)),n}}function Wg(t,e){return VT(e,t)}function x1(t,e,n,r,i){m(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ko(t.visibleWrites,e,n)),t.lastWriteId=r}function N1(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function P1(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);m(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&M1(a,r.path)?i=!1:xt(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return k1(t),!0;if(r.snap)t.visibleWrites=$C(t.visibleWrites,r.path);else{let a=r.children;et(a,c=>{t.visibleWrites=$C(t.visibleWrites,ve(r.path,c))})}return!0}else return!1}function M1(t,e){if(t.snap)return xt(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&xt(ve(t.path,n),e))return!0;return!1}function k1(t){t.visibleWrites=OT(t.allWrites,O1,Q()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function O1(t){return t.visible}function OT(t,e,n){let r=Nt.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)xt(n,o)?(a=Ze(n,o),r=ko(r,a,s.snap)):xt(o,n)&&(a=Ze(o,n),r=ko(r,Q(),s.snap.getChild(a)));else if(s.children){if(xt(n,o))a=Ze(n,o),r=BC(r,a,s.children);else if(xt(o,n))if(a=Ze(o,n),L(a))r=BC(r,Q(),s.children);else{let c=Sr(s.children,O(a));if(c){let u=c.getChild(te(a));r=ko(r,Q(),u)}}}else throw br("WriteRecord should have .snap or .children")}}return r}function FT(t,e,n,r,i){if(!r&&!i){let s=Ur(t.visibleWrites,e);if(s!=null)return s;{let o=Qn(t.visibleWrites,e);if(vg(o))return n;if(n==null&&!_g(o,Q()))return null;{let a=n||R.EMPTY_NODE;return Zi(o,a)}}}else{let s=Qn(t.visibleWrites,e);if(!i&&vg(s))return n;if(!i&&n==null&&!_g(s,Q()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(xt(u.path,e)||xt(e,u.path))},a=OT(t.allWrites,o,e),c=n||R.EMPTY_NODE;return Zi(a,c)}}}function F1(t,e,n){let r=R.EMPTY_NODE,i=Ur(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ue,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Qn(t.visibleWrites,e);return n.forEachChild(ue,(o,a)=>{let c=Zi(Qn(s,new J(o)),a);r=r.updateImmediateChild(o,c)}),HC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Qn(t.visibleWrites,e);return HC(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function L1(t,e,n,r,i){m(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=ve(e,n);if(_g(t.visibleWrites,s))return null;{let o=Qn(t.visibleWrites,s);return vg(o)?i.getChild(n):Zi(o,i.getChild(n))}}function V1(t,e,n,r){let i=ve(e,n),s=Ur(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Qn(t.visibleWrites,i);return Zi(o,r.getNode().getImmediateChild(n))}else return null}function U1(t,e){return Ur(t.visibleWrites,e)}function j1(t,e,n,r,i,s,o){let a,c=Qn(t.visibleWrites,e),u=Ur(c,Q());if(u!=null)a=u;else if(n!=null)a=Zi(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let l=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),f=h.getNext();for(;f&&l.length<i;)d(f,r)!==0&&l.push(f),f=h.getNext();return l}else return[]}function B1(){return{visibleWrites:Nt.empty(),allWrites:[],lastWriteId:-1}}function Pu(t,e,n,r){return FT(t.writeTree,t.treePath,e,n,r)}function Gg(t,e){return F1(t.writeTree,t.treePath,e)}function qC(t,e,n,r){return L1(t.writeTree,t.treePath,e,n,r)}function Mu(t,e){return U1(t.writeTree,ve(t.treePath,e))}function $1(t,e,n,r,i,s){return j1(t.writeTree,t.treePath,e,n,r,i,s)}function Kg(t,e,n){return V1(t.writeTree,t.treePath,e,n)}function LT(t,e){return VT(ve(t.treePath,e),t.writeTree)}function VT(t,e){return{treePath:t,writeTree:e}}var wg=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;m(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),m(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Lo(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Fo(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Yi(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Lo(r,e.snapshotNode,i.oldSnap));else throw br("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Ig=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},UT=new Ig,Uo=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new vn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Kg(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Vr(this.viewCache_),s=$1(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function H1(t){return{filter:t}}function q1(t,e){m(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),m(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function z1(t,e,n,r,i){let s=new wg,o,a;if(n.type===Jt.OVERWRITE){let u=n;u.source.fromUser?o=Eg(t,e,u.path,u.snap,r,i,s):(m(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!L(u.path),o=ku(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===Jt.MERGE){let u=n;u.source.fromUser?o=G1(t,e,u.path,u.children,r,i,s):(m(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=Cg(t,e,u.path,u.children,r,i,a,s))}else if(n.type===Jt.ACK_USER_WRITE){let u=n;u.revert?o=Y1(t,e,u.path,r,i,s):o=K1(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===Jt.LISTEN_COMPLETE)o=Q1(t,e,n.path,r,s);else throw br("Unknown operation type: "+n.type);let c=s.getChanges();return W1(e,o,c),{viewCache:o,changes:c}}function W1(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=yg(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(xT(yg(e)))}}function jT(t,e,n,r,i,s){let o=e.eventCache;if(Mu(r,n)!=null)return e;{let a,c;if(L(n))if(m(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Vr(e),l=u instanceof R?u:R.EMPTY_NODE,d=Gg(r,l);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let u=Pu(r,Vr(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=O(n);if(u===".priority"){m(Yn(n)===1,"Can't have a priority with additional path components");let l=o.getNode();c=e.serverCache.getNode();let d=qC(r,n,l,c);d!=null?a=t.filter.updatePriority(l,d):a=o.getNode()}else{let l=te(n),d;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let h=qC(r,n,o.getNode(),c);h!=null?d=o.getNode().getImmediateChild(u).updateChild(l,h):d=o.getNode().getImmediateChild(u)}else d=Kg(r,u,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),u,d,l,i,s):a=o.getNode()}}return Mo(e,a,o.isFullyInitialized()||L(n),t.filter.filtersNodes())}}function ku(t,e,n,r,i,s,o,a){let c=e.serverCache,u,l=o?t.filter:t.filter.getIndexedFilter();if(L(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{let f=O(n);if(!c.isCompleteForPath(n)&&Yn(n)>1)return e;let g=te(n),P=c.getNode().getImmediateChild(f).updateChild(g,r);f===".priority"?u=l.updatePriority(c.getNode(),P):u=l.updateChild(c.getNode(),f,P,g,UT,null)}let d=MT(e,u,c.isFullyInitialized()||L(n),l.filtersNodes()),h=new Uo(i,d,s);return jT(t,d,n,i,h,a)}function Eg(t,e,n,r,i,s,o){let a=e.eventCache,c,u,l=new Uo(i,e,s);if(L(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Mo(e,u,!0,t.filter.filtersNodes());else{let d=O(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),c=Mo(e,u,a.isFullyInitialized(),a.isFiltered());else{let h=te(n),f=a.getNode().getImmediateChild(d),g;if(L(h))g=r;else{let _=l.getCompleteChild(d);_!=null?ET(h)===".priority"&&_.getChild(TT(h)).isEmpty()?g=_:g=_.updateChild(h,r):g=R.EMPTY_NODE}if(f.equals(g))c=e;else{let _=t.filter.updateChild(a.getNode(),d,g,h,l,o);c=Mo(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function zC(t,e){return t.eventCache.isCompleteForChild(e)}function G1(t,e,n,r,i,s,o){let a=e;return r.foreach((c,u)=>{let l=ve(n,c);zC(e,O(l))&&(a=Eg(t,a,l,u,i,s,o))}),r.foreach((c,u)=>{let l=ve(n,c);zC(e,O(l))||(a=Eg(t,a,l,u,i,s,o))}),a}function WC(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Cg(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;L(n)?u=r:u=new tt(null).setTree(n,r);let l=e.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),g=WC(t,f,h);c=ku(t,c,new J(d),g,i,s,o,a)}}),u.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!l.hasChild(d)&&!f){let g=e.serverCache.getNode().getImmediateChild(d),_=WC(t,g,h);c=ku(t,c,new J(d),_,i,s,o,a)}}),c}function K1(t,e,n,r,i,s,o){if(Mu(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(L(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ku(t,e,n,c.getNode().getChild(n),i,s,a,o);if(L(n)){let u=new tt(null);return c.getNode().forEachChild(qi,(l,d)=>{u=u.set(new J(l),d)}),Cg(t,e,n,u,i,s,a,o)}else return e}else{let u=new tt(null);return r.foreach((l,d)=>{let h=ve(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),Cg(t,e,n,u,i,s,a,o)}}function Q1(t,e,n,r,i){let s=e.serverCache,o=MT(e,s.getNode(),s.isFullyInitialized()||L(n),s.isFiltered());return jT(t,o,n,r,UT,i)}function Y1(t,e,n,r,i,s){let o;if(Mu(r,n)!=null)return e;{let a=new Uo(r,e,i),c=e.eventCache.getNode(),u;if(L(n)||O(n)===".priority"){let l;if(e.serverCache.isFullyInitialized())l=Pu(r,Vr(e));else{let d=e.serverCache.getNode();m(d instanceof R,"serverChildren would be complete if leaf node"),l=Gg(r,d)}l=l,u=t.filter.updateFullNode(c,l,s)}else{let l=O(n),d=Kg(r,l,e.serverCache);d==null&&e.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),d!=null?u=t.filter.updateChild(c,l,d,te(n),a,s):e.eventCache.getNode().hasChild(l)?u=t.filter.updateChild(c,l,R.EMPTY_NODE,te(n),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Pu(r,Vr(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Mu(r,Q())!=null,Mo(e,u,o,t.filter.filtersNodes())}}var Tg=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Vo(r.getIndex()),s=E1(r);this.processor_=H1(s);let o=n.serverCache,a=n.eventCache,c=i.updateFullNode(R.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(R.EMPTY_NODE,a.getNode(),null),l=new vn(c,o.isFullyInitialized(),i.filtersNodes()),d=new vn(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Hu(d,l),this.eventGenerator_=new mg(this.query_)}get query(){return this.query_}};function J1(t){return t.viewCache_.serverCache.getNode()}function Z1(t,e){let n=Vr(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!L(e)&&!n.getImmediateChild(O(e)).isEmpty())?n.getChild(e):null}function GC(t){return t.eventRegistrations_.length===0}function X1(t,e){t.eventRegistrations_.push(e)}function KC(t,e,n){let r=[];if(n){m(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function QC(t,e,n,r){e.type===Jt.MERGE&&e.source.queryId!==null&&(m(Vr(t.viewCache_),"We should always have a full cache before handling merges"),m(yg(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=z1(t.processor_,i,e,n,r);return q1(t.processor_,s.viewCache),m(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,BT(t,s.changes,s.viewCache.eventCache.getNode(),null)}function eF(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ue,(s,o)=>{r.push(Yi(s,o))}),n.isFullyInitialized()&&r.push(xT(n.getNode())),BT(t,r,n.getNode(),e)}function BT(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return b1(t.eventGenerator_,e,n,i)}var Ou,Dg=class{constructor(){this.views=new Map}};function tF(t){m(!Ou,"__referenceConstructor has already been defined"),Ou=t}function nF(){return m(Ou,"Reference.ts has not been loaded"),Ou}function rF(t){return t.views.size===0}function Qg(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return m(s!=null,"SyncTree gave us an op for an invalid query."),QC(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(QC(o,e,n,r));return s}}function iF(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Pu(n,i?r:null),c=!1;a?c=!0:r instanceof R?(a=Gg(n,r),c=!1):(a=R.EMPTY_NODE,c=!1);let u=Hu(new vn(a,c,!1),new vn(r,i,!1));return new Tg(e,u)}return o}function sF(t,e,n,r,i,s){let o=iF(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),X1(o,n),eF(o,n)}function oF(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Jn(t);if(i==="default")for(let[c,u]of t.views.entries())o=o.concat(KC(u,n,r)),GC(u)&&(t.views.delete(c),u.query._queryParams.loadsAllData()||s.push(u.query));else{let c=t.views.get(i);c&&(o=o.concat(KC(c,n,r)),GC(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||s.push(c.query)))}return a&&!Jn(t)&&s.push(new(nF())(e._repo,e._path)),{removed:s,events:o}}function $T(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function zi(t,e){let n=null;for(let r of t.views.values())n=n||Z1(r,e);return n}function HT(t,e){if(e._queryParams.loadsAllData())return qu(t);{let r=e._queryIdentifier;return t.views.get(r)}}function qT(t,e){return HT(t,e)!=null}function Jn(t){return qu(t)!=null}function qu(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Fu;function aF(t){m(!Fu,"__referenceConstructor has already been defined"),Fu=t}function cF(){return m(Fu,"Reference.ts has not been loaded"),Fu}var uF=1,Lu=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new tt(null),this.pendingWriteTree_=B1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function zT(t,e,n,r,i){return x1(t.pendingWriteTree_,e,n,r,i),i?qo(t,new Ji(PT(),e,n)):[]}function Or(t,e,n=!1){let r=N1(t.pendingWriteTree_,e);if(P1(t.pendingWriteTree_,e)){let s=new tt(null);return r.snap!=null?s=s.set(Q(),!0):et(r.children,o=>{s=s.set(new J(o),!0)}),qo(t,new gg(r.path,s,n))}else return[]}function zu(t,e,n){return qo(t,new Ji(qg(),e,n))}function lF(t,e,n){let r=tt.fromObject(n);return qo(t,new Nu(qg(),e,r))}function dF(t,e){return qo(t,new xu(qg(),e))}function hF(t,e,n){let r=Jg(t,n);if(r){let i=Zg(r),s=i.path,o=i.queryId,a=Ze(s,e),c=new xu(zg(o),a);return Xg(t,s,c)}else return[]}function bg(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||qT(o,e))){let c=oF(o,e,n,r);rF(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let u=c.removed;if(a=c.events,!i){let l=u.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Jn(f));if(l&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=gF(h);for(let g=0;g<f.length;++g){let _=f[g],P=_.query,$=KT(t,_);t.listenProvider_.startListening(Oo(P),Vu(t,P),$.hashFn,$.onComplete)}}}!d&&u.length>0&&!r&&(l?t.listenProvider_.stopListening(Oo(e),null):u.forEach(h=>{let f=t.queryToTagMap.get(Wu(h));t.listenProvider_.stopListening(Oo(h),f)}))}mF(t,u)}return a}function fF(t,e,n,r){let i=Jg(t,r);if(i!=null){let s=Zg(i),o=s.path,a=s.queryId,c=Ze(o,e),u=new Ji(zg(a),c,n);return Xg(t,o,u)}else return[]}function pF(t,e,n,r){let i=Jg(t,r);if(i){let s=Zg(i),o=s.path,a=s.queryId,c=Ze(o,e),u=tt.fromObject(n),l=new Nu(zg(a),c,u);return Xg(t,o,l)}else return[]}function YC(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let g=Ze(h,i);s=s||zi(f,g),o=o||Jn(f)});let a=t.syncPointTree_.get(i);a?(o=o||Jn(a),s=s||zi(a,Q())):(a=new Dg,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;s!=null?c=!0:(c=!1,s=R.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,g)=>{let _=zi(g,Q());_&&(s=s.updateImmediateChild(f,_))}));let u=qT(a,e);if(!u&&!e._queryParams.loadsAllData()){let h=Wu(e);m(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=yF();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let l=Wg(t.pendingWriteTree_,i),d=sF(a,e,n,l,s,c);if(!u&&!o&&!r){let h=HT(a,e);d=d.concat(_F(t,e,h))}return d}function Yg(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Ze(o,e),u=zi(a,c);if(u)return u});return FT(i,e,s,n,!0)}function qo(t,e){return WT(e,t.syncPointTree_,null,Wg(t.pendingWriteTree_,Q()))}function WT(t,e,n,r){if(L(t.path))return GT(t,e,n,r);{let i=e.get(Q());n==null&&i!=null&&(n=zi(i,Q()));let s=[],o=O(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let u=n?n.getImmediateChild(o):null,l=LT(r,o);s=s.concat(WT(a,c,u,l))}return i&&(s=s.concat(Qg(i,t,r,n))),s}}function GT(t,e,n,r){let i=e.get(Q());n==null&&i!=null&&(n=zi(i,Q()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,u=LT(r,o),l=t.operationForChild(o);l&&(s=s.concat(GT(l,a,c,u)))}),i&&(s=s.concat(Qg(i,t,r,n))),s}function KT(t,e){let n=e.query,r=Vu(t,n);return{hashFn:()=>(J1(e)||R.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?hF(t,n._path,r):dF(t,n._path);{let s=MO(i,n);return bg(t,n,null,s)}}}}function Vu(t,e){let n=Wu(e);return t.queryToTagMap.get(n)}function Wu(t){return t._path.toString()+"$"+t._queryIdentifier}function Jg(t,e){return t.tagToQueryMap.get(e)}function Zg(t){let e=t.indexOf("$");return m(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}}function Xg(t,e,n){let r=t.syncPointTree_.get(e);m(r,"Missing sync point for query tag that we're tracking");let i=Wg(t.pendingWriteTree_,e);return Qg(r,n,i,null)}function gF(t){return t.fold((e,n,r)=>{if(n&&Jn(n))return[qu(n)];{let i=[];return n&&(i=$T(n)),et(r,(s,o)=>{i=i.concat(o)}),i}})}function Oo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(cF())(t._repo,t._path):t}function mF(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Wu(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function yF(){return uF++}function _F(t,e,n){let r=e._path,i=Vu(t,e),s=KT(t,n),o=t.listenProvider_.startListening(Oo(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)m(!Jn(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((u,l,d)=>{if(!L(u)&&l&&Jn(l))return[qu(l).query];{let h=[];return l&&(h=h.concat($T(l).map(f=>f.query))),et(d,(f,g)=>{h=h.concat(g)}),h}});for(let u=0;u<c.length;++u){let l=c[u];t.listenProvider_.stopListening(Oo(l),Vu(t,l))}}return o}var Sg=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},Ag=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ve(this.path_,e);return new t(this.syncTree_,n)}node(){return Yg(this.syncTree_,this.path_)}},vF=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},JC=function(t,e,n){if(!t||typeof t!="object")return t;if(m(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return wF(t[".sv"],e,n);if(typeof t[".sv"]=="object")return IF(t[".sv"],e);m(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},wF=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:m(!1,"Unexpected server value: "+t)}},IF=function(t,e,n){t.hasOwnProperty("increment")||m(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&m(!1,"Unexpected increment value: "+r);let i=e.node();if(m(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},EF=function(t,e,n,r){return em(e,new Ag(n,t),r)},QT=function(t,e,n){return em(t,new Sg(e),n)};function em(t,e,n){let r=t.getPriority().val(),i=JC(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=JC(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ki(a,Ne(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ki(i))),o.forEachChild(ue,(a,c)=>{let u=em(c,e.getImmediateChild(a),n);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var jo=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function tm(t,e){let n=e instanceof J?e:new J(e),r=t,i=O(n);for(;i!==null;){let s=Sr(r.node.children,i)||{children:{},childCount:0};r=new jo(i,r,s),n=te(n),i=O(n)}return r}function ts(t){return t.node.value}function YT(t,e){t.node.value=e,Rg(t)}function JT(t){return t.node.childCount>0}function CF(t){return ts(t)===void 0&&!JT(t)}function Gu(t,e){et(t.node.children,(n,r)=>{e(new jo(n,t,r))})}function ZT(t,e,n,r){n&&!r&&e(t),Gu(t,i=>{ZT(i,e,!0,r)}),n&&r&&e(t)}function TF(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function zo(t){return new J(t.parent===null?t.name:zo(t.parent)+"/"+t.name)}function Rg(t){t.parent!==null&&DF(t.parent,t.name,t)}function DF(t,e,n){let r=CF(n),i=Wt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Rg(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,Rg(t))}var bF=/[\[\].#$\/\u0000-\u001F\u007F]/,SF=/[\[\].#$\u0000-\u001F\u007F]/,Up=10*1024*1024,XT=function(t){return typeof t=="string"&&t.length!==0&&!bF.test(t)},e0=function(t){return typeof t=="string"&&t.length!==0&&!SF.test(t)},AF=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),e0(t)};var RF=function(t,e,n,r){r&&e===void 0||nm(gu(t,"value"),e,n)},nm=function(t,e,n){let r=n instanceof J?new Xp(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Mr(r));if(typeof e=="function")throw new Error(t+"contains a function "+Mr(r)+" with contents = "+e.toString());if(iT(e))throw new Error(t+"contains "+e.toString()+" "+Mr(r));if(typeof e=="string"&&e.length>Up/3&&Io(e)>Up)throw new Error(t+"contains a string greater than "+Up+" utf8 bytes "+Mr(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(et(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!XT(o)))throw new Error(t+" contains an invalid key ("+o+") "+Mr(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);c1(r,o),nm(t,a,r),u1(r)}),i&&s)throw new Error(t+' contains ".value" child '+Mr(r)+" in addition to actual children.")}};var t0=function(t,e,n,r){if(!(r&&n===void 0)&&!e0(n))throw new Error(gu(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},xF=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),t0(t,e,n,r)},NF=function(t,e){if(O(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},PF=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!XT(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!AF(n))throw new Error(gu(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var xg=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function rm(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Bg(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function n0(t,e,n){rm(t,n),r0(t,r=>Bg(r,e))}function wn(t,e,n){rm(t,n),r0(t,r=>xt(r,e)||xt(e,r))}function r0(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(MF(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function MF(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Fr&&Le("event: "+n.toString()),es(r)}}}var kF="repo_interrupt",OF=25,Ng=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new xg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ru(),this.transactionQueueTree_=new jo,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function FF(t,e,n){if(t.stats_=jg(t.repoInfo_),t.forceRestClient_||LO())t.server_=new lg(t.repoInfo_,(r,i,s,o)=>{ZC(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>XC(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{_e(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new $g(t.repoInfo_,e,(r,i,s,o)=>{ZC(t,r,i,s,o)},r=>{XC(t,r)},r=>{VF(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=UO(t.repoInfo_,()=>new pg(t.stats_,t.server_)),t.infoData_=new dg,t.infoSyncTree_=new Lu({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=zu(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),sm(t,"connected",!1),t.serverSyncTree_=new Lu({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);wn(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function LF(t){let n=t.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function im(t){return vF({timestamp:LF(t)})}function ZC(t,e,n,r,i){t.dataUpdateCount++;let s=new J(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=wo(n,u=>Ne(u));o=pF(t.serverSyncTree_,s,c,i)}else{let c=Ne(n);o=fF(t.serverSyncTree_,s,c,i)}else if(r){let c=wo(n,u=>Ne(u));o=lF(t.serverSyncTree_,s,c)}else{let c=Ne(n);o=zu(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=Ku(t,s)),wn(t.eventQueue_,a,o)}function XC(t,e){sm(t,"connected",e),e===!1&&jF(t)}function VF(t,e){et(e,(n,r)=>{sm(t,n,r)})}function sm(t,e,n){let r=new J("/.info/"+e),i=Ne(n);t.infoData_.updateSnapshot(r,i);let s=zu(t.infoSyncTree_,r,i);wn(t.eventQueue_,r,s)}function i0(t){return t.nextWriteId_++}function UF(t,e,n,r,i){om(t,"set",{path:e.toString(),value:n,priority:r});let s=im(t),o=Ne(n,r),a=Yg(t.serverSyncTree_,e),c=QT(o,a,s),u=i0(t),l=zT(t.serverSyncTree_,e,c,u,!0);rm(t.eventQueue_,l),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let g=h==="ok";g||Xe("set at "+e+" failed: "+h);let _=Or(t.serverSyncTree_,u,!g);wn(t.eventQueue_,e,_),HF(t,i,h,f)});let d=u0(t,e);Ku(t,d),wn(t.eventQueue_,d,[])}function jF(t){om(t,"onDisconnectEvents");let e=im(t),n=Ru();hg(t.onDisconnect_,Q(),(i,s)=>{let o=EF(i,s,t.serverSyncTree_,e);NT(n,i,o)});let r=[];hg(n,Q(),(i,s)=>{r=r.concat(zu(t.serverSyncTree_,i,s));let o=u0(t,i);Ku(t,o)}),t.onDisconnect_=Ru(),wn(t.eventQueue_,Q(),r)}function BF(t,e,n){let r;O(e._path)===".info"?r=YC(t.infoSyncTree_,e,n):r=YC(t.serverSyncTree_,e,n),n0(t.eventQueue_,e._path,r)}function eT(t,e,n){let r;O(e._path)===".info"?r=bg(t.infoSyncTree_,e,n):r=bg(t.serverSyncTree_,e,n),n0(t.eventQueue_,e._path,r)}function $F(t){t.persistentConnection_&&t.persistentConnection_.interrupt(kF)}function om(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Le(n,...e)}function HF(t,e,n,r){e&&es(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function s0(t,e,n){return Yg(t.serverSyncTree_,e,n)||R.EMPTY_NODE}function am(t,e=t.transactionQueueTree_){if(e||Qu(t,e),ts(e)){let n=a0(t,e);m(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&qF(t,zo(e),n)}else JT(e)&&Gu(e,n=>{am(t,n)})}function qF(t,e,n){let r=n.map(u=>u.currentWriteId),i=s0(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let l=n[u];m(l.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;let d=Ze(e,l.path);s=s.updateChild(d,l.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,u=>{om(t,"transaction put response",{path:c.toString(),status:u});let l=[];if(u==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(Or(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Qu(t,tm(t.transactionQueueTree_,e)),am(t,t.transactionQueueTree_),wn(t.eventQueue_,e,l);for(let h=0;h<d.length;h++)es(d[h])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Xe("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Ku(t,e)}},o)}function Ku(t,e){let n=o0(t,e),r=zo(n),i=a0(t,n);return zF(t,i,r),r}function zF(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=Ze(n,c.path),l=!1,d;if(m(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)l=!0,d=c.abortReason,i=i.concat(Or(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=OF)l=!0,d="maxretry",i=i.concat(Or(t.serverSyncTree_,c.currentWriteId,!0));else{let h=s0(t,c.path,o);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){nm("transaction failed: Data returned ",f,c.path);let g=Ne(f);typeof f=="object"&&f!=null&&Wt(f,".priority")||(g=g.updatePriority(h.getPriority()));let P=c.currentWriteId,$=im(t),Se=QT(g,h,$);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=Se,c.currentWriteId=i0(t),o.splice(o.indexOf(P),1),i=i.concat(zT(t.serverSyncTree_,c.path,Se,c.currentWriteId,c.applyLocally)),i=i.concat(Or(t.serverSyncTree_,P,!0))}else l=!0,d="nodata",i=i.concat(Or(t.serverSyncTree_,c.currentWriteId,!0))}wn(t.eventQueue_,n,i),i=[],l&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}Qu(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)es(r[a]);am(t,t.transactionQueueTree_)}function o0(t,e){let n,r=t.transactionQueueTree_;for(n=O(e);n!==null&&ts(r)===void 0;)r=tm(r,n),e=te(e),n=O(e);return r}function a0(t,e){let n=[];return c0(t,e,n),n.sort((r,i)=>r.order-i.order),n}function c0(t,e,n){let r=ts(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Gu(e,i=>{c0(t,i,n)})}function Qu(t,e){let n=ts(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,YT(e,n.length>0?n:void 0)}Gu(e,r=>{Qu(t,r)})}function u0(t,e){let n=zo(o0(t,e)),r=tm(t.transactionQueueTree_,e);return TF(r,i=>{jp(t,i)}),jp(t,r),ZT(r,i=>{jp(t,i)}),n}function jp(t,e){let n=ts(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(m(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(m(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Or(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?YT(e,void 0):n.length=s+1,wn(t.eventQueue_,zo(e),i);for(let o=0;o<r.length;o++)es(r[o])}}function WF(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function GF(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xe(`Invalid query segment '${n}' in query '${t}'`)}return e}var tT=function(t,e){let n=KF(t),r=n.namespace;n.domain==="firebase.com"&&_n(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_n("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||AO();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Iu(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new J(n.pathString)}},KF=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let l=t.indexOf("/");l===-1&&(l=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(l,d)),l<d&&(i=WF(t.substring(l,d)));let h=GF(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let f=e.slice(0,u);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in h&&(s=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var Uu=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+_e(this.snapshot.exportVal())}},ju=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Pg=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return m(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Mg=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return L(this._path)?null:ET(this._path)}get ref(){return new In(this._repo,this._path)}get _queryIdentifier(){let e=UC(this._queryParams),n=Ug(e);return n==="{}"?"default":n}get _queryObject(){return UC(this._queryParams)}isEqual(e){if(e=Ye(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Bg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+a1(this._path)}};var In=class t extends Mg{constructor(e,n){super(e,n,new ug,!1)}get parent(){let e=TT(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Bu=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new J(e),r=$u(this.ref,e);return new t(this._node.getChild(n),r,ue)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,$u(this.ref,r),ue)))}hasChild(e){let n=new J(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function Yu(t,e){return t=Ye(t),t._checkNotDeleted("ref"),e!==void 0?$u(t._root,e):t._root}function $u(t,e){return t=Ye(t),O(t._path)===null?xF("child","path",e,!1):t0("child","path",e,!1),new In(t._repo,ve(t._path,e))}function l0(t,e){t=Ye(t),NF("set",t._path),RF("set",e,t._path,!1);let n=new Wn;return UF(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}var kg=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Uu("value",this,new Bu(e.snapshotNode,new In(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ju(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Og=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new ju(this,e,n):null}createEvent(e,n){m(e.childName!=null,"Child events should have a childName.");let r=$u(new In(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Uu(e.type,this,new Bu(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function QF(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let c=n,u=(l,d)=>{eT(t._repo,t,a),c(l,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}let o=new Pg(n,s||void 0),a=e==="value"?new kg(o):new Og(e,o);return BF(t._repo,t,a),()=>eT(t._repo,t,a)}function cm(t,e,n,r){return QF(t,"value",e,n,r)}tF(In);aF(In);var YF="FIREBASE_DATABASE_EMULATOR_HOST",Fg={},JF=!1;function ZF(t,e,n,r){t.repoInfo_=new Iu(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function XF(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||_n("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Le("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=tT(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[YF]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=tT(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let l=i&&c?new Po(Po.OWNER):new Wp(t.name,t.options,e);PF("Invalid Firebase Database URL",o),L(o.path)||_n("Database URL must point to the root of a Firebase Database (not including a child path).");let d=tL(a,t,l,new zp(t.name,n));return new Lg(d,t)}function eL(t,e){let n=Fg[e];(!n||n[t.key]!==t)&&_n(`Database ${e}(${t.repoInfo_}) has already been deleted.`),$F(t),delete n[t.key]}function tL(t,e,n,r){let i=Fg[e.name];i||(i={},Fg[e.name]=i);let s=i[t.toURLString()];return s&&_n("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Ng(t,JF,n,r),i[t.toURLString()]=s,s}var Lg=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(FF(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new In(this._repo,Q())),this._rootInternal}_delete(){return this._rootInternal!==null&&(eL(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_n("Cannot call "+e+" on a deleted database.")}};function Ju(t=Kn(),e){let n=Pr(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=hu("database");r&&nL(n,...r)}return n}function nL(t,e,n,r={}){t=Ye(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&_n("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_n('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Po(Po.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:fu(r.mockUserToken,t.app.options.projectId);s=new Po(o)}ZF(i,e,n,s)}function rL(t){DO(Yt),Qt(new Je("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return XF(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),ce(EC,CC,t),ce(EC,CC,"esm2017")}$g.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};$g.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};rL();var Zu=(()=>{let e=class e{constructor(){this.detailsSubject=new he(null),this.details$=this.detailsSubject.asObservable(),this.app=Do(QE.firebase)}getTitles(){return""}geTitleById(r){return""+r}writeTittleData(r){let i=Ju(),s=Yu(i,"mangas/"+r.titleId);l0(s,{description:r.description,image:r.image,last_chapter:r.last_chapter,last_update:r.last_update,name:r.name,status:r.status,total_chapter:r.total_chapter,type:r.type,update_chapter:r.update_chapter})}readTittleData(r){return new U(i=>{let s=Ju(),o=Yu(s,"mangas/"+r),a=cm(o,c=>{let u=c.val();i.next(u)});return{unsubscribe(){a()}}})}readAddTittlesData(){return new U(r=>{let i=Ju(),s=Yu(i,"mangas"),o=cm(s,a=>{let c=a.val();r.next(c)});return{unsubscribe(){o()}}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iL=t=>["/title/",t];function sL(t,e){if(t&1&&(N(0,"div",16)(1,"div",17)(2,"div",4),oe(3,"img",18),V(),N(4,"div",19)(5,"h3",10),ae(6),V(),N(7,"div",6)(8,"span",7),ae(9),V(),N(10,"span",8),ae(11),V()(),N(12,"div",20)(13,"span",21),ae(14),V(),oe(15,"div",22),N(16,"div",23),ae(17),V()()()()()),t&2){let n=e.$implicit;Bn("routerLink",kI(8,iL,n[6])),fe(3),Si("src","/assets/test-list/",n[1],"",vr),fe(3),it(n[0]),fe(3),it(n[2]),fe(2),it(n[3]),fe(3),it(n[4]),fe(3),it(n[5])}}var d0=(()=>{let e=class e{constructor(){this.titleService=v(Zu),this.details$=Ae,this.title_list=[["\u0421\u0442\u0430\u043D\u0446\u0456\u044F \u043F\u0440\u043E\u0449\u0430\u043D\u044C","1.jpg","\u041C\u0430\u043D\u0491\u0430","\u0412\u0430\u043D\u0448\u043E\u0442","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E","03 \u0431\u0435\u0440. 2024","1"],["\u0410\u043B\u044C\u044F\u043D\u0441 \u043F\u0430\u0440\u0430\u0441\u043E\u043B\u044F","Parasol.jpg","\u041C\u0430\u043D\u0491\u0430","\u0412\u0430\u043D\u0448\u043E\u0442","\u0417\u0430\u0432\u0435\u0440\u0448\u0435\u043D\u043E","17 \u0441\u0456\u0447. 2024","2"],["\u0421\u0442\u043E\u0441\u0443\u043D\u043A\u0438, \u0432\u0438\u043F\u0430\u0434\u043A\u043E\u0432\u043E \u0441\u0442\u0432\u043E\u0440\u0435\u043D\u0456 \u043D\u0430 \u043D\u0435\u0431\u0435\u0441\u0430\u0445","Match.jpg","\u041C\u0430\u043D\u0445\u0432\u0430","80 \u0437 80","\u041F\u0435\u0440\u0435\u043A\u043B\u0430\u0434\u0430\u0454\u0442\u044C\u0441\u044F","13 \u0433\u0440\u0443. 2023","3"],["\u041D\u0443\u043B\u044C\u043E\u0432\u0438\u0439 \u0415\u0434\u0435\u043C","0.jpg","\u041C\u0430\u043D\u0491\u0430","3 \u0437 124","\u041F\u0440\u0438\u0437\u0443\u043F\u0438\u043D\u0435\u043D\u043E","01 \u043B\u044E\u0442. 2024","4"]]}ngOnInit(){this.details$=this.titleService.readAddTittlesData(),console.log(this.details$)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["bido-titleslist"]],standalone:!0,features:[Qe],decls:24,vars:1,consts:[[1,"background_preview"],[1,"blured"],[1,"container"],[1,"intro"],[1,"cover"],["alt","2","src","/assets/test-list/MHA_Volume_Cover.webp"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"info"],[1,"info_name"],[1,"info_descr"],["routerLink","/chapter/mah_420"],[1,"previous"],[1,"items"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"item"],["alt","2",3,"src"],[1,"content"],[1,"detail"],[1,"status"],[1,"line"],[1,"time"]],template:function(i,s){i&1&&(N(0,"div",0),oe(1,"div",1),N(2,"div",2)(3,"div",3)(4,"div",4),oe(5,"img",5),V(),N(6,"div",6)(7,"span",7),ae(8,"\u041C\u0430\u043D\u0491\u0430"),V(),N(9,"span",8),ae(10,"\u0420\u043E\u0437\u0434\u0456\u043B: 420"),V()()(),N(11,"div",9)(12,"h3",10),ae(13,"\u041C\u043E\u044F \u0413\u0435\u0440\u043E\u0439\u0441\u044C\u043A\u0430 \u0410\u043A\u0430\u0434\u0435\u043C\u0456\u044F"),V(),N(14,"div",11),ae(15,"\u041B\u044E\u0434\u0438 \u043D\u0435 \u043D\u0430\u0440\u043E\u0434\u0436\u0443\u044E\u0442\u044C\u0441\u044F \u0440\u0456\u0432\u043D\u0438\u043C\u0438. \u0406\u0437\u0443\u043A\u0443 \u041C\u0456\u0434\u043E\u0440\u0456\u044F \u0443\u0441\u0432\u0456\u0434\u043E\u043C\u0438\u0432 \u0446\u0435 \u0449\u0435 \u0443 \u0447\u043E\u0442\u0438\u0440\u044C\u043E\u0445\u0440\u0456\u0447\u043D\u043E\u043C\u0443 \u0432\u0456\u0446\u0456. \u0422\u0430 \u0446\u0435 \u043D\u0435 \u0437\u0430\u0432\u0430\u0434\u0438\u0442\u044C \u0439\u043E\u043C\u0443 \u0437\u0434\u0456\u0439\u0441\u043D\u0438\u0442\u0438 \u0441\u0432\u043E\u044E \u043C\u0440\u0456\u044E \u2014 \u0441\u0442\u0430\u0442\u0438 \u0432\u0435\u043B\u0438\u043A\u0438\u043C \u0433\u0435\u0440\u043E\u0454\u043C, \u044F\u043A \u043B\u0435\u0433\u0435\u043D\u0434\u0430\u0440\u043D\u0438\u0439 \u0412\u0441\u0435\u043C\u043E\u0433\u0443\u0442\u043D\u0456\u0439. "),V()(),N(16,"a",12),ae(17,"\u0427\u0438\u0442\u0430\u0442\u0438 \u043D\u043E\u0432\u0438\u0439 \u0440\u043E\u0437\u0434\u0456\u043B"),V()()(),N(18,"div",13)(19,"div",2)(20,"h2",10),ae(21,"\u041E\u0441\u0442\u0430\u043D\u043D\u0456 \u043E\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044F"),V(),N(22,"div",14),Ir(23,sL,18,10,"div",15),V()()()),i&2&&(fe(23),Bn("ngForOf",s.title_list))},dependencies:[Hc,uu],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;color:#e6f5fd;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:8px 6px 6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px}.intro[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:5px}.background_preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:var(--background);background:var(--primary);margin:15px 0;padding:7px 19px;border-radius:5px;box-shadow:0 0 80px -5px var(--primary);font-family:UZSansB;font-weight:400}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.items[_ngcontent-%COMP%]{display:grid;gap:36px 15px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr))}.item[_ngcontent-%COMP%]{background:var(--background);-webkit-box-shadow:0px 9px 19px -10px var(--text-3);box-shadow:0 9px 19px -10px var(--text-3);position:relative;padding-bottom:40px}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:2%;background:linear-gradient(180deg,rgba(0,0,0,0) 65%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{align-self:center;display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:90%;font-size:14px;color:var(--gray-400);font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:var(--gray-400);margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed var(--gray-400) 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{white-space:nowrap}"]});let t=e;return t})();var Xu=(()=>{let e=class e{constructor(){this.currentPageIndexSubject=new he(0),this.currentPageIndex$=this.currentPageIndexSubject.asObservable()}getAllPagesChapter(){return["/assets/test-webp-chapter/bnha_420_a_001-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_002-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_003-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_004-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_005-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_006-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_007-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_008-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_009-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_010-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_011-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_012-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_013-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_014-mangajanai.webp","/assets/test-webp-chapter/bnha_420_a_015.webp"]}setCurrentPageIndex(r){this.currentPageIndexSubject.next(r)}getAllPagesCount(){return this.getAllPagesChapter().length}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var f0=(()=>{let e=class e{constructor(r){this.chapterService=r,this.currentPageIndex=1,this.name="\u041C\u043E\u044F \u0433\u0435\u0440\u043E\u0439\u0441\u044C\u043A\u0430 \u0430\u043A\u0430\u0434\u0435\u043C\u0456\u044F 420",this.pages=["\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 1","\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 2","\u0441\u0442\u043E\u0440\u0456\u043D\u043A\u0430 3"],this.allPages=this.chapterService.getAllPagesCount()}ngOnInit(){this.chapterService.currentPageIndex$.subscribe(r=>{this.currentPageIndex=r})}};e.\u0275fac=function(i){return new(i||e)(ye(Xu))},e.\u0275cmp=Ke({type:e,selectors:[["app-navbar"]],standalone:!0,features:[Qe],decls:11,vars:2,consts:[[1,"nav-content"],[1,"chapters_button"],["viewBox","3 3 18 18"],["d","M4 7a1 1 0 0 1 1-1h1a1 1 0 0 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1zm-5 5a1 1 0 0 1 1-1h1a1 1 0 1 1 0 2H5a1 1 0 0 1-1-1zm5 0a1 1 0 0 1 1-1h9a1 1 0 1 1 0 2h-9a1 1 0 0 1-1-1z"],[1,"pages"],[1,"reload_button"],["viewBox","0 0 24 24"],["d","M14.55 22.42C14.22 22.42 13.91 22.2 13.82 21.86C13.72 21.46 13.95 21.05 14.35 20.94C18.41 19.87 21.24 16.19 21.24 11.99C21.24 6.89 17.09 2.74 11.99 2.74C7.66 2.74 4.82 5.27 3.49 6.8H6.43C6.84 6.8 7.18 7.14 7.18 7.55C7.18 7.96 6.86 8.31 6.44 8.31H2.01C1.94 8.31 1.87 8.3 1.8 8.28C1.71 8.25 1.63 8.21 1.56 8.16C1.47 8.1 1.4 8.02 1.35 7.93C1.3 7.83 1.26 7.73 1.25 7.62C1.25 7.59 1.25 7.57 1.25 7.54V3C1.25 2.59 1.59 2.25 2 2.25C2.41 2.25 2.75 2.59 2.75 3V5.39C4.38 3.64 7.45 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 16.88 19.46 21.16 14.74 22.4C14.68 22.41 14.61 22.42 14.55 22.42Z"],["d","M11.29 22.73C11.27 22.73 11.24 22.73 11.22 22.72C10.15 22.65 9.1 22.41 8.1 22.02C7.81 21.91 7.62 21.62 7.62 21.31C7.62 21.22 7.64 21.13 7.67 21.05C7.82 20.67 8.26 20.47 8.64 20.62C9.5 20.96 10.41 21.16 11.33 21.23H11.34C11.74 21.25 12.04 21.59 12.04 21.99C12.04 22 12.04 22.02 12.04 22.03C12.01 22.42 11.68 22.73 11.29 22.73ZM5.78 20.58C5.61 20.58 5.45 20.53 5.31 20.42C4.47 19.75 3.74 18.96 3.13 18.07C3.04 17.94 2.99 17.8 2.99 17.65C2.99 17.4 3.11 17.17 3.32 17.03C3.65 16.8 4.14 16.89 4.36 17.22C4.89 17.99 5.52 18.67 6.25 19.24C6.42 19.38 6.53 19.59 6.53 19.82C6.53 19.99 6.48 20.16 6.37 20.3C6.23 20.48 6.01 20.58 5.78 20.58ZM2.44 15.7C2.11 15.7 1.82 15.49 1.73 15.18C1.41 14.15 1.25 13.08 1.25 12C1.25 11.59 1.59 11.25 2 11.25C2.41 11.25 2.75 11.59 2.75 12C2.75 12.93 2.89 13.85 3.16 14.73C3.18 14.8 3.19 14.88 3.19 14.96C3.19 15.29 2.98 15.57 2.67 15.67C2.59 15.69 2.52 15.7 2.44 15.7Z"],["d","M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"]],template:function(i,s){i&1&&(N(0,"div",0)(1,"div",1),Hs(),N(2,"svg",2),oe(3,"path",3),V()(),Tw(),N(4,"div",4),ae(5),V(),N(6,"div",5),Hs(),N(7,"svg",6),oe(8,"path",7)(9,"path",8)(10,"path",9),V()()()),i&2&&(fe(5),sf("",s.currentPageIndex,"/",s.allPages,""))},styles:[".nav-content[_ngcontent-%COMP%]{background:var(--background);color:var(--text);position:fixed;bottom:0;width:100%;display:flex;justify-content:space-around;align-items:center;-webkit-box-shadow:0px -9px 19px -10px var(--text-3);box-shadow:0 -9px 19px -10px var(--text-3)}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}"]});let t=e;return t})();function oL(t,e){if(t&1&&(N(0,"div"),oe(1,"img",1),V()),t&2){let n=e.$implicit;fe(),rf("src",n,vr)}}var p0=(()=>{let e=class e{constructor(r){this.chapterService=r,this.pages=[],this.currentPageIndex=0,this.allPagesCount=0}ngOnInit(){this.pages=this.chapterService.getAllPagesChapter(),this.allPagesCount=this.pages.length}onScroll(r){let i=window.scrollY,s=window.innerHeight,o=document.body.scrollHeight,a=s+i,c=0,u=0;for(let l=0;l<this.pages.length;l++)if(u+=document.querySelector("img")?.clientHeight??0,u>=a){c=l;break}this.currentPageIndex!==c&&(this.currentPageIndex=c,this.chapterService.setCurrentPageIndex(c))}};e.\u0275fac=function(i){return new(i||e)(ye(Xu))},e.\u0275cmp=Ke({type:e,selectors:[["bido-chapter"]],hostBindings:function(i,s){i&1&&zs("scroll",function(a){return s.onScroll(a)},!1,Yw)},standalone:!0,features:[Qe],decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["alt","","loading","lazy",3,"src"]],template:function(i,s){i&1&&(Ir(0,oL,2,1,"div",0),oe(1,"app-navbar")),i&2&&Bn("ngForOf",s.pages)},dependencies:[Hc,f0],styles:["img[_ngcontent-%COMP%]{max-width:100%;display:block}"]});let t=e;return t})();function aL(t,e){if(t&1&&(N(0,"div",3)(1,"div",4)(2,"div",5),oe(3,"img",6),V(),N(4,"div",7)(5,"span",8),ae(6),V(),N(7,"span",9),ae(8),V(),N(9,"span",10),ae(10),V()()(),N(11,"div",11)(12,"h3",12),ae(13),V(),N(14,"div",13),ae(15),V()()()),t&2){let n=e.ngIf;fe(3),Si("src","/assets/test-list/",n.image,"",vr),fe(3),it(n.type),fe(2),it(n.last_chapter),fe(2),it(n.status),fe(3),it(n.name),fe(2),it(n.description)}}var g0=(()=>{let e=class e{constructor(){this.title=xI(null),this.activatedRoute=v(gn),this.titleService=v(Zu),this.details$=Ae}ngOnInit(){this.id&&(console.log(this.id),this.details$=this.titleService.readTittleData(this.id))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["bido-title"]],inputs:{id:"id"},standalone:!0,features:[Qe],decls:4,vars:3,consts:[[1,"background_preview"],[1,"blured"],["class","container",4,"ngIf"],[1,"container"],[1,"intro"],[1,"cover"],["alt","2",3,"src"],[1,"tags"],[1,"tag","type"],[1,"tag","last"],[1,"tag"],[1,"info"],[1,"info_name"],[1,"info_descr"]],template:function(i,s){i&1&&(N(0,"div",0),oe(1,"div",1),Ir(2,aL,16,7,"div",2),FI(3,"async"),V()),i&2&&(fe(2),Bn("ngIf",LI(3,1,s.details$)))},dependencies:[tE,nE],styles:[".background_preview[_ngcontent-%COMP%]{width:100vw}.blured[_ngcontent-%COMP%]{width:100%;height:80vh;opacity:60%;position:absolute;z-index:-1;-webkit-transition:opacity .3s ease-in-out;-moz-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 80.27%),url(/assets/test-list/MHA_Volume_Cover.webp),#d3d3d3 no-repeat;background-size:cover;background-position:50% center;filter:blur(10px)}.container[_ngcontent-%COMP%]{padding:100px 20px;display:flex;flex-direction:column;align-items:flex-start}.intro[_ngcontent-%COMP%]{display:flex}.tags[_ngcontent-%COMP%]{padding:0 20px;display:flex;flex-flow:column wrap;gap:10px;align-items:flex-start;font-family:UZSansB;font-weight:400}.tag[_ngcontent-%COMP%]{display:inline-block;padding:6px;margin:2px;font-size:14px;line-height:6px;background:var(--accent);border-radius:5px}.cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:200px;border-radius:5px}.background_preview[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:var(--background);background:var(--primary);margin:15px 0;padding:7px 19px;border-radius:5px;box-shadow:0 0 80px -5px var(--primary);font-family:UZSansB;font-weight:400}.previous[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:0 20px}.items[_ngcontent-%COMP%]{display:grid;gap:36px 15px;grid-template-columns:repeat(auto-fill,minmax(210px,1fr))}.item[_ngcontent-%COMP%]{background:#edf5f808;border-radius:10px;position:relative;padding-bottom:40px}.item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:auto;width:100%}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;margin-top:10px;z-index:2;bottom:0;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,var(--background) 90%);width:100%;height:100%;align-content:flex-end;justify-content:flex-end}.content[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%]{flex-flow:row wrap}.item[_ngcontent-%COMP%]   .info_name[_ngcontent-%COMP%], .item[_ngcontent-%COMP%]   .tags[_ngcontent-%COMP%], .detail[_ngcontent-%COMP%]{padding:0 8px;margin:2px 0}.detail[_ngcontent-%COMP%]{display:grid;grid-template-columns:.5fr 3fr 1fr;align-items:center;width:100%;font-size:14px;color:gray;font-family:UZSansB;font-weight:400}.dot[_ngcontent-%COMP%]{display:inline-block;background:gray;margin:0 7px;width:5px;height:5px;border-radius:10px}.line[_ngcontent-%COMP%]{border-bottom:dashed gray 1px;height:1px;margin:6px 10px 0;opacity:30%}.time[_ngcontent-%COMP%]{text-wrap:nowrap;white-space:nowrap}"]});let t=e;return t})();var m0=[{path:"",component:d0},{path:"chapter/:name",loadComponent:()=>p(void 0,null,function*(){return p0})},{path:"title/:id",loadComponent:()=>p(void 0,null,function*(){return g0})}];var Br=new Ln("ANGULARFIRE2_VERSION");function tl(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Wo=(t,e)=>{let n=e?[e]:_u(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},rs=class{constructor(){return Wo(cL)}},cL="app-check";function ns(){}var el=class{zone;delegate;constructor(e,n=yd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},um=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ns,{},ns,ns)),n.pipe(me({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},is=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new el(Zone.current)),this.insideAngular=n.run(()=>new el(Zone.current,md)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(k(X))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nl(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function uL(t){return nl().ngZone.runOutsideAngular(()=>t())}function jr(t){return nl().ngZone.run(()=>t())}function lL(t){return dL(nl())(t)}function dL(t){return function(n){return n=n.lift(new um(t.ngZone)),n.pipe(xn(t.outsideAngular),Rn(t.insideAngular))}}var hL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),jr(()=>t.apply(void 0,r))},ss=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=jr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ns,{},ns,ns))),r[s]=hL(r[s],n));let i=uL(()=>t.apply(this,r));if(!e)if(i instanceof U){let s=nl();return i.pipe(xn(s.outsideAngular),Rn(s.insideAngular))}else return jr(()=>i);return i instanceof U?i.pipe(lL):i instanceof Promise?jr(()=>new Promise((s,o)=>i.then(a=>jr(()=>s(a)),a=>jr(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:jr(()=>i)};var En=class{constructor(e){return e}},$r=class{constructor(){return _u()}};function fL(t){return t&&t.length===1?t[0]:new En(Kn())}var lm=new x("angularfire2._apps"),pL={provide:En,useFactory:fL,deps:[[new Be,lm]]},gL={provide:$r,deps:[[new Be,lm]]};function mL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new En(r)}}var yL=(()=>{class t{constructor(n){ce("angularfire",Br.full,"core"),ce("angularfire",Br.full,"app"),ce("angular",VI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(k(Un))};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[pL,gL]})}return t})();function y0(t,...e){return{ngModule:yL,providers:[{provide:lm,useFactory:mL(t),multi:!0,deps:[X,At,is,...e]}]}}var _0=ss(Do,!0);function M0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var k0=M0,O0=new mn("auth","Firebase",M0());var cl=new Gt("@firebase/auth");function _L(t,...e){cl.logLevel<=K.WARN&&cl.warn(`Auth (${Yt}): ${t}`,...e)}function il(t,...e){cl.logLevel<=K.ERROR&&cl.error(`Auth (${Yt}): ${t}`,...e)}function Xn(t,...e){throw xm(t,...e)}function qr(t,...e){return xm(t,...e)}function F0(t,e,n){let r=Object.assign(Object.assign({},k0()),{[e]:n});return new mn("auth","Firebase",r).create(e,{appName:t.name})}function Hr(t){return F0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xm(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return O0.create(t,...e)}function T(t,e,...n){if(!t)throw xm(e,...n)}function Cn(t){let e="INTERNAL ASSERTION FAILED: "+t;throw il(e),new Error(e)}function er(t,e){t||Cn(e)}function pm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vL(){return v0()==="http:"||v0()==="https:"}function v0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function wL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vL()||eC()||"connection"in navigator)?navigator.onLine:!0}function IL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var zr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,er(n>e,"Short delay should be less than long delay!"),this.isMobile=_o()||pu()}get(){return wL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nm(t,e){er(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var ul=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var EL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var CL=new zr(3e4,6e4);function Pm(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function as(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return L0(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Rr(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),ul.fetch()(V0(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function L0(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},EL),e);try{let i=new gm(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw rl(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw F0(t,l,u);Xn(t,l)}}catch(i){if(i instanceof at)throw i;Xn(t,"network-request-failed",{message:String(i)})}})}function TL(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){let u=yield as(t,e,n,r,i);return"mfaPendingCredential"in u&&Xn(t,"multi-factor-auth-required",{_serverResponse:u}),u})}function V0(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Nm(t.config,i):`${t.config.apiScheme}://${i}`}var gm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qr(this.auth,"network-request-failed")),CL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=qr(t,e,r);return i.customData._tokenResponse=n,i}function DL(t,e){return p(this,null,function*(){return as(t,"POST","/v1/accounts:delete",e)})}function U0(t,e){return p(this,null,function*(){return as(t,"POST","/v1/accounts:lookup",e)})}function Go(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Mm(t,e=!1){return p(this,null,function*(){let n=Ye(t),r=yield n.getIdToken(e),i=km(r);T(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Go(dm(i.auth_time)),issuedAtTime:Go(dm(i.iat)),expirationTime:Go(dm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function dm(t){return Number(t)*1e3}function km(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return il("JWT malformed, contained fewer than 3 sections"),null;try{let i=yo(n);return i?JSON.parse(i):(il("Failed to decode base64 JWT payload"),null)}catch(i){return il("Caught error parsing JWT payload as JSON",i?.toString()),null}}function w0(t){let e=km(t);return T(e,"internal-error"),T(typeof e.exp<"u","internal-error"),T(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qo(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof at&&bL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function bL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var mm=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Yo=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Go(this.lastLoginAt),this.creationTime=Go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ll(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Qo(t,U0(n,{idToken:r}));T(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?j0(s.providerUserInfo):[],a=SL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Yo(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function Om(t){return p(this,null,function*(){let e=Ye(t);yield ll(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function SL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function j0(t){return t.map(e=>{var{providerId:n}=e,r=_d(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function AL(t,e){return p(this,null,function*(){let n=yield L0(t,{},()=>p(this,null,function*(){let r=Rr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=V0(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ul.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function RL(t,e){return p(this,null,function*(){return as(t,"POST","/v2/accounts:revokeToken",Pm(t,e))})}var Ko=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){T(e.idToken,"internal-error"),T(typeof e.idToken<"u","internal-error"),T(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){T(e.length!==0,"internal-error");let n=w0(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield AL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(T(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(T(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(T(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Cn("not implemented")}};function Zn(t,e){T(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var os=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=_d(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Yo(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield Qo(this,this.stsTokenManager.getToken(this.auth,e));return T(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Mm(this,e)}reload(){return Om(this)}_assign(e){this!==e&&(T(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield ll(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(yn(this.auth.app))return Promise.reject(Hr(this.auth));let e=yield this.getIdToken();return yield Qo(this,DL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,$=(u=n.createdAt)!==null&&u!==void 0?u:void 0,Se=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:se,emailVerified:qe,isAnonymous:sn,providerData:je,stsTokenManager:on}=n;T(se&&on,e,"internal-error");let _s=Ko.fromJSON(this.name,on);T(typeof se=="string",e,"internal-error"),Zn(d,e.name),Zn(h,e.name),T(typeof qe=="boolean",e,"internal-error"),T(typeof sn=="boolean",e,"internal-error"),Zn(f,e.name),Zn(g,e.name),Zn(_,e.name),Zn(P,e.name),Zn($,e.name),Zn(Se,e.name);let vs=new t({uid:se,auth:e,email:h,emailVerified:qe,displayName:d,isAnonymous:sn,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:_s,createdAt:$,lastLoginAt:Se});return je&&Array.isArray(je)&&(vs.providerData=je.map(nd=>Object.assign({},nd))),P&&(vs._redirectEventId=P),vs}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Ko;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield ll(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];T(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?j0(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ko;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Yo(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var I0=new Map;function Tn(t){er(t instanceof Function,"Expected a class definition");let e=I0.get(t);return e?(er(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,I0.set(t,e),e)}var xL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),ym=xL;function sl(t,e,n){return`firebase:${t}:${e}:${n}`}var dl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sl(this.userKey,i.apiKey,s),this.fullPersistenceKey=sl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?os._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Tn(ym),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Tn(ym),o=sl(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=os._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function E0(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(B0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(z0(e))return"Blackberry";if(W0(e))return"Webos";if(Fm(e))return"Safari";if((e.includes("chrome/")||$0(e))&&!e.includes("edge/"))return"Chrome";if(q0(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function B0(t=Ce()){return/firefox\//i.test(t)}function Fm(t=Ce()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $0(t=Ce()){return/crios\//i.test(t)}function H0(t=Ce()){return/iemobile/i.test(t)}function q0(t=Ce()){return/android/i.test(t)}function z0(t=Ce()){return/blackberry/i.test(t)}function W0(t=Ce()){return/webos/i.test(t)}function vl(t=Ce()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function NL(t=Ce()){var e;return vl(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function PL(){return tC()&&document.documentMode===10}function G0(t=Ce()){return vl(t)||q0(t)||W0(t)||z0(t)||/windows phone/i.test(t)||H0(t)}function ML(){try{return!!(window&&window!==window.top)}catch{return!1}}function K0(t,e=[]){let n;switch(t){case"Browser":n=E0(Ce());break;case"Worker":n=`${E0(Ce())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yt}/${r}`}var _m=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function kL(n){return p(this,arguments,function*(t,e={}){return as(t,"GET","/v2/passwordPolicy",Pm(t,e))})}var OL=6,vm=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:OL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wm=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hl(this),this.idTokenSubscription=new hl(this),this.beforeStateQueue=new _m(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=O0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tn(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield dl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield U0(this,{idToken:e}),r=yield os._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(yn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield ll(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=IL()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(yn(this.app))return Promise.reject(Hr(this));let n=e?Ye(e):null;return n&&T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&T(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yn(this.app)?Promise.reject(Hr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return yn(this.app)?Promise.reject(Hr(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Tn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield kL(this),n=new vm(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield RL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Tn(e)||this._popupRedirectResolver;T(n,this,"argument-error"),this.redirectPersistenceManager=yield dl.create(this,[Tn(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&_L(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Lm(t){return Ye(t)}var hl=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=oC(n=>this.observer=n)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Vm={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FL(t){Vm=t}function LL(t){return Vm.loadJS(t)}function VL(){return Vm.gapiScript}function Q0(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Um(t,e){let n=Pr(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Ar(s,e??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:e})}function UL(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Tn);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function jm(t,e,n){let r=Lm(t);T(r._canInitEmulator,r,"emulator-config-failed"),T(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=Y0(e),{host:o,port:a}=jL(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||BL()}function Y0(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jL(t){let e=Y0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:C0(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:C0(o)}}}function C0(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function BL(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var fl=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cn("not implemented")}_getIdTokenResponse(e){return Cn("not implemented")}_linkToIdToken(e,n){return Cn("not implemented")}_getReauthenticationResolver(e){return Cn("not implemented")}};function hm(t,e){return p(this,null,function*(){return TL(t,"POST","/v1/accounts:signInWithIdp",Pm(t,e))})}var pl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Im=class extends pl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Jo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return p(this,null,function*(){let s=yield os._fromIdTokenResponse(e,r,i),o=T0(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return p(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=T0(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function T0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Em=class t extends at{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function J0(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Em._fromErrorAndOperation(t,s,e,r):s})}function $L(t,e,n=!1){return p(this,null,function*(){let r=yield Qo(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Jo._forOperation(t,"link",r)})}function HL(t,e,n=!1){return p(this,null,function*(){let{auth:r}=t;if(yn(r.app))return Promise.reject(Hr(r));let i="reauthenticate";try{let s=yield Qo(t,J0(r,i,e,t),n);T(s.idToken,r,"internal-error");let o=km(s.idToken);T(o,r,"internal-error");let{sub:a}=o;return T(t.uid===a,r,"user-mismatch"),Jo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Xn(r,"user-mismatch"),s}})}function qL(t,e,n=!1){return p(this,null,function*(){if(yn(t.app))return Promise.reject(Hr(t));let r="signIn",i=yield J0(t,r,e),s=yield Jo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Bm(t,e,n,r){return Ye(t).onIdTokenChanged(e,n,r)}function $m(t,e,n){return Ye(t).beforeAuthStateChanged(e,n)}var gl="__sak";var ml=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gl,"1"),this.storage.removeItem(gl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function zL(){let t=Ce();return Fm(t)||vl(t)}var WL=1e3,GL=10,KL=(()=>{class t extends ml{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=zL()&&ML(),this.fallbackToPolling=G0(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);PL()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,GL):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},WL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return p(this,null,function*(){yield Sn(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return p(this,null,function*(){let r=yield Sn(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return p(this,null,function*(){yield Sn(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),Z0=KL;var QL=(()=>{class t extends ml{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Hm=QL;function YL(t){return Promise.all(t.map(e=>p(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var JL=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return p(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(l=>p(this,null,function*(){return l(r.origin,o)})),u=yield YL(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function X0(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Cm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return p(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=X0("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){let h=d;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Zt(){return window}function ZL(t){Zt().location.href=t}function eD(){return typeof Zt().WorkerGlobalScope<"u"&&typeof Zt().importScripts=="function"}function XL(){return p(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function eV(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function tV(){return eD()?self:null}var tD="firebaseLocalStorageDb",nV=1,yl="firebaseLocalStorage",nD="fbase_key",Wr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function wl(t,e){return t.transaction([yl],e?"readwrite":"readonly").objectStore(yl)}function rV(){let t=indexedDB.deleteDatabase(tD);return new Wr(t).toPromise()}function Tm(){let t=indexedDB.open(tD,nV);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yl,{keyPath:nD})}catch(i){n(i)}}),t.addEventListener("success",()=>p(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yl)?e(r):(r.close(),yield rV(),e(yield Tm()))}))})}function D0(t,e,n){return p(this,null,function*(){let r=wl(t,!0).put({[nD]:e,value:n});return new Wr(r).toPromise()})}function iV(t,e){return p(this,null,function*(){let n=wl(t,!1).get(e),r=yield new Wr(n).toPromise();return r===void 0?null:r.value})}function b0(t,e){let n=wl(t,!0).delete(e);return new Wr(n).toPromise()}var sV=800,oV=3,aV=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return p(this,null,function*(){return this.db?this.db:(this.db=yield Tm(),this.db)})}_withRetries(n){return p(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>oV)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return p(this,null,function*(){return eD()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return p(this,null,function*(){this.receiver=JL._getInstance(tV()),this.receiver._subscribe("keyChanged",(n,r)=>p(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>p(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return p(this,null,function*(){var n,r;if(this.activeServiceWorker=yield XL(),!this.activeServiceWorker)return;this.sender=new Cm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return p(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||eV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return p(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Tm();return yield D0(n,gl,"1"),yield b0(n,gl),!0}catch{}return!1})}_withPendingWrite(n){return p(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(i=>D0(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return p(this,null,function*(){let r=yield this._withRetries(i=>iV(i,n));return this.localCache[n]=r,r})}_remove(n){return p(this,null,function*(){return this._withPendingWrite(()=>p(this,null,function*(){return yield this._withRetries(r=>b0(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return p(this,null,function*(){let n=yield this._withRetries(s=>{let o=wl(s,!1).getAll();return new Wr(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>p(this,null,function*(){return this._poll()}),sV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),rD=aV;var kG=Q0("rcb"),OG=new zr(3e4,6e4);function cV(t,e){return e?Tn(e):(T(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Zo=class extends fl{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hm(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hm(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hm(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function uV(t){return qL(t.auth,new Zo(t),t.bypassAuthState)}function lV(t){let{auth:e,user:n}=t;return T(n,e,"internal-error"),HL(n,new Zo(t),t.bypassAuthState)}function dV(t){return p(this,null,function*(){let{auth:e,user:n}=t;return T(n,e,"internal-error"),$L(n,new Zo(t),t.bypassAuthState)})}var Dm=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>p(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return p(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uV;case"linkViaPopup":case"linkViaRedirect":return dV;case"reauthViaPopup":case"reauthViaRedirect":return lV;default:Xn(this.auth,"internal-error")}}resolve(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){er(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var FG=new zr(2e3,1e4);var hV="pendingRedirect",ol=new Map,bm=class t extends Dm{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return p(this,null,function*(){let e=ol.get(this.auth._key());if(!e){try{let r=(yield fV(this.resolver,this.auth))?yield Sn(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ol.set(this.auth._key(),e)}return this.bypassAuthState||ol.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return p(this,null,function*(){if(e.type==="signInViaRedirect")return Sn(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Sn(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return p(this,null,function*(){})}cleanUp(){}};function fV(t,e){return p(this,null,function*(){let n=mV(e),r=gV(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function pV(t,e){ol.set(t._key(),e)}function gV(t){return Tn(t._redirectPersistence)}function mV(t){return sl(hV,t.config.apiKey,t.name)}function yV(t,e,n=!1){return p(this,null,function*(){if(yn(t.app))return Promise.reject(Hr(t));let r=Lm(t),i=cV(r,e),o=yield new bm(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var _V=10*60*1e3,Sm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iD(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(qr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_V&&this.cachedEventUids.clear(),this.cachedEventUids.has(S0(e))}saveEventToCache(e){this.cachedEventUids.add(S0(e)),this.lastProcessedEventTime=Date.now()}};function S0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iD({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function vV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iD(t);default:return!1}}function wV(n){return p(this,arguments,function*(t,e={}){return as(t,"GET","/v1/projects",e)})}var IV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EV=/^https?/;function CV(t){return p(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield wV(t);for(let n of e)try{if(TV(n))return}catch{}Xn(t,"unauthorized-domain")})}function TV(t){let e=pm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!EV.test(n))return!1;if(IV.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var DV=new zr(3e4,6e4);function A0(){let t=Zt().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function bV(t){return new Promise((e,n)=>{var r,i,s;function o(){A0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{A0(),n(qr(t,"network-request-failed"))},timeout:DV.get()})}if(!((i=(r=Zt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Zt().gapi)===null||s===void 0)&&s.load)o();else{let a=Q0("iframefcb");return Zt()[a]=()=>{gapi.load?o():n(qr(t,"network-request-failed"))},LL(`${VL()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw al=null,e})}var al=null;function SV(t){return al=al||bV(t),al}var AV=new zr(5e3,15e3),RV="__/auth/iframe",xV="emulator/auth/iframe",NV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MV(t){let e=t.config;T(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Nm(e,xV):`https://${t.config.authDomain}/${RV}`,r={apiKey:e.apiKey,appName:t.name,v:Yt},i=PV.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Rr(r).slice(1)}`}function kV(t){return p(this,null,function*(){let e=yield SV(t),n=Zt().gapi;return T(n,t,"internal-error"),e.open({where:document.body,url:MV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NV,dontclear:!0},r=>new Promise((i,s)=>p(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=qr(t,"network-request-failed"),a=Zt().setTimeout(()=>{s(o)},AV.get());function c(){Zt().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var OV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},FV=500,LV=600,VV="_blank",UV="http://localhost",_l=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function jV(t,e,n,r=FV,i=LV){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},OV),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Ce().toLowerCase();n&&(a=$0(u)?VV:n),B0(u)&&(e=e||UV,c.scrollbars="yes");let l=Object.entries(c).reduce((h,[f,g])=>`${h}${f}=${g},`,"");if(NL(u)&&a!=="_self")return BV(e||"",a),new _l(null);let d=window.open(e||"",a,l);T(d,t,"popup-blocked");try{d.focus()}catch{}return new _l(d)}function BV(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var $V="__/auth/handler",HV="emulator/auth/handler",qV=encodeURIComponent("fac");function R0(t,e,n,r,i,s){return p(this,null,function*(){T(t.config.authDomain,t,"auth-domain-config-required"),T(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yt,eventId:i};if(e instanceof pl){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(s||{}))o[l]=d}if(e instanceof Im){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield t._getAppCheckToken(),u=c?`#${qV}=${encodeURIComponent(c)}`:"";return`${zV(t)}?${Rr(a).slice(1)}${u}`})}function zV({config:t}){return t.emulator?Nm(t,HV):`https://${t.authDomain}/${$V}`}var fm="webStorageSupport",Am=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hm,this._completeRedirectFn=yV,this._overrideRedirectResult=pV}_openPopup(e,n,r,i){return p(this,null,function*(){var s;er((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield R0(e,n,r,pm(),i);return jV(e,o,X0())})}_openRedirect(e,n,r,i){return p(this,null,function*(){yield this._originValidation(e);let s=yield R0(e,n,r,pm(),i);return ZL(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(er(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return p(this,null,function*(){let n=yield kV(e),r=new Sm(e);return n.register("authEvent",i=>(T(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fm,{type:fm},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[fm];o!==void 0&&n(!!o),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G0()||Fm()||vl()}},sD=Am;var x0="@firebase/auth",N0="1.7.1";var Rm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function WV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GV(t){Qt(new Je("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;T(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K0(t)},u=new wm(r,i,s,c);return UL(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qt(new Je("auth-internal",e=>{let n=Lm(e.getProvider("auth").getImmediate());return(r=>new Rm(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ce(x0,N0,WV(t)),ce(x0,N0,"esm2017")}var KV=5*60,QV=vp("authIdTokenMaxAge")||KV,P0=null,YV=t=>e=>p(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>QV)return;let i=n?.token;P0!==i&&(P0=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function qm(t=Kn()){let e=Pr(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Um(t,{popupRedirectResolver:sD,persistence:[rD,Z0,Hm]}),r=vp("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=YV(s.toString());$m(n,o,()=>o(n.currentUser)),Bm(n,a=>o(a))}}let i=yp("auth");return i&&jm(n,`http://${i}`),n}function JV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}FL({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=qr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",JV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GV("Browser");var oD="auth",Xo=class{constructor(e){return e}},ea=class{constructor(){return Wo(oD)}};var zm=new x("angularfire2.auth-instances");function z2(t,e){let n=tl(oD,t,e);return n&&new Xo(n)}function W2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Xo(r)}}var G2={provide:ea,deps:[[new Be,zm]]},K2={provide:Xo,useFactory:z2,deps:[[new Be,zm],En]},Q2=(()=>{class t{constructor(){ce("angularfire",Br.full,"auth")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[K2,G2]})}return t})();function aD(t,...e){return{ngModule:Q2,providers:[{provide:zm,useFactory:W2(t),multi:!0,deps:[X,At,is,$r,[new Be,rs],...e]}]}}var cD=ss(qm,!0);var Y2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mt={},y,fy=fy||{},D=Y2||self;function kl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function pa(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function J2(t){return Object.prototype.hasOwnProperty.call(t,Wm)&&t[Wm]||(t[Wm]=++Z2)}var Wm="closure_uid_"+(1e9*Math.random()>>>0),Z2=0;function X2(t,e,n){return t.call.apply(t.bind,arguments)}function eU(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ve(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ve=X2:Ve=eU,Ve.apply(null,arguments)}function Il(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function De(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function tr(){this.s=this.s,this.o=this.o}var tU=0;tr.prototype.s=!1;tr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),tU!=0)&&J2(this)};tr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ID=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function py(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function uD(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(kl(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ue(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ue.prototype.h=function(){this.defaultPrevented=!0};var nU=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};D.addEventListener("test",n,e),D.removeEventListener("test",n,e)}catch{}return t}();function oa(t){return/^[\s\xa0]*$/.test(t)}function Ol(){var t=D.navigator;return t&&(t=t.userAgent)?t:""}function Xt(t){return Ol().indexOf(t)!=-1}function gy(t){return gy[" "](t),t}gy[" "]=function(){};function rU(t,e){var n=zU;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var iU=Xt("Opera"),ds=Xt("Trident")||Xt("MSIE"),ED=Xt("Edge"),Jm=ED||ds,CD=Xt("Gecko")&&!(Ol().toLowerCase().indexOf("webkit")!=-1&&!Xt("Edge"))&&!(Xt("Trident")||Xt("MSIE"))&&!Xt("Edge"),sU=Ol().toLowerCase().indexOf("webkit")!=-1&&!Xt("Edge");function TD(){var t=D.document;return t?t.documentMode:void 0}var Zm;e:{if(El="",Cl=function(){var t=Ol();if(CD)return/rv:([^\);]+)(\)|;)/.exec(t);if(ED)return/Edge\/([\d\.]+)/.exec(t);if(ds)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(sU)return/WebKit\/(\S+)/.exec(t);if(iU)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Cl&&(El=Cl?Cl[1]:""),ds&&(Tl=TD(),Tl!=null&&Tl>parseFloat(El))){Zm=String(Tl);break e}Zm=El}var El,Cl,Tl,Xm;D.document&&ds?(Gm=TD(),Xm=Gm||parseInt(Zm,10)||void 0):Xm=void 0;var Gm,oU=Xm;function aa(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(CD){e:{try{gy(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:aU[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&aa.$.h.call(this)}}De(aa,Ue);var aU={2:"touch",3:"pen",4:"mouse"};aa.prototype.h=function(){aa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ga="closure_listenable_"+(1e6*Math.random()|0),cU=0;function uU(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++cU,this.fa=this.ia=!1}function Fl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function my(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function lU(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function DD(t){let e={};for(let n in t)e[n]=t[n];return e}var lD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bD(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<lD.length;s++)n=lD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ll(t){this.src=t,this.g={},this.h=0}Ll.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=ty(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new uU(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function ey(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=ID(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Fl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function ty(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var yy="closure_lm_"+(1e6*Math.random()|0),Km={};function SD(t,e,n,r,i){if(r&&r.once)return RD(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)SD(t,e[s],n,r,i);return null}return n=wy(n),t&&t[ga]?t.O(e,n,pa(r)?!!r.capture:!!r,i):AD(t,e,n,!1,r,i)}function AD(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=pa(i)?!!i.capture:!!i,a=vy(t);if(a||(t[yy]=a=new Ll(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=dU(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nU||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ND(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function dU(){function t(n){return e.call(t.src,t.listener,n)}let e=hU;return t}function RD(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)RD(t,e[s],n,r,i);return null}return n=wy(n),t&&t[ga]?t.P(e,n,pa(r)?!!r.capture:!!r,i):AD(t,e,n,!0,r,i)}function xD(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)xD(t,e[s],n,r,i);else r=pa(r)?!!r.capture:!!r,n=wy(n),t&&t[ga]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=ty(s,n,r,i),-1<n&&(Fl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=vy(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ty(e,n,r,i)),(n=-1<t?e[t]:null)&&_y(n))}function _y(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ga])ey(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ND(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vy(e))?(ey(n,t),n.h==0&&(n.src=null,e[yy]=null)):Fl(t)}}}function ND(t){return t in Km?Km[t]:Km[t]="on"+t}function hU(t,e){if(t.fa)t=!0;else{e=new aa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&_y(t),t=n.call(r,e)}return t}function vy(t){return t=t[yy],t instanceof Ll?t:null}var Qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function wy(t){return typeof t=="function"?t:(t[Qm]||(t[Qm]=function(e){return t.handleEvent(e)}),t[Qm])}function Te(){tr.call(this),this.i=new Ll(this),this.S=this,this.J=null}De(Te,tr);Te.prototype[ga]=!0;Te.prototype.removeEventListener=function(t,e,n,r){xD(this,t,e,n,r)};function Me(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ue(e,t);else if(e instanceof Ue)e.target=e.target||t;else{var i=e;e=new Ue(r,t),bD(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Dl(o,r,!0,e)&&i}if(o=e.g=t,i=Dl(o,r,!0,e)&&i,i=Dl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Dl(o,r,!1,e)&&i}Te.prototype.N=function(){if(Te.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Fl(n[r]);delete t.g[e],t.h--}}this.J=null};Te.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Te.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Dl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ey(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var Iy=D.JSON.stringify,ny=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function fU(){var t=Ey;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ry=class{constructor(){this.h=this.g=null}add(e,n){let r=PD.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},PD=new ny(()=>new iy,t=>t.reset()),iy=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function pU(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gU(t){D.setTimeout(()=>{throw t},0)}var ca,ua=!1,Ey=new ry,MD=()=>{let t=D.Promise.resolve(void 0);ca=()=>{t.then(mU)}},mU=()=>{for(var t;t=fU();){try{t.h.call(t.g)}catch(n){gU(n)}var e=PD;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ua=!1};function Vl(t,e){Te.call(this),this.h=t||1,this.g=e||D,this.j=Ve(this.qb,this),this.l=Date.now()}De(Vl,Te);y=Vl.prototype;y.ga=!1;y.T=null;y.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Me(this,"tick"),this.ga&&(Cy(this),this.start()))}};y.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Cy(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}y.N=function(){Vl.$.N.call(this),Cy(this),delete this.g};function Ty(t,e,n){if(typeof t=="function")n&&(t=Ve(t,n));else if(t&&typeof t.handleEvent=="function")t=Ve(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:D.setTimeout(t,e||0)}function kD(t){t.g=Ty(()=>{t.g=null,t.i&&(t.i=!1,kD(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var sy=class extends tr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:kD(this)}N(){super.N(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function la(t){tr.call(this),this.h=t,this.g={}}De(la,tr);var dD=[];function OD(t,e,n,r){Array.isArray(n)||(n&&(dD[0]=n.toString()),n=dD);for(var i=0;i<n.length;i++){var s=SD(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function FD(t){my(t.g,function(e,n){this.g.hasOwnProperty(n)&&_y(e)},t),t.g={}}la.prototype.N=function(){la.$.N.call(this),FD(this)};la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ul(){this.g=!0}Ul.prototype.Ea=function(){this.g=!1};function yU(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function _U(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function us(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+wU(t,n)+(r?" "+r:"")})}function vU(t,e){t.info(function(){return"TIMEOUT: "+e})}Ul.prototype.info=function(){};function wU(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Iy(n)}catch{return e}}var Yr={},hD=null;function jl(){return hD=hD||new Te}Yr.Ta="serverreachability";function LD(t){Ue.call(this,Yr.Ta,t)}De(LD,Ue);function da(t){let e=jl();Me(e,new LD(e))}Yr.STAT_EVENT="statevent";function VD(t,e){Ue.call(this,Yr.STAT_EVENT,t),this.stat=e}De(VD,Ue);function He(t){let e=jl();Me(e,new VD(e,t))}Yr.Ua="timingevent";function UD(t,e){Ue.call(this,Yr.Ua,t),this.size=e}De(UD,Ue);function ma(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){t()},e)}var Bl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},jD={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dy(){}Dy.prototype.h=null;function fD(t){return t.h||(t.h=t.i())}function BD(){}var ya={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function by(){Ue.call(this,"d")}De(by,Ue);function Sy(){Ue.call(this,"c")}De(Sy,Ue);var oy;function $l(){}De($l,Dy);$l.prototype.g=function(){return new XMLHttpRequest};$l.prototype.i=function(){return{}};oy=new $l;function _a(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new la(this),this.P=IU,t=Jm?125:void 0,this.V=new Vl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new $D}function $D(){this.i=null,this.g="",this.h=!1}var IU=45e3,HD={},ay={};y=_a.prototype;y.setTimeout=function(t){this.P=t};function cy(t,e,n){t.L=1,t.A=ql(bn(e)),t.u=n,t.S=!0,qD(t,null)}function qD(t,e){t.G=Date.now(),va(t),t.B=bn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),ZD(n.i,"t",r),t.o=0,n=t.l.J,t.h=new $D,t.g=vb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new sy(Ve(t.Pa,t,t.g),t.O)),OD(t.U,t.g,"readystatechange",t.nb),e=t.I?DD(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),da(),yU(t.j,t.v,t.B,t.m,t.W,t.u)}y.nb=function(t){t=t.target;let e=this.M;e&&en(t)==3?e.l():this.Pa(t)};y.Pa=function(t){try{if(t==this.g)e:{let l=en(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Jm||this.g&&(this.h.h||this.g.ja()||yD(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?da(3):da(2)),Hl(this);var n=this.g.da();this.ca=n;t:if(zD(this)){var r=yD(this.g);t="";var i=r.length,s=en(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),sa(this);var o="";break t}this.h.i=new D.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,_U(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!oa(a)){var u=a;break t}}u=null}if(n=u)us(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uy(this,n);else{this.i=!1,this.s=3,He(12),Gr(this),sa(this);break e}}this.S?(WD(this,l,o),Jm&&this.i&&l==3&&(OD(this.U,this.V,"tick",this.mb),this.V.start())):(us(this.j,this.m,o,null),uy(this,o)),l==4&&Gr(this),this.i&&!this.J&&(l==4?gb(this.l,this):(this.i=!1,va(this)))}else $U(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,He(12)):(this.s=0,He(13)),Gr(this),sa(this)}}}catch{}finally{}};function zD(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function WD(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=EU(t,n),i==ay){e==4&&(t.s=4,He(14),r=!1),us(t.j,t.m,null,"[Incomplete Response]");break}else if(i==HD){t.s=4,He(15),us(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else us(t.j,t.m,i,null),uy(t,i);zD(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,He(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),My(e),e.M=!0,He(11))):(us(t.j,t.m,n,"[Invalid Chunked Response]"),Gr(t),sa(t))}y.mb=function(){if(this.g){var t=en(this.g),e=this.g.ja();this.o<e.length&&(Hl(this),WD(this,t,e),this.i&&t!=4&&va(this))}};function EU(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?ay:(n=Number(e.substring(n,r)),isNaN(n)?HD:(r+=1,r+n>e.length?ay:(e=e.slice(r,r+n),t.o=r+n,e)))}y.cancel=function(){this.J=!0,Gr(this)};function va(t){t.Y=Date.now()+t.P,GD(t,t.P)}function GD(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ma(Ve(t.lb,t),e)}function Hl(t){t.C&&(D.clearTimeout(t.C),t.C=null)}y.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(vU(this.j,this.B),this.L!=2&&(da(),He(17)),Gr(this),this.s=2,sa(this)):GD(this,this.Y-t)};function sa(t){t.l.H==0||t.J||gb(t.l,t)}function Gr(t){Hl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Cy(t.V),FD(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function uy(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||ly(n.i,t))){if(!t.K&&ly(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)xl(n),Gl(n);else break e;Py(n),He(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ma(Ve(n.ib,n),6e3));if(1>=tb(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Kr(n,11)}else if((t.K||n.g==t)&&xl(n),!oa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Ay(s,s.h),s.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,re(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=_b(r,r.J?r.pa:null,r.Y),o.K){nb(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Hl(a),va(a)),r.g=o}else fb(r);0<n.j.length&&Kl(n)}else u[0]!="stop"&&u[0]!="close"||Kr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Kr(n,7):Ny(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}da(4)}catch{}}function CU(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(kl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function TU(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(kl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function KD(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(kl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=TU(t),r=CU(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var QD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function DU(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Qr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Qr){this.h=t.h,Al(this,t.j),this.s=t.s,this.g=t.g,Rl(this,t.m),this.l=t.l;var e=t.i,n=new ha;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),pD(this,n),this.o=t.o}else t&&(e=String(t).match(QD))?(this.h=!1,Al(this,e[1]||"",!0),this.s=ra(e[2]||""),this.g=ra(e[3]||"",!0),Rl(this,e[4]),this.l=ra(e[5]||"",!0),pD(this,e[6]||"",!0),this.o=ra(e[7]||"")):(this.h=!1,this.i=new ha(null,this.h))}Qr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ia(e,gD,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ia(e,gD,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ia(n,n.charAt(0)=="/"?AU:SU,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ia(n,xU)),t.join("")};function bn(t){return new Qr(t)}function Al(t,e,n){t.j=n?ra(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Rl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function pD(t,e,n){e instanceof ha?(t.i=e,NU(t.i,t.h)):(n||(e=ia(e,RU)),t.i=new ha(e,t.h))}function re(t,e,n){t.i.set(e,n)}function ql(t){return re(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ra(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ia(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,bU),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function bU(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var gD=/[#\/\?@]/g,SU=/[#\?:]/g,AU=/[#\?]/g,RU=/[#\?@]/g,xU=/#/g;function ha(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function nr(t){t.g||(t.g=new Map,t.h=0,t.i&&DU(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}y=ha.prototype;y.add=function(t,e){nr(this),this.i=null,t=hs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function YD(t,e){nr(t),e=hs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function JD(t,e){return nr(t),e=hs(t,e),t.g.has(e)}y.forEach=function(t,e){nr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};y.ta=function(){nr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};y.Z=function(t){nr(this);let e=[];if(typeof t=="string")JD(this,t)&&(e=e.concat(this.g.get(hs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};y.set=function(t,e){return nr(this),this.i=null,t=hs(this,t),JD(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};y.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function ZD(t,e,n){YD(t,e),0<n.length&&(t.i=null,t.g.set(hs(t,e),py(n)),t.h+=n.length)}y.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function hs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NU(t,e){e&&!t.j&&(nr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(YD(this,r),ZD(this,i,n))},t)),t.j=e}var PU=class{constructor(t,e){this.g=t,this.map=e}};function XD(t){this.l=t||MU,D.PerformanceNavigationTiming?(t=D.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(D.g&&D.g.Ka&&D.g.Ka()&&D.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MU=10;function eb(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function tb(t){return t.h?1:t.g?t.g.size:0}function ly(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Ay(t,e){t.g?t.g.add(e):t.h=e}function nb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}XD.prototype.cancel=function(){if(this.i=rb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function rb(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return py(t.i)}var kU=class{stringify(t){return D.JSON.stringify(t,void 0)}parse(t){return D.JSON.parse(t,void 0)}};function OU(){this.g=new kU}function FU(t,e,n){let r=n||"";try{KD(t,function(i,s){let o=i;pa(i)&&(o=Iy(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function LU(t,e){let n=new Ul;if(D.Image){let r=new Image;r.onload=Il(bl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Il(bl,n,r,"TestLoadImage: error",!1,e),r.onabort=Il(bl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Il(bl,n,r,"TestLoadImage: timeout",!1,e),D.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function bl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function wa(t){this.l=t.ec||null,this.j=t.ob||!1}De(wa,Dy);wa.prototype.g=function(){return new zl(this.l,this.j)};wa.prototype.i=function(t){return function(){return t}}({});function zl(t,e){Te.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Ry,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}De(zl,Te);var Ry=0;y=zl.prototype;y.open=function(t,e){if(this.readyState!=Ry)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,fa(this)};y.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||D).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};y.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=Ry};y.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof D.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ib(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function ib(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}y.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ia(this):fa(this),this.readyState==3&&ib(this)}};y.Za=function(t){this.g&&(this.response=this.responseText=t,Ia(this))};y.Ya=function(t){this.g&&(this.response=t,Ia(this))};y.ka=function(){this.g&&Ia(this)};function Ia(t){t.readyState=4,t.l=null,t.j=null,t.A=null,fa(t)}y.setRequestHeader=function(t,e){this.v.append(t,e)};y.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};y.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function fa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(zl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var VU=D.JSON.parse;function le(t){Te.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sb,this.L=this.M=!1}De(le,Te);var sb="",UU=/^https?$/i,jU=["POST","PUT"];y=le.prototype;y.Oa=function(t){this.M=t};y.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():oy.g(),this.C=this.u?fD(this.u):fD(oy),this.g.onreadystatechange=Ve(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){mD(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=D.FormData&&t instanceof D.FormData,!(0<=ID(jU,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{cb(this),0<this.B&&((this.L=BU(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ve(this.ua,this)):this.A=Ty(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){mD(this,s)}};function BU(t){return ds&&typeof t.timeout=="number"&&t.ontimeout!==void 0}y.ua=function(){typeof fy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Me(this,"timeout"),this.abort(8))};function mD(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ob(t),Wl(t)}function ob(t){t.F||(t.F=!0,Me(t,"complete"),Me(t,"error"))}y.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Me(this,"complete"),Me(this,"abort"),Wl(this))};y.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Wl(this,!0)),le.$.N.call(this)};y.La=function(){this.s||(this.G||this.v||this.l?ab(this):this.kb())};y.kb=function(){ab(this)};function ab(t){if(t.h&&typeof fy<"u"&&(!t.C[1]||en(t)!=4||t.da()!=2)){if(t.v&&en(t)==4)Ty(t.La,0,t);else if(Me(t,"readystatechange"),en(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(QD)[1]||null;!i&&D.self&&D.self.location&&(i=D.self.location.protocol.slice(0,-1)),r=!UU.test(i?i.toLowerCase():"")}n=r}if(n)Me(t,"complete"),Me(t,"success");else{t.m=6;try{var s=2<en(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",ob(t)}}finally{Wl(t)}}}}function Wl(t,e){if(t.g){cb(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Me(t,"ready");try{n.onreadystatechange=r}catch{}}}function cb(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(D.clearTimeout(t.A),t.A=null)}y.isActive=function(){return!!this.g};function en(t){return t.g?t.g.readyState:0}y.da=function(){try{return 2<en(this)?this.g.status:-1}catch{return-1}};y.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};y.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),VU(e)}};function yD(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case sb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function $U(t){let e={};t=(t.g&&2<=en(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(oa(t[r]))continue;var n=pU(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}lU(e,function(r){return r.join(", ")})}y.Ia=function(){return this.m};y.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ub(t){let e="";return my(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function xy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ub(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):re(t,e,n))}function ta(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function lb(t){this.Ga=0,this.j=[],this.l=new Ul,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ta("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ta("baseRetryDelayMs",5e3,t),this.hb=ta("retryDelaySeedMs",1e4,t),this.eb=ta("forwardChannelMaxRetries",2,t),this.xa=ta("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new XD(t&&t.concurrentRequestLimit),this.Ja=new OU,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}y=lb.prototype;y.ra=8;y.H=1;function Ny(t){if(db(t),t.H==3){var e=t.W++,n=bn(t.I);if(re(n,"SID",t.K),re(n,"RID",e),re(n,"TYPE","terminate"),Ea(t,n),e=new _a(t,t.l,e),e.L=2,e.A=ql(bn(n)),n=!1,D.navigator&&D.navigator.sendBeacon)try{n=D.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&D.Image&&(new Image().src=e.A,n=!0),n||(e.g=vb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),va(e)}yb(t)}function Gl(t){t.g&&(My(t),t.g.cancel(),t.g=null)}function db(t){Gl(t),t.u&&(D.clearTimeout(t.u),t.u=null),xl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&D.clearTimeout(t.m),t.m=null)}function Kl(t){if(!eb(t.i)&&!t.m){t.m=!0;var e=t.Na;ca||MD(),ua||(ca(),ua=!0),Ey.add(e,t),t.C=0}}function HU(t,e){return tb(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ma(Ve(t.Na,t,e),mb(t,t.C)),t.C++,!0)}y.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new _a(this,this.l,t),s=this.s;if(this.U&&(s?(s=DD(s),bD(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=hb(this,i,e),n=bn(this.I),re(n,"RID",t),re(n,"CVER",22),this.F&&re(n,"X-HTTP-Session-Id",this.F),Ea(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(ub(s)))+"&"+e:this.o&&xy(n,this.o,s)),Ay(this.i,i),this.bb&&re(n,"TYPE","init"),this.P?(re(n,"$req",e),re(n,"SID","null"),i.aa=!0,cy(i,n,null)):cy(i,n,e),this.H=2}}else this.H==3&&(t?_D(this,t):this.j.length==0||eb(this.i)||_D(this))};function _D(t,e){var n;e?n=e.m:n=t.W++;let r=bn(t.I);re(r,"SID",t.K),re(r,"RID",n),re(r,"AID",t.V),Ea(t,r),t.o&&t.s&&xy(r,t.o,t.s),n=new _a(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=hb(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Ay(t.i,n),cy(n,r,e)}function Ea(t,e){t.na&&my(t.na,function(n,r){re(e,r,n)}),t.h&&KD({},function(n,r){re(e,r,n)})}function hb(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ve(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{FU(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function fb(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ca||MD(),ua||(ca(),ua=!0),Ey.add(e,t),t.A=0}}function Py(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ma(Ve(t.Ma,t),mb(t,t.A)),t.A++,!0)}y.Ma=function(){if(this.u=null,pb(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ma(Ve(this.jb,this),t)}};y.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,He(10),Gl(this),pb(this))};function My(t){t.B!=null&&(D.clearTimeout(t.B),t.B=null)}function pb(t){t.g=new _a(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=bn(t.wa);re(e,"RID","rpc"),re(e,"SID",t.K),re(e,"AID",t.V),re(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&re(e,"TO",t.qa),re(e,"TYPE","xmlhttp"),Ea(t,e),t.o&&t.s&&xy(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ql(bn(e)),n.u=null,n.S=!0,qD(n,t)}y.ib=function(){this.v!=null&&(this.v=null,Gl(this),Py(this),He(19))};function xl(t){t.v!=null&&(D.clearTimeout(t.v),t.v=null)}function gb(t,e){var n=null;if(t.g==e){xl(t),My(t),t.g=null;var r=2}else if(ly(t.i,e))n=e.F,nb(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=jl(),Me(r,new UD(r,n)),Kl(t)}else fb(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&HU(t,e)||r==2&&Py(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Kr(t,5);break;case 4:Kr(t,10);break;case 3:Kr(t,6);break;default:Kr(t,2)}}}function mb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Kr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ve(t.pb,t);n||(n=new Qr("//www.google.com/images/cleardot.gif"),D.location&&D.location.protocol=="http"||Al(n,"https"),ql(n)),LU(n.toString(),r)}else He(2);t.H=0,t.h&&t.h.za(e),yb(t),db(t)}y.pb=function(t){t?(this.l.info("Successfully pinged google.com"),He(2)):(this.l.info("Failed to ping google.com"),He(1))};function yb(t){if(t.H=0,t.ma=[],t.h){let e=rb(t.i);(e.length!=0||t.j.length!=0)&&(uD(t.ma,e),uD(t.ma,t.j),t.i.i.length=0,py(t.j),t.j.length=0),t.h.ya()}}function _b(t,e,n){var r=n instanceof Qr?bn(n):new Qr(n);if(r.g!="")e&&(r.g=e+"."+r.g),Rl(r,r.m);else{var i=D.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Qr(null);r&&Al(s,r),e&&(s.g=e),i&&Rl(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&re(r,n,e),re(r,"VER",t.ra),Ea(t,r),r}function vb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new le(new wa({ob:n})):new le(t.va),e.Oa(t.J),e}y.isActive=function(){return!!this.h&&this.h.isActive(this)};function wb(){}y=wb.prototype;y.Ba=function(){};y.Aa=function(){};y.za=function(){};y.ya=function(){};y.isActive=function(){return!0};y.Va=function(){};function Nl(){if(ds&&!(10<=Number(oU)))throw Error("Environmental error: no available transport.")}Nl.prototype.g=function(t,e){return new ct(t,e)};function ct(t,e){Te.call(this),this.g=new lb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!oa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!oa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new fs(this)}De(ct,Te);ct.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;He(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=_b(t,null,t.Y),Kl(t)};ct.prototype.close=function(){Ny(this.g)};ct.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Iy(t),t=n);e.j.push(new PU(e.fb++,t)),e.H==3&&Kl(e)};ct.prototype.N=function(){this.g.h=null,delete this.j,Ny(this.g),delete this.g,ct.$.N.call(this)};function Ib(t){by.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}De(Ib,by);function Eb(){Sy.call(this),this.status=1}De(Eb,Sy);function fs(t){this.g=t}De(fs,wb);fs.prototype.Ba=function(){Me(this.g,"a")};fs.prototype.Aa=function(t){Me(this.g,new Ib(t))};fs.prototype.za=function(t){Me(this.g,new Eb)};fs.prototype.ya=function(){Me(this.g,"b")};function qU(){this.blockSize=-1}function Pt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}De(Pt,qU);Pt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ym(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Pt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Ym(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Ym(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Ym(this,r),i=0;break}}this.h=i,this.i+=e};Pt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Z(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var zU={};function ky(t){return-128<=t&&128>t?rU(t,function(e){return new Z([e|0],0>e?-1:0)}):new Z([t|0],0>t?-1:0)}function tn(t){if(isNaN(t)||!isFinite(t))return ls;if(0>t)return Pe(tn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=dy;return new Z(e,0)}function Cb(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Pe(Cb(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=tn(Math.pow(e,8)),r=ls,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=tn(Math.pow(e,s)),r=r.R(s).add(tn(o))):(r=r.R(n),r=r.add(tn(o)))}return r}var dy=4294967296,ls=ky(0),hy=ky(1),vD=ky(16777216);y=Z.prototype;y.ea=function(){if(vt(this))return-Pe(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:dy+r)*e,e*=dy}return t};y.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Dn(this))return"0";if(vt(this))return"-"+Pe(this).toString(t);for(var e=tn(Math.pow(t,6)),n=this,r="";;){var i=Ml(n,e).g;n=Pl(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Dn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};y.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Dn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function vt(t){return t.h==-1}y.X=function(t){return t=Pl(this,t),vt(t)?-1:Dn(t)?0:1};function Pe(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Z(n,~t.h).add(hy)}y.abs=function(){return vt(this)?Pe(this):this};y.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Z(n,n[n.length-1]&-2147483648?-1:0)};function Pl(t,e){return t.add(Pe(e))}y.R=function(t){if(Dn(this)||Dn(t))return ls;if(vt(this))return vt(t)?Pe(this).R(Pe(t)):Pe(Pe(this).R(t));if(vt(t))return Pe(this.R(Pe(t)));if(0>this.X(vD)&&0>t.X(vD))return tn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Sl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Sl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Sl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Sl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Z(n,0)};function Sl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function na(t,e){this.g=t,this.h=e}function Ml(t,e){if(Dn(e))throw Error("division by zero");if(Dn(t))return new na(ls,ls);if(vt(t))return e=Ml(Pe(t),e),new na(Pe(e.g),Pe(e.h));if(vt(e))return e=Ml(t,Pe(e)),new na(Pe(e.g),e.h);if(30<t.g.length){if(vt(t)||vt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=hy,r=e;0>=r.X(t);)n=wD(n),r=wD(r);var i=cs(n,1),s=cs(r,1);for(r=cs(r,2),n=cs(n,2);!Dn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=cs(r,1),n=cs(n,1)}return e=Pl(t,i.R(e)),new na(i,e)}for(i=ls;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=tn(n),o=s.R(e);vt(o)||0<o.X(t);)n-=r,s=tn(n),o=s.R(e);Dn(s)&&(s=hy),i=i.add(s),t=Pl(t,o)}return new na(i,t)}y.gb=function(t){return Ml(this,t).h};y.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Z(n,this.h&t.h)};y.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Z(n,this.h|t.h)};y.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Z(n,this.h^t.h)};function wD(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Z(n,t.h)}function cs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Z(i,t.h)}Nl.prototype.createWebChannel=Nl.prototype.g;ct.prototype.send=ct.prototype.u;ct.prototype.open=ct.prototype.m;ct.prototype.close=ct.prototype.close;Bl.NO_ERROR=0;Bl.TIMEOUT=8;Bl.HTTP_ERROR=6;jD.COMPLETE="complete";BD.EventType=ya;ya.OPEN="a";ya.CLOSE="b";ya.ERROR="c";ya.MESSAGE="d";Te.prototype.listen=Te.prototype.O;le.prototype.listenOnce=le.prototype.P;le.prototype.getLastError=le.prototype.Sa;le.prototype.getLastErrorCode=le.prototype.Ia;le.prototype.getStatus=le.prototype.da;le.prototype.getResponseJson=le.prototype.Wa;le.prototype.getResponseText=le.prototype.ja;le.prototype.send=le.prototype.ha;le.prototype.setWithCredentials=le.prototype.Oa;Pt.prototype.digest=Pt.prototype.l;Pt.prototype.reset=Pt.prototype.reset;Pt.prototype.update=Pt.prototype.j;Z.prototype.add=Z.prototype.add;Z.prototype.multiply=Z.prototype.R;Z.prototype.modulo=Z.prototype.gb;Z.prototype.compare=Z.prototype.X;Z.prototype.toNumber=Z.prototype.ea;Z.prototype.toString=Z.prototype.toString;Z.prototype.getBits=Z.prototype.D;Z.fromNumber=tn;Z.fromString=Cb;var WU=Mt.createWebChannelTransport=function(){return new Nl},GU=Mt.getStatEventTarget=function(){return jl()},KU=Mt.ErrorCode=Bl,QU=Mt.EventType=jD,YU=Mt.Event=Yr,JU=Mt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},T9=Mt.FetchXmlHttpFactory=wa,ZU=Mt.WebChannel=BD,XU=Mt.XhrIo=le,ej=Mt.Md5=Pt,Tb=Mt.Integer=Z;var Db="@firebase/firestore";var be=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};be.UNAUTHENTICATED=new be(null),be.GOOGLE_CREDENTIALS=new be("google-credentials-uid"),be.FIRST_PARTY=new be("first-party-uid"),be.MOCK_USER=new be("mock-user");var Ta="10.11.0";var gs=new Gt("@firebase/firestore");function ut(t,...e){if(gs.logLevel<=K.DEBUG){let n=e.map(t_);gs.debug(`Firestore (${Ta}): ${t}`,...n)}}function e_(t,...e){if(gs.logLevel<=K.ERROR){let n=e.map(t_);gs.error(`Firestore (${Ta}): ${t}`,...n)}}function tj(t,...e){if(gs.logLevel<=K.WARN){let n=e.map(t_);gs.warn(`Firestore (${Ta}): ${t}`,...n)}}function t_(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function nt(t="Unexpected state"){let e=`FIRESTORE (${Ta}) INTERNAL ASSERTION FAILED: `+t;throw e_(e),new Error(e)}function Ca(t,e){t||nt()}var ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},we=class extends at{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ir=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Ql=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Fy=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(be.UNAUTHENTICATED))}shutdown(){}},Ly=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Vy=class{constructor(e){this.t=e,this.currentUser=be.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ir,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ut("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ut("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ir)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ut("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ca(typeof r.accessToken=="string"),new Ql(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ca(e===null||typeof e=="string"),new be(e)}},Uy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=be.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},jy=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Uy(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(be.FIRST_PARTY))}shutdown(){}invalidateToken(){}},By=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$y=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&ut("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,ut("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{ut("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):ut("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ca(typeof n.token=="string"),this.R=n.token,new By(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function nj(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Hy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=nj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function xb(t,e){return t<e?-1:t>e?1:0}var qy=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&nt(),r===void 0?r=e.length-n:r>e.length-n&&nt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},rr=class t extends qy{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new we(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var Jr=class t{constructor(e){this.path=e}static fromPath(e){return new t(rr.fromString(e))}static fromName(e){return new t(rr.fromString(e).popFirst(5))}static empty(){return new t(rr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new rr(e.slice()))}};var zy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};zy.UNKNOWN_ID=-1;function Nb(t){return t.name==="IndexedDbTransactionError"}function rj(t){return t===0&&1/t==-1/0}var ij=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],O9=[...ij,"documentOverlays"],sj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],oj=sj,F9=[...oj,"indexConfiguration","indexState","indexEntries"];var ms=class t{constructor(e,n){this.comparator=e,this.root=n||rn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ps(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ps(this.root,e,this.comparator,!1)}getReverseIterator(){return new ps(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ps(this.root,e,this.comparator,!0)}},ps=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},rn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();let e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}};rn.EMPTY=null,rn.RED=!0,rn.BLACK=!1;rn.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new rn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Yl=class t{constructor(e){this.comparator=e,this.data=new ms(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jl(this.data.getIterator())}getIteratorFrom(e){return new Jl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Jl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Wy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ys=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wy("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xb(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ys.EMPTY_BYTE_STRING=new ys("");var aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function cj(t){if(Ca(!!t),typeof t=="string"){let e=0,n=aj.exec(t);if(Ca(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zl(t.seconds),nanos:Zl(t.nanos)}}function Zl(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function uj(t){return typeof t=="string"?ys.fromBase64String(t):ys.fromUint8Array(t)}var Gy=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Ky=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function lj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var V9=new ms(Jr.comparator);var U9=new ms(Jr.comparator);var j9=new ms(Jr.comparator),B9=new Yl(Jr.comparator);var $9=new Yl(xb);var bb,W;(W=bb||(bb={}))[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var H9=new Tb([4294967295,4294967295],0);var Xl=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Zl(e.integerValue));else if("doubleValue"in e){let r=Zl(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),rj(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=cj(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(uj(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?lj(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):nt()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Jr.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Xl.bt=new Xl;var q9=new Uint8Array(0);var nn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);function Oy(){return typeof document<"u"?document:null}var Qy=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Bo),i=Math.max(0,n-r);i>0&&ut("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Bo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Lo!==null&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){this.Lo!==null&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}};var Yy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dj(t,e){if(e_("AsyncQueue",`${e}: ${t}`),Nb(t))return new we(ke.UNAVAILABLE,`${e}: ${t}`);throw t}var Sb,Ab;(Ab=Sb||(Sb={})).j_="default",Ab.Cache="cache";var Jy=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=be.UNAUTHENTICATED,this.clientId=Hy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){ut("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ut("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new we(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=dj(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pb(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var Rb=new Map;function hj(t,e,n,r){if(e===!0&&r===!0)throw new we(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function fj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":nt()}function pj(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new we(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=fj(t);throw new we(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ed=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new we(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new we(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},td=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ed({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new we(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new we(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ed(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Fy;switch(r.type){case"firstParty":return new jy(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new we(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=Rb.get(n);r&&(ut("ComponentProvider","Removing Datastore"),Rb.delete(n),r.terminate())}(this),Promise.resolve()}};function Mb(t,e,n,r={}){var i;let s=(t=pj(t,td))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&tj("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=be.MOCK_USER;else{a=fu(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new we(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new be(u)}t._authCredentials=new Ly(new Ql(a,c))}}var Zy=class{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new Qy(this,"async_queue_retry"),this.cu=()=>{let n=Oy();n&&ut("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=Oy();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;let n=Oy();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise(()=>{});let n=new ir;return this.hu(()=>this.iu&&this.au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ru.push(e),this.Pu()))}Pu(){return p(this,null,function*(){if(this.ru.length!==0){try{yield this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Nb(e))throw e;ut("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo(()=>this.Pu())}})}hu(e){let n=this.nu.then(()=>(this._u=!0,e().catch(r=>{this.ou=r,this._u=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw e_("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this._u=!1,r))));return this.nu=n,n}enqueueAfterDelay(e,n,r){this.lu(),this.uu.indexOf(e)>-1&&(n=0);let i=Yy.createAndSchedule(this,e,n,r,s=>this.Iu(s));return this.su.push(i),i}lu(){this.ou&&nt()}verifyOperationInProgress(){}Tu(){return p(this,null,function*(){let e;do e=this.nu,yield e;while(e!==this.nu)})}Eu(e){for(let n of this.su)if(n.timerId===e)return!0;return!1}du(e){return this.Tu().then(()=>{this.su.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.su)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tu()})}Au(e){this.uu.push(e)}Iu(e){let n=this.su.indexOf(e);this.su.splice(n,1)}};var Xy=class extends td{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Zy}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gj(this),this._firestoreClient.terminate()}};function kb(t,e){let n=typeof t=="object"?t:Kn(),r=typeof t=="string"?t:e||"(default)",i=Pr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=hu("firestore");s&&Mb(i,...s)}return i}function gj(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Gy(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Pb(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Jy(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var z9=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){Ta=i})(Yt),Qt(new Je("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Xy(new Vy(r.getProvider("auth-internal")),new $y(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new we(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ky(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ce(Db,"4.6.0",e),ce(Db,"4.6.0","esm2017")})();var Da=class{constructor(e){return e}},Ob="firestore",n_=class{constructor(){return Wo(Ob)}};var r_=new x("angularfire2.firestore-instances");function mj(t,e){let n=tl(Ob,t,e);return n&&new Da(n)}function yj(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Da(r)}}var _j={provide:n_,deps:[[new Be,r_]]},vj={provide:Da,useFactory:mj,deps:[[new Be,r_],En]},wj=(()=>{class t{constructor(){ce("angularfire",Br.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=hn({type:t});static \u0275inj=dn({providers:[vj,_j]})}return t})();function Fb(t,...e){return{ngModule:wj,providers:[{provide:r_,useFactory:yj(t),multi:!0,deps:[X,At,is,$r,[new Be,ea],[new Be,rs],...e]}]}}var Lb=ss(kb,!0);var Vb={providers:[GE(m0,KE()),Vs(y0(()=>_0({projectId:"bidosi-manga",appId:"1:24335793429:web:c9616afea73ecf763dfd1c",storageBucket:"bidosi-manga.appspot.com",apiKey:"AIzaSyCK_XbyASoW2HE3dFyFtEXnQXASTVzilqQ",authDomain:"bidosi-manga.firebaseapp.com",messagingSenderId:"24335793429"}))),Vs(aD(()=>cD())),Vs(Fb(()=>Lb()))]};var Ub=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["bido-dom-nav"]],standalone:!0,features:[Qe],decls:8,vars:0,consts:[[1,"nav-content"],[1,"chapters","button"],["routerLink","/",1,"color-effect","logo"],[1,"reload","button"],["viewBox","0 0 24 24"],["d","M2.25 10C2.25 5.71979 5.71979 2.25 10 2.25C14.2802 2.25 17.75 5.71979 17.75 10C17.75 14.2802 14.2802 17.75 10 17.75C5.71979 17.75 2.25 14.2802 2.25 10Z"],["d","M16.8214 15.618C17.1645 15.2749 17.7044 15.2276 18.1019 15.5059L21.9536 18.2021C22.8451 18.8261 22.957 20.1037 22.1875 20.8731L21.8731 21.1875C21.1037 21.957 19.8261 21.8451 19.2021 20.9536L16.5059 17.1019C16.2276 16.7044 16.2749 16.1645 16.618 15.8214L16.8214 15.618Z"]],template:function(i,s){i&1&&(N(0,"div",0)(1,"div",1)(2,"span",2),ae(3,"\u0411\u0456\u0434\u043E\u0441\u0456"),V()(),N(4,"div",3),Hs(),N(5,"svg",4),oe(6,"path",5)(7,"path",6),V()()())},dependencies:[uu],styles:["@font-face{font-family:PopB;src:url(/assets/fonts/Poppins-ExtraBold.ttf);font-weight:800}.nav-content[_ngcontent-%COMP%]{background:var(--background);color:var(--text);position:fixed;top:0;width:100vw;z-index:3;display:flex;justify-content:space-between;align-items:center;-webkit-box-shadow:0px 9px 50px -10px var(--text-3);box-shadow:0 9px 50px -10px var(--text-3)}.nav-content[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:var(--text);padding:7px;height:30px}.nav-content[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{background:url(/assets/favicon.ico) no-repeat center;background-size:90% 100%;width:35px;height:30px;margin:5px}.button[_ngcontent-%COMP%]{padding:0 20px}.color-effect[_ngcontent-%COMP%]{font-family:PopB;font-weight:800;font-size:22px;background:linear-gradient(120deg,var(--primary),var(--accent));background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}"]});let t=e;return t})();var jb=(()=>{let e=class e{constructor(){this.title="Mabido Manga \u0434\u043B\u044F \u0442\u0435\u043B\u0435\u0444\u043E\u043D\u0456\u0432 "}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ke({type:e,selectors:[["app-root"]],standalone:!0,features:[Qe],decls:3,vars:0,consts:[[1,"main"]],template:function(i,s){i&1&&(N(0,"main",0),oe(1,"bido-dom-nav"),V(),oe(2,"router-outlet"))},dependencies:[ip,Ub],styles:['[_nghost-%COMP%]{--bright-blue: oklch(51.01% .274 263.83);--electric-violet: oklch(53.18% .28 296.97);--french-violet: oklch(47.66% .246 305.88);--vivid-pink: oklch(69.02% .277 332.77);--hot-red: oklch(61.42% .238 15.34);--orange-red: oklch(63.32% .24 31.68);--gray-900: oklch(19.37% .006 300.98);--gray-700: oklch(36.98% .014 302.71);--gray-400: oklch(70.9% .015 304.04);--red-to-pink-to-purple-vertical-gradient: linear-gradient( 180deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--red-to-pink-to-purple-horizontal-gradient: linear-gradient( 90deg, var(--orange-red) 0%, var(--vivid-pink) 50%, var(--electric-violet) 100% );--pill-accent: var(--bright-blue);font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,UZ Sans;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media (prefers-color-scheme: light){[_nghost-%COMP%]{--text: #021018;--text-3: rgba(2, 16, 24, .3);--background: #f4f9fb;--primary: #0b6484;--primary-8: rgba(11, 100, 132, .4);--secondary: #f15fd2;--accent: #c5112c}}@media (prefers-color-scheme: dark){[_nghost-%COMP%]{--text: #f4f9fb;--text-3: rgba(244, 249, 251, .1);--background: #04090b;--primary: #7ad3f4;--secondary: #a00e80;--accent: #ee3854}}@font-face{font-family:UZSansB;src:url(/assets/fonts/UZSans-SemiBold.ttf);font-weight:400}body[_ngcontent-%COMP%]{margin:0;padding:0;background:var(--background);color:var(--text)}h1[_ngcontent-%COMP%]{font-size:3.125rem;color:var(--text);font-weight:500;line-height:100%;letter-spacing:-.125rem;margin:0;font-family:Inter Tight,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol}p[_ngcontent-%COMP%]{margin:0;color:var(--gray-700)}main[_ngcontent-%COMP%]{width:100%;min-height:100%;display:flex;align-items:center;padding:1rem;box-sizing:inherit;position:relative}.angular-logo[_ngcontent-%COMP%]{max-width:9.2rem}.content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;max-width:700px;margin-bottom:3rem}.content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:1.75rem}.content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1.5rem}.divider[_ngcontent-%COMP%]{width:1px;background:var(--red-to-pink-to-purple-vertical-gradient);margin-inline:.5rem}.pill-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:start;flex-wrap:wrap;gap:1.25rem}.pill[_ngcontent-%COMP%]{display:flex;align-items:center;--pill-accent: var(--bright-blue);background:color-mix(in srgb,var(--pill-accent) 5%,transparent);color:var(--pill-accent);padding-inline:.75rem;padding-block:.375rem;border-radius:2.75rem;border:0;transition:background .3s ease;font-family:var(--inter-font);font-size:.875rem;font-style:normal;font-weight:500;line-height:1.4rem;letter-spacing:-.00875rem;text-decoration:none}.pill[_ngcontent-%COMP%]:hover{background:color-mix(in srgb,var(--pill-accent) 15%,transparent)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+1){--pill-accent: var(--bright-blue)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+2){--pill-accent: var(--french-violet)}.pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+3), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+4), .pill-group[_ngcontent-%COMP%]   .pill[_ngcontent-%COMP%]:nth-child(6n+5){--pill-accent: var(--hot-red)}.pill-group[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-inline-start:.25rem}.social-links[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.73rem;margin-top:1.5rem}.social-links[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{transition:fill .3s ease;fill:var(--gray-400)}.social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--gray-900)}@media screen and (max-width: 650px){.content[_ngcontent-%COMP%]{flex-direction:column;width:max-content}.divider[_ngcontent-%COMP%]{height:1px;width:100%;background:var(--red-to-pink-to-purple-horizontal-gradient);margin-block:1.5rem}.main[_ngcontent-%COMP%]{padding:0}}']});let t=e;return t})();dE(jb,Vb).catch(t=>console.error(t));
